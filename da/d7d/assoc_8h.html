<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>libtoxcore: toxcore/assoc.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../tox.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libtoxcore
   </div>
   <div id="projectbrief">The future of instant messaging</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_0b4cb6aa1b49ded7d7b217b80a3955c0.html">toxcore</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">assoc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d69/assoc_8h__dep__incl.png" border="0" usemap="#toxcore_2assoc_8hdep" alt=""/></div>
<map name="toxcore_2assoc_8hdep" id="toxcore_2assoc_8hdep">
<area shape="rect" id="node2" href="../../db/d0f/assoc__test_8c.html" title="auto_tests/assoc_test.c" alt="" coords="5,80,168,107"/><area shape="rect" id="node3" href="../../d4/d9d/assoc_8c.html" title="toxcore/assoc.c" alt="" coords="192,80,307,107"/><area shape="rect" id="node4" href="../../d8/d8d/_messenger_8c.html" title="toxcore/Messenger.c" alt="" coords="331,80,475,107"/></map>
</div>
</div>
<p><a href="../../da/d7d/assoc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d41/struct_assoc__close__entries.html">Assoc_close_entries</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abd791690b681175ce9d2975185e33825"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#abd791690b681175ce9d2975185e33825">ASSOC_AVAILABLE</a></td></tr>
<tr class="separator:abd791690b681175ce9d2975185e33825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4aa21ae6dcbba80ec61b62f980725fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#ab4aa21ae6dcbba80ec61b62f980725fe">DISTANCE_INDEX_DISTANCE_BITS</a>&#160;&#160;&#160;44</td></tr>
<tr class="separator:ab4aa21ae6dcbba80ec61b62f980725fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60f209fd553fa95d0f6973b367b9b60c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#a60f209fd553fa95d0f6973b367b9b60c">ASSOC_BUCKET_REFRESH</a>&#160;&#160;&#160;45</td></tr>
<tr class="separator:a60f209fd553fa95d0f6973b367b9b60c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:abf7b9aace92e8759dbbd66e4e308089f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#abf7b9aace92e8759dbbd66e4e308089f">Assoc</a></td></tr>
<tr class="separator:abf7b9aace92e8759dbbd66e4e308089f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7c48edbc47a30c9fa8c6fb0fe23817"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#a4a7c48edbc47a30c9fa8c6fb0fe23817">Assoc_distance_relative_callback</a> )(const <a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc, void *callback_data, const uint8_t *client_id, const uint8_t *client_id1, const uint8_t *client_id2)</td></tr>
<tr class="separator:a4a7c48edbc47a30c9fa8c6fb0fe23817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bac0791c4a8eac62f9f39c783da3b91"><td class="memItemLeft" align="right" valign="top">typedef uint64_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#a0bac0791c4a8eac62f9f39c783da3b91">Assoc_distance_absolute_callback</a> )(const <a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc, void *callback_data, const uint8_t *client_id_ref, const uint8_t *client_id_check)</td></tr>
<tr class="separator:a0bac0791c4a8eac62f9f39c783da3b91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a7067dfdc2190da597dd0ad9e7cc944"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2c">AssocCloseEntriesFlags</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#a3a7067dfdc2190da597dd0ad9e7cc944">AssocCloseEntriesFlags</a></td></tr>
<tr class="separator:a3a7067dfdc2190da597dd0ad9e7cc944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac23315d028e4457f6a7f26dc9763be52"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d1/d41/struct_assoc__close__entries.html">Assoc_close_entries</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#ac23315d028e4457f6a7f26dc9763be52">Assoc_close_entries</a></td></tr>
<tr class="separator:ac23315d028e4457f6a7f26dc9763be52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ac1c014189853c6794e82c63012baa08d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08d">NODE_STATUS</a> { <a class="el" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08dafe29bdbfb6e2165eec29bf28af429856">BAD</a>, 
<a class="el" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08da296386fa8bc99fecd6d132a945cc7cee">SEENB_HEARDG</a>, 
<a class="el" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08dae87e1b5519c2bb23c5afac1d33653a99">SEENG</a>, 
<a class="el" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08da1e780c62cb3fd2edcac39f739bbe6f6c">USED</a>
 }</td></tr>
<tr class="separator:ac1c014189853c6794e82c63012baa08d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b447edde2593107a52acfee89281d2c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2c">AssocCloseEntriesFlags</a> { <a class="el" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c">ProtoIPv4</a> = 1, 
<a class="el" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca">ProtoIPv6</a> = 2, 
<a class="el" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6">LANOk</a> = 4
 }</td></tr>
<tr class="separator:a7b447edde2593107a52acfee89281d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa0230ae0304fd8540a5bce578d242f30"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#aa0230ae0304fd8540a5bce578d242f30">Assoc_add_entry</a> (<a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc, const uint8_t *id, const <a class="el" href="../../dd/df1/struct_i_p_p_ts.html">IPPTs</a> *ippts_send, const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *ipp_recv, uint8_t used)</td></tr>
<tr class="separator:aa0230ae0304fd8540a5bce578d242f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b38a62362a313e54af7ae07c36606f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#ad8b38a62362a313e54af7ae07c36606f">Assoc_get_close_entries</a> (<a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc, <a class="el" href="../../d1/d41/struct_assoc__close__entries.html">Assoc_close_entries</a> *close_entries)</td></tr>
<tr class="separator:ad8b38a62362a313e54af7ae07c36606f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7f978008ad6c86ab5063e989fe49d0c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#ab7f978008ad6c86ab5063e989fe49d0c">new_Assoc_default</a> (const uint8_t *public_id)</td></tr>
<tr class="separator:ab7f978008ad6c86ab5063e989fe49d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae180bc47f7e0f171ed9bbedd7d50e416"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#ae180bc47f7e0f171ed9bbedd7d50e416">new_Assoc</a> (size_t bits, size_t entries, const uint8_t *public_id)</td></tr>
<tr class="separator:ae180bc47f7e0f171ed9bbedd7d50e416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0389b61e9667ab9e78ee87247b520689"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#a0389b61e9667ab9e78ee87247b520689">Assoc_self_client_id_changed</a> (<a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc, const uint8_t *public_id)</td></tr>
<tr class="separator:a0389b61e9667ab9e78ee87247b520689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36aff33785fb0db2565cf4cb5b080327"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#a36aff33785fb0db2565cf4cb5b080327">do_Assoc</a> (<a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc, <a class="el" href="../../de/d15/struct_d_h_t.html">DHT</a> *dht)</td></tr>
<tr class="separator:a36aff33785fb0db2565cf4cb5b080327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26d82e35d047181d0e883a4b91373793"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/assoc_8h.html#a26d82e35d047181d0e883a4b91373793">kill_Assoc</a> (<a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc)</td></tr>
<tr class="separator:a26d82e35d047181d0e883a4b91373793"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="abd791690b681175ce9d2975185e33825"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASSOC_AVAILABLE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d7d/assoc_8h_source.html#l00006">6</a> of file <a class="el" href="../../da/d7d/assoc_8h_source.html">assoc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a60f209fd553fa95d0f6973b367b9b60c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASSOC_BUCKET_REFRESH&#160;&#160;&#160;45</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d7d/assoc_8h_source.html#l00091">91</a> of file <a class="el" href="../../da/d7d/assoc_8h_source.html">assoc.h</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00886">do_Assoc()</a>.</p>

</div>
</div>
<a class="anchor" id="ab4aa21ae6dcbba80ec61b62f980725fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISTANCE_INDEX_DISTANCE_BITS&#160;&#160;&#160;44</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d7d/assoc_8h_source.html#l00027">27</a> of file <a class="el" href="../../da/d7d/assoc_8h_source.html">assoc.h</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00106">id_distance()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="abf7b9aace92e8759dbbd66e4e308089f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> <a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d7d/assoc_8h_source.html#l00018">18</a> of file <a class="el" href="../../da/d7d/assoc_8h_source.html">assoc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac23315d028e4457f6a7f26dc9763be52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d1/d41/struct_assoc__close__entries.html">Assoc_close_entries</a>  <a class="el" href="../../d1/d41/struct_assoc__close__entries.html">Assoc_close_entries</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0bac0791c4a8eac62f9f39c783da3b91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t(* Assoc_distance_absolute_callback)(const <a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc, void *callback_data, const uint8_t *client_id_ref, const uint8_t *client_id_check)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d7d/assoc_8h_source.html#l00031">31</a> of file <a class="el" href="../../da/d7d/assoc_8h_source.html">assoc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a7c48edbc47a30c9fa8c6fb0fe23817"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* Assoc_distance_relative_callback)(const <a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc, void *callback_data, const uint8_t *client_id, const uint8_t *client_id1, const uint8_t *client_id2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d7d/assoc_8h_source.html#l00024">24</a> of file <a class="el" href="../../da/d7d/assoc_8h_source.html">assoc.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3a7067dfdc2190da597dd0ad9e7cc944"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2c">AssocCloseEntriesFlags</a>  <a class="el" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2c">AssocCloseEntriesFlags</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a7b447edde2593107a52acfee89281d2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2c">AssocCloseEntriesFlags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c"></a>ProtoIPv4&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca"></a>ProtoIPv6&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6"></a>LANOk&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../da/d7d/assoc_8h_source.html#l00043">43</a> of file <a class="el" href="../../da/d7d/assoc_8h_source.html">assoc.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                                    {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c">ProtoIPv4</a> = 1,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca">ProtoIPv6</a> = 2,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6">LANOk</a>     = 4,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;} <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2c">AssocCloseEntriesFlags</a>;</div>
<div class="ttc" id="assoc_8h_html_a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c">ProtoIPv4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00044">assoc.h:44</a></div></div>
<div class="ttc" id="assoc_8h_html_a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca">ProtoIPv6</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00045">assoc.h:45</a></div></div>
<div class="ttc" id="assoc_8h_html_a7b447edde2593107a52acfee89281d2c"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2c">AssocCloseEntriesFlags</a></div><div class="ttdeci">AssocCloseEntriesFlags</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00043">assoc.h:43</a></div></div>
<div class="ttc" id="assoc_8h_html_a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6">LANOk</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00046">assoc.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac1c014189853c6794e82c63012baa08d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08d">NODE_STATUS</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ac1c014189853c6794e82c63012baa08dafe29bdbfb6e2165eec29bf28af429856"></a>BAD&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ac1c014189853c6794e82c63012baa08da296386fa8bc99fecd6d132a945cc7cee"></a>SEENB_HEARDG&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ac1c014189853c6794e82c63012baa08dae87e1b5519c2bb23c5afac1d33653a99"></a>SEENG&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ac1c014189853c6794e82c63012baa08da1e780c62cb3fd2edcac39f739bbe6f6c"></a>USED&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="../../da/d7d/assoc_8h_source.html#l00011">11</a> of file <a class="el" href="../../da/d7d/assoc_8h_source.html">assoc.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;{ <a class="code" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08dafe29bdbfb6e2165eec29bf28af429856">BAD</a>, <a class="code" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08da296386fa8bc99fecd6d132a945cc7cee">SEENB_HEARDG</a>, <a class="code" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08dae87e1b5519c2bb23c5afac1d33653a99">SEENG</a>, <a class="code" href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08da1e780c62cb3fd2edcac39f739bbe6f6c">USED</a> };</div>
<div class="ttc" id="assoc_8h_html_ac1c014189853c6794e82c63012baa08dafe29bdbfb6e2165eec29bf28af429856"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08dafe29bdbfb6e2165eec29bf28af429856">BAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00011">assoc.h:11</a></div></div>
<div class="ttc" id="assoc_8h_html_ac1c014189853c6794e82c63012baa08da1e780c62cb3fd2edcac39f739bbe6f6c"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08da1e780c62cb3fd2edcac39f739bbe6f6c">USED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00011">assoc.h:11</a></div></div>
<div class="ttc" id="assoc_8h_html_ac1c014189853c6794e82c63012baa08da296386fa8bc99fecd6d132a945cc7cee"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08da296386fa8bc99fecd6d132a945cc7cee">SEENB_HEARDG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00011">assoc.h:11</a></div></div>
<div class="ttc" id="assoc_8h_html_ac1c014189853c6794e82c63012baa08dae87e1b5519c2bb23c5afac1d33653a99"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#ac1c014189853c6794e82c63012baa08dae87e1b5519c2bb23c5afac1d33653a99">SEENG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00011">assoc.h:11</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa0230ae0304fd8540a5bce578d242f30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Assoc_add_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *&#160;</td>
          <td class="paramname"><em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/df1/struct_i_p_p_ts.html">IPPTs</a> *&#160;</td>
          <td class="paramname"><em>ippts_send</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *&#160;</td>
          <td class="paramname"><em>ipp_recv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>used</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00552">552</a> of file <a class="el" href="../../d4/d9d/assoc_8c_source.html">assoc.c</a>.</p>

<p>References <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00458">candidates_create_new()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00349">candidates_search()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00369">candidates_update_assoc()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00511">client_id_self_update()</a>, <a class="el" href="../../de/df1/util_8c_source.html#l00061">id_equal()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00199">id_hash()</a>, <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00070">IPPTs::ip_port</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00789">ipport_isset()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00090">Assoc::self_client_id</a>, and <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00089">Assoc::self_hash</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l00771">addto_lists()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l00845">returnedip_ports()</a>, and <a class="el" href="../../db/d0f/assoc__test_8c_source.html#l00018">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (!assoc || !<span class="keywordtype">id</span> || !ippts_send)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">if</span> (!assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">self_hash</a>) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12">client_id_self_update</a>(assoc);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">if</span> (!assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">self_hash</a>)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e">ipport_isset</a>(&amp;ippts_send-&gt;<a class="code" href="../../dd/df1/struct_i_p_p_ts.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">ip_port</a>))</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (ipp_recv &amp;&amp; !<a class="code" href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e">ipport_isset</a>(ipp_recv))</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        ipp_recv = NULL;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="../../d4/d9d/assoc_8c.html#ac2d400520225f5a2aabf44895add81dc">hash_t</a> hash = <a class="code" href="../../d4/d9d/assoc_8c.html#a89ad0cf0f7d7c45e00c8bbdd66b56e95">id_hash</a>(assoc, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">if</span> (hash == assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">self_hash</a>)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1">id_equal</a>(<span class="keywordtype">id</span>, assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a59ef97a1dbf10c89fb43f6fff2e65b39">self_client_id</a>))</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">/* if it&#39;s new:</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">     * callback, if there&#39;s desire, add to clients, else to candidates</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">     * if it&#39;s &quot;old&quot;:</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">     *    if it&#39;s client: refresh</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">     *    if it&#39;s candidate:</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">     *       if !ipp_recv, refresh</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">     *       if ipp_recv: callback, if there&#39;s desire, move to candidates</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="../../d2/d86/struct_client__entry.html">Client_entry</a> *cnd_entry;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d9d/assoc_8c.html#a7d1789e9568f82369268469130cff891">candidates_search</a>(assoc, <span class="keywordtype">id</span>, hash, &amp;cnd_entry)) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d9d/assoc_8c.html#aa745e9c0a5448ce04ab65c5156b4a531">candidates_create_new</a>(assoc, hash, <span class="keywordtype">id</span>, used, ippts_send, ipp_recv))</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="../../d4/d9d/assoc_8c.html#a12f651ee082f440e6efcff809958e005">candidates_update_assoc</a>(assoc, cnd_entry, used, ippts_send, ipp_recv);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div>
<div class="ttc" id="assoc_8c_html_aa745e9c0a5448ce04ab65c5156b4a531"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#aa745e9c0a5448ce04ab65c5156b4a531">candidates_create_new</a></div><div class="ttdeci">static uint8_t candidates_create_new(const Assoc *assoc, hash_t hash, const uint8_t *id, uint8_t used, const IPPTs *ippts_send, const IP_Port *ipp_recv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00458">assoc.c:458</a></div></div>
<div class="ttc" id="struct_assoc_html_a6531d0c8e69576ae8c58a02914abaefe"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">Assoc::self_hash</a></div><div class="ttdeci">hash_t self_hash</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00089">assoc.c:89</a></div></div>
<div class="ttc" id="assoc_8c_html_a12f651ee082f440e6efcff809958e005"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a12f651ee082f440e6efcff809958e005">candidates_update_assoc</a></div><div class="ttdeci">static void candidates_update_assoc(const Assoc *assoc, Client_entry *entry, uint8_t used, const IPPTs *ippts_send, const IP_Port *ipp_recv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00369">assoc.c:369</a></div></div>
<div class="ttc" id="struct_client__entry_html"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html">Client_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00065">assoc.c:65</a></div></div>
<div class="ttc" id="struct_assoc_html_a59ef97a1dbf10c89fb43f6fff2e65b39"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a59ef97a1dbf10c89fb43f6fff2e65b39">Assoc::self_client_id</a></div><div class="ttdeci">uint8_t self_client_id[crypto_box_PUBLICKEYBYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00090">assoc.c:90</a></div></div>
<div class="ttc" id="assoc_8c_html_a7d1789e9568f82369268469130cff891"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a7d1789e9568f82369268469130cff891">candidates_search</a></div><div class="ttdeci">static uint8_t candidates_search(const Assoc *assoc, const uint8_t *id, hash_t hash, Client_entry **entryptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00349">assoc.c:349</a></div></div>
<div class="ttc" id="network_8c_html_a8436367218afb29bcf1b5fecd071648e"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e">ipport_isset</a></div><div class="ttdeci">int ipport_isset(const IP_Port *ipport)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00789">network.c:789</a></div></div>
<div class="ttc" id="assoc_8c_html_ac2d400520225f5a2aabf44895add81dc"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#ac2d400520225f5a2aabf44895add81dc">hash_t</a></div><div class="ttdeci">uint32_t hash_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00055">assoc.c:55</a></div></div>
<div class="ttc" id="assoc_8c_html_aa8781ddcd6a9240db73c39a2ff844d12"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12">client_id_self_update</a></div><div class="ttdeci">static void client_id_self_update(Assoc *assoc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00511">assoc.c:511</a></div></div>
<div class="ttc" id="util_8c_html_ada3d44b4f530d3c8c9cb69b732be94b1"><div class="ttname"><a href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1">id_equal</a></div><div class="ttdeci">bool id_equal(const uint8_t *dest, const uint8_t *src)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00061">util.c:61</a></div></div>
<div class="ttc" id="assoc_8c_html_a89ad0cf0f7d7c45e00c8bbdd66b56e95"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a89ad0cf0f7d7c45e00c8bbdd66b56e95">id_hash</a></div><div class="ttdeci">static hash_t id_hash(const Assoc *assoc, const uint8_t *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00199">assoc.c:199</a></div></div>
<div class="ttc" id="struct_i_p_p_ts_html_a86e2a5a56c0dd22df6e8b8a10e40f9e4"><div class="ttname"><a href="../../dd/df1/struct_i_p_p_ts.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">IPPTs::ip_port</a></div><div class="ttdeci">IP_Port ip_port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00070">DHT.h:70</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_aa0230ae0304fd8540a5bce578d242f30_cgraph.png" border="0" usemap="#da/d7d/assoc_8h_aa0230ae0304fd8540a5bce578d242f30_cgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_aa0230ae0304fd8540a5bce578d242f30_cgraph" id="da/d7d/assoc_8h_aa0230ae0304fd8540a5bce578d242f30_cgraph">
<area shape="rect" id="node2" href="../../d4/d9d/assoc_8c.html#aa745e9c0a5448ce04ab65c5156b4a531" title="candidates_create_new" alt="" coords="183,383,342,410"/><area shape="rect" id="node12" href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e" title="ipport_isset" alt="" coords="652,711,741,738"/><area shape="rect" id="node14" href="../../d4/d9d/assoc_8c.html#a7d1789e9568f82369268469130cff891" title="candidates_search" alt="" coords="197,42,328,68"/><area shape="rect" id="node15" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="451,79,521,106"/><area shape="rect" id="node16" href="../../d4/d9d/assoc_8c.html#a12f651ee082f440e6efcff809958e005" title="candidates_update_assoc" alt="" coords="176,510,349,536"/><area shape="rect" id="node22" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12" title="client_id_self_update" alt="" coords="191,180,335,207"/><area shape="rect" id="node23" href="../../d4/d9d/assoc_8c.html#a89ad0cf0f7d7c45e00c8bbdd66b56e95" title="id_hash" alt="" coords="453,231,519,258"/><area shape="rect" id="node3" href="../../d4/d9d/assoc_8c.html#a0097ca62f259f8333289a89a7234a0a0" title="candidates_create_internal" alt="" coords="397,282,575,308"/><area shape="rect" id="node8" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="819,484,897,511"/><area shape="rect" id="node9" href="../../d4/d9d/assoc_8c.html#afb9b36d2d6bd5c3f463a14bbbfc5dca9" title="entry_assoc" alt="" coords="439,484,533,511"/><area shape="rect" id="node10" href="../../d4/d9d/assoc_8c.html#a521780b30ac0601ccb6b133d6f901bcd" title="entry_heard_get" alt="" coords="429,332,543,359"/><area shape="rect" id="node11" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b" title="id_copy" alt="" coords="453,383,519,410"/><area shape="rect" id="node4" href="../../d4/d9d/assoc_8c.html#ace6056317cff40310ec4041c9675e093" title="candidates_id_bucket" alt="" coords="623,180,771,207"/><area shape="rect" id="node6" href="../../d4/d9d/assoc_8c.html#a2237a67d354721e3155bcb4701e386ac" title="hash_collide" alt="" coords="649,130,744,156"/><area shape="rect" id="node7" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288" title="is_timeout" alt="" coords="655,535,738,562"/><area shape="rect" id="node5" href="../../d4/d9d/assoc_8c.html#a02a00b2c4be43884c00d659524ce8081" title="id_bucket" alt="" coords="819,180,897,207"/><area shape="rect" id="node13" href="../../d6/d6e/network_8c.html#ac56c677f4bc8bf8311370ee105ae7cbb" title="ip_isset" alt="" coords="825,711,891,738"/><area shape="rect" id="node17" href="../../d4/d9d/assoc_8c.html#a512ebb77cd46109c11a1052a76bf0a66" title="entry_heard_store" alt="" coords="423,610,549,636"/><area shape="rect" id="node18" href="../../d6/d6e/network_8c.html#a6913335cf0b2a76303f5f61d18ea2277" title="ipport_equal" alt="" coords="651,660,743,687"/><area shape="rect" id="node20" href="../../d1/de5/_l_a_n__discovery_8c.html#a2d80a53390598eb8ededbc63f4e9c152" title="LAN_ip" alt="" coords="664,610,729,636"/><area shape="rect" id="node19" href="../../d6/d6e/network_8c.html#af982256c6d8486349bdc13a920884ef6" title="ip_equal" alt="" coords="823,660,893,687"/><area shape="rect" id="node21" href="../../d1/de5/_l_a_n__discovery_8c.html#a56fb8ae3cd774c1b1d5670b9c4fb8959" title="Local_ip" alt="" coords="823,610,893,636"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_aa0230ae0304fd8540a5bce578d242f30_icgraph.png" border="0" usemap="#da/d7d/assoc_8h_aa0230ae0304fd8540a5bce578d242f30_icgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_aa0230ae0304fd8540a5bce578d242f30_icgraph" id="da/d7d/assoc_8h_aa0230ae0304fd8540a5bce578d242f30_icgraph">
<area shape="rect" id="node2" href="../../df/dad/_d_h_t_8h.html#a9d898065db0fd4adf26fdb7f80e6d7ac" title="addto_lists" alt="" coords="191,193,276,220"/><area shape="rect" id="node27" href="../../dc/dc1/_d_h_t_8c.html#a8c25b3f909399fff843f905f2ad9615f" title="returnedip_ports" alt="" coords="176,295,291,321"/><area shape="rect" id="node28" href="../../db/d0f/assoc__test_8c.html#a242f6c133a1fef9d5e86336e74b7ddae" title="START_TEST" alt="" coords="180,345,287,372"/><area shape="rect" id="node3" href="../../d2/d98/dht__test_8c.html#a90ce4d5060f1998109da42a4e83c22c0" title="test_addto_lists_update" alt="" coords="793,67,953,93"/><area shape="rect" id="node4" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="1003,117,1117,144"/><area shape="rect" id="node6" href="../../d2/d98/dht__test_8c.html#a37f262581ef29d155056c14b2fa0ced1" title="test_addto_lists_bad" alt="" coords="593,168,736,195"/><area shape="rect" id="node7" href="../../d2/d98/dht__test_8c.html#a62e2c67aa707a1ea005159db3bc59e36" title="test_addto_lists_possible_bad" alt="" coords="339,219,536,245"/><area shape="rect" id="node8" href="../../d2/d98/dht__test_8c.html#a26ee6a8d6a8a726b6a03bdacfa1f3716" title="test_addto_lists_good" alt="" coords="799,16,948,43"/><area shape="rect" id="node9" href="../../dc/dc1/_d_h_t_8c.html#a4dcc848207b2408def323b8b79b08e4a" title="handle_sendnodes_core" alt="" coords="356,320,519,347"/><area shape="rect" id="node25" href="../../d9/d54/ping_8c.html#a3927c1053be4390271a309982aa7284f" title="handle_ping_response" alt="" coords="362,269,513,296"/><area shape="rect" id="node5" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1167,117,1273,144"/><area shape="rect" id="node10" href="../../dc/dc1/_d_h_t_8c.html#ac70b27be10ded8565ffcb94829e40514" title="handle_sendnodes_ipv6" alt="" coords="584,320,745,347"/><area shape="rect" id="node11" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="833,269,914,296"/><area shape="rect" id="node12" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1007,168,1113,195"/><area shape="rect" id="node13" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="1015,219,1105,245"/><area shape="rect" id="node15" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1035,269,1085,296"/><area shape="rect" id="node16" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="1001,320,1119,347"/><area shape="rect" id="node14" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1167,219,1273,245"/><area shape="rect" id="node17" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1195,295,1245,321"/><area shape="rect" id="node18" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="1185,345,1255,372"/><area shape="rect" id="node19" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1321,269,1428,296"/><area shape="rect" id="node20" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1343,320,1407,347"/><area shape="rect" id="node22" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1335,371,1414,397"/><area shape="rect" id="node24" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1349,421,1400,448"/><area shape="rect" id="node21" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1476,320,1527,347"/><area shape="rect" id="node23" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1476,371,1527,397"/><area shape="rect" id="node26" href="../../d6/d2b/ping_8h.html#a86e9eeead72b88b686ce5b7c0f78c325" title="new_ping" alt="" coords="626,269,703,296"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad8b38a62362a313e54af7ae07c36606f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Assoc_get_close_entries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *&#160;</td>
          <td class="paramname"><em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d41/struct_assoc__close__entries.html">Assoc_close_entries</a> *&#160;</td>
          <td class="paramname"><em>close_entries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00602">602</a> of file <a class="el" href="../../d4/d9d/assoc_8c_source.html">assoc.c</a>.</p>

<p>References <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00105">Client_data::assoc4</a>, <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00106">Client_data::assoc6</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00318">assoc_id_closest()</a>, <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00052">BAD_NODE_TIMEOUT</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00096">Assoc::candidates</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00094">Assoc::candidates_bucket_count</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00095">Assoc::candidates_bucket_size</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00081">Client_entry::client</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00511">client_id_self_update()</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00057">Assoc_close_entries::count_good</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00050">Assoc_close_entries::custom_data</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00172">dist_index_bubble()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00124">dist_index_comp()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00139">dist_index_entry()</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00055">Assoc_close_entries::distance_absolute_func</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00050">DISTANCE_INDEX_INDEX_BITS</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00051">DISTANCE_INDEX_INDEX_MASK</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00054">Assoc_close_entries::distance_relative_func</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00052">Assoc_close_entries::flags</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00066">Client_entry::hash</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00106">id_distance()</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00163">IP_Port::ip</a>, <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00093">IPPTsPng::ip_port</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00789">ipport_isset()</a>, <a class="el" href="../../de/df1/util_8c_source.html#l00054">is_timeout()</a>, <a class="el" href="../../d1/de5/_l_a_n__discovery_8c_source.html#l00259">LAN_ip()</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00046">LANOk</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00085">candidates_bucket::list</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00044">ProtoIPv4</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00045">ProtoIPv6</a>, <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00104">Client_data::public_key</a>, <a class="el" href="../../da/d7d/assoc_8h_source.html#l00059">Assoc_close_entries::result</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00072">Client_entry::seen_at</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00089">Assoc::self_hash</a>, <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00094">IPPTsPng::timestamp</a>, and <a class="el" href="../../da/d7d/assoc_8h_source.html#l00051">Assoc_close_entries::wanted_id</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01167">DHT_addfriend()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l00570">get_close_nodes()</a>, and <a class="el" href="../../db/d0f/assoc__test_8c_source.html#l00018">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;{</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">if</span> (!assoc || !state || !state-&gt;wanted_id || !state-&gt;result)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> (!assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">self_hash</a>) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <a class="code" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12">client_id_self_update</a>(assoc);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">if</span> (!assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">self_hash</a>)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span> (!state-&gt;distance_relative_func)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        state-&gt;distance_relative_func = <a class="code" href="../../d4/d9d/assoc_8c.html#ad78d05a8a1915614699da4704cd5641b">assoc_id_closest</a>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (!state-&gt;distance_absolute_func)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        state-&gt;distance_absolute_func = <a class="code" href="../../d4/d9d/assoc_8c.html#af9b9ca1f09c12f5ba91e06bf254e09f6">id_distance</a>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordtype">size_t</span> dist_list_len = assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a> * assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">candidates_bucket_size</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    uint64_t dist_list[dist_list_len];</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    memset(dist_list, ~0, dist_list_len * <span class="keyword">sizeof</span>(dist_list[0]));</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="../../d4/d9d/assoc_8c.html#a870a9554cd560a551b3bb8229c684325">bucket_t</a> b;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">for</span> (b = 0; b &lt; assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>; b++) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="../../d5/dd9/structcandidates__bucket.html">candidates_bucket</a> *cnd_bckt = &amp;assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">candidates</a>[b];</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">candidates_bucket_size</a>; i++) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <a class="code" href="../../d2/d86/struct_client__entry.html">Client_entry</a> *entry = &amp;cnd_bckt-&gt;<a class="code" href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">list</a>[<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a35aa0f6864b81ef3de3d4d46ef823a0c">hash</a>) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="keywordflow">if</span> (state-&gt;flags &amp; <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c">ProtoIPv4</a>) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e">ipport_isset</a>(&amp;entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>.<a class="code" href="../../d8/d1c/struct_client__data.html#ac9843379cbcd02bdfa5c180a1474a6c5">assoc4</a>.<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">ip_port</a>))</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    <span class="keywordflow">if</span> (!(state-&gt;flags &amp; <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6">LANOk</a>))</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="../../d1/de5/_l_a_n__discovery_8c.html#a2d80a53390598eb8ededbc63f4e9c152">LAN_ip</a>(entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>.<a class="code" href="../../d8/d1c/struct_client__data.html#ac9843379cbcd02bdfa5c180a1474a6c5">assoc4</a>.<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">ip_port</a>.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>))</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="keywordflow">if</span> (state-&gt;flags &amp; <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca">ProtoIPv6</a>) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e">ipport_isset</a>(&amp;entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>.<a class="code" href="../../d8/d1c/struct_client__data.html#a87d394929a2604f6f785fec949fac618">assoc6</a>.<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">ip_port</a>))</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    <span class="keywordflow">if</span> (!(state-&gt;flags &amp; <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6">LANOk</a>))</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="../../d1/de5/_l_a_n__discovery_8c.html#a2d80a53390598eb8ededbc63f4e9c152">LAN_ip</a>(entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>.<a class="code" href="../../d8/d1c/struct_client__data.html#a87d394929a2604f6f785fec949fac618">assoc6</a>.<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">ip_port</a>.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>))</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                uint64_t dist = state-&gt;distance_absolute_func(assoc, state-&gt;custom_data, state-&gt;wanted_id, entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>.<a class="code" href="../../d8/d1c/struct_client__data.html#aaa806bb1136fb3d4b5d8d8970b596ff7">public_key</a>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                uint32_t index = b * assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">candidates_bucket_size</a> + <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                dist_list[index] = (dist &lt;&lt; <a class="code" href="../../d4/d9d/assoc_8c.html#a2e1d880acaeb435b8dc3c55206545aeb">DISTANCE_INDEX_INDEX_BITS</a>) | index;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    qsort(dist_list, dist_list_len, <span class="keyword">sizeof</span>(dist_list[0]), <a class="code" href="../../d4/d9d/assoc_8c.html#afe8472c27f16e873da0fa3a6995c1197">dist_index_comp</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">/* ok, ok, it&#39;s not *perfectly* sorted, because we used an absolute distance</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">     * go over the result and see if we need to &quot;smoothen things out&quot;</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">     * because those should be only very few and short streaks, the worst regularly</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">     * used sorting function aka bubble sort is used */</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    uint64_t dist_prev = ~0;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordtype">size_t</span> ind_prev = ~0, ind_curr;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordtype">size_t</span> len = 1;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">for</span> (ind_curr = 0; ind_curr &lt; dist_list_len; ind_curr++) {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">/* sorted increasingly, so an invalid entry marks the end */</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">if</span> ((dist_list[ind_curr] &amp; <a class="code" href="../../d4/d9d/assoc_8c.html#a8d6efce995b5d21adfd794b9c8bfde10">DISTANCE_INDEX_INDEX_MASK</a>) == DISTANCE_INDEX_INDEX_MASK)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        uint64_t dist_curr = dist_list[ind_curr] &gt;&gt; <a class="code" href="../../d4/d9d/assoc_8c.html#a2e1d880acaeb435b8dc3c55206545aeb">DISTANCE_INDEX_INDEX_BITS</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">if</span> (dist_prev == dist_curr)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            len++;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">if</span> (len &gt; 1)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                <a class="code" href="../../d4/d9d/assoc_8c.html#a9419b231b388fff46f176830c4b9a52f">dist_index_bubble</a>(assoc, dist_list, ind_prev, ind_curr - 1, state-&gt;wanted_id, state-&gt;custom_data,</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                  state-&gt;distance_relative_func);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            dist_prev = dist_curr;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            ind_prev = ind_curr;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            len = 1;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> (len &gt; 1)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <a class="code" href="../../d4/d9d/assoc_8c.html#a9419b231b388fff46f176830c4b9a52f">dist_index_bubble</a>(assoc, dist_list, ind_prev, ind_curr - 1, state-&gt;wanted_id, state-&gt;custom_data,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                          state-&gt;distance_relative_func);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">/* ok, now dist_list is a strictly ascending sorted list of nodes</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">     * a) extract CLOSE_QUOTA_USED clients, not timed out</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">     * b) extract (1 - QUOTA) (better!) clients &amp; candidates, not timed out</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">     * c) save candidates which would be better, if contact can be established */</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordtype">size_t</span> client_quota_good = 0, pos = 0;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordtype">size_t</span> client_quota_max = state-&gt;count_good;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    ssize_t taken_last = - 1;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">for</span> (i = 0; (i &lt; dist_list_len) &amp;&amp; (pos &lt; state-&gt;count); i++) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="comment">/* sorted increasingly, so an invalid entry marks the end */</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">if</span> ((dist_list[i] &amp; DISTANCE_INDEX_INDEX_MASK) == <a class="code" href="../../d4/d9d/assoc_8c.html#a8d6efce995b5d21adfd794b9c8bfde10">DISTANCE_INDEX_INDEX_MASK</a>)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <a class="code" href="../../d2/d86/struct_client__entry.html">Client_entry</a> *entry = <a class="code" href="../../d4/d9d/assoc_8c.html#a07e9e64cd1b39d0dc9259d998e52f1ab">dist_index_entry</a>(assoc, dist_list[i]);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="keywordflow">if</span> (entry &amp;&amp; entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a35aa0f6864b81ef3de3d4d46ef823a0c">hash</a>) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <span class="keywordflow">if</span> (client_quota_good &gt;= client_quota_max) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                state-&gt;result[pos++] = &amp;entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                taken_last = <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                <span class="keywordflow">if</span> (state-&gt;flags &amp; (<a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c">ProtoIPv4</a> | <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca">ProtoIPv6</a>)) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                    <span class="keywordflow">if</span> ((state-&gt;flags &amp; <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c">ProtoIPv4</a>) &amp;&amp; <a class="code" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a>(entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>.<a class="code" href="../../d8/d1c/struct_client__data.html#ac9843379cbcd02bdfa5c180a1474a6c5">assoc4</a>.<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a465bef81f6478756e5443025b1f2ddfa">timestamp</a>, <a class="code" href="../../df/dad/_d_h_t_8h.html#a2c542fd03a43f340d1fb281afe54453f">BAD_NODE_TIMEOUT</a>))</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    <span class="keywordflow">if</span> ((state-&gt;flags &amp; <a class="code" href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca">ProtoIPv6</a>) &amp;&amp; <a class="code" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a>(entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>.<a class="code" href="../../d8/d1c/struct_client__data.html#a87d394929a2604f6f785fec949fac618">assoc6</a>.<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a465bef81f6478756e5443025b1f2ddfa">timestamp</a>, <a class="code" href="../../df/dad/_d_h_t_8h.html#a2c542fd03a43f340d1fb281afe54453f">BAD_NODE_TIMEOUT</a>))</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a>(entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#ab632ae1b8a283a06d6cb3881c377c6cd">seen_at</a>, <a class="code" href="../../df/dad/_d_h_t_8h.html#a2c542fd03a43f340d1fb281afe54453f">BAD_NODE_TIMEOUT</a>))</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                state-&gt;result[pos++] = &amp;entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                client_quota_good++;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                taken_last = <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">/* if we had not enough valid entries the list might still not be filled.</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">     * start again from last taken client, but leave out any requirement</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (pos &lt; state-&gt;count) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keywordflow">for</span> (i = taken_last + 1; (i &lt; dist_list_len) &amp;&amp; (pos &lt; state-&gt;count); i++) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="comment">/* sorted increasingly, so an invalid entry marks the end */</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="keywordflow">if</span> ((dist_list[i] &amp; DISTANCE_INDEX_INDEX_MASK) == <a class="code" href="../../d4/d9d/assoc_8c.html#a8d6efce995b5d21adfd794b9c8bfde10">DISTANCE_INDEX_INDEX_MASK</a>)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <a class="code" href="../../d2/d86/struct_client__entry.html">Client_entry</a> *entry = <a class="code" href="../../d4/d9d/assoc_8c.html#a07e9e64cd1b39d0dc9259d998e52f1ab">dist_index_entry</a>(assoc, dist_list[i]);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="keywordflow">if</span> (entry &amp;&amp; entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a35aa0f6864b81ef3de3d4d46ef823a0c">hash</a>)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                state-&gt;result[pos++] = &amp;entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div>
<div class="ttc" id="struct_assoc_html_a6531d0c8e69576ae8c58a02914abaefe"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">Assoc::self_hash</a></div><div class="ttdeci">hash_t self_hash</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00089">assoc.c:89</a></div></div>
<div class="ttc" id="struct_i_p_p_ts_png_html_a86e2a5a56c0dd22df6e8b8a10e40f9e4"><div class="ttname"><a href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">IPPTsPng::ip_port</a></div><div class="ttdeci">IP_Port ip_port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00093">DHT.h:93</a></div></div>
<div class="ttc" id="struct_client__data_html_ac9843379cbcd02bdfa5c180a1474a6c5"><div class="ttname"><a href="../../d8/d1c/struct_client__data.html#ac9843379cbcd02bdfa5c180a1474a6c5">Client_data::assoc4</a></div><div class="ttdeci">IPPTsPng assoc4</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00105">DHT.h:105</a></div></div>
<div class="ttc" id="assoc_8c_html_af9b9ca1f09c12f5ba91e06bf254e09f6"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#af9b9ca1f09c12f5ba91e06bf254e09f6">id_distance</a></div><div class="ttdeci">static uint64_t id_distance(const Assoc *assoc, void *callback_data, const uint8_t *id_ref, const uint8_t *id_test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00106">assoc.c:106</a></div></div>
<div class="ttc" id="struct_client__entry_html"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html">Client_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00065">assoc.c:65</a></div></div>
<div class="ttc" id="structcandidates__bucket_html"><div class="ttname"><a href="../../d5/dd9/structcandidates__bucket.html">candidates_bucket</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00084">assoc.c:84</a></div></div>
<div class="ttc" id="util_8c_html_ab643c84141e04b54ba650c50165ba288"><div class="ttname"><a href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a></div><div class="ttdeci">int is_timeout(uint64_t timestamp, uint64_t timeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00054">util.c:54</a></div></div>
<div class="ttc" id="struct_client__data_html_a87d394929a2604f6f785fec949fac618"><div class="ttname"><a href="../../d8/d1c/struct_client__data.html#a87d394929a2604f6f785fec949fac618">Client_data::assoc6</a></div><div class="ttdeci">IPPTsPng assoc6</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00106">DHT.h:106</a></div></div>
<div class="ttc" id="assoc_8c_html_a8d6efce995b5d21adfd794b9c8bfde10"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a8d6efce995b5d21adfd794b9c8bfde10">DISTANCE_INDEX_INDEX_MASK</a></div><div class="ttdeci">#define DISTANCE_INDEX_INDEX_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00051">assoc.c:51</a></div></div>
<div class="ttc" id="assoc_8c_html_a2e1d880acaeb435b8dc3c55206545aeb"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a2e1d880acaeb435b8dc3c55206545aeb">DISTANCE_INDEX_INDEX_BITS</a></div><div class="ttdeci">#define DISTANCE_INDEX_INDEX_BITS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00050">assoc.c:50</a></div></div>
<div class="ttc" id="assoc_8h_html_a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f72d319431bcfbaf2fb152a649d090c">ProtoIPv4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00044">assoc.h:44</a></div></div>
<div class="ttc" id="struct_client__data_html_aaa806bb1136fb3d4b5d8d8970b596ff7"><div class="ttname"><a href="../../d8/d1c/struct_client__data.html#aaa806bb1136fb3d4b5d8d8970b596ff7">Client_data::public_key</a></div><div class="ttdeci">uint8_t public_key[crypto_box_PUBLICKEYBYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00104">DHT.h:104</a></div></div>
<div class="ttc" id="struct_client__entry_html_a114cded03654e9d27771e24fa1712e39"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">Client_entry::client</a></div><div class="ttdeci">Client_data client</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00081">assoc.c:81</a></div></div>
<div class="ttc" id="assoc_8h_html_a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca1e654e12e0aea9fe657086a3c3ed9eca">ProtoIPv6</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00045">assoc.h:45</a></div></div>
<div class="ttc" id="assoc_8c_html_a9419b231b388fff46f176830c4b9a52f"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a9419b231b388fff46f176830c4b9a52f">dist_index_bubble</a></div><div class="ttdeci">static void dist_index_bubble(Assoc *assoc, uint64_t *dist_list, size_t first, size_t last, uint8_t *id, void *custom_data, Assoc_distance_relative_callback dist_rel_func)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00172">assoc.c:172</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a0c6193a337a223c63411b2fe722d79ec"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">IP_Port::ip</a></div><div class="ttdeci">IP ip</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00163">network.h:163</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="network_8c_html_a8436367218afb29bcf1b5fecd071648e"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e">ipport_isset</a></div><div class="ttdeci">int ipport_isset(const IP_Port *ipport)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00789">network.c:789</a></div></div>
<div class="ttc" id="assoc_8c_html_a07e9e64cd1b39d0dc9259d998e52f1ab"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a07e9e64cd1b39d0dc9259d998e52f1ab">dist_index_entry</a></div><div class="ttdeci">static Client_entry * dist_index_entry(Assoc *assoc, uint64_t dist_ind)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00139">assoc.c:139</a></div></div>
<div class="ttc" id="_d_h_t_8h_html_a2c542fd03a43f340d1fb281afe54453f"><div class="ttname"><a href="../../df/dad/_d_h_t_8h.html#a2c542fd03a43f340d1fb281afe54453f">BAD_NODE_TIMEOUT</a></div><div class="ttdeci">#define BAD_NODE_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00052">DHT.h:52</a></div></div>
<div class="ttc" id="assoc_8c_html_ad78d05a8a1915614699da4704cd5641b"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#ad78d05a8a1915614699da4704cd5641b">assoc_id_closest</a></div><div class="ttdeci">static int assoc_id_closest(const Assoc *assoc, void *callback_data, const uint8_t *client_id, const uint8_t *client_id1, const uint8_t *client_id2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00318">assoc.c:318</a></div></div>
<div class="ttc" id="assoc_8c_html_afe8472c27f16e873da0fa3a6995c1197"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#afe8472c27f16e873da0fa3a6995c1197">dist_index_comp</a></div><div class="ttdeci">static int dist_index_comp(const void *a, const void *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00124">assoc.c:124</a></div></div>
<div class="ttc" id="struct_client__entry_html_a35aa0f6864b81ef3de3d4d46ef823a0c"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#a35aa0f6864b81ef3de3d4d46ef823a0c">Client_entry::hash</a></div><div class="ttdeci">hash_t hash</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00066">assoc.c:66</a></div></div>
<div class="ttc" id="struct_client__entry_html_ab632ae1b8a283a06d6cb3881c377c6cd"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#ab632ae1b8a283a06d6cb3881c377c6cd">Client_entry::seen_at</a></div><div class="ttdeci">uint64_t seen_at</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00072">assoc.c:72</a></div></div>
<div class="ttc" id="struct_assoc_html_a9349f5b3095733f74b3704aa9766a05a"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">Assoc::candidates_bucket_size</a></div><div class="ttdeci">size_t candidates_bucket_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00095">assoc.c:95</a></div></div>
<div class="ttc" id="struct_assoc_html_a22dd0674eae131fab27462b931d4397c"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">Assoc::candidates_bucket_count</a></div><div class="ttdeci">size_t candidates_bucket_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00094">assoc.c:94</a></div></div>
<div class="ttc" id="assoc_8c_html_aa8781ddcd6a9240db73c39a2ff844d12"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12">client_id_self_update</a></div><div class="ttdeci">static void client_id_self_update(Assoc *assoc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00511">assoc.c:511</a></div></div>
<div class="ttc" id="struct_i_p_p_ts_png_html_a465bef81f6478756e5443025b1f2ddfa"><div class="ttname"><a href="../../de/d25/struct_i_p_p_ts_png.html#a465bef81f6478756e5443025b1f2ddfa">IPPTsPng::timestamp</a></div><div class="ttdeci">uint64_t timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00094">DHT.h:94</a></div></div>
<div class="ttc" id="assoc_8h_html_a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#a7b447edde2593107a52acfee89281d2ca8f8f3b5e55e2761eed576314ae2afaf6">LANOk</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00046">assoc.h:46</a></div></div>
<div class="ttc" id="assoc_8c_html_a870a9554cd560a551b3bb8229c684325"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a870a9554cd560a551b3bb8229c684325">bucket_t</a></div><div class="ttdeci">uint16_t bucket_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00054">assoc.c:54</a></div></div>
<div class="ttc" id="_l_a_n__discovery_8c_html_a2d80a53390598eb8ededbc63f4e9c152"><div class="ttname"><a href="../../d1/de5/_l_a_n__discovery_8c.html#a2d80a53390598eb8ededbc63f4e9c152">LAN_ip</a></div><div class="ttdeci">int LAN_ip(IP ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de5/_l_a_n__discovery_8c_source.html#l00259">LAN_discovery.c:259</a></div></div>
<div class="ttc" id="structcandidates__bucket_html_a515f2b5e53003e623b334ab90c4280e0"><div class="ttname"><a href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">candidates_bucket::list</a></div><div class="ttdeci">Client_entry * list</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00085">assoc.c:85</a></div></div>
<div class="ttc" id="struct_assoc_html_a9d492ea4282a0aca2bcb32d987f58175"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">Assoc::candidates</a></div><div class="ttdeci">candidates_bucket * candidates</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00096">assoc.c:96</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_ad8b38a62362a313e54af7ae07c36606f_cgraph.png" border="0" usemap="#da/d7d/assoc_8h_ad8b38a62362a313e54af7ae07c36606f_cgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_ad8b38a62362a313e54af7ae07c36606f_cgraph" id="da/d7d/assoc_8h_ad8b38a62362a313e54af7ae07c36606f_cgraph">
<area shape="rect" id="node2" href="../../d4/d9d/assoc_8c.html#ad78d05a8a1915614699da4704cd5641b" title="assoc_id_closest" alt="" coords="232,56,355,83"/><area shape="rect" id="node4" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12" title="client_id_self_update" alt="" coords="221,157,365,184"/><area shape="rect" id="node10" href="../../d4/d9d/assoc_8c.html#a9419b231b388fff46f176830c4b9a52f" title="dist_index_bubble" alt="" coords="230,259,357,285"/><area shape="rect" id="node12" href="../../d4/d9d/assoc_8c.html#a07e9e64cd1b39d0dc9259d998e52f1ab" title="dist_index_entry" alt="" coords="609,284,727,311"/><area shape="rect" id="node13" href="../../d4/d9d/assoc_8c.html#afe8472c27f16e873da0fa3a6995c1197" title="dist_index_comp" alt="" coords="233,360,353,387"/><area shape="rect" id="node14" href="../../d4/d9d/assoc_8c.html#af9b9ca1f09c12f5ba91e06bf254e09f6" title="id_distance" alt="" coords="249,411,337,437"/><area shape="rect" id="node15" href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e" title="ipport_isset" alt="" coords="249,461,338,488"/><area shape="rect" id="node17" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288" title="is_timeout" alt="" coords="252,512,335,539"/><area shape="rect" id="node19" href="../../d1/de5/_l_a_n__discovery_8c.html#a2d80a53390598eb8ededbc63f4e9c152" title="LAN_ip" alt="" coords="261,587,326,613"/><area shape="rect" id="node3" href="../../dc/dc1/_d_h_t_8c.html#a903a5bc580826fe447adb841b7782333" title="id_closest" alt="" coords="447,5,528,32"/><area shape="rect" id="node5" href="../../d4/d9d/assoc_8c.html#ace6056317cff40310ec4041c9675e093" title="candidates_id_bucket" alt="" coords="413,56,561,83"/><area shape="rect" id="node7" href="../../d4/d9d/assoc_8c.html#a2237a67d354721e3155bcb4701e386ac" title="hash_collide" alt="" coords="440,107,535,133"/><area shape="rect" id="node8" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="452,157,523,184"/><area shape="rect" id="node9" href="../../d4/d9d/assoc_8c.html#a89ad0cf0f7d7c45e00c8bbdd66b56e95" title="id_hash" alt="" coords="454,208,521,235"/><area shape="rect" id="node6" href="../../d4/d9d/assoc_8c.html#a02a00b2c4be43884c00d659524ce8081" title="id_bucket" alt="" coords="629,56,707,83"/><area shape="rect" id="node11" href="../../d4/d9d/assoc_8c.html#aebc74fa92cb369834babcadf8b73483a" title="dist_index_id" alt="" coords="438,259,537,285"/><area shape="rect" id="node16" href="../../d6/d6e/network_8c.html#ac56c677f4bc8bf8311370ee105ae7cbb" title="ip_isset" alt="" coords="454,461,521,488"/><area shape="rect" id="node18" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="448,512,527,539"/><area shape="rect" id="node20" href="../../d1/de5/_l_a_n__discovery_8c.html#a56fb8ae3cd774c1b1d5670b9c4fb8959" title="Local_ip" alt="" coords="452,587,523,613"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_ad8b38a62362a313e54af7ae07c36606f_icgraph.png" border="0" usemap="#da/d7d/assoc_8h_ad8b38a62362a313e54af7ae07c36606f_icgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_ad8b38a62362a313e54af7ae07c36606f_icgraph" id="da/d7d/assoc_8h_ad8b38a62362a313e54af7ae07c36606f_icgraph">
<area shape="rect" id="node2" href="../../df/dad/_d_h_t_8h.html#a1dac5e05fd07964cb4914c17afeb9d50" title="DHT_addfriend" alt="" coords="221,208,332,235"/><area shape="rect" id="node38" href="../../df/dad/_d_h_t_8h.html#a8abfc9cea3784b0cae354670bd4643cd" title="get_close_nodes" alt="" coords="380,259,500,286"/><area shape="rect" id="node50" href="../../db/d0f/assoc__test_8c.html#a242f6c133a1fef9d5e86336e74b7ddae" title="START_TEST" alt="" coords="223,310,330,336"/><area shape="rect" id="node3" href="../../d7/dd9/onion__test_8c.html#a53d1bd9e6126683e05e0e14cc70d1a8a" title="dht_pk_callback" alt="" coords="577,31,693,58"/><area shape="rect" id="node5" href="../../d3/dfd/_d_h_t__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="415,436,465,463"/><area shape="rect" id="node6" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="1026,132,1107,159"/><area shape="rect" id="node21" href="../../d2/db1/friend__connection_8c.html#aa293768f213199a635ce0b4a94489cdf" title="change_dht_pk" alt="" coords="385,386,495,412"/><area shape="rect" id="node4" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1401,31,1508,58"/><area shape="rect" id="node7" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="1217,82,1332,108"/><area shape="rect" id="node9" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1401,183,1508,210"/><area shape="rect" id="node10" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="1229,31,1320,58"/><area shape="rect" id="node11" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1249,234,1300,260"/><area shape="rect" id="node12" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="1216,386,1333,412"/><area shape="rect" id="node8" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1401,82,1508,108"/><area shape="rect" id="node13" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1429,436,1480,463"/><area shape="rect" id="node14" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="1419,386,1490,412"/><area shape="rect" id="node15" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1556,386,1663,412"/><area shape="rect" id="node16" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1577,335,1641,362"/><area shape="rect" id="node18" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1570,487,1649,514"/><area shape="rect" id="node20" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1584,538,1635,564"/><area shape="rect" id="node17" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1711,386,1761,412"/><area shape="rect" id="node19" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1711,487,1761,514"/><area shape="rect" id="node22" href="../../d2/db1/friend__connection_8c.html#a53d1bd9e6126683e05e0e14cc70d1a8a" title="dht_pk_callback" alt="" coords="577,462,693,488"/><area shape="rect" id="node23" href="../../d2/db1/friend__connection_8c.html#ad12421e11a4e0a8ca7223e0d715d2b0c" title="handle_new_connections" alt="" coords="769,386,937,412"/><area shape="rect" id="node25" href="../../d2/db1/friend__connection_8c.html#ac2af058fd8684e6abc7b136889f5f4e5" title="friend_new_connection" alt="" coords="776,487,931,514"/><area shape="rect" id="node31" href="../../d0/d08/friend__connection_8h.html#a04fb221a2ac726ec3ca86be7b1e63238" title="set_dht_temp_pk" alt="" coords="792,538,915,564"/><area shape="rect" id="node34" href="../../d0/d08/friend__connection_8h.html#a613a80a004fccd616de2a67d84a25d3c" title="new_friend_connection" alt="" coords="776,436,931,463"/><area shape="rect" id="node24" href="../../d0/d08/friend__connection_8h.html#a319bec2419cf5fc5525af4fae03b86ef" title="new_friend_connections" alt="" coords="985,386,1148,412"/><area shape="rect" id="node26" href="../../d2/db1/friend__connection_8c.html#a6aa37bc6ee3246c06d37000677b205e8" title="dht_ip_callback" alt="" coords="1011,588,1123,615"/><area shape="rect" id="node27" href="../../d0/d08/friend__connection_8h.html#aea88c3aa2deff558e9b13ed5229cbb6b" title="do_friend_connections" alt="" coords="991,487,1143,514"/><area shape="rect" id="node28" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1221,487,1328,514"/><area shape="rect" id="node29" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1429,487,1480,514"/><area shape="rect" id="node30" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="1413,538,1496,564"/><area shape="rect" id="node32" href="../../df/de9/toxcore_2group_8c.html#ab08da4834d9772b1ef1f3b35ae5197c1" title="connect_to_closest" alt="" coords="999,538,1134,564"/><area shape="rect" id="node33" href="../../dd/de4/toxcore_2group_8h.html#a9529a2149c68cbff38d43419d9ebeecc" title="do_groupchats" alt="" coords="1221,588,1328,615"/><area shape="rect" id="node35" href="../../d8/d8d/_messenger_8c.html#aa3be5ad998d2b0ced07aceab765eaa2f" title="init_new_friend" alt="" coords="1012,436,1121,463"/><area shape="rect" id="node36" href="../../d4/d30/_messenger_8h.html#ac77431b1ab0b12af003657e11057bd9c" title="m_addfriend" alt="" coords="1228,538,1321,564"/><area shape="rect" id="node37" href="../../d4/d30/_messenger_8h.html#a2f7aa06733a25e8c0edc8f31a22a78dc" title="m_addfriend_norequest" alt="" coords="1196,436,1353,463"/><area shape="rect" id="node39" href="../../dc/dc1/_d_h_t_8c.html#acce043cdc5108edffc35e6e879197d20" title="sendnodes_ipv6" alt="" coords="577,183,693,210"/><area shape="rect" id="node41" href="../../dc/dc1/_d_h_t_8c.html#af89838d6c1c8e0ec82dfadbe2953e06d" title="random_node" alt="" coords="585,284,685,311"/><area shape="rect" id="node46" href="../../df/d75/onion__announce_8c.html#a5cc40944c42a4e0d1d3d702cf93ac8ad" title="handle_announce_request" alt="" coords="548,234,721,260"/><area shape="rect" id="node48" href="../../db/d79/onion__client_8c.html#a18daedee61cc5670d52904fc89e4b32b" title="populate_path_nodes" alt="" coords="562,335,707,362"/><area shape="rect" id="node40" href="../../dc/dc1/_d_h_t_8c.html#afa4f13a29cbe60809f2446267d109383" title="handle_getnodes" alt="" coords="793,183,913,210"/><area shape="rect" id="node42" href="../../dc/dc1/_d_h_t_8c.html#a9480aac51c9c74c667267ce89a76604a" title="do_hardening" alt="" coords="804,284,903,311"/><area shape="rect" id="node43" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="1031,284,1102,311"/><area shape="rect" id="node44" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="1237,335,1312,362"/><area shape="rect" id="node45" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="1234,284,1315,311"/><area shape="rect" id="node47" href="../../d7/dfd/onion__announce_8h.html#a1807a1d99b93e29c2a27648afe3e6c2c" title="new_onion_announce" alt="" coords="993,234,1140,260"/><area shape="rect" id="node49" href="../../d9/d26/onion__client_8h.html#aa1771a7c1ebf446973e8d2bbb7ea8c2d" title="do_onion_client" alt="" coords="1011,335,1123,362"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0389b61e9667ab9e78ee87247b520689"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Assoc_self_client_id_changed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *&#160;</td>
          <td class="paramname"><em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>public_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00872">872</a> of file <a class="el" href="../../d4/d9d/assoc_8c_source.html">assoc.c</a>.</p>

<p>References <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00511">client_id_self_update()</a>, <a class="el" href="../../de/df1/util_8c_source.html#l00066">id_copy()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00090">Assoc::self_client_id</a>, and <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00089">Assoc::self_hash</a>.</p>
<div class="fragment"><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;{</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">if</span> (assoc &amp;&amp; <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">self_hash</a> = 0;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <a class="code" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b">id_copy</a>(assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a59ef97a1dbf10c89fb43f6fff2e65b39">self_client_id</a>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12">client_id_self_update</a>(assoc);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;}</div>
<div class="ttc" id="struct_assoc_html_a6531d0c8e69576ae8c58a02914abaefe"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a6531d0c8e69576ae8c58a02914abaefe">Assoc::self_hash</a></div><div class="ttdeci">hash_t self_hash</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00089">assoc.c:89</a></div></div>
<div class="ttc" id="struct_assoc_html_a59ef97a1dbf10c89fb43f6fff2e65b39"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a59ef97a1dbf10c89fb43f6fff2e65b39">Assoc::self_client_id</a></div><div class="ttdeci">uint8_t self_client_id[crypto_box_PUBLICKEYBYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00090">assoc.c:90</a></div></div>
<div class="ttc" id="util_8c_html_aa30049b8c1d82c280d6d872feea3353b"><div class="ttname"><a href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b">id_copy</a></div><div class="ttdeci">uint32_t id_copy(uint8_t *dest, const uint8_t *src)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00066">util.c:66</a></div></div>
<div class="ttc" id="assoc_8c_html_aa8781ddcd6a9240db73c39a2ff844d12"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12">client_id_self_update</a></div><div class="ttdeci">static void client_id_self_update(Assoc *assoc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00511">assoc.c:511</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_a0389b61e9667ab9e78ee87247b520689_cgraph.png" border="0" usemap="#da/d7d/assoc_8h_a0389b61e9667ab9e78ee87247b520689_cgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_a0389b61e9667ab9e78ee87247b520689_cgraph" id="da/d7d/assoc_8h_a0389b61e9667ab9e78ee87247b520689_cgraph">
<area shape="rect" id="node2" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12" title="client_id_self_update" alt="" coords="196,81,340,108"/><area shape="rect" id="node8" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b" title="id_copy" alt="" coords="235,132,301,159"/><area shape="rect" id="node3" href="../../d4/d9d/assoc_8c.html#ace6056317cff40310ec4041c9675e093" title="candidates_id_bucket" alt="" coords="388,5,536,32"/><area shape="rect" id="node5" href="../../d4/d9d/assoc_8c.html#a2237a67d354721e3155bcb4701e386ac" title="hash_collide" alt="" coords="415,56,509,83"/><area shape="rect" id="node6" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="427,107,497,133"/><area shape="rect" id="node7" href="../../d4/d9d/assoc_8c.html#a89ad0cf0f7d7c45e00c8bbdd66b56e95" title="id_hash" alt="" coords="429,157,495,184"/><area shape="rect" id="node4" href="../../d4/d9d/assoc_8c.html#a02a00b2c4be43884c00d659524ce8081" title="id_bucket" alt="" coords="584,5,663,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a36aff33785fb0db2565cf4cb5b080327"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_Assoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *&#160;</td>
          <td class="paramname"><em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d15/struct_d_h_t.html">DHT</a> *&#160;</td>
          <td class="paramname"><em>dht</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00886">886</a> of file <a class="el" href="../../d4/d9d/assoc_8c_source.html">assoc.c</a>.</p>

<p>References <a class="el" href="../../da/d7d/assoc_8h_source.html#l00091">ASSOC_BUCKET_REFRESH</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00096">Assoc::candidates</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00094">Assoc::candidates_bucket_count</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00095">Assoc::candidates_bucket_size</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00047">CANDIDATES_HEARD_TIMEOUT</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00046">CANDIDATES_SEEN_TIMEOUT</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00081">Client_entry::client</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01415">DHT_getnodes()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00280">for()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00069">Client_entry::getnodes</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00097">Assoc::getnodes</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00066">Client_entry::hash</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00073">Client_entry::heard_at</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00163">IP_Port::ip</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00827">ip_ntoa()</a>, <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00093">IPPTsPng::ip_port</a>, <a class="el" href="../../de/df1/util_8c_source.html#l00054">is_timeout()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00085">candidates_bucket::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00087">LOGGER_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00074">LOGGER_SCOPE</a>, <a class="el" href="../../d8/dda/messenger__test_8c_source.html#l00044">m</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00164">IP_Port::port</a>, <a class="el" href="../../df/dad/_d_h_t_8h_source.html#l00104">Client_data::public_key</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00072">Client_entry::seen_at</a>, and <a class="el" href="../../de/df1/util_8c_source.html#l00049">unix_time()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l02242">do_DHT()</a>.</p>
<div class="fragment"><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a>(assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#aec732782691c39a31d8c579a79a8fed2">getnodes</a>, <a class="code" href="../../da/d7d/assoc_8h.html#a60f209fd553fa95d0f6973b367b9b60c">ASSOC_BUCKET_REFRESH</a>)) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#aec732782691c39a31d8c579a79a8fed2">getnodes</a> = <a class="code" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a">unix_time</a>();</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordtype">size_t</span> candidate = (rand() % assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>) + assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="comment">/* in that bucket or the buckets closest to it:</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">         * find the best heard candidate</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">         * find the best seen candidate</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">         * send getnode() requests to both */</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        uint8_t *target_id = NULL;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <a class="code" href="../../d2/d86/struct_client__entry.html">Client_entry</a> *heard = NULL, *seen = NULL;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, k, <a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a8799beff27c0e5459ef50f9ca1efe92c">for</a> (i = 1; i &lt; assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>; i++) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="keywordflow">if</span> (i % 2)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                k = - (i &gt;&gt; 1);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                k = i &gt;&gt; 1;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            <span class="keywordtype">size_t</span> bckt = (candidate + k) % assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a8799beff27c0e5459ef50f9ca1efe92c">for</a> (<a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a> = 0; <a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a> &lt; assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">candidates_bucket_size</a>; <a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a>++)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="keywordflow">if</span> (assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">candidates</a>[bckt].<a class="code" href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">list</a>[<a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a>].<a class="code" href="../../d2/d86/struct_client__entry.html#a35aa0f6864b81ef3de3d4d46ef823a0c">hash</a>) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    <a class="code" href="../../d2/d86/struct_client__entry.html">Client_entry</a> *entry = &amp;assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">candidates</a>[bckt].<a class="code" href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">list</a>[<a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a>];</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a>(entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#aec732782691c39a31d8c579a79a8fed2">getnodes</a>, <a class="code" href="../../d4/d9d/assoc_8c.html#a9bb69b73619cccc40c0aa09c227f2bce">CANDIDATES_SEEN_TIMEOUT</a>))</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    <span class="keywordflow">if</span> (!target_id)</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                        target_id = entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">client</a>.<a class="code" href="../../d8/d1c/struct_client__data.html#aaa806bb1136fb3d4b5d8d8970b596ff7">public_key</a>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                    <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#ab632ae1b8a283a06d6cb3881c377c6cd">seen_at</a>) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                        <span class="keywordflow">if</span> (!seen)</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                            <span class="keywordflow">if</span> (!<a class="code" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a>(entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#ab632ae1b8a283a06d6cb3881c377c6cd">seen_at</a>, <a class="code" href="../../d4/d9d/assoc_8c.html#a9bb69b73619cccc40c0aa09c227f2bce">CANDIDATES_SEEN_TIMEOUT</a>))</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                                seen = entry;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                    }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                    <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a0886ba8c555aa6352f2dbf0606636f13">heard_at</a>) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                        <span class="keywordflow">if</span> (!heard)</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                            <span class="keywordflow">if</span> (!<a class="code" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a>(entry-&gt;<a class="code" href="../../d2/d86/struct_client__entry.html#a0886ba8c555aa6352f2dbf0606636f13">heard_at</a>, <a class="code" href="../../d4/d9d/assoc_8c.html#ace4ac45ae9f3a8310f57d6ddbdf051ee">CANDIDATES_HEARD_TIMEOUT</a>))</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                                heard = entry;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                    }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                    <span class="keywordflow">if</span> (seen &amp;&amp; heard)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="keywordflow">if</span> (seen &amp;&amp; heard)</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">if</span> (seen) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            <a class="code" href="../../de/d25/struct_i_p_p_ts_png.html">IPPTsPng</a> *ippts = seen-&gt;seen_family == AF_INET ? &amp;seen-&gt;client.assoc4 : &amp;seen-&gt;client.assoc6;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a>(<span class="stringliteral">&quot;[%u] =&gt; S[%s...] %s:%u&quot;</span>, (uint32_t)(candidate % assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>),</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                         idpart2str(seen-&gt;client.public_key, 8), <a class="code" href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706">ip_ntoa</a>(&amp;ippts-&gt;<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">ip_port</a>.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>), htons(ippts-&gt;<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">ip_port</a>.<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>));</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <a class="code" href="../../dc/dc1/_d_h_t_8c.html#a769ef744f969e1b4c55547cb74abee59">DHT_getnodes</a>(dht, &amp;ippts-&gt;<a class="code" href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">ip_port</a>, seen-&gt;client.public_key, target_id);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            seen-&gt;getnodes = <a class="code" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a">unix_time</a>();</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">if</span> (heard &amp;&amp; (heard != seen)) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <a class="code" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *ipp = heard-&gt;heard_family == AF_INET ? &amp;heard-&gt;assoc_heard4 : &amp;heard-&gt;assoc_heard6;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a>(<span class="stringliteral">&quot;[%u] =&gt; H[%s...] %s:%u&quot;</span>, (uint32_t)(candidate % assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>),</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                         idpart2str(heard-&gt;client.public_key, 8), <a class="code" href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706">ip_ntoa</a>(&amp;ipp-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>), htons(ipp-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>));</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            <a class="code" href="../../dc/dc1/_d_h_t_8c.html#a769ef744f969e1b4c55547cb74abee59">DHT_getnodes</a>(dht, ipp, heard-&gt;client.public_key, target_id);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            heard-&gt;getnodes = <a class="code" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a">unix_time</a>();</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#a3c9976e3ba8401ba5a2117ee6297c669">LOGGER_SCOPE</a> (</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="keywordflow">if</span> ( !heard &amp;&amp; !seen )</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a>(<span class="stringliteral">&quot;[%u] =&gt; no nodes to talk to??&quot;</span>, (uint32_t)(candidate % assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>));</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        );</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div>
<div class="ttc" id="_d_h_t_8c_html_a769ef744f969e1b4c55547cb74abee59"><div class="ttname"><a href="../../dc/dc1/_d_h_t_8c.html#a769ef744f969e1b4c55547cb74abee59">DHT_getnodes</a></div><div class="ttdeci">void DHT_getnodes(DHT *dht, const IP_Port *from_ipp, const uint8_t *from_id, const uint8_t *which_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc1/_d_h_t_8c_source.html#l01415">DHT.c:1415</a></div></div>
<div class="ttc" id="struct_client__entry_html_aec732782691c39a31d8c579a79a8fed2"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#aec732782691c39a31d8c579a79a8fed2">Client_entry::getnodes</a></div><div class="ttdeci">uint64_t getnodes</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00069">assoc.c:69</a></div></div>
<div class="ttc" id="struct_i_p_p_ts_png_html_a86e2a5a56c0dd22df6e8b8a10e40f9e4"><div class="ttname"><a href="../../de/d25/struct_i_p_p_ts_png.html#a86e2a5a56c0dd22df6e8b8a10e40f9e4">IPPTsPng::ip_port</a></div><div class="ttdeci">IP_Port ip_port</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00093">DHT.h:93</a></div></div>
<div class="ttc" id="struct_client__entry_html_a0886ba8c555aa6352f2dbf0606636f13"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#a0886ba8c555aa6352f2dbf0606636f13">Client_entry::heard_at</a></div><div class="ttdeci">uint64_t heard_at</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00073">assoc.c:73</a></div></div>
<div class="ttc" id="struct_client__entry_html"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html">Client_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00065">assoc.c:65</a></div></div>
<div class="ttc" id="util_8c_html_ac958d9f8847cb8039444bfa3d304233a"><div class="ttname"><a href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a">unix_time</a></div><div class="ttdeci">uint64_t unix_time()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00049">util.c:49</a></div></div>
<div class="ttc" id="struct_i_p_p_ts_png_html"><div class="ttname"><a href="../../de/d25/struct_i_p_p_ts_png.html">IPPTsPng</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00092">DHT.h:92</a></div></div>
<div class="ttc" id="util_8c_html_ab643c84141e04b54ba650c50165ba288"><div class="ttname"><a href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288">is_timeout</a></div><div class="ttdeci">int is_timeout(uint64_t timestamp, uint64_t timeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00054">util.c:54</a></div></div>
<div class="ttc" id="logger_8h_html_a3c9976e3ba8401ba5a2117ee6297c669"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3c9976e3ba8401ba5a2117ee6297c669">LOGGER_SCOPE</a></div><div class="ttdeci">#define LOGGER_SCOPE(__SCOPE_DO__)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00074">logger.h:74</a></div></div>
<div class="ttc" id="struct_client__data_html_aaa806bb1136fb3d4b5d8d8970b596ff7"><div class="ttname"><a href="../../d8/d1c/struct_client__data.html#aaa806bb1136fb3d4b5d8d8970b596ff7">Client_data::public_key</a></div><div class="ttdeci">uint8_t public_key[crypto_box_PUBLICKEYBYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dad/_d_h_t_8h_source.html#l00104">DHT.h:104</a></div></div>
<div class="ttc" id="struct_client__entry_html_a114cded03654e9d27771e24fa1712e39"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#a114cded03654e9d27771e24fa1712e39">Client_entry::client</a></div><div class="ttdeci">Client_data client</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00081">assoc.c:81</a></div></div>
<div class="ttc" id="struct_i_p___port_html"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html">IP_Port</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00162">network.h:162</a></div></div>
<div class="ttc" id="assoc_8h_html_a60f209fd553fa95d0f6973b367b9b60c"><div class="ttname"><a href="../../da/d7d/assoc_8h.html#a60f209fd553fa95d0f6973b367b9b60c">ASSOC_BUCKET_REFRESH</a></div><div class="ttdeci">#define ASSOC_BUCKET_REFRESH</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/assoc_8h_source.html#l00091">assoc.h:91</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a0c6193a337a223c63411b2fe722d79ec"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">IP_Port::ip</a></div><div class="ttdeci">IP ip</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00163">network.h:163</a></div></div>
<div class="ttc" id="messenger__test_8c_html_aea6eb6c7c30a659f1b0dee83eaf03ea2"><div class="ttname"><a href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a></div><div class="ttdeci">Messenger * m</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dda/messenger__test_8c_source.html#l00044">messenger_test.c:44</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="struct_assoc_html_aec732782691c39a31d8c579a79a8fed2"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#aec732782691c39a31d8c579a79a8fed2">Assoc::getnodes</a></div><div class="ttdeci">uint64_t getnodes</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00097">assoc.c:97</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">IP_Port::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00164">network.h:164</a></div></div>
<div class="ttc" id="struct_client__entry_html_a35aa0f6864b81ef3de3d4d46ef823a0c"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#a35aa0f6864b81ef3de3d4d46ef823a0c">Client_entry::hash</a></div><div class="ttdeci">hash_t hash</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00066">assoc.c:66</a></div></div>
<div class="ttc" id="struct_client__entry_html_ab632ae1b8a283a06d6cb3881c377c6cd"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#ab632ae1b8a283a06d6cb3881c377c6cd">Client_entry::seen_at</a></div><div class="ttdeci">uint64_t seen_at</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00072">assoc.c:72</a></div></div>
<div class="ttc" id="struct_assoc_html_a9349f5b3095733f74b3704aa9766a05a"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">Assoc::candidates_bucket_size</a></div><div class="ttdeci">size_t candidates_bucket_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00095">assoc.c:95</a></div></div>
<div class="ttc" id="struct_assoc_html_a22dd0674eae131fab27462b931d4397c"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">Assoc::candidates_bucket_count</a></div><div class="ttdeci">size_t candidates_bucket_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00094">assoc.c:94</a></div></div>
<div class="ttc" id="logger_8h_html_a9885ca09ce5f94d936c91a5b0856a024"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a></div><div class="ttdeci">#define LOGGER_DEBUG(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00087">logger.h:87</a></div></div>
<div class="ttc" id="assoc_8c_html_ace4ac45ae9f3a8310f57d6ddbdf051ee"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#ace4ac45ae9f3a8310f57d6ddbdf051ee">CANDIDATES_HEARD_TIMEOUT</a></div><div class="ttdeci">#define CANDIDATES_HEARD_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00047">assoc.c:47</a></div></div>
<div class="ttc" id="assoc_8c_html_a9bb69b73619cccc40c0aa09c227f2bce"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a9bb69b73619cccc40c0aa09c227f2bce">CANDIDATES_SEEN_TIMEOUT</a></div><div class="ttdeci">#define CANDIDATES_SEEN_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00046">assoc.c:46</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a8799beff27c0e5459ef50f9ca1efe92c"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a8799beff27c0e5459ef50f9ca1efe92c">for</a></div><div class="ttdeci">for(;i&lt; 3;i++)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00280">toxav_many_test.c:280</a></div></div>
<div class="ttc" id="network_8c_html_af71f49c78ce7b76ccf08785c6ec08706"><div class="ttname"><a href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706">ip_ntoa</a></div><div class="ttdeci">const char * ip_ntoa(const IP *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00827">network.c:827</a></div></div>
<div class="ttc" id="structcandidates__bucket_html_a515f2b5e53003e623b334ab90c4280e0"><div class="ttname"><a href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">candidates_bucket::list</a></div><div class="ttdeci">Client_entry * list</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00085">assoc.c:85</a></div></div>
<div class="ttc" id="struct_assoc_html_a9d492ea4282a0aca2bcb32d987f58175"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">Assoc::candidates</a></div><div class="ttdeci">candidates_bucket * candidates</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00096">assoc.c:96</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_a36aff33785fb0db2565cf4cb5b080327_cgraph.png" border="0" usemap="#da/d7d/assoc_8h_a36aff33785fb0db2565cf4cb5b080327_cgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_a36aff33785fb0db2565cf4cb5b080327_cgraph" id="da/d7d/assoc_8h_a36aff33785fb0db2565cf4cb5b080327_cgraph">
<area shape="rect" id="node2" href="../../dc/dc1/_d_h_t_8c.html#a769ef744f969e1b4c55547cb74abee59" title="DHT_getnodes" alt="" coords="133,245,244,272"/><area shape="rect" id="node7" href="../../de/df1/util_8c.html#ab643c84141e04b54ba650c50165ba288" title="is_timeout" alt="" coords="931,224,1014,251"/><area shape="rect" id="node8" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="1091,133,1169,160"/><area shape="rect" id="node18" href="../../d6/dc0/toxav__many__test_8c.html#a8799beff27c0e5459ef50f9ca1efe92c" title="for" alt="" coords="169,397,208,424"/><area shape="rect" id="node20" href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706" title="ip_ntoa" alt="" coords="157,448,221,475"/><area shape="rect" id="node3" href="../../dc/dc1/_d_h_t_8c.html#a7af6c30b12e5cbda1e6d6d824794956e" title="getnodes" alt="" coords="310,195,385,221"/><area shape="rect" id="node4" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="506,195,577,221"/><area shape="rect" id="node5" href="../../df/d02/ping__array_8c.html#a67470d42ee0e3e61bedfa598f3039266" title="ping_array_add" alt="" coords="486,43,597,69"/><area shape="rect" id="node11" href="../../dc/dc1/_d_h_t_8c.html#a087cceeacc5a14415b651c2980a24d34" title="DHT_get_shared_key_sent" alt="" coords="451,296,632,323"/><area shape="rect" id="node14" href="../../dc/d85/crypto__core_8c.html#a8b1033efb47c625779d11be7d8eb9e24" title="new_nonce" alt="" coords="497,245,585,272"/><area shape="rect" id="node16" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="459,93,624,120"/><area shape="rect" id="node17" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="497,144,586,171"/><area shape="rect" id="node6" href="../../df/d02/ping__array_8c.html#a660fb4ff5c6564a9b61cfbc497d1191b" title="ping_array_clear_timedout" alt="" coords="680,195,855,221"/><area shape="rect" id="node9" href="../../df/d02/ping__array_8c.html#ad051ea35e31300366c9f8c167b27ca4c" title="clear_entry" alt="" coords="929,167,1016,193"/><area shape="rect" id="node10" href="../../dc/d85/crypto__core_8c.html#a1ce51b34ab2247e750b9c2a25121eb9e" title="random_64b" alt="" coords="721,144,814,171"/><area shape="rect" id="node12" href="../../dc/dc1/_d_h_t_8c.html#a6cd4aa89d7bfcf6805c5ce6b273d9e9e" title="get_shared_key" alt="" coords="710,372,825,399"/><area shape="rect" id="node13" href="../../dc/d85/crypto__core_8c.html#a0d8eaef49981c5dc3ada078866b42f6d" title="encrypt_precompute" alt="" coords="903,372,1043,399"/><area shape="rect" id="node15" href="../../dc/d85/crypto__core_8c.html#a15ef255ab026d4881a16b99148b05dd7" title="random_nonce" alt="" coords="714,245,821,272"/><area shape="rect" id="node19" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516" title="ck_assert_msg" alt="" coords="292,397,403,424"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_a36aff33785fb0db2565cf4cb5b080327_icgraph.png" border="0" usemap="#da/d7d/assoc_8h_a36aff33785fb0db2565cf4cb5b080327_icgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_a36aff33785fb0db2565cf4cb5b080327_icgraph" id="da/d7d/assoc_8h_a36aff33785fb0db2565cf4cb5b080327_icgraph">
<area shape="rect" id="node2" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="133,81,204,108"/><area shape="rect" id="node3" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="268,5,343,32"/><area shape="rect" id="node5" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="265,56,346,83"/><area shape="rect" id="node7" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="280,107,331,133"/><area shape="rect" id="node8" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="252,157,359,184"/><area shape="rect" id="node4" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="407,5,513,32"/><area shape="rect" id="node6" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="407,56,513,83"/><area shape="rect" id="node9" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="435,132,485,159"/><area shape="rect" id="node10" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="419,183,501,209"/><area shape="rect" id="node11" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="561,107,668,133"/><area shape="rect" id="node12" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="589,157,641,184"/><area shape="rect" id="node13" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="589,208,640,235"/><area shape="rect" id="node14" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="578,259,651,285"/><area shape="rect" id="node15" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="716,259,767,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a26d82e35d047181d0e883a4b91373793"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kill_Assoc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a> *&#160;</td>
          <td class="paramname"><em>assoc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00968">968</a> of file <a class="el" href="../../d4/d9d/assoc_8c_source.html">assoc.c</a>.</p>

<p>References <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00096">Assoc::candidates</a>, and <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00085">candidates_bucket::list</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l02268">kill_DHT()</a>, and <a class="el" href="../../db/d0f/assoc__test_8c_source.html#l00018">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;{</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">if</span> (assoc) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        free(assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">candidates</a>-&gt;<a class="code" href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">list</a>);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        free(assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">candidates</a>);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        free(assoc);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;}</div>
<div class="ttc" id="structcandidates__bucket_html_a515f2b5e53003e623b334ab90c4280e0"><div class="ttname"><a href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">candidates_bucket::list</a></div><div class="ttdeci">Client_entry * list</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00085">assoc.c:85</a></div></div>
<div class="ttc" id="struct_assoc_html_a9d492ea4282a0aca2bcb32d987f58175"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">Assoc::candidates</a></div><div class="ttdeci">candidates_bucket * candidates</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00096">assoc.c:96</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_a26d82e35d047181d0e883a4b91373793_icgraph.png" border="0" usemap="#da/d7d/assoc_8h_a26d82e35d047181d0e883a4b91373793_icgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_a26d82e35d047181d0e883a4b91373793_icgraph" id="da/d7d/assoc_8h_a26d82e35d047181d0e883a4b91373793_icgraph">
<area shape="rect" id="node2" href="../../df/dad/_d_h_t_8h.html#a816851e4f0f454c52b93d65544a2b2bb" title="kill_DHT" alt="" coords="153,132,226,159"/><area shape="rect" id="node22" href="../../db/d0f/assoc__test_8c.html#a242f6c133a1fef9d5e86336e74b7ddae" title="START_TEST" alt="" coords="136,183,243,209"/><area shape="rect" id="node3" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="423,5,537,32"/><area shape="rect" id="node5" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="427,107,533,133"/><area shape="rect" id="node6" href="../../d7/dd9/onion__test_8c.html#a11b4d3c94243b8abdd439dea94ee679e" title="kill_onions" alt="" coords="291,56,373,83"/><area shape="rect" id="node8" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="291,157,373,184"/><area shape="rect" id="node11" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="421,259,539,285"/><area shape="rect" id="node20" href="../../d4/d30/_messenger_8h.html#a771c65c3057d870b0653c2fdf0a12fb7" title="kill_messenger" alt="" coords="425,309,535,336"/><area shape="rect" id="node4" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="587,5,693,32"/><area shape="rect" id="node7" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="587,107,693,133"/><area shape="rect" id="node9" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="435,157,525,184"/><area shape="rect" id="node10" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="455,208,505,235"/><area shape="rect" id="node12" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="615,259,665,285"/><area shape="rect" id="node13" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="605,309,675,336"/><area shape="rect" id="node14" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="741,233,848,260"/><area shape="rect" id="node15" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="763,284,827,311"/><area shape="rect" id="node17" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="755,335,834,361"/><area shape="rect" id="node19" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="769,385,820,412"/><area shape="rect" id="node16" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="896,284,947,311"/><area shape="rect" id="node18" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="896,335,947,361"/><area shape="rect" id="node21" href="../../da/d8f/tox_8h.html#a52259e134bfb9396d9fef4fffe94e878" title="tox_kill" alt="" coords="609,360,671,387"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae180bc47f7e0f171ed9bbedd7d50e416"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a>* new_Assoc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>public_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00779">779</a> of file <a class="el" href="../../d4/d9d/assoc_8c_source.html">assoc.c</a>.</p>

<p>References <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00096">Assoc::candidates</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00093">Assoc::candidates_bucket_bits</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00094">Assoc::candidates_bucket_count</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00095">Assoc::candidates_bucket_size</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00511">client_id_self_update()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00097">Assoc::getnodes</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00066">Client_entry::hash</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00043">HASH_COLLIDE_PRIME</a>, <a class="el" href="../../de/df1/util_8c_source.html#l00066">id_copy()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00085">candidates_bucket::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00087">LOGGER_DEBUG</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00767">prime_upto_min9()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00090">Assoc::self_client_id</a>, and <a class="el" href="../../de/df1/util_8c_source.html#l00049">unix_time()</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00864">new_Assoc_default()</a>, and <a class="el" href="../../db/d0f/assoc__test_8c_source.html#l00018">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;{</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">if</span> (!public_id)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="../../dd/d7b/struct_assoc.html">Assoc</a> *assoc = calloc(1, <span class="keyword">sizeof</span>(*assoc));</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span> (!assoc)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">     * bits must be in [ 2 .. 15 ]</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">     * entries must be a prime</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (bits &lt; 2)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        bits = 2;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bits &gt; 15)</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        bits = 15;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#ab4153986e9b7dd71547967436299a424">candidates_bucket_bits</a> = bits;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a> = 1U &lt;&lt; bits;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">if</span> (entries &lt; 25) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">if</span> (entries &lt;= 6)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            entries = 5;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            entries = entries - (1 - (entries % 2)); <span class="comment">/* even =&gt; odd */</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="comment">/* 7..23: all odds but 9&amp;15 are prime */</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <span class="keywordflow">if</span> (!(entries % 3)) <span class="comment">/* 9, 15 */</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                entries -= 2;   <span class="comment">/* 7, 13 */</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entries &gt; ((1 &lt;&lt; 17) - 1)) <span class="comment">/* 130k+ */</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        entries = (1 &lt;&lt; 17) - 1;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="comment">/* 9+: test and find a prime less or equal */</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordtype">size_t</span> entries_test = <a class="code" href="../../d4/d9d/assoc_8c.html#a03b6b225cc18ca1fbabbc77e5248a743">prime_upto_min9</a>(entries);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">if</span> (entries_test == <a class="code" href="../../d4/d9d/assoc_8c.html#a1899251b38a7a195f127d3d2d9d387e2">HASH_COLLIDE_PRIME</a>) <span class="comment">/* disallowed */</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            entries_test = <a class="code" href="../../d4/d9d/assoc_8c.html#a03b6b225cc18ca1fbabbc77e5248a743">prime_upto_min9</a>(entries_test - 1);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">if</span> (entries_test != entries) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a>(<span class="stringliteral">&quot;trimmed %i to %i.\n&quot;</span>, (<span class="keywordtype">int</span>)entries, (<span class="keywordtype">int</span>)entries_test);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            entries = (size_t)entries_test;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">candidates_bucket_size</a> = entries;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">/* allocation: preferably few blobs */</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordtype">size_t</span> bckt, cix;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="../../d2/d86/struct_client__entry.html">Client_entry</a> *clients = malloc(<span class="keyword">sizeof</span>(*clients) * assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a> * assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">candidates_bucket_size</a>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">if</span> (!clients) {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        free(assoc);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="../../d5/dd9/structcandidates__bucket.html">candidates_bucket</a> *lists = malloc(<span class="keyword">sizeof</span>(*lists) * assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">if</span> (!lists) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        free(assoc);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        free(clients);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">for</span> (bckt = 0; bckt &lt; assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">candidates_bucket_count</a>; bckt++) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <a class="code" href="../../d5/dd9/structcandidates__bucket.html">candidates_bucket</a> *list = &amp;lists[bckt];</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        list-&gt;<a class="code" href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">list</a> = &amp;clients[bckt * assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">candidates_bucket_size</a>];</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">for</span> (cix = 0; cix &lt; assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">candidates_bucket_size</a>; cix++)</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            list-&gt;<a class="code" href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">list</a>[cix].<a class="code" href="../../d2/d86/struct_client__entry.html#a35aa0f6864b81ef3de3d4d46ef823a0c">hash</a> = 0;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">candidates</a> = lists;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#aec732782691c39a31d8c579a79a8fed2">getnodes</a> = <a class="code" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a">unix_time</a>();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b">id_copy</a>(assoc-&gt;<a class="code" href="../../dd/d7b/struct_assoc.html#a59ef97a1dbf10c89fb43f6fff2e65b39">self_client_id</a>, public_id);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12">client_id_self_update</a>(assoc);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">return</span> assoc;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div>
<div class="ttc" id="struct_assoc_html_ab4153986e9b7dd71547967436299a424"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#ab4153986e9b7dd71547967436299a424">Assoc::candidates_bucket_bits</a></div><div class="ttdeci">size_t candidates_bucket_bits</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00093">assoc.c:93</a></div></div>
<div class="ttc" id="struct_assoc_html"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html">Assoc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00088">assoc.c:88</a></div></div>
<div class="ttc" id="struct_client__entry_html"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html">Client_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00065">assoc.c:65</a></div></div>
<div class="ttc" id="util_8c_html_ac958d9f8847cb8039444bfa3d304233a"><div class="ttname"><a href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a">unix_time</a></div><div class="ttdeci">uint64_t unix_time()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00049">util.c:49</a></div></div>
<div class="ttc" id="structcandidates__bucket_html"><div class="ttname"><a href="../../d5/dd9/structcandidates__bucket.html">candidates_bucket</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00084">assoc.c:84</a></div></div>
<div class="ttc" id="struct_assoc_html_a59ef97a1dbf10c89fb43f6fff2e65b39"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a59ef97a1dbf10c89fb43f6fff2e65b39">Assoc::self_client_id</a></div><div class="ttdeci">uint8_t self_client_id[crypto_box_PUBLICKEYBYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00090">assoc.c:90</a></div></div>
<div class="ttc" id="util_8c_html_aa30049b8c1d82c280d6d872feea3353b"><div class="ttname"><a href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b">id_copy</a></div><div class="ttdeci">uint32_t id_copy(uint8_t *dest, const uint8_t *src)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00066">util.c:66</a></div></div>
<div class="ttc" id="assoc_8c_html_a1899251b38a7a195f127d3d2d9d387e2"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a1899251b38a7a195f127d3d2d9d387e2">HASH_COLLIDE_PRIME</a></div><div class="ttdeci">#define HASH_COLLIDE_PRIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00043">assoc.c:43</a></div></div>
<div class="ttc" id="struct_assoc_html_aec732782691c39a31d8c579a79a8fed2"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#aec732782691c39a31d8c579a79a8fed2">Assoc::getnodes</a></div><div class="ttdeci">uint64_t getnodes</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00097">assoc.c:97</a></div></div>
<div class="ttc" id="struct_client__entry_html_a35aa0f6864b81ef3de3d4d46ef823a0c"><div class="ttname"><a href="../../d2/d86/struct_client__entry.html#a35aa0f6864b81ef3de3d4d46ef823a0c">Client_entry::hash</a></div><div class="ttdeci">hash_t hash</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00066">assoc.c:66</a></div></div>
<div class="ttc" id="struct_assoc_html_a9349f5b3095733f74b3704aa9766a05a"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a9349f5b3095733f74b3704aa9766a05a">Assoc::candidates_bucket_size</a></div><div class="ttdeci">size_t candidates_bucket_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00095">assoc.c:95</a></div></div>
<div class="ttc" id="struct_assoc_html_a22dd0674eae131fab27462b931d4397c"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a22dd0674eae131fab27462b931d4397c">Assoc::candidates_bucket_count</a></div><div class="ttdeci">size_t candidates_bucket_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00094">assoc.c:94</a></div></div>
<div class="ttc" id="assoc_8c_html_aa8781ddcd6a9240db73c39a2ff844d12"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12">client_id_self_update</a></div><div class="ttdeci">static void client_id_self_update(Assoc *assoc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00511">assoc.c:511</a></div></div>
<div class="ttc" id="logger_8h_html_a9885ca09ce5f94d936c91a5b0856a024"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a></div><div class="ttdeci">#define LOGGER_DEBUG(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00087">logger.h:87</a></div></div>
<div class="ttc" id="assoc_8c_html_a03b6b225cc18ca1fbabbc77e5248a743"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#a03b6b225cc18ca1fbabbc77e5248a743">prime_upto_min9</a></div><div class="ttdeci">static size_t prime_upto_min9(size_t limit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00767">assoc.c:767</a></div></div>
<div class="ttc" id="structcandidates__bucket_html_a515f2b5e53003e623b334ab90c4280e0"><div class="ttname"><a href="../../d5/dd9/structcandidates__bucket.html#a515f2b5e53003e623b334ab90c4280e0">candidates_bucket::list</a></div><div class="ttdeci">Client_entry * list</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00085">assoc.c:85</a></div></div>
<div class="ttc" id="struct_assoc_html_a9d492ea4282a0aca2bcb32d987f58175"><div class="ttname"><a href="../../dd/d7b/struct_assoc.html#a9d492ea4282a0aca2bcb32d987f58175">Assoc::candidates</a></div><div class="ttdeci">candidates_bucket * candidates</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00096">assoc.c:96</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_ae180bc47f7e0f171ed9bbedd7d50e416_cgraph.png" border="0" usemap="#da/d7d/assoc_8h_ae180bc47f7e0f171ed9bbedd7d50e416_cgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_ae180bc47f7e0f171ed9bbedd7d50e416_cgraph" id="da/d7d/assoc_8h_ae180bc47f7e0f171ed9bbedd7d50e416_cgraph">
<area shape="rect" id="node2" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12" title="client_id_self_update" alt="" coords="144,107,288,133"/><area shape="rect" id="node8" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b" title="id_copy" alt="" coords="183,157,249,184"/><area shape="rect" id="node9" href="../../d4/d9d/assoc_8c.html#a03b6b225cc18ca1fbabbc77e5248a743" title="prime_upto_min9" alt="" coords="155,208,277,235"/><area shape="rect" id="node11" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="177,259,255,285"/><area shape="rect" id="node3" href="../../d4/d9d/assoc_8c.html#ace6056317cff40310ec4041c9675e093" title="candidates_id_bucket" alt="" coords="336,5,484,32"/><area shape="rect" id="node5" href="../../d4/d9d/assoc_8c.html#a2237a67d354721e3155bcb4701e386ac" title="hash_collide" alt="" coords="363,56,457,83"/><area shape="rect" id="node6" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="375,107,445,133"/><area shape="rect" id="node7" href="../../d4/d9d/assoc_8c.html#a89ad0cf0f7d7c45e00c8bbdd66b56e95" title="id_hash" alt="" coords="377,157,443,184"/><area shape="rect" id="node4" href="../../d4/d9d/assoc_8c.html#a02a00b2c4be43884c00d659524ce8081" title="id_bucket" alt="" coords="532,5,611,32"/><area shape="rect" id="node10" href="../../d4/d9d/assoc_8c.html#a30d998cac1d5cf6eecd4e295411da518" title="odd_min9_is_prime" alt="" coords="343,208,477,235"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_ae180bc47f7e0f171ed9bbedd7d50e416_icgraph.png" border="0" usemap="#da/d7d/assoc_8h_ae180bc47f7e0f171ed9bbedd7d50e416_icgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_ae180bc47f7e0f171ed9bbedd7d50e416_icgraph" id="da/d7d/assoc_8h_ae180bc47f7e0f171ed9bbedd7d50e416_icgraph">
<area shape="rect" id="node2" href="../../da/d7d/assoc_8h.html#ab7f978008ad6c86ab5063e989fe49d0c" title="new_Assoc_default" alt="" coords="144,107,280,133"/><area shape="rect" id="node3" href="../../db/d0f/assoc__test_8c.html#a242f6c133a1fef9d5e86336e74b7ddae" title="START_TEST" alt="" coords="328,56,435,83"/><area shape="rect" id="node4" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="341,107,422,133"/><area shape="rect" id="node5" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="484,5,599,32"/><area shape="rect" id="node7" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="488,56,595,83"/><area shape="rect" id="node8" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="496,107,587,133"/><area shape="rect" id="node10" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="516,157,567,184"/><area shape="rect" id="node11" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="483,208,600,235"/><area shape="rect" id="node6" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="648,5,755,32"/><area shape="rect" id="node9" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="648,107,755,133"/><area shape="rect" id="node12" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="676,183,727,209"/><area shape="rect" id="node13" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="666,233,737,260"/><area shape="rect" id="node14" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="803,157,909,184"/><area shape="rect" id="node15" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="824,208,888,235"/><area shape="rect" id="node17" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="817,259,895,285"/><area shape="rect" id="node19" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="831,309,881,336"/><area shape="rect" id="node16" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="957,208,1008,235"/><area shape="rect" id="node18" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="957,259,1008,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab7f978008ad6c86ab5063e989fe49d0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d7b/struct_assoc.html">Assoc</a>* new_Assoc_default </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>public_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00864">864</a> of file <a class="el" href="../../d4/d9d/assoc_8c_source.html">assoc.c</a>.</p>

<p>References <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00779">new_Assoc()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l02196">new_DHT()</a>, and <a class="el" href="../../db/d0f/assoc__test_8c_source.html#l00018">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="comment">/* original 8, 251 averages to ~32k entries... probably the whole DHT :D</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">     * 320 entries is fine, hopefully */</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d9d/assoc_8c.html#ae180bc47f7e0f171ed9bbedd7d50e416">new_Assoc</a>(6, 15, public_id);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div>
<div class="ttc" id="assoc_8c_html_ae180bc47f7e0f171ed9bbedd7d50e416"><div class="ttname"><a href="../../d4/d9d/assoc_8c.html#ae180bc47f7e0f171ed9bbedd7d50e416">new_Assoc</a></div><div class="ttdeci">Assoc * new_Assoc(size_t bits, size_t entries, const uint8_t *public_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d9d/assoc_8c_source.html#l00779">assoc.c:779</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_ab7f978008ad6c86ab5063e989fe49d0c_cgraph.png" border="0" usemap="#da/d7d/assoc_8h_ab7f978008ad6c86ab5063e989fe49d0c_cgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_ab7f978008ad6c86ab5063e989fe49d0c_cgraph" id="da/d7d/assoc_8h_ab7f978008ad6c86ab5063e989fe49d0c_cgraph">
<area shape="rect" id="node2" href="../../d4/d9d/assoc_8c.html#ae180bc47f7e0f171ed9bbedd7d50e416" title="new_Assoc" alt="" coords="189,183,280,209"/><area shape="rect" id="node3" href="../../d4/d9d/assoc_8c.html#aa8781ddcd6a9240db73c39a2ff844d12" title="client_id_self_update" alt="" coords="328,107,472,133"/><area shape="rect" id="node9" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b" title="id_copy" alt="" coords="367,157,433,184"/><area shape="rect" id="node10" href="../../d4/d9d/assoc_8c.html#a03b6b225cc18ca1fbabbc77e5248a743" title="prime_upto_min9" alt="" coords="339,208,461,235"/><area shape="rect" id="node12" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="361,259,439,285"/><area shape="rect" id="node4" href="../../d4/d9d/assoc_8c.html#ace6056317cff40310ec4041c9675e093" title="candidates_id_bucket" alt="" coords="520,5,668,32"/><area shape="rect" id="node6" href="../../d4/d9d/assoc_8c.html#a2237a67d354721e3155bcb4701e386ac" title="hash_collide" alt="" coords="547,56,641,83"/><area shape="rect" id="node7" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="559,107,629,133"/><area shape="rect" id="node8" href="../../d4/d9d/assoc_8c.html#a89ad0cf0f7d7c45e00c8bbdd66b56e95" title="id_hash" alt="" coords="561,157,627,184"/><area shape="rect" id="node5" href="../../d4/d9d/assoc_8c.html#a02a00b2c4be43884c00d659524ce8081" title="id_bucket" alt="" coords="716,5,795,32"/><area shape="rect" id="node11" href="../../d4/d9d/assoc_8c.html#a30d998cac1d5cf6eecd4e295411da518" title="odd_min9_is_prime" alt="" coords="527,208,661,235"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7d/assoc_8h_ab7f978008ad6c86ab5063e989fe49d0c_icgraph.png" border="0" usemap="#da/d7d/assoc_8h_ab7f978008ad6c86ab5063e989fe49d0c_icgraph" alt=""/></div>
<map name="da/d7d/assoc_8h_ab7f978008ad6c86ab5063e989fe49d0c_icgraph" id="da/d7d/assoc_8h_ab7f978008ad6c86ab5063e989fe49d0c_icgraph">
<area shape="rect" id="node2" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="202,107,283,133"/><area shape="rect" id="node18" href="../../db/d0f/assoc__test_8c.html#a242f6c133a1fef9d5e86336e74b7ddae" title="START_TEST" alt="" coords="189,157,296,184"/><area shape="rect" id="node3" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="345,5,460,32"/><area shape="rect" id="node5" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="349,56,456,83"/><area shape="rect" id="node6" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="357,107,448,133"/><area shape="rect" id="node8" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="377,157,428,184"/><area shape="rect" id="node9" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="344,208,461,235"/><area shape="rect" id="node4" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="509,5,616,32"/><area shape="rect" id="node7" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="509,107,616,133"/><area shape="rect" id="node10" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="537,183,588,209"/><area shape="rect" id="node11" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="527,233,598,260"/><area shape="rect" id="node12" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="664,157,771,184"/><area shape="rect" id="node13" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="685,208,749,235"/><area shape="rect" id="node15" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="678,259,757,285"/><area shape="rect" id="node17" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="692,309,743,336"/><area shape="rect" id="node14" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="819,208,869,235"/><area shape="rect" id="node16" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="819,259,869,285"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 2 2015 23:41:21 for libtoxcore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
