<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>libtoxcore: toxav/toxav.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../tox.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libtoxcore
   </div>
   <div id="projectbrief">The future of instant messaging</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b7f892fa0bc37a8f41bc7903eaf938ba.html">toxav</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">toxav.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d1/d16/codec_8h_source.html">codec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d06/msi_8h_source.html">msi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/da5/toxav_2group_8h_source.html">group.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">../toxcore/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d3c/util_8h_source.html">../toxcore/util.h</a>&quot;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for toxav.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d76/toxav_8c__incl.png" border="0" usemap="#toxav_2toxav_8c" alt=""/></div>
<map name="toxav_2toxav_8c" id="toxav_2toxav_8c">
<area shape="rect" id="node2" href="../../d1/d16/codec_8h.html" title="codec.h" alt="" coords="905,155,973,181"/><area shape="rect" id="node44" href="../../d9/d06/msi_8h.html" title="msi.h" alt="" coords="911,80,966,107"/><area shape="rect" id="node45" href="../../d8/da5/toxav_2group_8h.html" title="group.h" alt="" coords="102,155,167,181"/><area shape="rect" id="node47" href="../../d1/d8c/logger_8h.html" title="../toxcore/logger.h" alt="" coords="1459,379,1586,405"/><area shape="rect" id="node48" href="../../d8/d3c/util_8h.html" title="../toxcore/util.h" alt="" coords="1277,603,1387,629"/><area shape="rect" id="node3" href="../../d9/d82/toxav_8h.html" title="toxav.h" alt="" coords="1035,229,1101,256"/><area shape="rect" id="node6" href="../../df/dc1/rtp_8h.html" title="rtp.h" alt="" coords="963,229,1011,256"/><area shape="rect" id="node7" href="../../d4/d30/_messenger_8h.html" title="../toxcore/Messenger.h" alt="" coords="502,304,658,331"/><area shape="rect" id="node8" href="../../d5/d24/friend__requests_8h.html" title="friend_requests.h" alt="" coords="617,379,740,405"/><area shape="rect" id="node9" href="../../d0/d08/friend__connection_8h.html" title="friend_connection.h" alt="" coords="611,453,746,480"/><area shape="rect" id="node10" href="../../de/d42/net__crypto_8h.html" title="net_crypto.h" alt="" coords="721,603,815,629"/><area shape="rect" id="node11" href="../../df/dad/_d_h_t_8h.html" title="DHT.h" alt="" coords="799,976,860,1003"/><area shape="rect" id="node30" href="../../dd/db4/_l_a_n__discovery_8h.html" title="LAN_discovery.h" alt="" coords="608,677,731,704"/><area shape="rect" id="node36" href="../../d9/d26/onion__client_8h.html" title="onion_client.h" alt="" coords="717,528,819,555"/><area shape="rect" id="node31" href="../../da/d39/_t_c_p__connection_8h.html" title="TCP_connection.h" alt="" coords="805,677,936,704"/><area shape="rect" id="node12" href="../../dd/d3e/crypto__core_8h.html" title="crypto_core.h" alt="" coords="872,1051,973,1077"/><area shape="rect" id="node13" href="../../d9/d94/network_8h.html" title="network.h" alt="" coords="785,1125,863,1152"/><area shape="rect" id="node29" href="../../dd/dec/ping__array_8h.html" title="ping_array.h" alt="" coords="699,1051,792,1077"/><area shape="rect" id="node32" href="../../d0/df3/_t_c_p__client_8h.html" title="TCP_client.h" alt="" coords="957,752,1056,779"/><area shape="rect" id="node33" href="../../d6/d03/_t_c_p__server_8h.html" title="TCP_server.h" alt="" coords="871,827,974,853"/><area shape="rect" id="node34" href="../../d3/db9/onion_8h.html" title="onion.h" alt="" coords="805,901,869,928"/><area shape="rect" id="node37" href="../../d7/dfd/onion__announce_8h.html" title="onion_announce.h" alt="" coords="806,752,933,779"/><area shape="rect" id="node46" href="../../dd/de4/toxcore_2group_8h.html" title="../toxcore/group.h" alt="" coords="43,229,167,256"/></map>
</div>
</div>
<p><a href="../../d8/d0e/toxav_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d43/struct___tox_av.html">_ToxAv</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af80a3c50ad465fbd07df3d5fc144aa1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#af80a3c50ad465fbd07df3d5fc144aa1b">TOX_DEFINED</a></td></tr>
<tr class="separator:af80a3c50ad465fbd07df3d5fc144aa1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a369266c24eacffb87046522897a570d5">_GNU_SOURCE</a>&#160;&#160;&#160;/* implicit declaration warning */</td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1b44adfa4b1d57de2dd1d9ba055d816"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#ae1b44adfa4b1d57de2dd1d9ba055d816">MAX_ENCODE_TIME_US</a>&#160;&#160;&#160;((1000 / 24) * 1000)</td></tr>
<tr class="separator:ae1b44adfa4b1d57de2dd1d9ba055d816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b51ecd9e898c75b7ed6cf9cd5596d1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(idx, max)&#160;&#160;&#160;(idx &lt; 0 || idx &gt;= max)</td></tr>
<tr class="separator:a9b51ecd9e898c75b7ed6cf9cd5596d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a9e678c08e286eb1f36ebc7f770354e82"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d3/d79/struct_messenger.html">Messenger</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a></td></tr>
<tr class="separator:a9e678c08e286eb1f36ebc7f770354e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec40f142d19ca255ccdf4097b03ef51e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#aec40f142d19ca255ccdf4097b03ef51e">ToxAvCall</a></td></tr>
<tr class="separator:aec40f142d19ca255ccdf4097b03ef51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac5cf7284cc2e32780c71a7f5f80e3f9b"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="../../d9/d06/msi_8h.html#abe548d26a24458ebf9ab33310ee19600">MSICSettings</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b">msicsettings_cast</a> (const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *from)</td></tr>
<tr class="separator:ac5cf7284cc2e32780c71a7f5f80e3f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eb45d94b5ed002925b58f36c66426b1"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a8eb45d94b5ed002925b58f36c66426b1">toxavcsettings_cast</a> (const <a class="el" href="../../d9/d06/msi_8h.html#abe548d26a24458ebf9ab33310ee19600">MSICSettings</a> *from)</td></tr>
<tr class="separator:a8eb45d94b5ed002925b58f36c66426b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5565a6110643c428b28b2c79fb47b08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#ab5565a6110643c428b28b2c79fb47b08">toxav_new</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *messenger, int32_t max_calls)</td></tr>
<tr class="separator:ab5565a6110643c428b28b2c79fb47b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c356c3264067f4e8ebdc1cc7c6d545"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a10c356c3264067f4e8ebdc1cc7c6d545">toxav_kill</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av)</td></tr>
<tr class="separator:a10c356c3264067f4e8ebdc1cc7c6d545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a552b5f2c515a0162c7f44e66db707be5"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a552b5f2c515a0162c7f44e66db707be5">toxav_do_interval</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av)</td></tr>
<tr class="separator:a552b5f2c515a0162c7f44e66db707be5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b4ac618a3683f06432c06594846121"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a78b4ac618a3683f06432c06594846121">toxav_do</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av)</td></tr>
<tr class="separator:a78b4ac618a3683f06432c06594846121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9abb9d72d8ce906d4bfc5b472b617017"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a9abb9d72d8ce906d4bfc5b472b617017">toxav_register_callstate_callback</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, <a class="el" href="../../d9/d82/toxav_8h.html#ad6ce886c46b3de9e6780013cf8c86c6c">ToxAVCallback</a> cb, <a class="el" href="../../d9/d82/toxav_8h.html#a67e2b4baef8db67a8e1d00618ad0f9a1">ToxAvCallbackID</a> id, void *userdata)</td></tr>
<tr class="separator:a9abb9d72d8ce906d4bfc5b472b617017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61dbbb75f2337c5c7c77acd83fffe639"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a61dbbb75f2337c5c7c77acd83fffe639">toxav_register_audio_callback</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, <a class="el" href="../../d9/d82/toxav_8h.html#a92a2e7e1f30f65c5a1cac3f8969e3254">ToxAvAudioCallback</a> cb, void *userdata)</td></tr>
<tr class="separator:a61dbbb75f2337c5c7c77acd83fffe639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22179185a68fe2a2f126b2c328670f73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a22179185a68fe2a2f126b2c328670f73">toxav_register_video_callback</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, <a class="el" href="../../d9/d82/toxav_8h.html#a17935d23b920a53df6e7f3d7679ffed0">ToxAvVideoCallback</a> cb, void *userdata)</td></tr>
<tr class="separator:a22179185a68fe2a2f126b2c328670f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fde8db9bc925b8b5c4b974d8935daac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a4fde8db9bc925b8b5c4b974d8935daac">toxav_call</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t *call_index, int user, const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *csettings, int ringing_seconds)</td></tr>
<tr class="separator:a4fde8db9bc925b8b5c4b974d8935daac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225958005e20091600e798e9827a5639"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a225958005e20091600e798e9827a5639">toxav_hangup</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index)</td></tr>
<tr class="separator:a225958005e20091600e798e9827a5639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71ea4cbf449462254bc5982b810dfe20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a71ea4cbf449462254bc5982b810dfe20">toxav_answer</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *csettings)</td></tr>
<tr class="separator:a71ea4cbf449462254bc5982b810dfe20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad783f1a19a2765ff6924723193d05d07"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#ad783f1a19a2765ff6924723193d05d07">toxav_reject</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, const char *reason)</td></tr>
<tr class="separator:ad783f1a19a2765ff6924723193d05d07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0d14b853f586b2e07d2d0ef62efc4eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#ae0d14b853f586b2e07d2d0ef62efc4eb">toxav_cancel</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, int peer_id, const char *reason)</td></tr>
<tr class="separator:ae0d14b853f586b2e07d2d0ef62efc4eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ad323fd957032a11b1fadd4668f41ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a2ad323fd957032a11b1fadd4668f41ee">toxav_change_settings</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *csettings)</td></tr>
<tr class="separator:a2ad323fd957032a11b1fadd4668f41ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f5a8786bb985cdcdae0cc42a442b23e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a7f5a8786bb985cdcdae0cc42a442b23e">toxav_stop_call</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index)</td></tr>
<tr class="separator:a7f5a8786bb985cdcdae0cc42a442b23e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f2a69dda0bfe14d2a2bcf2497967f31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a9f2a69dda0bfe14d2a2bcf2497967f31">toxav_prepare_transmission</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, int support_video)</td></tr>
<tr class="separator:a9f2a69dda0bfe14d2a2bcf2497967f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeef2a0ed5e716e7449d3f1c6053e31af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#aeef2a0ed5e716e7449d3f1c6053e31af">toxav_kill_transmission</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index)</td></tr>
<tr class="separator:aeef2a0ed5e716e7449d3f1c6053e31af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa03b009616ed838e27caded4f69483d1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#aa03b009616ed838e27caded4f69483d1">toxav_send_rtp_payload</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, <a class="el" href="../../d8/d0e/toxav_8c.html#aec40f142d19ca255ccdf4097b03ef51e">ToxAvCall</a> *call, <a class="el" href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802">ToxAvCallType</a> type, const uint8_t *payload, unsigned int length)</td></tr>
<tr class="separator:aa03b009616ed838e27caded4f69483d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac15e39782145d25bf6ba397aaf910071"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#ac15e39782145d25bf6ba397aaf910071">toxav_prepare_video_frame</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, uint8_t *dest, int dest_max, vpx_image_t *input)</td></tr>
<tr class="separator:ac15e39782145d25bf6ba397aaf910071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aa0876a176b4e5e7abea2f72059a502"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a4aa0876a176b4e5e7abea2f72059a502">toxav_send_video</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, const uint8_t *frame, unsigned int frame_size)</td></tr>
<tr class="separator:a4aa0876a176b4e5e7abea2f72059a502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64caf285a2ad7cadf24263e0f8f7a507"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a64caf285a2ad7cadf24263e0f8f7a507">toxav_prepare_audio_frame</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, uint8_t *dest, int dest_max, const int16_t *frame, int frame_size)</td></tr>
<tr class="separator:a64caf285a2ad7cadf24263e0f8f7a507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd49d9a595a87814f54eeaa17d7ad833"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#abd49d9a595a87814f54eeaa17d7ad833">toxav_send_audio</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, const uint8_t *data, unsigned int size)</td></tr>
<tr class="separator:abd49d9a595a87814f54eeaa17d7ad833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa65fd5f05a94ed9abf63c42f5e10ed4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#aaa65fd5f05a94ed9abf63c42f5e10ed4">toxav_get_peer_csettings</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, int peer, <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *dest)</td></tr>
<tr class="separator:aaa65fd5f05a94ed9abf63c42f5e10ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de9b3c23c1d6b46b3ed0f2ea3385a7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a7de9b3c23c1d6b46b3ed0f2ea3385a7b">toxav_get_peer_id</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, int peer)</td></tr>
<tr class="separator:a7de9b3c23c1d6b46b3ed0f2ea3385a7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6217a5aaff6ccbb8768080466613208b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d82/toxav_8h.html#ab2667961717e3fa3f2e13c69d2fec01d">ToxAvCallState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a6217a5aaff6ccbb8768080466613208b">toxav_get_call_state</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index)</td></tr>
<tr class="separator:a6217a5aaff6ccbb8768080466613208b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0c1199d6c03b979810a27ce82751e7d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#aa0c1199d6c03b979810a27ce82751e7d">toxav_capability_supported</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av, int32_t call_index, <a class="el" href="../../d9/d82/toxav_8h.html#a74db561fc75b482ab0f045a6dd1ac265">ToxAvCapabilities</a> capability)</td></tr>
<tr class="separator:aa0c1199d6c03b979810a27ce82751e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef2e18b8445840844cb411fa3cd4a49"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#abef2e18b8445840844cb411fa3cd4a49">toxav_get_tox</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av)</td></tr>
<tr class="separator:abef2e18b8445840844cb411fa3cd4a49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45828173fc8cd78ee9c50390a98ce10d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a45828173fc8cd78ee9c50390a98ce10d">toxav_get_active_count</a> (<a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *av)</td></tr>
<tr class="separator:a45828173fc8cd78ee9c50390a98ce10d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593b4b2a8f14139b452f53f9543a18e0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a593b4b2a8f14139b452f53f9543a18e0">toxav_add_av_groupchat</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *tox, void(*audio_callback)(<a class="el" href="../../d3/d79/struct_messenger.html">Messenger</a> *, int, int, const int16_t *, unsigned int, uint8_t, unsigned int, void *), void *userdata)</td></tr>
<tr class="separator:a593b4b2a8f14139b452f53f9543a18e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a9a86105538f4f702d006185ce0b7e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a72a9a86105538f4f702d006185ce0b7e">toxav_join_av_groupchat</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *tox, int32_t friendnumber, const uint8_t *data, uint16_t length, void(*audio_callback)(<a class="el" href="../../d3/d79/struct_messenger.html">Messenger</a> *, int, int, const int16_t *, unsigned int, uint8_t, unsigned int, void *), void *userdata)</td></tr>
<tr class="separator:a72a9a86105538f4f702d006185ce0b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78d09fb2b5ac7b1bd5c2395a7bdb5c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#ad78d09fb2b5ac7b1bd5c2395a7bdb5c6">toxav_group_send_audio</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *tox, int groupnumber, const int16_t *pcm, unsigned int samples, uint8_t channels, unsigned int sample_rate)</td></tr>
<tr class="separator:ad78d09fb2b5ac7b1bd5c2395a7bdb5c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aff13faf6b338ca682c4c206b9fdde7fc"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#aff13faf6b338ca682c4c206b9fdde7fc">av_DefaultSettings</a></td></tr>
<tr class="separator:aff13faf6b338ca682c4c206b9fdde7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a7e054aaa660429cbca3c5b0e6c83df"><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a6a7e054aaa660429cbca3c5b0e6c83df">jbuf_capacity</a> = 6</td></tr>
<tr class="separator:a6a7e054aaa660429cbca3c5b0e6c83df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf973963a7840ccbd70ca8f958a8d8fa"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a> = 0</td></tr>
<tr class="separator:adf973963a7840ccbd70ca8f958a8d8fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aac960ea1e1579b3d90c1ab4a3dfe79"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a> = 1</td></tr>
<tr class="separator:a8aac960ea1e1579b3d90c1ab4a3dfe79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a369266c24eacffb87046522897a570d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _GNU_SOURCE&#160;&#160;&#160;/* implicit declaration warning */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00029">29</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9b51ecd9e898c75b7ed6cf9cd5596d1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALL_INVALID_INDEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">idx, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">max&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(idx &lt; 0 || idx &gt;= max)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">46</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00606">toxav_get_call_state()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00587">toxav_get_peer_csettings()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00597">toxav_get_peer_id()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00370">toxav_kill_transmission()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00531">toxav_prepare_audio_frame()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00265">toxav_prepare_transmission()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00446">toxav_prepare_video_frame()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00565">toxav_send_audio()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00507">toxav_send_video()</a>.</p>

</div>
</div>
<a class="anchor" id="ae1b44adfa4b1d57de2dd1d9ba055d816"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ENCODE_TIME_US&#160;&#160;&#160;((1000 / 24) * 1000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00043">43</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00446">toxav_prepare_video_frame()</a>.</p>

</div>
</div>
<a class="anchor" id="af80a3c50ad465fbd07df3d5fc144aa1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOX_DEFINED</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="../../d8/d0e/toxav_8c.html">toxav.c</a></p>
<p>Copyright (C) 2013 Tox project All Rights Reserved.</p>
<p>This file is part of Tox.</p>
<p>Tox is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>Tox is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with Tox. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00026">26</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a9e678c08e286eb1f36ebc7f770354e82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d3/d79/struct_messenger.html">Messenger</a> <a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00027">27</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

</div>
</div>
<a class="anchor" id="aec40f142d19ca255ccdf4097b03ef51e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a>  <a class="el" href="../../d8/d0e/toxav_8c.html#aec40f142d19ca255ccdf4097b03ef51e">ToxAvCall</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac5cf7284cc2e32780c71a7f5f80e3f9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="../../d9/d06/msi_8h.html#abe548d26a24458ebf9ab33310ee19600">MSICSettings</a>* msicsettings_cast </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *&#160;</td>
          <td class="paramname"><em>from</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00089">89</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00240">toxav_answer()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00226">toxav_call()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00255">toxav_change_settings()</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    assert(<span class="keyword">sizeof</span>(<a class="code" href="../../d1/dff/struct___m_s_i_codec_settings.html">MSICSettings</a>) == <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html">ToxAvCSettings</a>));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">const</span> <a class="code" href="../../d1/dff/struct___m_s_i_codec_settings.html">MSICSettings</a> *) from;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_c_settings_html"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html">_ToxAvCSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00121">toxav.h:121</a></div></div>
<div class="ttc" id="struct___m_s_i_codec_settings_html"><div class="ttname"><a href="../../d1/dff/struct___m_s_i_codec_settings.html">_MSICodecSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00057">msi.h:57</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ac5cf7284cc2e32780c71a7f5f80e3f9b_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ac5cf7284cc2e32780c71a7f5f80e3f9b_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ac5cf7284cc2e32780c71a7f5f80e3f9b_icgraph" id="d8/d0e/toxav_8c_ac5cf7284cc2e32780c71a7f5f80e3f9b_icgraph">
<area shape="rect" id="node2" href="../../d9/d82/toxav_8h.html#a71ea4cbf449462254bc5982b810dfe20" title="toxav_answer" alt="" coords="208,5,311,32"/><area shape="rect" id="node4" href="../../d9/d82/toxav_8h.html#a843e5f488e25017d9c7b8acf097e0977" title="toxav_call" alt="" coords="219,56,300,83"/><area shape="rect" id="node6" href="../../d9/d82/toxav_8h.html#a2ad323fd957032a11b1fadd4668f41ee" title="toxav_change_settings" alt="" coords="181,107,337,133"/><area shape="rect" id="node3" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="387,31,490,57"/><area shape="rect" id="node5" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="385,93,492,120"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a593b4b2a8f14139b452f53f9543a18e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_add_av_groupchat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>tox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="../../d3/d79/struct_messenger.html">Messenger</a> *, int, int, const int16_t *, unsigned int, uint8_t, unsigned int, void *)&#160;</td>
          <td class="paramname"><em>audio_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00653">653</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../db/d46/toxav_2group_8c_source.html#l00432">add_av_groupchat()</a>, <a class="el" href="../../d4/d30/_messenger_8h_source.html#l00257">Messenger::group_chat_object</a>, and <a class="el" href="../../d8/dda/messenger__test_8c_source.html#l00044">m</a>.</p>
<div class="fragment"><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="../../d3/d79/struct_messenger.html">Messenger</a> *<a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a> = tox;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/d46/toxav_2group_8c.html#a0cf061415a40de14b1dca48921a6f687">add_av_groupchat</a>(m-&gt;<a class="code" href="../../d3/d79/struct_messenger.html#accf717ba3e14c38e1611b17b78eed25c">group_chat_object</a>, audio_callback, userdata);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div>
<div class="ttc" id="struct_messenger_html_accf717ba3e14c38e1611b17b78eed25c"><div class="ttname"><a href="../../d3/d79/struct_messenger.html#accf717ba3e14c38e1611b17b78eed25c">Messenger::group_chat_object</a></div><div class="ttdeci">void * group_chat_object</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00257">Messenger.h:257</a></div></div>
<div class="ttc" id="toxav_2group_8c_html_a0cf061415a40de14b1dca48921a6f687"><div class="ttname"><a href="../../db/d46/toxav_2group_8c.html#a0cf061415a40de14b1dca48921a6f687">add_av_groupchat</a></div><div class="ttdeci">int add_av_groupchat(Group_Chats *g_c, void(*audio_callback)(Messenger *, int, int, const int16_t *, unsigned int, uint8_t, unsigned int, void *), void *userdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/toxav_2group_8c_source.html#l00432">group.c:432</a></div></div>
<div class="ttc" id="messenger__test_8c_html_aea6eb6c7c30a659f1b0dee83eaf03ea2"><div class="ttname"><a href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a></div><div class="ttdeci">Messenger * m</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dda/messenger__test_8c_source.html#l00044">messenger_test.c:44</a></div></div>
<div class="ttc" id="struct_messenger_html"><div class="ttname"><a href="../../d3/d79/struct_messenger.html">Messenger</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00211">Messenger.h:211</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a593b4b2a8f14139b452f53f9543a18e0_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a593b4b2a8f14139b452f53f9543a18e0_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a593b4b2a8f14139b452f53f9543a18e0_cgraph" id="d8/d0e/toxav_8c_a593b4b2a8f14139b452f53f9543a18e0_cgraph">
<area shape="rect" id="node2" href="../../db/d46/toxav_2group_8c.html#a0cf061415a40de14b1dca48921a6f687" title="add_av_groupchat" alt="" coords="220,717,348,744"/><area shape="rect" id="node3" href="../../df/de9/toxcore_2group_8c.html#a4fa9eb1ad43b7b9026a861bd2b894461" title="add_groupchat" alt="" coords="567,428,673,455"/><area shape="rect" id="node18" href="../../df/de9/toxcore_2group_8c.html#a526817b20616bdf13250e1020d2a1808" title="del_groupchat" alt="" coords="396,717,499,744"/><area shape="rect" id="node34" href="../../db/d46/toxav_2group_8c.html#ab6f2cb7fef697bde984bf67a3036e4d0" title="groupchat_enable_av" alt="" coords="547,1161,693,1188"/><area shape="rect" id="node4" href="../../df/de9/toxcore_2group_8c.html#ad3ec486d9923daaaa99164f1ea392615" title="addpeer" alt="" coords="782,259,850,285"/><area shape="rect" id="node14" href="../../df/de9/toxcore_2group_8c.html#a0a739a733a50acd17a01b9bf0a173d2f" title="create_group_chat" alt="" coords="751,428,881,455"/><area shape="rect" id="node16" href="../../dc/d85/crypto__core_8c.html#a89b4a1a4a7d8bfabdf0e1b60f074e531" title="new_symmetric_key" alt="" coords="745,327,887,353"/><area shape="rect" id="node17" href="../../df/de9/toxcore_2group_8c.html#a43eba3fa6d10b16fba5c35b6a1b55590" title="setnick" alt="" coords="991,563,1055,589"/><area shape="rect" id="node5" href="../../df/de9/toxcore_2group_8c.html#ade699d33c1e5ddc42068c02b5be2120c" title="add_to_closest" alt="" coords="967,309,1078,336"/><area shape="rect" id="node7" href="../../df/de9/toxcore_2group_8c.html#a11d3240a6755f36864ed2b072e826483" title="get_group_c" alt="" coords="1185,892,1278,919"/><area shape="rect" id="node9" href="../../df/de9/toxcore_2group_8c.html#a18b922ce66f2c13f374c3981f369441b" title="get_peer_index" alt="" coords="967,107,1078,133"/><area shape="rect" id="node10" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b" title="id_copy" alt="" coords="989,5,1056,32"/><area shape="rect" id="node11" href="../../df/de9/toxcore_2group_8c.html#ae26131e8118b841386363fb776dfbdc7" title="peer_in_chat" alt="" coords="975,56,1071,83"/><area shape="rect" id="node13" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="1192,411,1271,437"/><area shape="rect" id="node6" href="../../df/de9/toxcore_2group_8c.html#afb13bc1afd72ceb013653353d9a82ac8" title="calculate_comp_value" alt="" coords="1156,309,1307,336"/><area shape="rect" id="node8" href="../../df/de9/toxcore_2group_8c.html#a4ffc6ae8485f94d9177baf65f777c72e" title="groupnumber_not_valid" alt="" coords="1356,689,1512,716"/><area shape="rect" id="node12" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="1196,56,1267,83"/><area shape="rect" id="node15" href="../../df/de9/toxcore_2group_8c.html#a7b1c78c20f59bf1cf3f0713f95d27853" title="realloc_groupchats" alt="" coords="957,461,1088,488"/><area shape="rect" id="node19" href="../../df/de9/toxcore_2group_8c.html#af5df5a0281b502226b702bca064df039" title="group_kill_peer_send" alt="" coords="548,779,692,805"/><area shape="rect" id="node22" href="../../d2/db1/friend__connection_8c.html#a5f311791c0ec4ecd8fdf5359cf7fb95a" title="kill_friend_connection" alt="" coords="547,656,693,683"/><area shape="rect" id="node33" href="../../df/de9/toxcore_2group_8c.html#a7dfafd474418e29ebd804200d0d4e6e3" title="wipe_group_chat" alt="" coords="756,479,876,505"/><area shape="rect" id="node20" href="../../df/de9/toxcore_2group_8c.html#ac302cc1a014208e6d96dbb7c86dd9733" title="send_message_group" alt="" coords="741,849,891,876"/><area shape="rect" id="node21" href="../../df/de9/toxcore_2group_8c.html#a8b14c71c58c2bd20999d0fb1ddd6b0bc" title="send_message_all_close" alt="" coords="939,867,1107,893"/><area shape="rect" id="node23" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="779,580,853,607"/><area shape="rect" id="node25" href="../../db/d79/onion__client_8c.html#a986bc935dff33db8070c431fcd2363eb" title="onion_delfriend" alt="" coords="761,681,871,708"/><area shape="rect" id="node27" href="../../d8/dc6/net__crypto_8c.html#a16c3a0008512675dad8eb00ff1822763" title="crypto_kill" alt="" coords="775,377,857,404"/><area shape="rect" id="node31" href="../../dc/dc1/_d_h_t_8c.html#a4e70f3fc186c6e459908307c935d00b2" title="DHT_delfriend" alt="" coords="763,732,869,759"/><area shape="rect" id="node32" href="../../d2/db1/friend__connection_8c.html#af2c8594ddd6bfd683ee88fcfef107080" title="wipe_friend_conn" alt="" coords="755,631,877,657"/><area shape="rect" id="node24" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="943,613,1102,640"/><area shape="rect" id="node26" href="../../db/d79/onion__client_8c.html#aa5f27f182606ab701dfc948bfb3a1b42" title="realloc_onion_friends" alt="" coords="951,664,1095,691"/><area shape="rect" id="node28" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="1155,183,1308,209"/><area shape="rect" id="node29" href="../../d8/dc6/net__crypto_8c.html#aef6ea83ebc4f62428b09ee74441f6f4b" title="send_kill_packet" alt="" coords="963,157,1082,184"/><area shape="rect" id="node30" href="../../d5/d26/_t_c_p__connection_8c.html#a2369688a49bef46cb2029b3bb680e11d" title="kill_tcp_connection_to" alt="" coords="947,411,1098,437"/><area shape="rect" id="node35" href="../../df/de9/toxcore_2group_8c.html#a3d26dd5b26565b3050268f7dc86f648c" title="callback_groupchat\l_delete" alt="" coords="955,969,1090,1010"/><area shape="rect" id="node36" href="../../df/de9/toxcore_2group_8c.html#a52cfb119bc0747a9b4d4fdd845ce44a0" title="callback_groupchat\l_peer_delete" alt="" coords="955,1034,1090,1075"/><area shape="rect" id="node37" href="../../df/de9/toxcore_2group_8c.html#ac5a08e9cc9e4615a8702b642885b70b2" title="callback_groupchat\l_peer_new" alt="" coords="749,1183,883,1225"/><area shape="rect" id="node38" href="../../db/d46/toxav_2group_8c.html#acd7a116b2bfdcdec0f8ae8036d4409ab" title="group_av_groupchat\l_delete" alt="" coords="747,1301,885,1342"/><area shape="rect" id="node39" href="../../db/d46/toxav_2group_8c.html#afd5524a4c18bdd6237ee9e6d51ee28b2" title="kill_group_av" alt="" coords="973,1337,1072,1364"/><area shape="rect" id="node40" href="../../db/d46/toxav_2group_8c.html#ab699e21ed42c00132d0d2772b2afa56c" title="group_av_peer_delete" alt="" coords="741,1417,891,1444"/><area shape="rect" id="node42" href="../../db/d46/toxav_2group_8c.html#a20ee9ad2437bab6788db23a2968cd86f" title="group_av_peer_new" alt="" coords="747,1132,885,1159"/><area shape="rect" id="node45" href="../../df/de9/toxcore_2group_8c.html#aab3c37b13310ec0d9df5f3209c6fc5ac" title="group_lossy_packet\l_registerhandler" alt="" coords="747,1469,885,1510"/><area shape="rect" id="node46" href="../../df/de9/toxcore_2group_8c.html#add35f9833270b223b9120733e8c161b6" title="group_set_object" alt="" coords="755,1249,877,1276"/><area shape="rect" id="node47" href="../../db/d46/toxav_2group_8c.html#a6b0b3f3f3a9c37f15f4db299b6316e7d" title="handle_group_audio\l_packet" alt="" coords="747,783,885,825"/><area shape="rect" id="node50" href="../../db/d46/toxav_2group_8c.html#a4de99e6cc84e548a5e5dae28e82940fb" title="new_group_av" alt="" coords="763,1081,869,1108"/><area shape="rect" id="node41" href="../../db/d46/toxav_2group_8c.html#aedc085ba3013d83910843ef09dc8e348" title="terminate_queue" alt="" coords="963,1417,1082,1444"/><area shape="rect" id="node43" href="../../db/d46/toxav_2group_8c.html#a45154386c23834ec7a8807572cb7f189" title="create_queue" alt="" coords="973,1151,1073,1177"/><area shape="rect" id="node44" href="../../df/de9/toxcore_2group_8c.html#a450e79abe59f479d322c59b4e7be0184" title="group_peer_set_object" alt="" coords="946,1100,1099,1127"/><area shape="rect" id="node48" href="../../db/d46/toxav_2group_8c.html#a9156785c1b3cbd3de5a526d2ada8dca8" title="decode_audio_packet" alt="" coords="949,765,1097,792"/><area shape="rect" id="node49" href="../../db/d46/toxav_2group_8c.html#a68a463d4df27fc6aa526a57e4bfc889b" title="queue" alt="" coords="994,715,1051,741"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a71ea4cbf449462254bc5982b810dfe20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_answer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *&#160;</td>
          <td class="paramname"><em>csettings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Answer incoming call. Pass the csettings that you will use. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00240">240</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d2/d9b/msi_8c_source.html#l01403">msi_answer()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00089">msicsettings_cast()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00136">in_thread_call()</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/d9b/msi_8c.html#a3cf8337cde29970de207c3c77c953261">msi_answer</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>, call_index, <a class="code" href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b">msicsettings_cast</a>(csettings));</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="ttc" id="toxav_8c_html_ac5cf7284cc2e32780c71a7f5f80e3f9b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b">msicsettings_cast</a></div><div class="ttdeci">static const MSICSettings * msicsettings_cast(const ToxAvCSettings *from)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00089">toxav.c:89</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="msi_8c_html_a3cf8337cde29970de207c3c77c953261"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a3cf8337cde29970de207c3c77c953261">msi_answer</a></div><div class="ttdeci">int msi_answer(MSISession *session, int32_t call_index, const MSICSettings *csettings)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01403">msi.c:1403</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a71ea4cbf449462254bc5982b810dfe20_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a71ea4cbf449462254bc5982b810dfe20_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a71ea4cbf449462254bc5982b810dfe20_cgraph" id="d8/d0e/toxav_8c_a71ea4cbf449462254bc5982b810dfe20_cgraph">
<area shape="rect" id="node2" href="../../d2/d9b/msi_8c.html#a3cf8337cde29970de207c3c77c953261" title="msi_answer" alt="" coords="174,169,266,196"/><area shape="rect" id="node47" href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b" title="msicsettings_cast" alt="" coords="156,220,284,247"/><area shape="rect" id="node3" href="../../d2/d9b/msi_8c.html#ad8cf444077a0744601cf9107fbb6dbb8" title="msi_msg_set_csettings" alt="" coords="332,119,492,145"/><area shape="rect" id="node4" href="../../d2/d9b/msi_8c.html#aed030e510836ee3cc994f84f06a0cc98" title="msi_new_message" alt="" coords="345,169,479,196"/><area shape="rect" id="node5" href="../../d2/d9b/msi_8c.html#ae174427d97e924339f9e2a961ec773a1" title="send_message" alt="" coords="357,220,467,247"/><area shape="rect" id="node6" href="../../d8/d8d/_messenger_8c.html#a2374f56c7aeb5fa6d1a3f1a29bb5016b" title="m_msi_packet" alt="" coords="555,169,662,196"/><area shape="rect" id="node44" href="../../d2/d9b/msi_8c.html#a16a648334fa4007ea0d39927bd89eb0b" title="msi_msg_set_callid" alt="" coords="540,220,677,247"/><area shape="rect" id="node45" href="../../d2/d9b/msi_8c.html#aea77316761ab5ed482dc78f727ee9c76" title="parse_send" alt="" coords="564,271,653,297"/><area shape="rect" id="node7" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="725,169,868,196"/><area shape="rect" id="node8" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="939,119,1053,145"/><area shape="rect" id="node9" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="933,169,1059,196"/><area shape="rect" id="node41" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="916,267,1076,309"/><area shape="rect" id="node10" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2353,216,2507,243"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1124,169,1275,196"/><area shape="rect" id="node11" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2577,209,2715,250"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1323,195,1501,221"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1575,296,1694,323"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1549,245,1720,272"/><area shape="rect" id="node38" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1554,144,1715,171"/><area shape="rect" id="node39" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1331,93,1493,120"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1768,296,1896,323"/><area shape="rect" id="node17" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="3001,340,3167,367"/><area shape="rect" id="node18" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="3023,452,3145,479"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1944,448,2059,475"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2117,499,2287,525"/><area shape="rect" id="node26" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2157,448,2247,475"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2107,616,2297,643"/><area shape="rect" id="node21" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2391,515,2469,541"/><area shape="rect" id="node22" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2345,449,2515,490"/><area shape="rect" id="node23" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2591,515,2701,541"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2571,449,2721,490"/><area shape="rect" id="node24" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2794,507,2937,549"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2363,747,2497,773"/><area shape="rect" id="node30" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2389,616,2471,643"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2368,692,2492,719"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2563,769,2729,810"/><area shape="rect" id="node31" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2575,616,2717,643"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2777,591,2953,633"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2581,565,2711,592"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="3017,573,3151,600"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="3039,624,3129,651"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="3215,573,3416,600"/><area shape="rect" id="node40" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1567,93,1703,120"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1162,297,1237,324"/><area shape="rect" id="node43" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1333,347,1491,373"/><area shape="rect" id="node46" href="../../d2/d9b/msi_8c.html#acd3f86de9a0df45caf147b8a095a89a0" title="format_output" alt="" coords="745,271,848,297"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a71ea4cbf449462254bc5982b810dfe20_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a71ea4cbf449462254bc5982b810dfe20_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a71ea4cbf449462254bc5982b810dfe20_icgraph" id="d8/d0e/toxav_8c_a71ea4cbf449462254bc5982b810dfe20_icgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="156,5,259,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4fde8db9bc925b8b5c4b974d8935daac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_call </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>friend_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *&#160;</td>
          <td class="paramname"><em>csettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ringing_seconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call user. Use its friend_id. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00226">226</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d2/d9b/msi_8c_source.html#l01313">msi_invite()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00089">msicsettings_cast()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00136">in_thread_call()</a>, and <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/d9b/msi_8c.html#a9f714a4729f22ca5810ff0ee89313fab">msi_invite</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>, call_index, <a class="code" href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b">msicsettings_cast</a>(csettings), ringing_seconds * 1000, user);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="ttc" id="toxav_8c_html_ac5cf7284cc2e32780c71a7f5f80e3f9b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b">msicsettings_cast</a></div><div class="ttdeci">static const MSICSettings * msicsettings_cast(const ToxAvCSettings *from)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00089">toxav.c:89</a></div></div>
<div class="ttc" id="msi_8c_html_a9f714a4729f22ca5810ff0ee89313fab"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a9f714a4729f22ca5810ff0ee89313fab">msi_invite</a></div><div class="ttdeci">int msi_invite(MSISession *session, int32_t *call_index, const MSICSettings *csettings, uint32_t rngsec, uint32_t friend_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01313">msi.c:1313</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a4fde8db9bc925b8b5c4b974d8935daac_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a4fde8db9bc925b8b5c4b974d8935daac_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a4fde8db9bc925b8b5c4b974d8935daac_cgraph" id="d8/d0e/toxav_8c_a4fde8db9bc925b8b5c4b974d8935daac_cgraph">
<area shape="rect" id="node2" href="../../d2/d9b/msi_8c.html#a9f714a4729f22ca5810ff0ee89313fab" title="msi_invite" alt="" coords="158,183,239,209"/><area shape="rect" id="node50" href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b" title="msicsettings_cast" alt="" coords="135,233,263,260"/><area shape="rect" id="node3" href="../../d2/d9b/msi_8c.html#ae93f60c5c6d4713db189c4059e36e4c1" title="add_peer" alt="" coords="353,5,428,32"/><area shape="rect" id="node4" href="../../d2/d9b/msi_8c.html#a7a5b1246a4f5680ee60c45e69e04dcd4" title="handle_timeout" alt="" coords="335,56,446,83"/><area shape="rect" id="node8" href="../../d2/d9b/msi_8c.html#aed030e510836ee3cc994f84f06a0cc98" title="msi_new_message" alt="" coords="687,107,822,133"/><area shape="rect" id="node9" href="../../d2/d9b/msi_8c.html#ae174427d97e924339f9e2a961ec773a1" title="send_message" alt="" coords="699,360,810,387"/><area shape="rect" id="node45" href="../../d2/d9b/msi_8c.html#adac49290dc2c80bd0921ffbedb78966f" title="init_call" alt="" coords="357,208,424,235"/><area shape="rect" id="node46" href="../../d2/d9b/msi_8c.html#ad8cf444077a0744601cf9107fbb6dbb8" title="msi_msg_set_csettings" alt="" coords="311,259,471,285"/><area shape="rect" id="node47" href="../../d2/d9b/msi_8c.html#acab20b1c203cf44d500df2307b62ae9c" title="t_randomstr" alt="" coords="345,309,436,336"/><area shape="rect" id="node49" href="../../d2/d9b/msi_8c.html#a0a093063a8a2e48ca88d8d47234415cb" title="timer_alloc" alt="" coords="1090,157,1175,184"/><area shape="rect" id="node5" href="../../d2/d9b/msi_8c.html#af6701ab999e1734c40580997749daf6f" title="invoke_callback" alt="" coords="519,5,633,32"/><area shape="rect" id="node6" href="../../d2/d9b/msi_8c.html#aefbf5f591676d4b56853b21fdf215e69" title="msi_cancel" alt="" coords="532,56,620,83"/><area shape="rect" id="node7" href="../../d2/d9b/msi_8c.html#abc73c78a9121c32f35e4847af962c889" title="msi_msg_set_reason" alt="" coords="681,5,828,32"/><area shape="rect" id="node43" href="../../d2/d9b/msi_8c.html#abf7deacfacdcb5b7cc4cfc163583c40d" title="terminate_call" alt="" coords="703,56,806,83"/><area shape="rect" id="node10" href="../../d8/d8d/_messenger_8c.html#a2374f56c7aeb5fa6d1a3f1a29bb5016b" title="m_msi_packet" alt="" coords="891,411,998,437"/><area shape="rect" id="node40" href="../../d2/d9b/msi_8c.html#a16a648334fa4007ea0d39927bd89eb0b" title="msi_msg_set_callid" alt="" coords="876,309,1013,336"/><area shape="rect" id="node41" href="../../d2/d9b/msi_8c.html#aea77316761ab5ed482dc78f727ee9c76" title="parse_send" alt="" coords="900,360,989,387"/><area shape="rect" id="node11" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="1061,411,1204,437"/><area shape="rect" id="node12" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="1275,411,1389,437"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="1269,360,1395,387"/><area shape="rect" id="node37" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="1252,485,1412,526"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2740,432,2893,459"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1460,360,1611,387"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2955,425,3094,466"/><area shape="rect" id="node17" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1659,411,1837,437"/><area shape="rect" id="node18" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1911,360,2030,387"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1885,461,2056,488"/><area shape="rect" id="node34" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1890,309,2051,336"/><area shape="rect" id="node35" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1667,512,1829,539"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="2104,537,2232,564"/><area shape="rect" id="node21" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2280,588,2445,615"/><area shape="rect" id="node22" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2302,639,2423,665"/><area shape="rect" id="node23" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="2305,537,2420,564"/><area shape="rect" id="node24" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2503,563,2674,589"/><area shape="rect" id="node29" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2544,613,2633,640"/><area shape="rect" id="node30" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2493,672,2684,699"/><area shape="rect" id="node25" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2777,504,2856,531"/><area shape="rect" id="node26" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2732,555,2901,597"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2969,672,3080,699"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2949,555,3100,597"/><area shape="rect" id="node31" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2749,773,2884,800"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2775,621,2858,648"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2755,672,2879,699"/><area shape="rect" id="node36" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1903,512,2039,539"/><area shape="rect" id="node38" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1498,539,1573,565"/><area shape="rect" id="node39" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1669,563,1827,589"/><area shape="rect" id="node42" href="../../d2/d9b/msi_8c.html#acd3f86de9a0df45caf147b8a095a89a0" title="format_output" alt="" coords="1081,360,1184,387"/><area shape="rect" id="node44" href="../../d2/d9b/msi_8c.html#ab6f36f5852629fabd6e3c85451e5be65" title="timer_release" alt="" coords="895,56,995,83"/><area shape="rect" id="node48" href="../../dc/d85/crypto__core_8c.html#a5f13cbe4c46d8801e2c7467068f87306" title="random_int" alt="" coords="533,309,619,336"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a4fde8db9bc925b8b5c4b974d8935daac_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a4fde8db9bc925b8b5c4b974d8935daac_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a4fde8db9bc925b8b5c4b974d8935daac_icgraph" id="d8/d0e/toxav_8c_a4fde8db9bc925b8b5c4b974d8935daac_icgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="137,5,239,32"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="135,56,241,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae0d14b853f586b2e07d2d0ef62efc4eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_cancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancel outgoing request. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00250">250</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d2/d9b/msi_8c_source.html#l01435">msi_cancel()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/d9b/msi_8c.html#aefbf5f591676d4b56853b21fdf215e69">msi_cancel</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>, call_index, peer_id, reason);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="ttc" id="msi_8c_html_aefbf5f591676d4b56853b21fdf215e69"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#aefbf5f591676d4b56853b21fdf215e69">msi_cancel</a></div><div class="ttdeci">int msi_cancel(MSISession *session, int32_t call_index, uint32_t peer, const char *reason)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01435">msi.c:1435</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ae0d14b853f586b2e07d2d0ef62efc4eb_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ae0d14b853f586b2e07d2d0ef62efc4eb_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ae0d14b853f586b2e07d2d0ef62efc4eb_cgraph" id="d8/d0e/toxav_8c_ae0d14b853f586b2e07d2d0ef62efc4eb_cgraph">
<area shape="rect" id="node2" href="../../d2/d9b/msi_8c.html#aefbf5f591676d4b56853b21fdf215e69" title="msi_cancel" alt="" coords="152,107,240,133"/><area shape="rect" id="node3" href="../../d2/d9b/msi_8c.html#abc73c78a9121c32f35e4847af962c889" title="msi_msg_set_reason" alt="" coords="288,31,435,57"/><area shape="rect" id="node4" href="../../d2/d9b/msi_8c.html#aed030e510836ee3cc994f84f06a0cc98" title="msi_new_message" alt="" coords="294,81,429,108"/><area shape="rect" id="node5" href="../../d2/d9b/msi_8c.html#ae174427d97e924339f9e2a961ec773a1" title="send_message" alt="" coords="306,132,417,159"/><area shape="rect" id="node47" href="../../d2/d9b/msi_8c.html#abf7deacfacdcb5b7cc4cfc163583c40d" title="terminate_call" alt="" coords="310,195,413,221"/><area shape="rect" id="node6" href="../../d8/d8d/_messenger_8c.html#a2374f56c7aeb5fa6d1a3f1a29bb5016b" title="m_msi_packet" alt="" coords="498,169,605,196"/><area shape="rect" id="node44" href="../../d2/d9b/msi_8c.html#a16a648334fa4007ea0d39927bd89eb0b" title="msi_msg_set_callid" alt="" coords="483,68,620,95"/><area shape="rect" id="node45" href="../../d2/d9b/msi_8c.html#aea77316761ab5ed482dc78f727ee9c76" title="parse_send" alt="" coords="507,119,596,145"/><area shape="rect" id="node7" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="668,169,811,196"/><area shape="rect" id="node8" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="882,119,995,145"/><area shape="rect" id="node9" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="876,169,1001,196"/><area shape="rect" id="node41" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="859,267,1019,309"/><area shape="rect" id="node10" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2296,216,2449,243"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1067,169,1217,196"/><area shape="rect" id="node11" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2519,209,2658,250"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1265,195,1444,221"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1518,296,1637,323"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1492,245,1663,272"/><area shape="rect" id="node38" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1497,144,1658,171"/><area shape="rect" id="node39" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1274,93,1435,120"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1711,296,1839,323"/><area shape="rect" id="node17" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2944,340,3109,367"/><area shape="rect" id="node18" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2966,452,3087,479"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1887,448,2001,475"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2059,499,2230,525"/><area shape="rect" id="node26" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2100,448,2189,475"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2049,616,2240,643"/><area shape="rect" id="node21" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2333,515,2412,541"/><area shape="rect" id="node22" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2288,449,2457,490"/><area shape="rect" id="node23" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2533,515,2644,541"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2513,449,2664,490"/><area shape="rect" id="node24" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2737,507,2879,549"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2305,747,2440,773"/><area shape="rect" id="node30" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2331,616,2414,643"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2311,692,2435,719"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2505,769,2672,810"/><area shape="rect" id="node31" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2518,616,2659,643"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2720,591,2896,633"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2523,565,2654,592"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="2959,573,3094,600"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="2982,624,3071,651"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="3157,573,3359,600"/><area shape="rect" id="node40" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1509,93,1645,120"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1105,297,1179,324"/><area shape="rect" id="node43" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1275,347,1434,373"/><area shape="rect" id="node46" href="../../d2/d9b/msi_8c.html#acd3f86de9a0df45caf147b8a095a89a0" title="format_output" alt="" coords="688,119,791,145"/><area shape="rect" id="node48" href="../../d2/d9b/msi_8c.html#ab6f36f5852629fabd6e3c85451e5be65" title="timer_release" alt="" coords="501,220,601,247"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ae0d14b853f586b2e07d2d0ef62efc4eb_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ae0d14b853f586b2e07d2d0ef62efc4eb_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ae0d14b853f586b2e07d2d0ef62efc4eb_icgraph" id="d8/d0e/toxav_8c_ae0d14b853f586b2e07d2d0ef62efc4eb_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="152,5,259,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa0c1199d6c03b979810a27ce82751e7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_capability_supported </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#a74db561fc75b482ab0f045a6dd1ac265">ToxAvCapabilities</a>&#160;</td>
          <td class="paramname"><em>capability</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Is certain capability supported. Used to determine if encoding/decoding is ready. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00615">615</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00141">_CSSession::capabilities</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;{</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">return</span> av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[call_index].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a> ? av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[call_index].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#ac9e675ead9b3559ea462414a0016f6a6">capabilities</a> &amp; (<a class="code" href="../../d1/d16/codec_8h.html#a9ad0f479beeeb19d00d4ce7063bed6de">CSCapabilities</a>) capability : 0;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">/* 0 is error here */</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="codec_8h_html_a9ad0f479beeeb19d00d4ce7063bed6de"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a9ad0f479beeeb19d00d4ce7063bed6de">CSCapabilities</a></div><div class="ttdeci">CSCapabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00053">codec.h:53</a></div></div>
<div class="ttc" id="struct___c_s_session_html_ac9e675ead9b3559ea462414a0016f6a6"><div class="ttname"><a href="../../db/de6/struct___c_s_session.html#ac9e675ead9b3559ea462414a0016f6a6">_CSSession::capabilities</a></div><div class="ttdeci">uint64_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00141">codec.h:141</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ad323fd957032a11b1fadd4668f41ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_change_settings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *&#160;</td>
          <td class="paramname"><em>csettings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notify peer that we are changing codec settings. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00255">255</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d2/d9b/msi_8c_source.html#l01542">msi_change_csettings()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00089">msicsettings_cast()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/d9b/msi_8c.html#ad82b81e88f4a912b7ec492baf6ab7ea8">msi_change_csettings</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>, call_index, <a class="code" href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b">msicsettings_cast</a>(csettings));</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="ttc" id="toxav_8c_html_ac5cf7284cc2e32780c71a7f5f80e3f9b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b">msicsettings_cast</a></div><div class="ttdeci">static const MSICSettings * msicsettings_cast(const ToxAvCSettings *from)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00089">toxav.c:89</a></div></div>
<div class="ttc" id="msi_8c_html_ad82b81e88f4a912b7ec492baf6ab7ea8"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#ad82b81e88f4a912b7ec492baf6ab7ea8">msi_change_csettings</a></div><div class="ttdeci">int msi_change_csettings(MSISession *session, int32_t call_index, const MSICSettings *csettings)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01542">msi.c:1542</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a2ad323fd957032a11b1fadd4668f41ee_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a2ad323fd957032a11b1fadd4668f41ee_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a2ad323fd957032a11b1fadd4668f41ee_cgraph" id="d8/d0e/toxav_8c_a2ad323fd957032a11b1fadd4668f41ee_cgraph">
<area shape="rect" id="node2" href="../../d2/d9b/msi_8c.html#ad82b81e88f4a912b7ec492baf6ab7ea8" title="msi_change_csettings" alt="" coords="209,169,361,196"/><area shape="rect" id="node47" href="../../d8/d0e/toxav_8c.html#ac5cf7284cc2e32780c71a7f5f80e3f9b" title="msicsettings_cast" alt="" coords="221,220,349,247"/><area shape="rect" id="node3" href="../../d2/d9b/msi_8c.html#ad8cf444077a0744601cf9107fbb6dbb8" title="msi_msg_set_csettings" alt="" coords="409,119,569,145"/><area shape="rect" id="node4" href="../../d2/d9b/msi_8c.html#aed030e510836ee3cc994f84f06a0cc98" title="msi_new_message" alt="" coords="422,169,557,196"/><area shape="rect" id="node5" href="../../d2/d9b/msi_8c.html#ae174427d97e924339f9e2a961ec773a1" title="send_message" alt="" coords="434,220,545,247"/><area shape="rect" id="node6" href="../../d8/d8d/_messenger_8c.html#a2374f56c7aeb5fa6d1a3f1a29bb5016b" title="m_msi_packet" alt="" coords="633,169,739,196"/><area shape="rect" id="node44" href="../../d2/d9b/msi_8c.html#a16a648334fa4007ea0d39927bd89eb0b" title="msi_msg_set_callid" alt="" coords="617,220,755,247"/><area shape="rect" id="node45" href="../../d2/d9b/msi_8c.html#aea77316761ab5ed482dc78f727ee9c76" title="parse_send" alt="" coords="641,271,731,297"/><area shape="rect" id="node7" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="803,169,945,196"/><area shape="rect" id="node8" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="1017,119,1130,145"/><area shape="rect" id="node9" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="1011,169,1136,196"/><area shape="rect" id="node41" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="993,267,1153,309"/><area shape="rect" id="node10" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2431,216,2584,243"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1201,169,1352,196"/><area shape="rect" id="node11" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2654,209,2793,250"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1400,195,1579,221"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1653,296,1771,323"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1627,245,1797,272"/><area shape="rect" id="node38" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1631,144,1793,171"/><area shape="rect" id="node39" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1409,93,1570,120"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1845,296,1973,323"/><area shape="rect" id="node17" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="3079,340,3244,367"/><area shape="rect" id="node18" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="3101,452,3222,479"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="2021,448,2136,475"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2194,499,2365,525"/><area shape="rect" id="node26" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2235,448,2324,475"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2184,616,2375,643"/><area shape="rect" id="node21" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2468,515,2547,541"/><area shape="rect" id="node22" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2423,449,2592,490"/><area shape="rect" id="node23" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2668,515,2779,541"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2648,449,2799,490"/><area shape="rect" id="node24" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2871,507,3014,549"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2440,747,2575,773"/><area shape="rect" id="node30" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2466,616,2549,643"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2445,692,2569,719"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2640,769,2807,810"/><area shape="rect" id="node31" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2653,616,2794,643"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2855,591,3031,633"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2658,565,2789,592"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="3094,573,3229,600"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="3117,624,3206,651"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="3292,573,3493,600"/><area shape="rect" id="node40" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1644,93,1780,120"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1239,297,1314,324"/><area shape="rect" id="node43" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1410,347,1569,373"/><area shape="rect" id="node46" href="../../d2/d9b/msi_8c.html#acd3f86de9a0df45caf147b8a095a89a0" title="format_output" alt="" coords="823,271,925,297"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a2ad323fd957032a11b1fadd4668f41ee_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a2ad323fd957032a11b1fadd4668f41ee_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a2ad323fd957032a11b1fadd4668f41ee_icgraph" id="d8/d0e/toxav_8c_a2ad323fd957032a11b1fadd4668f41ee_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="209,5,316,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a78b4ac618a3683f06432c06594846121"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void toxav_do </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main loop for the session. Best called right after tox_do(); </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00176">176</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00380">cs_do()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00233">current_time_monotonic()</a>, <a class="el" href="../../d2/d9b/msi_8c_source.html#l00072">end</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00078">_ToxAv::max_calls</a>, <a class="el" href="../../d2/d9b/msi_8c_source.html#l01593">msi_do()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00068">_ToxAvCall::mutex_do</a>, and <a class="el" href="../../d2/d9b/msi_8c_source.html#l00069">start</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="../../d2/d9b/msi_8c.html#a6596ff23a6bcdd19c4fa1985dcc6b257">msi_do</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    uint64_t <a class="code" href="../../d2/d9b/msi_8c.html#ae511d1f1e345bb77cd4120b39679f028a0e97c69c73117f6c0109b2d7d1d9cedc">start</a> = <a class="code" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81">current_time_monotonic</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    uint32_t <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">for</span> (; i &lt; av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">max_calls</a>; i ++) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        pthread_mutex_lock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">if</span> (av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            pthread_mutex_lock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">mutex_do</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            pthread_mutex_unlock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <a class="code" href="../../d5/def/codec_8c.html#a478d9b52aca882a11b160e8bbb50dd74">cs_do</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            pthread_mutex_unlock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">mutex_do</a>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            pthread_mutex_unlock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    uint64_t <a class="code" href="../../d2/d9b/msi_8c.html#ae511d1f1e345bb77cd4120b39679f028a80b1a820e533d7cf0e1715319339e6d0">end</a> = <a class="code" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81">current_time_monotonic</a>();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">/* TODO maybe use variable for sizes */</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    av-&gt;dectmsstotal += end - <a class="code" href="../../d2/d9b/msi_8c.html#ae511d1f1e345bb77cd4120b39679f028a0e97c69c73117f6c0109b2d7d1d9cedc">start</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (++av-&gt;dectmsscount == 3) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        av-&gt;avgdectms = av-&gt;dectmsstotal / 3 + 2 <span class="comment">/* NOTE Magic Offset */</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        av-&gt;dectmsscount = 0;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        av-&gt;dectmsstotal = 0;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="ttc" id="irc__syncbot_8c_html_ae8ecaef140b786a2720eadbb85918e81"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81">current_time_monotonic</a></div><div class="ttdeci">uint64_t current_time_monotonic(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00233">network.c:233</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="msi_8c_html_ae511d1f1e345bb77cd4120b39679f028a0e97c69c73117f6c0109b2d7d1d9cedc"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#ae511d1f1e345bb77cd4120b39679f028a0e97c69c73117f6c0109b2d7d1d9cedc">start</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l00069">msi.c:69</a></div></div>
<div class="ttc" id="msi_8c_html_a6596ff23a6bcdd19c4fa1985dcc6b257"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a6596ff23a6bcdd19c4fa1985dcc6b257">msi_do</a></div><div class="ttdeci">void msi_do(MSISession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01593">msi.c:1593</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_acc4203df7776b6dfe0e5c3922a35e5b0"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">_ToxAvCall::mutex_do</a></div><div class="ttdeci">pthread_mutex_t mutex_do[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00068">toxav.c:68</a></div></div>
<div class="ttc" id="codec_8c_html_a478d9b52aca882a11b160e8bbb50dd74"><div class="ttname"><a href="../../d5/def/codec_8c.html#a478d9b52aca882a11b160e8bbb50dd74">cs_do</a></div><div class="ttdeci">void cs_do(CSSession *cs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00380">codec.c:380</a></div></div>
<div class="ttc" id="struct___tox_av_html_a7d6cf32eb812384ebd4074c588c17499"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">_ToxAv::max_calls</a></div><div class="ttdeci">uint32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00078">toxav.c:78</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="msi_8c_html_ae511d1f1e345bb77cd4120b39679f028a80b1a820e533d7cf0e1715319339e6d0"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#ae511d1f1e345bb77cd4120b39679f028a80b1a820e533d7cf0e1715319339e6d0">end</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l00072">msi.c:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a78b4ac618a3683f06432c06594846121_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a78b4ac618a3683f06432c06594846121_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a78b4ac618a3683f06432c06594846121_cgraph" id="d8/d0e/toxav_8c_a78b4ac618a3683f06432c06594846121_cgraph">
<area shape="rect" id="node2" href="../../d5/def/codec_8c.html#a478d9b52aca882a11b160e8bbb50dd74" title="cs_do" alt="" coords="131,107,189,133"/><area shape="rect" id="node7" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="240,208,401,235"/><area shape="rect" id="node8" href="../../d2/d9b/msi_8c.html#a6596ff23a6bcdd19c4fa1985dcc6b257" title="msi_do" alt="" coords="128,233,192,260"/><area shape="rect" id="node3" href="../../d5/def/codec_8c.html#a6e1ec2c6aa4625da81486a73661df742" title="buffer_empty" alt="" coords="271,5,370,32"/><area shape="rect" id="node4" href="../../d5/def/codec_8c.html#aa27710dac4f829dad6d007cf01bdf55f" title="buffer_read" alt="" coords="277,56,364,83"/><area shape="rect" id="node5" href="../../d5/def/codec_8c.html#a5d946ee1be34a637150e7204137f91ea" title="jbuf_read" alt="" coords="283,107,358,133"/><area shape="rect" id="node6" href="../../d6/d46/rtp_8c.html#a19cbf4e4c2831f2e162e7580bb7d5c7b" title="rtp_free_msg" alt="" coords="271,157,370,184"/><area shape="rect" id="node9" href="../../d2/d9b/msi_8c.html#ab6f36f5852629fabd6e3c85451e5be65" title="timer_release" alt="" coords="271,259,371,285"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a78b4ac618a3683f06432c06594846121_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a78b4ac618a3683f06432c06594846121_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a78b4ac618a3683f06432c06594846121_icgraph" id="d8/d0e/toxav_8c_a78b4ac618a3683f06432c06594846121_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="128,5,235,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a552b5f2c515a0162c7f44e66db707be5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t toxav_do_interval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the interval in milliseconds when the next <a class="el" href="../../d9/d82/toxav_8h.html#a78b4ac618a3683f06432c06594846121">toxav_do()</a> should be called. If no call is active at the moment returns 200. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00157">157</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00124">_CSSession::audio_decoder_frame_duration</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00078">_ToxAv::max_calls</a>, <a class="el" href="../../d8/d3c/util_8h_source.html#l00032">MIN</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    uint32_t rc = 200 + av-&gt;avgdectms; <span class="comment">/* Return 200 if no call is active */</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">for</span> (; i &lt; av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">max_calls</a>; i ++) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        pthread_mutex_lock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">if</span> (av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="comment">/* This should work. Video payload will always come in greater intervals */</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            rc = <a class="code" href="../../d8/d3c/util_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#a245af4e824b82e6e91850ac26ace1230">audio_decoder_frame_duration</a>, rc);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        pthread_mutex_unlock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> rc &lt; av-&gt;avgdectms ? 0 : rc - av-&gt;avgdectms;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___c_s_session_html_a245af4e824b82e6e91850ac26ace1230"><div class="ttname"><a href="../../db/de6/struct___c_s_session.html#a245af4e824b82e6e91850ac26ace1230">_CSSession::audio_decoder_frame_duration</a></div><div class="ttdeci">int audio_decoder_frame_duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00124">codec.h:124</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="struct___tox_av_html_a7d6cf32eb812384ebd4074c588c17499"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">_ToxAv::max_calls</a></div><div class="ttdeci">uint32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00078">toxav.c:78</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="util_8h_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="../../d8/d3c/util_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3c/util_8h_source.html#l00032">util.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a45828173fc8cd78ee9c50390a98ce10d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_get_active_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns number of active calls or -1 on error. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00626">626</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00078">_ToxAv::max_calls</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>.</p>
<div class="fragment"><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;{</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> (!av) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordtype">int</span> rc = 0, <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">max_calls</a>; <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        pthread_mutex_lock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">if</span> (av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) rc++;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        pthread_mutex_unlock(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> rc;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="struct___tox_av_html_a7d6cf32eb812384ebd4074c588c17499"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">_ToxAv::max_calls</a></div><div class="ttdeci">uint32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00078">toxav.c:78</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6217a5aaff6ccbb8768080466613208b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d82/toxav_8h.html#ab2667961717e3fa3f2e13c69d2fec01d">ToxAvCallState</a> toxav_get_call_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get current call state. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00606">606</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d9/d82/toxav_8h_source.html#l00075">av_CallNonExistent</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00128">_MSISession::calls</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, and <a class="el" href="../../d9/d06/msi_8h_source.html#l00103">_MSICall::state</a>.</p>
<div class="fragment"><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;{</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>) || !av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index] )</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#ab2667961717e3fa3f2e13c69d2fec01da26188d2569243c690946efb6140562e7">av_CallNonExistent</a>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">return</span> av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a4a1fc0e5d23dbdc357786d4c69eda9b9">state</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="toxav_8h_html_ab2667961717e3fa3f2e13c69d2fec01da26188d2569243c690946efb6140562e7"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#ab2667961717e3fa3f2e13c69d2fec01da26188d2569243c690946efb6140562e7">av_CallNonExistent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00075">toxav.h:75</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ac40fee673bae4030b812579c57389a02"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">_MSISession::calls</a></div><div class="ttdeci">MSICall ** calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00128">msi.h:128</a></div></div>
<div class="ttc" id="struct___m_s_i_call_html_a4a1fc0e5d23dbdc357786d4c69eda9b9"><div class="ttname"><a href="../../dc/d03/struct___m_s_i_call.html#a4a1fc0e5d23dbdc357786d4c69eda9b9">_MSICall::state</a></div><div class="ttdeci">MSICallState state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00103">msi.h:103</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaa65fd5f05a94ed9abf63c42f5e10ed4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_get_peer_csettings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get codec settings from the peer. These were exchanged during call initialization or when peer send us new csettings. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00587">587</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d9/d82/toxav_8h_source.html#l00089">av_ErrorNoCall</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00087">av_ErrorNone</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00128">_MSISession::calls</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00106">_MSICall::csettings_peer</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00116">_MSICall::peer_count</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00095">toxavcsettings_cast()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00144">callback_peer_cs_change()</a>, and <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00169">callback_self_cs_change()</a>.</p>
<div class="fragment"><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;{</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> ( peer &lt; 0 || <a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>) ||</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            !av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index] || av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a62e9da1e57f84fd224590c4d466724aa">peer_count</a> &lt;= peer )</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    *dest = *<a class="code" href="../../d8/d0e/toxav_8c.html#a8eb45d94b5ed002925b58f36c66426b1">toxavcsettings_cast</a>(&amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a3b7fc70c2772bbdc453eeff763fc0b4c">csettings_peer</a>[peer]);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40">av_ErrorNone</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div>
<div class="ttc" id="struct___m_s_i_call_html_a62e9da1e57f84fd224590c4d466724aa"><div class="ttname"><a href="../../dc/d03/struct___m_s_i_call.html#a62e9da1e57f84fd224590c4d466724aa">_MSICall::peer_count</a></div><div class="ttdeci">uint16_t peer_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00116">msi.h:116</a></div></div>
<div class="ttc" id="toxav_8c_html_a8eb45d94b5ed002925b58f36c66426b1"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a8eb45d94b5ed002925b58f36c66426b1">toxavcsettings_cast</a></div><div class="ttdeci">static const ToxAvCSettings * toxavcsettings_cast(const MSICSettings *from)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00095">toxav.c:95</a></div></div>
<div class="ttc" id="struct___m_s_i_call_html_a3b7fc70c2772bbdc453eeff763fc0b4c"><div class="ttname"><a href="../../dc/d03/struct___m_s_i_call.html#a3b7fc70c2772bbdc453eeff763fc0b4c">_MSICall::csettings_peer</a></div><div class="ttdeci">MSICSettings * csettings_peer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00106">msi.h:106</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00089">toxav.h:89</a></div></div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ac40fee673bae4030b812579c57389a02"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">_MSISession::calls</a></div><div class="ttdeci">MSICall ** calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00128">msi.h:128</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40">av_ErrorNone</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00087">toxav.h:87</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_aaa65fd5f05a94ed9abf63c42f5e10ed4_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_aaa65fd5f05a94ed9abf63c42f5e10ed4_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_aaa65fd5f05a94ed9abf63c42f5e10ed4_cgraph" id="d8/d0e/toxav_8c_aaa65fd5f05a94ed9abf63c42f5e10ed4_cgraph">
<area shape="rect" id="node2" href="../../d8/d0e/toxav_8c.html#a8eb45d94b5ed002925b58f36c66426b1" title="toxavcsettings_cast" alt="" coords="224,5,363,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_aaa65fd5f05a94ed9abf63c42f5e10ed4_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_aaa65fd5f05a94ed9abf63c42f5e10ed4_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_aaa65fd5f05a94ed9abf63c42f5e10ed4_icgraph" id="d8/d0e/toxav_8c_aaa65fd5f05a94ed9abf63c42f5e10ed4_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#a177ecca315a4b526c126e35ab95747a0" title="callback_peer_cs_change" alt="" coords="224,5,396,32"/><area shape="rect" id="node5" href="../../d6/d19/toxav__basic__test_8c.html#a55f0a400c65d34ae3c2bd5cad03eb96e" title="callback_self_cs_change" alt="" coords="226,56,394,83"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#a20d31a781f2f50db76459101b62c5720" title="register_callbacks" alt="" coords="444,31,571,57"/><area shape="rect" id="node4" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="619,31,725,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7de9b3c23c1d6b46b3ed0f2ea3385a7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_get_peer_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get friend id of peer participating in conversation. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00597">597</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d9/d82/toxav_8h_source.html#l00089">av_ErrorNoCall</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00128">_MSISession::calls</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00116">_MSICall::peer_count</a>, and <a class="el" href="../../d9/d06/msi_8h_source.html#l00115">_MSICall::peers</a>.</p>
<div class="fragment"><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;{</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span> ( peer &lt; 0 || <a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>) || !av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            || av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a62e9da1e57f84fd224590c4d466724aa">peer_count</a> &lt;= peer )</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">return</span> av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a55d2568491d616f7fef07bc7137c8c23">peers</a>[peer];</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div>
<div class="ttc" id="struct___m_s_i_call_html_a62e9da1e57f84fd224590c4d466724aa"><div class="ttname"><a href="../../dc/d03/struct___m_s_i_call.html#a62e9da1e57f84fd224590c4d466724aa">_MSICall::peer_count</a></div><div class="ttdeci">uint16_t peer_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00116">msi.h:116</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00089">toxav.h:89</a></div></div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ac40fee673bae4030b812579c57389a02"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">_MSISession::calls</a></div><div class="ttdeci">MSICall ** calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00128">msi.h:128</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="struct___m_s_i_call_html_a55d2568491d616f7fef07bc7137c8c23"><div class="ttname"><a href="../../dc/d03/struct___m_s_i_call.html#a55d2568491d616f7fef07bc7137c8c23">_MSICall::peers</a></div><div class="ttdeci">uint32_t * peers</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00115">msi.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abef2e18b8445840844cb411fa3cd4a49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a>* toxav_get_tox </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns tox reference. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00621">621</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00075">_ToxAv::messenger</a>.</p>
<div class="fragment"><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;{</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d3/d79/struct_messenger.html">Tox</a> *)av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_html_a48342badc24a04d2310ca16ff4a3711b"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">_ToxAv::messenger</a></div><div class="ttdeci">Messenger * messenger</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00075">toxav.c:75</a></div></div>
<div class="ttc" id="struct_messenger_html"><div class="ttname"><a href="../../d3/d79/struct_messenger.html">Messenger</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00211">Messenger.h:211</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad78d09fb2b5ac7b1bd5c2395a7bdb5c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_group_send_audio </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>tox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>groupnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int16_t *&#160;</td>
          <td class="paramname"><em>pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>sample_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00691">691</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d4/d30/_messenger_8h_source.html#l00257">Messenger::group_chat_object</a>, <a class="el" href="../../db/d46/toxav_2group_8c_source.html#l00502">group_send_audio()</a>, and <a class="el" href="../../d8/dda/messenger__test_8c_source.html#l00044">m</a>.</p>
<div class="fragment"><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="../../d3/d79/struct_messenger.html">Messenger</a> *<a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a> = tox;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/d46/toxav_2group_8c.html#abed2d235751a4282d79ff38abc3bf228">group_send_audio</a>(m-&gt;<a class="code" href="../../d3/d79/struct_messenger.html#accf717ba3e14c38e1611b17b78eed25c">group_chat_object</a>, groupnumber, pcm, samples, channels, sample_rate);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;}</div>
<div class="ttc" id="struct_messenger_html_accf717ba3e14c38e1611b17b78eed25c"><div class="ttname"><a href="../../d3/d79/struct_messenger.html#accf717ba3e14c38e1611b17b78eed25c">Messenger::group_chat_object</a></div><div class="ttdeci">void * group_chat_object</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00257">Messenger.h:257</a></div></div>
<div class="ttc" id="messenger__test_8c_html_aea6eb6c7c30a659f1b0dee83eaf03ea2"><div class="ttname"><a href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a></div><div class="ttdeci">Messenger * m</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dda/messenger__test_8c_source.html#l00044">messenger_test.c:44</a></div></div>
<div class="ttc" id="toxav_2group_8c_html_abed2d235751a4282d79ff38abc3bf228"><div class="ttname"><a href="../../db/d46/toxav_2group_8c.html#abed2d235751a4282d79ff38abc3bf228">group_send_audio</a></div><div class="ttdeci">int group_send_audio(Group_Chats *g_c, int groupnumber, const int16_t *pcm, unsigned int samples, uint8_t channels, unsigned int sample_rate)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/toxav_2group_8c_source.html#l00502">group.c:502</a></div></div>
<div class="ttc" id="struct_messenger_html"><div class="ttname"><a href="../../d3/d79/struct_messenger.html">Messenger</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00211">Messenger.h:211</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ad78d09fb2b5ac7b1bd5c2395a7bdb5c6_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ad78d09fb2b5ac7b1bd5c2395a7bdb5c6_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ad78d09fb2b5ac7b1bd5c2395a7bdb5c6_cgraph" id="d8/d0e/toxav_8c_ad78d09fb2b5ac7b1bd5c2395a7bdb5c6_cgraph">
<area shape="rect" id="node2" href="../../db/d46/toxav_2group_8c.html#abed2d235751a4282d79ff38abc3bf228" title="group_send_audio" alt="" coords="220,248,347,275"/><area shape="rect" id="node3" href="../../df/de9/toxcore_2group_8c.html#ad3649b12ed32b2b37f6443e8dfcfb34f" title="group_get_object" alt="" coords="603,223,725,249"/><area shape="rect" id="node6" href="../../db/d46/toxav_2group_8c.html#a6f6806047fdc1625e259d269ae850ac0" title="recreate_encoder" alt="" coords="401,248,523,275"/><area shape="rect" id="node7" href="../../db/d46/toxav_2group_8c.html#a8b24466efb3298dc9fef80bf18485b82" title="send_audio_packet" alt="" coords="395,299,529,325"/><area shape="rect" id="node4" href="../../df/de9/toxcore_2group_8c.html#a11d3240a6755f36864ed2b072e826483" title="get_group_c" alt="" coords="1026,248,1119,275"/><area shape="rect" id="node5" href="../../df/de9/toxcore_2group_8c.html#a4ffc6ae8485f94d9177baf65f777c72e" title="groupnumber_not_valid" alt="" coords="1210,248,1366,275"/><area shape="rect" id="node8" href="../../df/de9/toxcore_2group_8c.html#a7e20618640c4b45fe7f863c87ec2dfda" title="send_group_lossy_packet" alt="" coords="577,299,751,325"/><area shape="rect" id="node9" href="../../df/de9/toxcore_2group_8c.html#a593b5363a3865f21759df2ecc0a8c45a" title="send_lossy_all_close" alt="" coords="799,324,945,351"/><area shape="rect" id="node10" href="../../df/de9/toxcore_2group_8c.html#afb13bc1afd72ceb013653353d9a82ac8" title="calculate_comp_value" alt="" coords="997,299,1148,325"/><area shape="rect" id="node11" href="../../d2/db1/friend__connection_8c.html#a4605fa0bd8ff3f9bd217ee6dcadbfe5f" title="get_friendcon_public_keys" alt="" coords="1200,345,1376,372"/><area shape="rect" id="node14" href="../../df/de9/toxcore_2group_8c.html#ae3bb029450c53089066ace620abfe971" title="send_lossy_group_peer" alt="" coords="993,404,1152,431"/><area shape="rect" id="node12" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1472,375,1547,401"/><area shape="rect" id="node13" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1643,375,1801,401"/><area shape="rect" id="node15" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="1208,397,1368,438"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a7fcdf763c4a1b4b71e0de620b12f074c" title="send_lossy_cryptpacket" alt="" coords="1207,463,1369,489"/><area shape="rect" id="node17" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2259,440,2412,467"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1424,453,1595,480"/><area shape="rect" id="node18" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2482,429,2621,470"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1658,444,1786,471"/><area shape="rect" id="node21" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2907,339,3072,365"/><area shape="rect" id="node22" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2929,12,3050,39"/><area shape="rect" id="node23" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1849,343,1964,369"/><area shape="rect" id="node24" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2022,343,2193,369"/><area shape="rect" id="node30" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2063,292,2152,319"/><area shape="rect" id="node31" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2012,221,2203,248"/><area shape="rect" id="node25" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2296,389,2375,416"/><area shape="rect" id="node26" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2251,323,2420,365"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2496,312,2607,339"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2476,363,2627,405"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2699,305,2842,346"/><area shape="rect" id="node32" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2268,221,2403,248"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2294,159,2377,185"/><area shape="rect" id="node41" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2273,75,2397,101"/><area shape="rect" id="node33" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2468,246,2635,287"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2481,195,2622,221"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2683,111,2859,153"/><area shape="rect" id="node40" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2486,144,2617,171"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="2922,151,3057,177"/><area shape="rect" id="node39" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="2945,100,3034,127"/><area shape="rect" id="node38" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="3120,151,3321,177"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a225958005e20091600e798e9827a5639"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_hangup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hangup active call. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00235">235</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d2/d9b/msi_8c_source.html#l01367">msi_hangup()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00136">in_thread_call()</a>, and <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/d9b/msi_8c.html#a8023a8417a3e79e382a9ff3d99cdd24a">msi_hangup</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>, call_index);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="ttc" id="msi_8c_html_a8023a8417a3e79e382a9ff3d99cdd24a"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a8023a8417a3e79e382a9ff3d99cdd24a">msi_hangup</a></div><div class="ttdeci">int msi_hangup(MSISession *session, int32_t call_index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01367">msi.c:1367</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a225958005e20091600e798e9827a5639_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a225958005e20091600e798e9827a5639_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a225958005e20091600e798e9827a5639_cgraph" id="d8/d0e/toxav_8c_a225958005e20091600e798e9827a5639_cgraph">
<area shape="rect" id="node2" href="../../d2/d9b/msi_8c.html#a8023a8417a3e79e382a9ff3d99cdd24a" title="msi_hangup" alt="" coords="156,233,248,260"/><area shape="rect" id="node3" href="../../d2/d9b/msi_8c.html#a7a5b1246a4f5680ee60c45e69e04dcd4" title="handle_timeout" alt="" coords="296,157,407,184"/><area shape="rect" id="node7" href="../../d2/d9b/msi_8c.html#aed030e510836ee3cc994f84f06a0cc98" title="msi_new_message" alt="" coords="623,208,758,235"/><area shape="rect" id="node8" href="../../d2/d9b/msi_8c.html#ae174427d97e924339f9e2a961ec773a1" title="send_message" alt="" coords="635,259,746,285"/><area shape="rect" id="node50" href="../../d2/d9b/msi_8c.html#a0a093063a8a2e48ca88d8d47234415cb" title="timer_alloc" alt="" coords="309,353,394,380"/><area shape="rect" id="node4" href="../../d2/d9b/msi_8c.html#af6701ab999e1734c40580997749daf6f" title="invoke_callback" alt="" coords="455,107,569,133"/><area shape="rect" id="node5" href="../../d2/d9b/msi_8c.html#aefbf5f591676d4b56853b21fdf215e69" title="msi_cancel" alt="" coords="468,157,556,184"/><area shape="rect" id="node6" href="../../d2/d9b/msi_8c.html#abc73c78a9121c32f35e4847af962c889" title="msi_msg_set_reason" alt="" coords="617,107,764,133"/><area shape="rect" id="node48" href="../../d2/d9b/msi_8c.html#abf7deacfacdcb5b7cc4cfc163583c40d" title="terminate_call" alt="" coords="639,157,742,184"/><area shape="rect" id="node9" href="../../d8/d8d/_messenger_8c.html#a2374f56c7aeb5fa6d1a3f1a29bb5016b" title="m_msi_packet" alt="" coords="827,309,934,336"/><area shape="rect" id="node45" href="../../d2/d9b/msi_8c.html#a16a648334fa4007ea0d39927bd89eb0b" title="msi_msg_set_callid" alt="" coords="812,208,949,235"/><area shape="rect" id="node46" href="../../d2/d9b/msi_8c.html#aea77316761ab5ed482dc78f727ee9c76" title="parse_send" alt="" coords="836,259,925,285"/><area shape="rect" id="node10" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="997,309,1140,336"/><area shape="rect" id="node11" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="1211,280,1325,307"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="1205,169,1331,196"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="1188,331,1348,373"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2625,165,2779,192"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1396,169,1547,196"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2849,158,2987,199"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1595,144,1773,171"/><area shape="rect" id="node17" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1847,93,1966,120"/><area shape="rect" id="node18" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1821,195,1992,221"/><area shape="rect" id="node39" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1826,245,1987,272"/><area shape="rect" id="node40" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1603,296,1765,323"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="2040,245,2168,272"/><area shape="rect" id="node20" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="3273,271,3439,297"/><area shape="rect" id="node21" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="3295,363,3417,389"/><area shape="rect" id="node22" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="2216,397,2331,424"/><area shape="rect" id="node23" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2389,448,2559,475"/><area shape="rect" id="node29" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2429,397,2519,424"/><area shape="rect" id="node30" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2379,549,2569,576"/><area shape="rect" id="node24" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2663,448,2741,475"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2617,382,2787,423"/><area shape="rect" id="node26" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2863,413,2973,440"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2843,347,2993,389"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="3066,406,3209,447"/><area shape="rect" id="node31" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2635,663,2769,689"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2661,549,2743,576"/><area shape="rect" id="node38" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2640,608,2764,635"/><area shape="rect" id="node32" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2835,667,3001,709"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2847,515,2989,541"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="3049,490,3225,531"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2853,464,2983,491"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="3289,497,3423,524"/><area shape="rect" id="node41" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1839,296,1975,323"/><area shape="rect" id="node43" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1434,343,1509,369"/><area shape="rect" id="node44" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1605,347,1763,373"/><area shape="rect" id="node47" href="../../d2/d9b/msi_8c.html#acd3f86de9a0df45caf147b8a095a89a0" title="format_output" alt="" coords="1017,259,1120,285"/><area shape="rect" id="node49" href="../../d2/d9b/msi_8c.html#ab6f36f5852629fabd6e3c85451e5be65" title="timer_release" alt="" coords="831,157,931,184"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a225958005e20091600e798e9827a5639_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a225958005e20091600e798e9827a5639_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a225958005e20091600e798e9827a5639_icgraph" id="d8/d0e/toxav_8c_a225958005e20091600e798e9827a5639_icgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="158,5,261,32"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="156,56,263,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a72a9a86105538f4f702d006185ce0b7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_join_av_groupchat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>tox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>friendnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="../../d3/d79/struct_messenger.html">Messenger</a> *, int, int, const int16_t *, unsigned int, uint8_t, unsigned int, void *)&#160;</td>
          <td class="paramname"><em>audio_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00670">670</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d4/d30/_messenger_8h_source.html#l00257">Messenger::group_chat_object</a>, <a class="el" href="../../db/d46/toxav_2group_8c_source.html#l00454">join_av_groupchat()</a>, and <a class="el" href="../../d8/dda/messenger__test_8c_source.html#l00044">m</a>.</p>
<div class="fragment"><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;{</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="../../d3/d79/struct_messenger.html">Messenger</a> *<a class="code" href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a> = tox;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/d46/toxav_2group_8c.html#a3bb53f02b23ac60cb1e76d3717a4e2e5">join_av_groupchat</a>(m-&gt;<a class="code" href="../../d3/d79/struct_messenger.html#accf717ba3e14c38e1611b17b78eed25c">group_chat_object</a>, friendnumber, <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>, length, audio_callback, userdata);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div>
<div class="ttc" id="struct_messenger_html_accf717ba3e14c38e1611b17b78eed25c"><div class="ttname"><a href="../../d3/d79/struct_messenger.html#accf717ba3e14c38e1611b17b78eed25c">Messenger::group_chat_object</a></div><div class="ttdeci">void * group_chat_object</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00257">Messenger.h:257</a></div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
<div class="ttc" id="messenger__test_8c_html_aea6eb6c7c30a659f1b0dee83eaf03ea2"><div class="ttname"><a href="../../d8/dda/messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a></div><div class="ttdeci">Messenger * m</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dda/messenger__test_8c_source.html#l00044">messenger_test.c:44</a></div></div>
<div class="ttc" id="toxav_2group_8c_html_a3bb53f02b23ac60cb1e76d3717a4e2e5"><div class="ttname"><a href="../../db/d46/toxav_2group_8c.html#a3bb53f02b23ac60cb1e76d3717a4e2e5">join_av_groupchat</a></div><div class="ttdeci">int join_av_groupchat(Group_Chats *g_c, int32_t friendnumber, const uint8_t *data, uint16_t length, void(*audio_callback)(Messenger *, int, int, const int16_t *, unsigned int, uint8_t, unsigned int, void *), void *userdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d46/toxav_2group_8c_source.html#l00454">group.c:454</a></div></div>
<div class="ttc" id="struct_messenger_html"><div class="ttname"><a href="../../d3/d79/struct_messenger.html">Messenger</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00211">Messenger.h:211</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a72a9a86105538f4f702d006185ce0b7e_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a72a9a86105538f4f702d006185ce0b7e_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a72a9a86105538f4f702d006185ce0b7e_cgraph" id="d8/d0e/toxav_8c_a72a9a86105538f4f702d006185ce0b7e_cgraph">
<area shape="rect" id="node2" href="../../db/d46/toxav_2group_8c.html#a3bb53f02b23ac60cb1e76d3717a4e2e5" title="join_av_groupchat" alt="" coords="220,588,347,615"/><area shape="rect" id="node3" href="../../df/de9/toxcore_2group_8c.html#a526817b20616bdf13250e1020d2a1808" title="del_groupchat" alt="" coords="395,588,497,615"/><area shape="rect" id="node20" href="../../db/d46/toxav_2group_8c.html#ab6f2cb7fef697bde984bf67a3036e4d0" title="groupchat_enable_av" alt="" coords="545,1021,691,1048"/><area shape="rect" id="node37" href="../../df/de9/toxcore_2group_8c.html#a6f097de58345cf9500d0413198c583fc" title="join_groupchat" alt="" coords="565,183,671,209"/><area shape="rect" id="node4" href="../../df/de9/toxcore_2group_8c.html#a11d3240a6755f36864ed2b072e826483" title="get_group_c" alt="" coords="1231,689,1325,716"/><area shape="rect" id="node6" href="../../df/de9/toxcore_2group_8c.html#af5df5a0281b502226b702bca064df039" title="group_kill_peer_send" alt="" coords="546,613,690,640"/><area shape="rect" id="node10" href="../../d2/db1/friend__connection_8c.html#a5f311791c0ec4ecd8fdf5359cf7fb95a" title="kill_friend_connection" alt="" coords="980,309,1127,336"/><area shape="rect" id="node18" href="../../df/de9/toxcore_2group_8c.html#a7dfafd474418e29ebd804200d0d4e6e3" title="wipe_group_chat" alt="" coords="765,563,885,589"/><area shape="rect" id="node5" href="../../df/de9/toxcore_2group_8c.html#a4ffc6ae8485f94d9177baf65f777c72e" title="groupnumber_not_valid" alt="" coords="1411,625,1567,652"/><area shape="rect" id="node7" href="../../df/de9/toxcore_2group_8c.html#ac302cc1a014208e6d96dbb7c86dd9733" title="send_message_group" alt="" coords="751,613,900,640"/><area shape="rect" id="node8" href="../../df/de9/toxcore_2group_8c.html#a8b14c71c58c2bd20999d0fb1ddd6b0bc" title="send_message_all_close" alt="" coords="969,613,1137,640"/><area shape="rect" id="node9" href="../../df/de9/toxcore_2group_8c.html#a80236daa3393e2c93424b05ce6f63dcb" title="send_packet_group_peer" alt="" coords="1195,360,1361,387"/><area shape="rect" id="node11" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1241,208,1315,235"/><area shape="rect" id="node13" href="../../db/d79/onion__client_8c.html#a986bc935dff33db8070c431fcd2363eb" title="onion_delfriend" alt="" coords="1223,411,1333,437"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a16c3a0008512675dad8eb00ff1822763" title="crypto_kill" alt="" coords="1237,309,1319,336"/><area shape="rect" id="node16" href="../../dc/dc1/_d_h_t_8c.html#a4e70f3fc186c6e459908307c935d00b2" title="DHT_delfriend" alt="" coords="1225,461,1331,488"/><area shape="rect" id="node17" href="../../d2/db1/friend__connection_8c.html#af2c8594ddd6bfd683ee88fcfef107080" title="wipe_friend_conn" alt="" coords="1217,259,1339,285"/><area shape="rect" id="node12" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1409,233,1568,260"/><area shape="rect" id="node14" href="../../db/d79/onion__client_8c.html#aa5f27f182606ab701dfc948bfb3a1b42" title="realloc_onion_friends" alt="" coords="1417,411,1561,437"/><area shape="rect" id="node19" href="../../df/de9/toxcore_2group_8c.html#a7b1c78c20f59bf1cf3f0713f95d27853" title="realloc_groupchats" alt="" coords="988,512,1119,539"/><area shape="rect" id="node21" href="../../df/de9/toxcore_2group_8c.html#a3d26dd5b26565b3050268f7dc86f648c" title="callback_groupchat\l_delete" alt="" coords="758,743,893,785"/><area shape="rect" id="node22" href="../../df/de9/toxcore_2group_8c.html#a52cfb119bc0747a9b4d4fdd845ce44a0" title="callback_groupchat\l_peer_delete" alt="" coords="758,926,893,967"/><area shape="rect" id="node23" href="../../df/de9/toxcore_2group_8c.html#ac5a08e9cc9e4615a8702b642885b70b2" title="callback_groupchat\l_peer_new" alt="" coords="758,809,893,850"/><area shape="rect" id="node24" href="../../db/d46/toxav_2group_8c.html#acd7a116b2bfdcdec0f8ae8036d4409ab" title="group_av_groupchat\l_delete" alt="" coords="756,1277,895,1318"/><area shape="rect" id="node25" href="../../db/d46/toxav_2group_8c.html#afd5524a4c18bdd6237ee9e6d51ee28b2" title="kill_group_av" alt="" coords="1004,1243,1103,1269"/><area shape="rect" id="node26" href="../../db/d46/toxav_2group_8c.html#ab699e21ed42c00132d0d2772b2afa56c" title="group_av_peer_delete" alt="" coords="751,1343,900,1369"/><area shape="rect" id="node28" href="../../db/d46/toxav_2group_8c.html#a20ee9ad2437bab6788db23a2968cd86f" title="group_av_peer_new" alt="" coords="756,1109,895,1136"/><area shape="rect" id="node31" href="../../df/de9/toxcore_2group_8c.html#aab3c37b13310ec0d9df5f3209c6fc5ac" title="group_lossy_packet\l_registerhandler" alt="" coords="756,1211,895,1253"/><area shape="rect" id="node32" href="../../df/de9/toxcore_2group_8c.html#add35f9833270b223b9120733e8c161b6" title="group_set_object" alt="" coords="765,875,886,901"/><area shape="rect" id="node33" href="../../db/d46/toxav_2group_8c.html#a6b0b3f3f3a9c37f15f4db299b6316e7d" title="handle_group_audio\l_packet" alt="" coords="757,1043,894,1085"/><area shape="rect" id="node36" href="../../db/d46/toxav_2group_8c.html#a4de99e6cc84e548a5e5dae28e82940fb" title="new_group_av" alt="" coords="772,992,879,1019"/><area shape="rect" id="node27" href="../../db/d46/toxav_2group_8c.html#aedc085ba3013d83910843ef09dc8e348" title="terminate_queue" alt="" coords="994,1343,1113,1369"/><area shape="rect" id="node29" href="../../db/d46/toxav_2group_8c.html#a45154386c23834ec7a8807572cb7f189" title="create_queue" alt="" coords="1003,1101,1103,1128"/><area shape="rect" id="node30" href="../../df/de9/toxcore_2group_8c.html#a450e79abe59f479d322c59b4e7be0184" title="group_peer_set_object" alt="" coords="977,1152,1130,1179"/><area shape="rect" id="node34" href="../../db/d46/toxav_2group_8c.html#a9156785c1b3cbd3de5a526d2ada8dca8" title="decode_audio_packet" alt="" coords="979,1000,1127,1027"/><area shape="rect" id="node35" href="../../db/d46/toxav_2group_8c.html#a68a463d4df27fc6aa526a57e4bfc889b" title="queue" alt="" coords="1025,1051,1082,1077"/><area shape="rect" id="node38" href="../../df/de9/toxcore_2group_8c.html#ab48e96a53cc90551754943ce3df01673" title="add_conn_to_groupchat" alt="" coords="745,259,905,285"/><area shape="rect" id="node44" href="../../df/de9/toxcore_2group_8c.html#a0a739a733a50acd17a01b9bf0a173d2f" title="create_group_chat" alt="" coords="761,385,890,412"/><area shape="rect" id="node45" href="../../df/de9/toxcore_2group_8c.html#a9915d747670099a44c1e14b939ea5363" title="get_group_num" alt="" coords="770,183,881,209"/><area shape="rect" id="node46" href="../../d8/d8d/_messenger_8c.html#adde4551a2e1898aab1de8e0b7f7c9792" title="getfriendcon_id" alt="" coords="998,56,1109,83"/><area shape="rect" id="node48" href="../../d8/d8d/_messenger_8c.html#a64b0347daadcf7ef303ab013481b1eb2" title="send_group_invite_packet" alt="" coords="739,9,912,36"/><area shape="rect" id="node50" href="../../df/de9/toxcore_2group_8c.html#a1d102fdae79367ce06e55cda3cd9f441" title="send_peer_query" alt="" coords="993,107,1114,133"/><area shape="rect" id="node39" href="../../d2/db1/friend__connection_8c.html#a15c404d517b4a4fb3976f4d85bfbaef0" title="friend_connection_callbacks" alt="" coords="960,259,1147,285"/><area shape="rect" id="node40" href="../../d2/db1/friend__connection_8c.html#ae9fc0c8cb8838cd5d069e44911c23e63" title="friend_connection_lock" alt="" coords="976,208,1131,235"/><area shape="rect" id="node41" href="../../df/de9/toxcore_2group_8c.html#ac0762dd7405b5b863aca34d0b52d8e98" title="handle_lossy" alt="" coords="1004,461,1103,488"/><area shape="rect" id="node42" href="../../df/de9/toxcore_2group_8c.html#a0b63c2cb5a61d6418705d22a30a8d4ef" title="handle_packet" alt="" coords="1000,360,1107,387"/><area shape="rect" id="node43" href="../../df/de9/toxcore_2group_8c.html#a9efe0d71e9ba46443367bc56788eb94c" title="handle_status" alt="" coords="1002,157,1105,184"/><area shape="rect" id="node47" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="1221,31,1335,57"/><area shape="rect" id="node49" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="982,5,1125,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a10c356c3264067f4e8ebdc1cc7c6d545"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void toxav_kill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove A/V session. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00133">133</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">audio_index</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00069">_ToxAvCall::crtps</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00584">cs_kill()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00078">_ToxAv::max_calls</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00132">_MSISession::messenger_handle</a>, <a class="el" href="../../d2/d9b/msi_8c_source.html#l01273">msi_kill()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>, <a class="el" href="../../d6/d46/rtp_8c_source.html#l00514">rtp_kill()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">video_index</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    uint32_t <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">max_calls</a>; i ++) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> ( av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>] )</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <a class="code" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[audio_index], av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#a2adfe301d17504006b8321f71f642039">messenger_handle</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span> ( av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>] )</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <a class="code" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[video_index], av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#a2adfe301d17504006b8321f71f642039">messenger_handle</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">if</span> ( av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a> )</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f">cs_kill</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        pthread_mutex_destroy(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="../../d2/d9b/msi_8c.html#a85e4f629815819ee2abed82041bd9436">msi_kill</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    free(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    free(av);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="codec_8c_html_addde6ea51851fcce009bb7d45147a88f"><div class="ttname"><a href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f">cs_kill</a></div><div class="ttdeci">void cs_kill(CSSession *cs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00584">codec.c:584</a></div></div>
<div class="ttc" id="toxav_8c_html_a8aac960ea1e1579b3d90c1ab4a3dfe79"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a></div><div class="ttdeci">static const uint8_t video_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00062">toxav.c:62</a></div></div>
<div class="ttc" id="rtp_8c_html_a8e1f9ce4d45738658914f4ef7c3144bc"><div class="ttname"><a href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a></div><div class="ttdeci">void rtp_kill(RTPSession *session, Messenger *messenger)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d46/rtp_8c_source.html#l00514">rtp.c:514</a></div></div>
<div class="ttc" id="struct___tox_av_html_a7d6cf32eb812384ebd4074c588c17499"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">_ToxAv::max_calls</a></div><div class="ttdeci">uint32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00078">toxav.c:78</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a2e84bee4a1898deac1f63f47235378eb"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">_ToxAvCall::crtps</a></div><div class="ttdeci">RTPSession * crtps[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00069">toxav.c:69</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_a2adfe301d17504006b8321f71f642039"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#a2adfe301d17504006b8321f71f642039">_MSISession::messenger_handle</a></div><div class="ttdeci">Messenger * messenger_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00132">msi.h:132</a></div></div>
<div class="ttc" id="toxav_8c_html_adf973963a7840ccbd70ca8f958a8d8fa"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a></div><div class="ttdeci">static const uint8_t audio_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00062">toxav.c:62</a></div></div>
<div class="ttc" id="msi_8c_html_a85e4f629815819ee2abed82041bd9436"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a85e4f629815819ee2abed82041bd9436">msi_kill</a></div><div class="ttdeci">int msi_kill(MSISession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01273">msi.c:1273</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a10c356c3264067f4e8ebdc1cc7c6d545_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a10c356c3264067f4e8ebdc1cc7c6d545_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a10c356c3264067f4e8ebdc1cc7c6d545_cgraph" id="d8/d0e/toxav_8c_a10c356c3264067f4e8ebdc1cc7c6d545_cgraph">
<area shape="rect" id="node2" href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f" title="cs_kill" alt="" coords="135,180,193,207"/><area shape="rect" id="node10" href="../../d2/d9b/msi_8c.html#a85e4f629815819ee2abed82041bd9436" title="msi_kill" alt="" coords="131,332,197,359"/><area shape="rect" id="node49" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc" title="rtp_kill" alt="" coords="134,408,194,435"/><area shape="rect" id="node3" href="../../d5/def/codec_8c.html#a30114dcdaee5519093e2ff87708c92ed" title="buffer_free" alt="" coords="285,129,369,156"/><area shape="rect" id="node7" href="../../d5/def/codec_8c.html#ac44be2f075777b2461178608c0efb36c" title="jbuf_free" alt="" coords="291,180,363,207"/><area shape="rect" id="node4" href="../../d5/def/codec_8c.html#a6b10a945e7d4808b0192ee3b949babd3" title="buffer_clear" alt="" coords="484,129,575,156"/><area shape="rect" id="node5" href="../../d5/def/codec_8c.html#a6e1ec2c6aa4625da81486a73661df742" title="buffer_empty" alt="" coords="670,79,769,105"/><area shape="rect" id="node6" href="../../d5/def/codec_8c.html#aa27710dac4f829dad6d007cf01bdf55f" title="buffer_read" alt="" coords="676,129,763,156"/><area shape="rect" id="node8" href="../../d5/def/codec_8c.html#a2ab3636512ac576d996c504f9226108d" title="jbuf_clear" alt="" coords="490,180,569,207"/><area shape="rect" id="node9" href="../../d6/d46/rtp_8c.html#a19cbf4e4c2831f2e162e7580bb7d5c7b" title="rtp_free_msg" alt="" coords="670,180,769,207"/><area shape="rect" id="node11" href="../../d8/d8d/_messenger_8c.html#a6f1431ef7ea09d3bac1b93f4dfa75764" title="m_callback_msi_packet" alt="" coords="245,281,408,308"/><area shape="rect" id="node12" href="../../d2/d9b/msi_8c.html#aefbf5f591676d4b56853b21fdf215e69" title="msi_cancel" alt="" coords="283,332,371,359"/><area shape="rect" id="node48" href="../../d2/d9b/msi_8c.html#a4d2aa9bfe7f4a96275204f2797d6e7eb" title="msi_stopcall" alt="" coords="279,383,374,409"/><area shape="rect" id="node13" href="../../d2/d9b/msi_8c.html#abc73c78a9121c32f35e4847af962c889" title="msi_msg_set_reason" alt="" coords="456,231,603,257"/><area shape="rect" id="node14" href="../../d2/d9b/msi_8c.html#aed030e510836ee3cc994f84f06a0cc98" title="msi_new_message" alt="" coords="462,281,597,308"/><area shape="rect" id="node15" href="../../d2/d9b/msi_8c.html#ae174427d97e924339f9e2a961ec773a1" title="send_message" alt="" coords="474,332,585,359"/><area shape="rect" id="node46" href="../../d2/d9b/msi_8c.html#abf7deacfacdcb5b7cc4cfc163583c40d" title="terminate_call" alt="" coords="478,383,581,409"/><area shape="rect" id="node16" href="../../d8/d8d/_messenger_8c.html#a2374f56c7aeb5fa6d1a3f1a29bb5016b" title="m_msi_packet" alt="" coords="666,231,773,257"/><area shape="rect" id="node43" href="../../d2/d9b/msi_8c.html#a16a648334fa4007ea0d39927bd89eb0b" title="msi_msg_set_callid" alt="" coords="651,281,788,308"/><area shape="rect" id="node44" href="../../d2/d9b/msi_8c.html#aea77316761ab5ed482dc78f727ee9c76" title="parse_send" alt="" coords="675,332,764,359"/><area shape="rect" id="node17" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="843,277,985,304"/><area shape="rect" id="node18" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="1063,364,1177,391"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="1057,161,1183,188"/><area shape="rect" id="node40" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="1040,285,1200,326"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2528,168,2681,195"/><area shape="rect" id="node22" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1248,161,1399,188"/><area shape="rect" id="node21" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2737,161,2876,202"/><area shape="rect" id="node23" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1447,144,1625,171"/><area shape="rect" id="node24" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1699,93,1818,120"/><area shape="rect" id="node25" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1673,195,1844,221"/><area shape="rect" id="node37" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1678,245,1839,272"/><area shape="rect" id="node38" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1455,296,1617,323"/><area shape="rect" id="node26" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1892,245,2020,272"/><area shape="rect" id="node27" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2068,245,2233,272"/><area shape="rect" id="node28" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2090,296,2211,323"/><area shape="rect" id="node29" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="2093,347,2208,373"/><area shape="rect" id="node30" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2291,296,2462,323"/><area shape="rect" id="node34" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2332,347,2421,373"/><area shape="rect" id="node35" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2281,397,2472,424"/><area shape="rect" id="node31" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2565,241,2644,268"/><area shape="rect" id="node32" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2520,293,2689,334"/><area shape="rect" id="node33" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2751,329,2862,356"/><area shape="rect" id="node36" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2537,409,2672,436"/><area shape="rect" id="node39" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1691,296,1827,323"/><area shape="rect" id="node41" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1286,311,1361,337"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1457,347,1615,373"/><area shape="rect" id="node45" href="../../d2/d9b/msi_8c.html#acd3f86de9a0df45caf147b8a095a89a0" title="format_output" alt="" coords="863,332,965,359"/><area shape="rect" id="node47" href="../../d2/d9b/msi_8c.html#ab6f36f5852629fabd6e3c85451e5be65" title="timer_release" alt="" coords="669,383,769,409"/><area shape="rect" id="node50" href="../../d8/d8d/_messenger_8c.html#a536d47dbfa35fb02c78068e1d11a1d2a" title="m_callback_rtp_packet" alt="" coords="836,391,992,417"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeef2a0ed5e716e7449d3f1c6053e31af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_kill_transmission </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clears transmission data. Call this at the end of the transmission. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00370">370</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">audio_index</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00090">av_ErrorInvalidState</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00089">av_ErrorNoCall</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00087">av_ErrorNone</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00069">_ToxAvCall::crtps</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00584">cs_kill()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00089">LOGGER_WARNING</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00075">_ToxAv::messenger</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00068">_ToxAvCall::mutex_do</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00066">_ToxAvCall::mutex_encoding_audio</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00067">_ToxAvCall::mutex_encoding_video</a>, <a class="el" href="../../d6/d46/rtp_8c_source.html#l00514">rtp_kill()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">video_index</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00136">in_thread_call()</a>, and <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;{</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>)) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Invalid call index: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="../../db/d9e/struct___tox_av_call.html">ToxAvCall</a> *call = &amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[call_index];</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (!call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Action on inactive call: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a> = 0;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">mutex_encoding_audio</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">mutex_encoding_audio</a>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">mutex_do</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">mutex_do</a>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>], av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>] = NULL;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>], av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>] = NULL;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <a class="code" href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f">cs_kill</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a> = NULL;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    pthread_mutex_destroy(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">mutex_encoding_audio</a>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    pthread_mutex_destroy(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    pthread_mutex_destroy(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">mutex_do</a>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40">av_ErrorNone</a>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="logger_8h_html_ab3e970f3c1ecb5b71f17eccee4ebb286"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a></div><div class="ttdeci">#define LOGGER_WARNING(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00089">logger.h:89</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00089">toxav.h:89</a></div></div>
<div class="ttc" id="struct___tox_av_html_a48342badc24a04d2310ca16ff4a3711b"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">_ToxAv::messenger</a></div><div class="ttdeci">Messenger * messenger</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00075">toxav.c:75</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_acc4203df7776b6dfe0e5c3922a35e5b0"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">_ToxAvCall::mutex_do</a></div><div class="ttdeci">pthread_mutex_t mutex_do[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00068">toxav.c:68</a></div></div>
<div class="ttc" id="codec_8c_html_addde6ea51851fcce009bb7d45147a88f"><div class="ttname"><a href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f">cs_kill</a></div><div class="ttdeci">void cs_kill(CSSession *cs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00584">codec.c:584</a></div></div>
<div class="ttc" id="toxav_8c_html_a8aac960ea1e1579b3d90c1ab4a3dfe79"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a></div><div class="ttdeci">static const uint8_t video_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00062">toxav.c:62</a></div></div>
<div class="ttc" id="rtp_8c_html_a8e1f9ce4d45738658914f4ef7c3144bc"><div class="ttname"><a href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a></div><div class="ttdeci">void rtp_kill(RTPSession *session, Messenger *messenger)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d46/rtp_8c_source.html#l00514">rtp.c:514</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a89e9fe0c3fef08c502e53ad423dccc34"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">_ToxAvCall::mutex_encoding_video</a></div><div class="ttdeci">pthread_mutex_t mutex_encoding_video[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00067">toxav.c:67</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ac4c859b6e4ff8e175151fbd0a763e414"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">_ToxAvCall::mutex_encoding_audio</a></div><div class="ttdeci">pthread_mutex_t mutex_encoding_audio[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00066">toxav.c:66</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a2e84bee4a1898deac1f63f47235378eb"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">_ToxAvCall::crtps</a></div><div class="ttdeci">RTPSession * crtps[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00069">toxav.c:69</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40">av_ErrorNone</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00087">toxav.h:87</a></div></div>
<div class="ttc" id="toxav_8c_html_adf973963a7840ccbd70ca8f958a8d8fa"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a></div><div class="ttdeci">static const uint8_t audio_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00062">toxav.c:62</a></div></div>
<div class="ttc" id="struct___tox_av_call_html"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00064">toxav.c:64</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00090">toxav.h:90</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_aeef2a0ed5e716e7449d3f1c6053e31af_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_aeef2a0ed5e716e7449d3f1c6053e31af_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_aeef2a0ed5e716e7449d3f1c6053e31af_cgraph" id="d8/d0e/toxav_8c_aeef2a0ed5e716e7449d3f1c6053e31af_cgraph">
<area shape="rect" id="node2" href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f" title="cs_kill" alt="" coords="213,107,271,133"/><area shape="rect" id="node10" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc" title="rtp_kill" alt="" coords="212,157,272,184"/><area shape="rect" id="node3" href="../../d5/def/codec_8c.html#a30114dcdaee5519093e2ff87708c92ed" title="buffer_free" alt="" coords="356,56,440,83"/><area shape="rect" id="node7" href="../../d5/def/codec_8c.html#ac44be2f075777b2461178608c0efb36c" title="jbuf_free" alt="" coords="362,107,434,133"/><area shape="rect" id="node4" href="../../d5/def/codec_8c.html#a6b10a945e7d4808b0192ee3b949babd3" title="buffer_clear" alt="" coords="535,56,626,83"/><area shape="rect" id="node5" href="../../d5/def/codec_8c.html#a6e1ec2c6aa4625da81486a73661df742" title="buffer_empty" alt="" coords="685,5,784,32"/><area shape="rect" id="node6" href="../../d5/def/codec_8c.html#aa27710dac4f829dad6d007cf01bdf55f" title="buffer_read" alt="" coords="691,56,778,83"/><area shape="rect" id="node8" href="../../d5/def/codec_8c.html#a2ab3636512ac576d996c504f9226108d" title="jbuf_clear" alt="" coords="541,107,620,133"/><area shape="rect" id="node9" href="../../d6/d46/rtp_8c.html#a19cbf4e4c2831f2e162e7580bb7d5c7b" title="rtp_free_msg" alt="" coords="685,107,784,133"/><area shape="rect" id="node11" href="../../d8/d8d/_messenger_8c.html#a536d47dbfa35fb02c78068e1d11a1d2a" title="m_callback_rtp_packet" alt="" coords="320,157,476,184"/><area shape="rect" id="node12" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="524,157,637,184"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_aeef2a0ed5e716e7449d3f1c6053e31af_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_aeef2a0ed5e716e7449d3f1c6053e31af_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_aeef2a0ed5e716e7449d3f1c6053e31af_icgraph" id="d8/d0e/toxav_8c_aeef2a0ed5e716e7449d3f1c6053e31af_icgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="214,5,317,32"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="212,56,319,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab5565a6110643c428b28b2c79fb47b08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a>* toxav_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>messenger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>max_calls</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start new A/V session. There can only be one session at the time. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00102">102</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d9/d06/msi_8h_source.html#l00131">_MSISession::agent_handler</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../de/df1/util_8c_source.html#l00173">create_recursive_mutex()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00089">LOGGER_WARNING</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00078">_ToxAv::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00075">_ToxAv::messenger</a>, <a class="el" href="../../d2/d9b/msi_8c_source.html#l01273">msi_kill()</a>, <a class="el" href="../../d2/d9b/msi_8c_source.html#l01202">msi_new()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="../../d4/d43/struct___tox_av.html">ToxAv</a> *av = calloc ( <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d43/struct___tox_av.html">ToxAv</a>), 1);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span> (av == NULL) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Allocation failed!&quot;</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a> = (<a class="code" href="../../d3/d79/struct_messenger.html">Messenger</a> *)messenger;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a> = <a class="code" href="../../d2/d9b/msi_8c.html#af33f2706f6d0f8e547716e2f6c5f68d3">msi_new</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>, max_calls);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae284478ea42e8d4ed283876c3ae18c8a">agent_handler</a> = av;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a> = calloc(<span class="keyword">sizeof</span>(<a class="code" href="../../db/d9e/struct___tox_av_call.html">ToxAvCall</a>), max_calls);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">max_calls</a> = max_calls;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; max_calls; ++<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/df1/util_8c.html#a2f0ae269c015342e2d29a251237ccce2">create_recursive_mutex</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[i].<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>) != 0 ) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Failed to init call(%u) mutex!&quot;</span>, i);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <a class="code" href="../../d2/d9b/msi_8c.html#a85e4f629815819ee2abed82041bd9436">msi_kill</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            free(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            free(av);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> av;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="struct___tox_av_html"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html">_ToxAv</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00074">toxav.c:74</a></div></div>
<div class="ttc" id="util_8c_html_a2f0ae269c015342e2d29a251237ccce2"><div class="ttname"><a href="../../de/df1/util_8c.html#a2f0ae269c015342e2d29a251237ccce2">create_recursive_mutex</a></div><div class="ttdeci">int create_recursive_mutex(pthread_mutex_t *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00173">util.c:173</a></div></div>
<div class="ttc" id="logger_8h_html_ab3e970f3c1ecb5b71f17eccee4ebb286"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a></div><div class="ttdeci">#define LOGGER_WARNING(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00089">logger.h:89</a></div></div>
<div class="ttc" id="struct___tox_av_html_a48342badc24a04d2310ca16ff4a3711b"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">_ToxAv::messenger</a></div><div class="ttdeci">Messenger * messenger</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00075">toxav.c:75</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="msi_8c_html_af33f2706f6d0f8e547716e2f6c5f68d3"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#af33f2706f6d0f8e547716e2f6c5f68d3">msi_new</a></div><div class="ttdeci">MSISession * msi_new(Messenger *messenger, int32_t max_calls)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01202">msi.c:1202</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae284478ea42e8d4ed283876c3ae18c8a"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae284478ea42e8d4ed283876c3ae18c8a">_MSISession::agent_handler</a></div><div class="ttdeci">void * agent_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00131">msi.h:131</a></div></div>
<div class="ttc" id="struct___tox_av_html_a7d6cf32eb812384ebd4074c588c17499"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a7d6cf32eb812384ebd4074c588c17499">_ToxAv::max_calls</a></div><div class="ttdeci">uint32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00078">toxav.c:78</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="struct_messenger_html"><div class="ttname"><a href="../../d3/d79/struct_messenger.html">Messenger</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00211">Messenger.h:211</a></div></div>
<div class="ttc" id="struct___tox_av_call_html"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00064">toxav.c:64</a></div></div>
<div class="ttc" id="msi_8c_html_a85e4f629815819ee2abed82041bd9436"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a85e4f629815819ee2abed82041bd9436">msi_kill</a></div><div class="ttdeci">int msi_kill(MSISession *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01273">msi.c:1273</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ab5565a6110643c428b28b2c79fb47b08_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ab5565a6110643c428b28b2c79fb47b08_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ab5565a6110643c428b28b2c79fb47b08_cgraph" id="d8/d0e/toxav_8c_ab5565a6110643c428b28b2c79fb47b08_cgraph">
<area shape="rect" id="node2" href="../../de/df1/util_8c.html#a2f0ae269c015342e2d29a251237ccce2" title="create_recursive_mutex" alt="" coords="278,721,439,748"/><area shape="rect" id="node3" href="../../d2/d9b/msi_8c.html#a85e4f629815819ee2abed82041bd9436" title="msi_kill" alt="" coords="143,224,209,251"/><area shape="rect" id="node24" href="../../d2/d9b/msi_8c.html#af33f2706f6d0f8e547716e2f6c5f68d3" title="msi_new" alt="" coords="139,401,213,428"/><area shape="rect" id="node4" href="../../d8/d8d/_messenger_8c.html#a6f1431ef7ea09d3bac1b93f4dfa75764" title="m_callback_msi_packet" alt="" coords="277,72,440,99"/><area shape="rect" id="node5" href="../../d2/d9b/msi_8c.html#aefbf5f591676d4b56853b21fdf215e69" title="msi_cancel" alt="" coords="942,731,1030,757"/><area shape="rect" id="node23" href="../../d2/d9b/msi_8c.html#a4d2aa9bfe7f4a96275204f2797d6e7eb" title="msi_stopcall" alt="" coords="525,5,620,32"/><area shape="rect" id="node6" href="../../d2/d9b/msi_8c.html#abc73c78a9121c32f35e4847af962c889" title="msi_msg_set_reason" alt="" coords="1112,781,1259,808"/><area shape="rect" id="node7" href="../../d2/d9b/msi_8c.html#aed030e510836ee3cc994f84f06a0cc98" title="msi_new_message" alt="" coords="1118,731,1253,757"/><area shape="rect" id="node8" href="../../d2/d9b/msi_8c.html#ae174427d97e924339f9e2a961ec773a1" title="send_message" alt="" coords="1130,680,1241,707"/><area shape="rect" id="node21" href="../../d2/d9b/msi_8c.html#abf7deacfacdcb5b7cc4cfc163583c40d" title="terminate_call" alt="" coords="1134,325,1237,352"/><area shape="rect" id="node9" href="../../d8/d8d/_messenger_8c.html#a2374f56c7aeb5fa6d1a3f1a29bb5016b" title="m_msi_packet" alt="" coords="1329,705,1435,732"/><area shape="rect" id="node18" href="../../d2/d9b/msi_8c.html#a16a648334fa4007ea0d39927bd89eb0b" title="msi_msg_set_callid" alt="" coords="1313,756,1451,783"/><area shape="rect" id="node19" href="../../d2/d9b/msi_8c.html#aea77316761ab5ed482dc78f727ee9c76" title="parse_send" alt="" coords="1337,655,1427,681"/><area shape="rect" id="node10" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="1499,769,1641,796"/><area shape="rect" id="node11" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="1713,799,1826,825"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="1707,885,1832,912"/><area shape="rect" id="node16" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="1689,733,1849,774"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2100,911,2253,937"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1897,936,2048,963"/><area shape="rect" id="node15" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="2096,969,2257,996"/><area shape="rect" id="node17" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1935,740,2010,767"/><area shape="rect" id="node20" href="../../d2/d9b/msi_8c.html#acd3f86de9a0df45caf147b8a095a89a0" title="format_output" alt="" coords="1519,655,1621,681"/><area shape="rect" id="node22" href="../../d2/d9b/msi_8c.html#ab6f36f5852629fabd6e3c85451e5be65" title="timer_release" alt="" coords="1332,325,1432,352"/><area shape="rect" id="node25" href="../../d2/d9b/msi_8c.html#a4d438c93388bdd8b338bd50632144de5" title="handle_remote_connection\l_change" alt="" coords="689,107,867,149"/><area shape="rect" id="node27" href="../../d8/d8d/_messenger_8c.html#a306c3602085500d8d23adbd52ac59006" title="m_callback_connectionstatus\l_internal_av" alt="" coords="261,655,456,697"/><area shape="rect" id="node28" href="../../d2/d9b/msi_8c.html#aa944624a15314d9d2eff6373f9506725" title="msi_handle_packet" alt="" coords="291,401,426,428"/><area shape="rect" id="node26" href="../../d2/d9b/msi_8c.html#af6701ab999e1734c40580997749daf6f" title="invoke_callback" alt="" coords="929,325,1043,352"/><area shape="rect" id="node29" href="../../d2/d9b/msi_8c.html#aecbf66ee30b2ec4003caed2455e4c02d" title="find_call" alt="" coords="537,376,608,403"/><area shape="rect" id="node30" href="../../d2/d9b/msi_8c.html#ac97b77c7ecac429b769a3e7b54047d1f" title="handle_recv_cancel" alt="" coords="709,224,847,251"/><area shape="rect" id="node31" href="../../d2/d9b/msi_8c.html#a94cb98234fb1cdeffe8ad8b8601c8dc9" title="handle_recv_end" alt="" coords="718,528,838,555"/><area shape="rect" id="node33" href="../../d2/d9b/msi_8c.html#ae71247b244dc60d6f5ce9de8b26365db" title="handle_recv_ending" alt="" coords="709,325,847,352"/><area shape="rect" id="node34" href="../../d2/d9b/msi_8c.html#aa2af3e4ed6abb65d7b747763a41a1b70" title="handle_recv_error" alt="" coords="715,173,841,200"/><area shape="rect" id="node35" href="../../d2/d9b/msi_8c.html#a6c1d69163b2cfedea11ed5ed688dc669" title="handle_recv_invite" alt="" coords="713,832,843,859"/><area shape="rect" id="node43" href="../../d2/d9b/msi_8c.html#adab5cbd8d80ff38f19008ee3fec808b8" title="handle_recv_reject" alt="" coords="713,477,843,504"/><area shape="rect" id="node44" href="../../d2/d9b/msi_8c.html#ac4fd005ce0f0c990e7982acd92e341e3" title="handle_recv_ringing" alt="" coords="504,579,641,605"/><area shape="rect" id="node47" href="../../d2/d9b/msi_8c.html#a4d75b79b31c9451a723522b891ec75fd" title="handle_recv_start" alt="" coords="510,427,635,453"/><area shape="rect" id="node48" href="../../d2/d9b/msi_8c.html#ada9b9ef63c3c73e22b672d7cfb5bd6a3" title="handle_recv_starting" alt="" coords="707,629,849,656"/><area shape="rect" id="node49" href="../../d2/d9b/msi_8c.html#a7941e06f6114e6d26a9c0538c941eb8a" title="parse_recv" alt="" coords="529,275,616,301"/><area shape="rect" id="node32" href="../../d2/d9b/msi_8c.html#aeac54d94bd4b3bfceab3a080cbf5e100" title="send_reponse" alt="" coords="935,629,1037,656"/><area shape="rect" id="node36" href="../../d2/d9b/msi_8c.html#ae93f60c5c6d4713db189c4059e36e4c1" title="add_peer" alt="" coords="949,933,1023,960"/><area shape="rect" id="node37" href="../../d2/d9b/msi_8c.html#a9511a4026ab002ee24e988df1829f67b" title="call_id_bigger" alt="" coords="935,984,1037,1011"/><area shape="rect" id="node38" href="../../d2/d9b/msi_8c.html#a92f71169666532a395aa396591e0426e" title="flush_peer_csettings" alt="" coords="915,883,1057,909"/><area shape="rect" id="node40" href="../../d2/d9b/msi_8c.html#adac49290dc2c80bd0921ffbedb78966f" title="init_call" alt="" coords="953,1035,1019,1061"/><area shape="rect" id="node41" href="../../d2/d9b/msi_8c.html#a61759c89740aba4cdeea164816115d32" title="send_error" alt="" coords="945,832,1027,859"/><area shape="rect" id="node39" href="../../d2/d9b/msi_8c.html#a1d6d84b54016402734b0bc352f654699" title="msi_msg_get_csettings" alt="" coords="1105,883,1265,909"/><area shape="rect" id="node42" href="../../d2/d9b/msi_8c.html#af3fb90754ded4536f9314f5d48e477e5" title="stringify_error" alt="" coords="1135,832,1236,859"/><area shape="rect" id="node45" href="../../d2/d9b/msi_8c.html#a7a5b1246a4f5680ee60c45e69e04dcd4" title="handle_timeout" alt="" coords="723,579,833,605"/><area shape="rect" id="node46" href="../../d2/d9b/msi_8c.html#a0a093063a8a2e48ca88d8d47234415cb" title="timer_alloc" alt="" coords="1527,1076,1613,1103"/><area shape="rect" id="node50" href="../../d2/d9b/msi_8c.html#af39b54cd1086b4efb315083874e5e9ed" title="parse_raw_data" alt="" coords="721,275,835,301"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ab5565a6110643c428b28b2c79fb47b08_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ab5565a6110643c428b28b2c79fb47b08_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ab5565a6110643c428b28b2c79fb47b08_icgraph" id="d8/d0e/toxav_8c_ab5565a6110643c428b28b2c79fb47b08_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="139,5,245,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a64caf285a2ad7cadf24263e0f8f7a507"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_prepare_audio_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dest_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int16_t *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frame_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encode audio frame. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00531">531</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00114">_CSSession::audio_encoder</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00098">av_ErrorEncodingAudio</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00090">av_ErrorInvalidState</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00089">av_ErrorNoCall</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00090">LOGGER_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00089">LOGGER_WARNING</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00066">_ToxAvCall::mutex_encoding_audio</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00136">in_thread_call()</a>, and <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>)) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Action on nonexisting call: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="../../db/d9e/struct___tox_av_call.html">ToxAvCall</a> *call = &amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[call_index];</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">if</span> (!call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Action on inactive call: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">mutex_encoding_audio</a>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    int32_t rc = opus_encode(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#a8c1fa3d73f3426ba5cac83857c390ebc">audio_encoder</a>, frame, frame_size, dest, dest_max);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">mutex_encoding_audio</a>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Failed to encode payload: %s\n&quot;</span>, opus_strerror(rc));</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a9f291c07429420c79a3478cab526b84b">av_ErrorEncodingAudio</a>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> rc;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="logger_8h_html_ab3e970f3c1ecb5b71f17eccee4ebb286"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a></div><div class="ttdeci">#define LOGGER_WARNING(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00089">logger.h:89</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00089">toxav.h:89</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a9f291c07429420c79a3478cab526b84b"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a9f291c07429420c79a3478cab526b84b">av_ErrorEncodingAudio</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00098">toxav.h:98</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ac4c859b6e4ff8e175151fbd0a763e414"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">_ToxAvCall::mutex_encoding_audio</a></div><div class="ttdeci">pthread_mutex_t mutex_encoding_audio[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00066">toxav.c:66</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="struct___c_s_session_html_a8c1fa3d73f3426ba5cac83857c390ebc"><div class="ttname"><a href="../../db/de6/struct___c_s_session.html#a8c1fa3d73f3426ba5cac83857c390ebc">_CSSession::audio_encoder</a></div><div class="ttdeci">OpusEncoder * audio_encoder</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00114">codec.h:114</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="logger_8h_html_aedad6a1e3ffe0d4cd0992b822ec0eeeb"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a></div><div class="ttdeci">#define LOGGER_ERROR(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00090">logger.h:90</a></div></div>
<div class="ttc" id="struct___tox_av_call_html"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00064">toxav.c:64</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00090">toxav.h:90</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a64caf285a2ad7cadf24263e0f8f7a507_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a64caf285a2ad7cadf24263e0f8f7a507_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a64caf285a2ad7cadf24263e0f8f7a507_icgraph" id="d8/d0e/toxav_8c_a64caf285a2ad7cadf24263e0f8f7a507_icgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="198,5,301,32"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="196,56,303,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9f2a69dda0bfe14d2a2bcf2497967f31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_prepare_transmission </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>support_video</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates transmission data. Must be call before calling toxav_prepare_* and toxav_send_*. Also, it must be called when call is started </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00265">265</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00151">_CSSession::agent</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00128">_ToxAvCSettings::audio_bitrate</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00131">_ToxAvCSettings::audio_channels</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00129">_ToxAvCSettings::audio_frame_duration</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">audio_index</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00130">_ToxAvCSettings::audio_sample_rate</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00091">av_ErrorAlreadyInCallWithPeer</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00100">av_ErrorCreatingRtpSessions</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00093">av_ErrorInitializingCodecs</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00089">av_ErrorNoCall</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00087">av_ErrorNone</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00088">av_ErrorUnknown</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00152">_CSSession::call_idx</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00122">_ToxAvCSettings::call_type</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00128">_MSISession::calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00069">_ToxAvCall::crtps</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>, <a class="el" href="../../df/dc1/rtp_8h_source.html#l00101">_RTPSession::cs</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00584">cs_kill()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00501">cs_new()</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00105">_MSICall::csettings_local</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00106">_MSICall::csettings_peer</a>, <a class="el" href="../../d2/d9b/msi_8c_source.html#l00080">error</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00061">jbuf_capacity</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00087">LOGGER_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00090">LOGGER_ERROR</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00126">_ToxAvCSettings::max_video_height</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00125">_ToxAvCSettings::max_video_width</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00075">_ToxAv::messenger</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00036">msi_TypeAudio</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00037">msi_TypeVideo</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00068">_ToxAvCall::mutex_do</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00066">_ToxAvCall::mutex_encoding_audio</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00067">_ToxAvCall::mutex_encoding_video</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00115">_MSICall::peers</a>, <a class="el" href="../../d6/d46/rtp_8c_source.html#l00514">rtp_kill()</a>, <a class="el" href="../../d6/d46/rtp_8c_source.html#l00464">rtp_new()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00095">toxavcsettings_cast()</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00124">_ToxAvCSettings::video_bitrate</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">video_index</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00092">callback_call_started()</a>, and <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00136">in_thread_call()</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;{</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> ( !av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a> || <a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>) ||</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            !av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index] || !av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a3b7fc70c2772bbdc453eeff763fc0b4c">csettings_peer</a>) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Error while starting RTP session: invalid call!\n&quot;</span>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="../../db/d9e/struct___tox_av_call.html">ToxAvCall</a> *call = &amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[call_index];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Error while starting RTP session: call already active!\n&quot;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a718bde38a53749d62708a1099524f7d1">av_ErrorAlreadyInCallWithPeer</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (pthread_mutex_init(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">mutex_encoding_audio</a>, NULL) != 0</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            || pthread_mutex_init(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>, NULL) != 0 || pthread_mutex_init(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">mutex_do</a>, NULL) != 0) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Error while starting RTP session: mutex initializing failed!\n&quot;</span>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a46a905a3549bb3ed243cb57a193a99d4">av_ErrorUnknown</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/d57/struct___tox_av_c_settings.html">ToxAvCSettings</a> *c_peer = <a class="code" href="../../d8/d0e/toxav_8c.html#a8eb45d94b5ed002925b58f36c66426b1">toxavcsettings_cast</a></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                   (&amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a3b7fc70c2772bbdc453eeff763fc0b4c">csettings_peer</a>[0]);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/d57/struct___tox_av_c_settings.html">ToxAvCSettings</a> *c_self = <a class="code" href="../../d8/d0e/toxav_8c.html#a8eb45d94b5ed002925b58f36c66426b1">toxavcsettings_cast</a></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                   (&amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#ae57cfc81fffd82f53953c6546bb9f3c3">csettings_local</a>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a>(</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="stringliteral">&quot;Type: %u(s) %u(p)\n&quot;</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="stringliteral">&quot;Video bitrate: %u(s) %u(p)\n&quot;</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="stringliteral">&quot;Video height: %u(s) %u(p)\n&quot;</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="stringliteral">&quot;Video width: %u(s) %u(p)\n&quot;</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="stringliteral">&quot;Audio bitrate: %u(s) %u(p)\n&quot;</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="stringliteral">&quot;Audio framedur: %u(s) %u(p)\n&quot;</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="stringliteral">&quot;Audio sample rate: %u(s) %u(p)\n&quot;</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="stringliteral">&quot;Audio channels: %u(s) %u(p)\n&quot;</span>,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        c_self-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#af8142c751283bdc9d14609ab3009b920">call_type</a>,              c_peer-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#af8142c751283bdc9d14609ab3009b920">call_type</a>,</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        c_self-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#af0eac99d4181795e8a595d244e745192">video_bitrate</a>,          c_peer-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#af0eac99d4181795e8a595d244e745192">video_bitrate</a>,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        c_self-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a4fef4b2fa1a8ae8446314ad0af4ce698">max_video_height</a>,       c_peer-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a4fef4b2fa1a8ae8446314ad0af4ce698">max_video_height</a>,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        c_self-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#ab81ecded1f7c46e120c8f2afa7b2c5cc">max_video_width</a>,        c_peer-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#ab81ecded1f7c46e120c8f2afa7b2c5cc">max_video_width</a>,</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        c_self-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a5d9a8b59b2eb1eef8dbdcb032bf1dd01">audio_bitrate</a>,          c_peer-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a5d9a8b59b2eb1eef8dbdcb032bf1dd01">audio_bitrate</a>,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        c_self-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a61b592233f5a65705eb2600d38e365cd">audio_frame_duration</a>,   c_peer-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a61b592233f5a65705eb2600d38e365cd">audio_frame_duration</a>,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        c_self-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a66da4482e934a2700e07a39fa0838559">audio_sample_rate</a>,      c_peer-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a66da4482e934a2700e07a39fa0838559">audio_sample_rate</a>,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        c_self-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a1b04e9669a2929f425e867440b6d826d">audio_channels</a>,         c_peer-&gt;<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html#a1b04e9669a2929f425e867440b6d826d">audio_channels</a> );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> ( !(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a> = <a class="code" href="../../d5/def/codec_8c.html#aa99953343ed26c4b7914cac072ff95c1">cs_new</a>(c_self, c_peer, <a class="code" href="../../d8/d0e/toxav_8c.html#a6a7e054aaa660429cbca3c5b0e6c83df">jbuf_capacity</a>, support_video)) ) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Error while starting Codec State!\n&quot;</span>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a631b6ad304b7291e35d5b6db2a77f92f">av_ErrorInitializingCodecs</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#a18e94ace0074984593ae281f6bbda315">agent</a> = av;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#ad6b287fd08a0cc466cd41bd2e76d5808">call_idx</a> = call_index;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;acb.first = av-&gt;acb.first;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;acb.second = av-&gt;acb.second;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;vcb.first = av-&gt;vcb.first;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;vcb.second = av-&gt;vcb.second;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>] =</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="../../d6/d46/rtp_8c.html#acda914088783d9822cdafdedf8fadd65">rtp_new</a>(<a class="code" href="../../d9/d06/msi_8h.html#a54df3a97d8d112a3a4a6476c9f9284a6a4a64c16a6c74d9e29598b14b97bf5a45">msi_TypeAudio</a>, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a55d2568491d616f7fef07bc7137c8c23">peers</a>[0]);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span> ( !call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>] ) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Error while starting audio RTP session!\n&quot;</span>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>]-&gt;<a class="code" href="../../d2/dad/struct___r_t_p_session.html#a6fa710f1d7103d0f7b2b872e33aac143">cs</a> = call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> ( support_video ) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>] =</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <a class="code" href="../../d6/d46/rtp_8c.html#acda914088783d9822cdafdedf8fadd65">rtp_new</a>(<a class="code" href="../../d9/d06/msi_8h.html#a54df3a97d8d112a3a4a6476c9f9284a6a5db9e0515683460259700cbbdb916e68">msi_TypeVideo</a>, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">calls</a>[call_index]-&gt;<a class="code" href="../../dc/d03/struct___m_s_i_call.html#a55d2568491d616f7fef07bc7137c8c23">peers</a>[0]);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">if</span> ( !call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>] ) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Error while starting video RTP session!\n&quot;</span>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>]-&gt;<a class="code" href="../../d2/dad/struct___r_t_p_session.html#a6fa710f1d7103d0f7b2b872e33aac143">cs</a> = call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a> = 1;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40">av_ErrorNone</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>:</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>], av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>] = NULL;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>], av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>] = NULL;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f">cs_kill</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a> = NULL;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a> = 0;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    pthread_mutex_destroy(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">mutex_encoding_audio</a>);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    pthread_mutex_destroy(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    pthread_mutex_destroy(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">mutex_do</a>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571ad4d12c61b5a320ba535db6c06d4e6bb8">av_ErrorCreatingRtpSessions</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
<div class="ttc" id="msi_8c_html_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l00080">msi.c:80</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html_ab81ecded1f7c46e120c8f2afa7b2c5cc"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html#ab81ecded1f7c46e120c8f2afa7b2c5cc">_ToxAvCSettings::max_video_width</a></div><div class="ttdeci">uint16_t max_video_width</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00125">toxav.h:125</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="codec_8c_html_aa99953343ed26c4b7914cac072ff95c1"><div class="ttname"><a href="../../d5/def/codec_8c.html#aa99953343ed26c4b7914cac072ff95c1">cs_new</a></div><div class="ttdeci">CSSession * cs_new(const ToxAvCSettings *cs_self, const ToxAvCSettings *cs_peer, uint32_t jbuf_size, int has_video)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00501">codec.c:501</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="struct___m_s_i_call_html_ae57cfc81fffd82f53953c6546bb9f3c3"><div class="ttname"><a href="../../dc/d03/struct___m_s_i_call.html#ae57cfc81fffd82f53953c6546bb9f3c3">_MSICall::csettings_local</a></div><div class="ttdeci">MSICSettings csettings_local</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00105">msi.h:105</a></div></div>
<div class="ttc" id="toxav_8c_html_a8eb45d94b5ed002925b58f36c66426b1"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a8eb45d94b5ed002925b58f36c66426b1">toxavcsettings_cast</a></div><div class="ttdeci">static const ToxAvCSettings * toxavcsettings_cast(const MSICSettings *from)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00095">toxav.c:95</a></div></div>
<div class="ttc" id="struct___m_s_i_call_html_a3b7fc70c2772bbdc453eeff763fc0b4c"><div class="ttname"><a href="../../dc/d03/struct___m_s_i_call.html#a3b7fc70c2772bbdc453eeff763fc0b4c">_MSICall::csettings_peer</a></div><div class="ttdeci">MSICSettings * csettings_peer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00106">msi.h:106</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html">_ToxAvCSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00121">toxav.h:121</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00089">toxav.h:89</a></div></div>
<div class="ttc" id="struct___tox_av_html_a48342badc24a04d2310ca16ff4a3711b"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">_ToxAv::messenger</a></div><div class="ttdeci">Messenger * messenger</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00075">toxav.c:75</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html_a5d9a8b59b2eb1eef8dbdcb032bf1dd01"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html#a5d9a8b59b2eb1eef8dbdcb032bf1dd01">_ToxAvCSettings::audio_bitrate</a></div><div class="ttdeci">uint32_t audio_bitrate</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00128">toxav.h:128</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html_a1b04e9669a2929f425e867440b6d826d"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html#a1b04e9669a2929f425e867440b6d826d">_ToxAvCSettings::audio_channels</a></div><div class="ttdeci">uint32_t audio_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00131">toxav.h:131</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html_af8142c751283bdc9d14609ab3009b920"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html#af8142c751283bdc9d14609ab3009b920">_ToxAvCSettings::call_type</a></div><div class="ttdeci">ToxAvCallType call_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00122">toxav.h:122</a></div></div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_acc4203df7776b6dfe0e5c3922a35e5b0"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#acc4203df7776b6dfe0e5c3922a35e5b0">_ToxAvCall::mutex_do</a></div><div class="ttdeci">pthread_mutex_t mutex_do[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00068">toxav.c:68</a></div></div>
<div class="ttc" id="msi_8h_html_a54df3a97d8d112a3a4a6476c9f9284a6a4a64c16a6c74d9e29598b14b97bf5a45"><div class="ttname"><a href="../../d9/d06/msi_8h.html#a54df3a97d8d112a3a4a6476c9f9284a6a4a64c16a6c74d9e29598b14b97bf5a45">msi_TypeAudio</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00036">msi.h:36</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html_a4fef4b2fa1a8ae8446314ad0af4ce698"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html#a4fef4b2fa1a8ae8446314ad0af4ce698">_ToxAvCSettings::max_video_height</a></div><div class="ttdeci">uint16_t max_video_height</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00126">toxav.h:126</a></div></div>
<div class="ttc" id="codec_8c_html_addde6ea51851fcce009bb7d45147a88f"><div class="ttname"><a href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f">cs_kill</a></div><div class="ttdeci">void cs_kill(CSSession *cs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00584">codec.c:584</a></div></div>
<div class="ttc" id="rtp_8c_html_acda914088783d9822cdafdedf8fadd65"><div class="ttname"><a href="../../d6/d46/rtp_8c.html#acda914088783d9822cdafdedf8fadd65">rtp_new</a></div><div class="ttdeci">RTPSession * rtp_new(int payload_type, Messenger *messenger, int friend_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d46/rtp_8c_source.html#l00464">rtp.c:464</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html_af0eac99d4181795e8a595d244e745192"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html#af0eac99d4181795e8a595d244e745192">_ToxAvCSettings::video_bitrate</a></div><div class="ttdeci">uint32_t video_bitrate</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00124">toxav.h:124</a></div></div>
<div class="ttc" id="toxav_8c_html_a8aac960ea1e1579b3d90c1ab4a3dfe79"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a></div><div class="ttdeci">static const uint8_t video_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00062">toxav.c:62</a></div></div>
<div class="ttc" id="rtp_8c_html_a8e1f9ce4d45738658914f4ef7c3144bc"><div class="ttname"><a href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc">rtp_kill</a></div><div class="ttdeci">void rtp_kill(RTPSession *session, Messenger *messenger)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d46/rtp_8c_source.html#l00514">rtp.c:514</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a89e9fe0c3fef08c502e53ad423dccc34"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">_ToxAvCall::mutex_encoding_video</a></div><div class="ttdeci">pthread_mutex_t mutex_encoding_video[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00067">toxav.c:67</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a718bde38a53749d62708a1099524f7d1"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a718bde38a53749d62708a1099524f7d1">av_ErrorAlreadyInCallWithPeer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00091">toxav.h:91</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ac4c859b6e4ff8e175151fbd0a763e414"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ac4c859b6e4ff8e175151fbd0a763e414">_ToxAvCall::mutex_encoding_audio</a></div><div class="ttdeci">pthread_mutex_t mutex_encoding_audio[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00066">toxav.c:66</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a2e84bee4a1898deac1f63f47235378eb"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">_ToxAvCall::crtps</a></div><div class="ttdeci">RTPSession * crtps[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00069">toxav.c:69</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ac40fee673bae4030b812579c57389a02"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ac40fee673bae4030b812579c57389a02">_MSISession::calls</a></div><div class="ttdeci">MSICall ** calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00128">msi.h:128</a></div></div>
<div class="ttc" id="struct___r_t_p_session_html_a6fa710f1d7103d0f7b2b872e33aac143"><div class="ttname"><a href="../../d2/dad/struct___r_t_p_session.html#a6fa710f1d7103d0f7b2b872e33aac143">_RTPSession::cs</a></div><div class="ttdeci">struct _CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc1/rtp_8h_source.html#l00101">rtp.h:101</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="toxav_8c_html_a6a7e054aaa660429cbca3c5b0e6c83df"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a6a7e054aaa660429cbca3c5b0e6c83df">jbuf_capacity</a></div><div class="ttdeci">static const uint32_t jbuf_capacity</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00061">toxav.c:61</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html_a66da4482e934a2700e07a39fa0838559"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html#a66da4482e934a2700e07a39fa0838559">_ToxAvCSettings::audio_sample_rate</a></div><div class="ttdeci">uint32_t audio_sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00130">toxav.h:130</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a46a905a3549bb3ed243cb57a193a99d4"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a46a905a3549bb3ed243cb57a193a99d4">av_ErrorUnknown</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00088">toxav.h:88</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571ad4d12c61b5a320ba535db6c06d4e6bb8"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571ad4d12c61b5a320ba535db6c06d4e6bb8">av_ErrorCreatingRtpSessions</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00100">toxav.h:100</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a631b6ad304b7291e35d5b6db2a77f92f"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a631b6ad304b7291e35d5b6db2a77f92f">av_ErrorInitializingCodecs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00093">toxav.h:93</a></div></div>
<div class="ttc" id="logger_8h_html_a9885ca09ce5f94d936c91a5b0856a024"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a></div><div class="ttdeci">#define LOGGER_DEBUG(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00087">logger.h:87</a></div></div>
<div class="ttc" id="logger_8h_html_aedad6a1e3ffe0d4cd0992b822ec0eeeb"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a></div><div class="ttdeci">#define LOGGER_ERROR(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00090">logger.h:90</a></div></div>
<div class="ttc" id="struct___m_s_i_call_html_a55d2568491d616f7fef07bc7137c8c23"><div class="ttname"><a href="../../dc/d03/struct___m_s_i_call.html#a55d2568491d616f7fef07bc7137c8c23">_MSICall::peers</a></div><div class="ttdeci">uint32_t * peers</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00115">msi.h:115</a></div></div>
<div class="ttc" id="struct___c_s_session_html_a18e94ace0074984593ae281f6bbda315"><div class="ttname"><a href="../../db/de6/struct___c_s_session.html#a18e94ace0074984593ae281f6bbda315">_CSSession::agent</a></div><div class="ttdeci">void * agent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00151">codec.h:151</a></div></div>
<div class="ttc" id="msi_8h_html_a54df3a97d8d112a3a4a6476c9f9284a6a5db9e0515683460259700cbbdb916e68"><div class="ttname"><a href="../../d9/d06/msi_8h.html#a54df3a97d8d112a3a4a6476c9f9284a6a5db9e0515683460259700cbbdb916e68">msi_TypeVideo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00037">msi.h:37</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40">av_ErrorNone</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00087">toxav.h:87</a></div></div>
<div class="ttc" id="toxav_8c_html_adf973963a7840ccbd70ca8f958a8d8fa"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a></div><div class="ttdeci">static const uint8_t audio_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00062">toxav.c:62</a></div></div>
<div class="ttc" id="struct___tox_av_c_settings_html_a61b592233f5a65705eb2600d38e365cd"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html#a61b592233f5a65705eb2600d38e365cd">_ToxAvCSettings::audio_frame_duration</a></div><div class="ttdeci">uint16_t audio_frame_duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00129">toxav.h:129</a></div></div>
<div class="ttc" id="struct___tox_av_call_html"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00064">toxav.c:64</a></div></div>
<div class="ttc" id="struct___c_s_session_html_ad6b287fd08a0cc466cd41bd2e76d5808"><div class="ttname"><a href="../../db/de6/struct___c_s_session.html#ad6b287fd08a0cc466cd41bd2e76d5808">_CSSession::call_idx</a></div><div class="ttdeci">int32_t call_idx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00152">codec.h:152</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a9f2a69dda0bfe14d2a2bcf2497967f31_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a9f2a69dda0bfe14d2a2bcf2497967f31_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a9f2a69dda0bfe14d2a2bcf2497967f31_cgraph" id="d8/d0e/toxav_8c_a9f2a69dda0bfe14d2a2bcf2497967f31_cgraph">
<area shape="rect" id="node2" href="../../d5/def/codec_8c.html#addde6ea51851fcce009bb7d45147a88f" title="cs_kill" alt="" coords="279,56,337,83"/><area shape="rect" id="node10" href="../../d5/def/codec_8c.html#aa99953343ed26c4b7914cac072ff95c1" title="cs_new" alt="" coords="275,233,341,260"/><area shape="rect" id="node18" href="../../d6/d46/rtp_8c.html#a8e1f9ce4d45738658914f4ef7c3144bc" title="rtp_kill" alt="" coords="278,537,338,564"/><area shape="rect" id="node21" href="../../d6/d46/rtp_8c.html#acda914088783d9822cdafdedf8fadd65" title="rtp_new" alt="" coords="274,487,342,513"/><area shape="rect" id="node32" href="../../d8/d0e/toxav_8c.html#a8eb45d94b5ed002925b58f36c66426b1" title="toxavcsettings_cast" alt="" coords="239,588,377,615"/><area shape="rect" id="node3" href="../../d5/def/codec_8c.html#a30114dcdaee5519093e2ff87708c92ed" title="buffer_free" alt="" coords="464,5,548,32"/><area shape="rect" id="node7" href="../../d5/def/codec_8c.html#ac44be2f075777b2461178608c0efb36c" title="jbuf_free" alt="" coords="470,56,542,83"/><area shape="rect" id="node4" href="../../d5/def/codec_8c.html#a6b10a945e7d4808b0192ee3b949babd3" title="buffer_clear" alt="" coords="662,5,753,32"/><area shape="rect" id="node5" href="../../d5/def/codec_8c.html#a6e1ec2c6aa4625da81486a73661df742" title="buffer_empty" alt="" coords="845,5,944,32"/><area shape="rect" id="node6" href="../../d5/def/codec_8c.html#aa27710dac4f829dad6d007cf01bdf55f" title="buffer_read" alt="" coords="851,56,938,83"/><area shape="rect" id="node8" href="../../d5/def/codec_8c.html#a2ab3636512ac576d996c504f9226108d" title="jbuf_clear" alt="" coords="1009,259,1088,285"/><area shape="rect" id="node9" href="../../d6/d46/rtp_8c.html#a19cbf4e4c2831f2e162e7580bb7d5c7b" title="rtp_free_msg" alt="" coords="1136,309,1235,336"/><area shape="rect" id="node11" href="../../d5/def/codec_8c.html#acf8378036663935ba4186b5b24474a65" title="buffer_new" alt="" coords="463,157,549,184"/><area shape="rect" id="node12" href="../../de/df1/util_8c.html#a2f0ae269c015342e2d29a251237ccce2" title="create_recursive_mutex" alt="" coords="425,208,587,235"/><area shape="rect" id="node13" href="../../d5/def/codec_8c.html#a731be97412f688f88f08b3734d762616" title="init_audio_decoder" alt="" coords="441,259,571,285"/><area shape="rect" id="node14" href="../../d5/def/codec_8c.html#a9d09ec5d699f16689b64699d10acee5c" title="init_audio_encoder" alt="" coords="441,309,571,336"/><area shape="rect" id="node15" href="../../d5/def/codec_8c.html#a33bcb63c2ad472f689ed1c2c99a153ff" title="init_video_decoder" alt="" coords="441,360,571,387"/><area shape="rect" id="node16" href="../../d5/def/codec_8c.html#ab07ecfbcd82777c995c23e3fe70f6a2b" title="init_video_encoder" alt="" coords="441,411,571,437"/><area shape="rect" id="node17" href="../../d5/def/codec_8c.html#a2c648daf423442a3f58d3f1386e9dd95" title="jbuf_new" alt="" coords="469,107,543,133"/><area shape="rect" id="node19" href="../../d8/d8d/_messenger_8c.html#a536d47dbfa35fb02c78068e1d11a1d2a" title="m_callback_rtp_packet" alt="" coords="428,563,584,589"/><area shape="rect" id="node20" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="651,563,764,589"/><area shape="rect" id="node22" href="../../dc/d85/crypto__core_8c.html#a5f13cbe4c46d8801e2c7467068f87306" title="random_int" alt="" coords="463,512,549,539"/><area shape="rect" id="node23" href="../../d6/d46/rtp_8c.html#af21bf57a274e3ff7de54f331ab03fbbc" title="rtp_handle_packet" alt="" coords="442,461,570,488"/><area shape="rect" id="node24" href="../../d6/d46/rtp_8c.html#ae0abe437f26623dd117abd6074a45d9d" title="check_late_message" alt="" coords="635,461,780,488"/><area shape="rect" id="node25" href="../../d6/d46/rtp_8c.html#a36611d00dbaab35e5b65630057930c2f" title="msg_parse" alt="" coords="664,411,751,437"/><area shape="rect" id="node28" href="../../d6/d46/rtp_8c.html#a3bbb6216a42caaa8163fc61b8f78a801" title="queue_message" alt="" coords="649,233,766,260"/><area shape="rect" id="node26" href="../../d6/d46/rtp_8c.html#ae85560b498a96a4d7a6143ba8a75def2" title="extract_ext_header" alt="" coords="828,461,961,488"/><area shape="rect" id="node27" href="../../d6/d46/rtp_8c.html#ac092bb8ff79f03cf8892b112de73edf0" title="extract_header" alt="" coords="841,411,949,437"/><area shape="rect" id="node29" href="../../d5/def/codec_8c.html#ab27fdbd54a41e787c4a98b119d181b13" title="buffer_full" alt="" coords="855,157,934,184"/><area shape="rect" id="node30" href="../../d5/def/codec_8c.html#a5990d0123726b7f12cebdae0984475b4" title="buffer_write" alt="" coords="849,208,940,235"/><area shape="rect" id="node31" href="../../d5/def/codec_8c.html#a170dd2e497101775eea8695dbda58f9e" title="jbuf_write" alt="" coords="855,259,934,285"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a9f2a69dda0bfe14d2a2bcf2497967f31_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a9f2a69dda0bfe14d2a2bcf2497967f31_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a9f2a69dda0bfe14d2a2bcf2497967f31_icgraph" id="d8/d0e/toxav_8c_a9f2a69dda0bfe14d2a2bcf2497967f31_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#a2a5cee1a2c214e77eb5297bdd1a60448" title="callback_call_started" alt="" coords="239,5,383,32"/><area shape="rect" id="node5" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="259,56,362,83"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#a20d31a781f2f50db76459101b62c5720" title="register_callbacks" alt="" coords="431,5,557,32"/><area shape="rect" id="node4" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="605,5,712,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac15e39782145d25bf6ba397aaf910071"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_prepare_video_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dest_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vpx_image_t *&#160;</td>
          <td class="paramname"><em>input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encode video frame. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00446">446</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00097">av_ErrorEncodingVideo</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00090">av_ErrorInvalidState</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00089">av_ErrorNoCall</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00103">av_ErrorPacketTooLarge</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00094">av_ErrorSettingVideoResolution</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00141">_CSSession::capabilities</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00449">cs_set_video_encoder_resolution()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00056">cs_VideoEncoding</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00082">_CSSession::frame_counter</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00090">LOGGER_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00089">LOGGER_WARNING</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00043">MAX_ENCODE_TIME_US</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00067">_ToxAvCall::mutex_encoding_video</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00081">_CSSession::v_encoder</a>.</p>
<div class="fragment"><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;{</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>)) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Invalid call index: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="../../db/d9e/struct___tox_av_call.html">ToxAvCall</a> *call = &amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[call_index];</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (!call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Action on inactive call: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (!(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#ac9e675ead9b3559ea462414a0016f6a6">capabilities</a> &amp; <a class="code" href="../../d1/d16/codec_8h.html#a9ad0f479beeeb19d00d4ce7063bed6dea6a5a203bfa4ccde530809a3f11d4bb73">cs_VideoEncoding</a>)) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Call doesn&#39;t support encoding video: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/def/codec_8c.html#a2c3fede54bd31b427fc5147cb450c714">cs_set_video_encoder_resolution</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>, input-&gt;w, input-&gt;h) &lt; 0) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571ae72fe6811cd822b18729badd3f0a985f">av_ErrorSettingVideoResolution</a>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordtype">int</span> rc = vpx_codec_encode(&amp;call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#a0ec480a7314c0f185ae18f411d73b1bd">v_encoder</a>, input, call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#abeaee952422869c026bab7d7f3f0f145">frame_counter</a>, 1, 0, <a class="code" href="../../d8/d0e/toxav_8c.html#ae1b44adfa4b1d57de2dd1d9ba055d816">MAX_ENCODE_TIME_US</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> ( rc != VPX_CODEC_OK) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Could not encode video frame: %s\n&quot;</span>, vpx_codec_err_to_string(rc));</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571aef4e9f4373944befbfbf5c4cb903d3c6">av_ErrorEncodingVideo</a>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    ++call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#abeaee952422869c026bab7d7f3f0f145">frame_counter</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    vpx_codec_iter_t iter = NULL;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keyword">const</span> vpx_codec_cx_pkt_t *pkt;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordtype">int</span> copied = 0;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">while</span> ( (pkt = vpx_codec_get_cx_data(&amp;call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>-&gt;<a class="code" href="../../db/de6/struct___c_s_session.html#a0ec480a7314c0f185ae18f411d73b1bd">v_encoder</a>, &amp;iter)) ) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> (pkt-&gt;kind == VPX_CODEC_CX_FRAME_PKT) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">if</span> ( copied + pkt-&gt;data.frame.sz &gt; dest_max ) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a49718f7267fb6589c66c535dc8cfce82">av_ErrorPacketTooLarge</a>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            memcpy(dest + copied, pkt-&gt;data.frame.buf, pkt-&gt;data.frame.sz);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            copied += pkt-&gt;data.frame.sz;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">mutex_encoding_video</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">return</span> copied;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___c_s_session_html_abeaee952422869c026bab7d7f3f0f145"><div class="ttname"><a href="../../db/de6/struct___c_s_session.html#abeaee952422869c026bab7d7f3f0f145">_CSSession::frame_counter</a></div><div class="ttdeci">uint32_t frame_counter</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00082">codec.h:82</a></div></div>
<div class="ttc" id="toxav_8c_html_ae1b44adfa4b1d57de2dd1d9ba055d816"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#ae1b44adfa4b1d57de2dd1d9ba055d816">MAX_ENCODE_TIME_US</a></div><div class="ttdeci">#define MAX_ENCODE_TIME_US</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00043">toxav.c:43</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="logger_8h_html_ab3e970f3c1ecb5b71f17eccee4ebb286"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a></div><div class="ttdeci">#define LOGGER_WARNING(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00089">logger.h:89</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571aef4e9f4373944befbfbf5c4cb903d3c6"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571aef4e9f4373944befbfbf5c4cb903d3c6">av_ErrorEncodingVideo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00097">toxav.h:97</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00089">toxav.h:89</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="struct___c_s_session_html_a0ec480a7314c0f185ae18f411d73b1bd"><div class="ttname"><a href="../../db/de6/struct___c_s_session.html#a0ec480a7314c0f185ae18f411d73b1bd">_CSSession::v_encoder</a></div><div class="ttdeci">vpx_codec_ctx_t v_encoder</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00081">codec.h:81</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a89e9fe0c3fef08c502e53ad423dccc34"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a89e9fe0c3fef08c502e53ad423dccc34">_ToxAvCall::mutex_encoding_video</a></div><div class="ttdeci">pthread_mutex_t mutex_encoding_video[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00067">toxav.c:67</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571ae72fe6811cd822b18729badd3f0a985f"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571ae72fe6811cd822b18729badd3f0a985f">av_ErrorSettingVideoResolution</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00094">toxav.h:94</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="struct___c_s_session_html_ac9e675ead9b3559ea462414a0016f6a6"><div class="ttname"><a href="../../db/de6/struct___c_s_session.html#ac9e675ead9b3559ea462414a0016f6a6">_CSSession::capabilities</a></div><div class="ttdeci">uint64_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00141">codec.h:141</a></div></div>
<div class="ttc" id="logger_8h_html_aedad6a1e3ffe0d4cd0992b822ec0eeeb"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a></div><div class="ttdeci">#define LOGGER_ERROR(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00090">logger.h:90</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a49718f7267fb6589c66c535dc8cfce82"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a49718f7267fb6589c66c535dc8cfce82">av_ErrorPacketTooLarge</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00103">toxav.h:103</a></div></div>
<div class="ttc" id="struct___tox_av_call_html"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00064">toxav.c:64</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00090">toxav.h:90</a></div></div>
<div class="ttc" id="codec_8c_html_a2c3fede54bd31b427fc5147cb450c714"><div class="ttname"><a href="../../d5/def/codec_8c.html#a2c3fede54bd31b427fc5147cb450c714">cs_set_video_encoder_resolution</a></div><div class="ttdeci">int cs_set_video_encoder_resolution(CSSession *cs, uint16_t width, uint16_t height)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00449">codec.c:449</a></div></div>
<div class="ttc" id="codec_8h_html_a9ad0f479beeeb19d00d4ce7063bed6dea6a5a203bfa4ccde530809a3f11d4bb73"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a9ad0f479beeeb19d00d4ce7063bed6dea6a5a203bfa4ccde530809a3f11d4bb73">cs_VideoEncoding</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00056">codec.h:56</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ac15e39782145d25bf6ba397aaf910071_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ac15e39782145d25bf6ba397aaf910071_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ac15e39782145d25bf6ba397aaf910071_cgraph" id="d8/d0e/toxav_8c_ac15e39782145d25bf6ba397aaf910071_cgraph">
<area shape="rect" id="node2" href="../../d5/def/codec_8c.html#a2c3fede54bd31b427fc5147cb450c714" title="cs_set_video_encoder\l_resolution" alt="" coords="196,5,348,47"/><area shape="rect" id="node3" href="../../d5/def/codec_8c.html#ab07ecfbcd82777c995c23e3fe70f6a2b" title="init_video_encoder" alt="" coords="396,13,527,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a61dbbb75f2337c5c7c77acd83fffe639"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void toxav_register_audio_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#a92a2e7e1f30f65c5a1cac3f8969e3254">ToxAvAudioCallback</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register callback for audio data. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00214">214</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00212">register_callbacks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    av-&gt;acb.first = cb;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    av-&gt;acb.second = userdata;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a61dbbb75f2337c5c7c77acd83fffe639_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a61dbbb75f2337c5c7c77acd83fffe639_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a61dbbb75f2337c5c7c77acd83fffe639_icgraph" id="d8/d0e/toxav_8c_a61dbbb75f2337c5c7c77acd83fffe639_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#a20d31a781f2f50db76459101b62c5720" title="register_callbacks" alt="" coords="196,13,323,39"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="371,13,477,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9abb9d72d8ce906d4bfc5b472b617017"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void toxav_register_callstate_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#ad6ce886c46b3de9e6780013cf8c86c6c">ToxAVCallback</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#a67e2b4baef8db67a8e1d00618ad0f9a1">ToxAvCallbackID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register callback for call state. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00209">209</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d2/d9b/msi_8c_source.html#l01195">msi_register_callback()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00212">register_callbacks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="../../d2/d9b/msi_8c.html#a1121e56554f776e97436cc9a6a3769c4">msi_register_callback</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>, (<a class="code" href="../../d9/d06/msi_8h.html#afe514f5cbbbb1153f50ab068d405b864">MSICallbackType</a>)cb, (<a class="code" href="../../d9/d06/msi_8h.html#aba083d202aa40ee6d37db924fe486401">MSICallbackID</a>) <span class="keywordtype">id</span>, userdata);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="ttc" id="msi_8h_html_aba083d202aa40ee6d37db924fe486401"><div class="ttname"><a href="../../d9/d06/msi_8h.html#aba083d202aa40ee6d37db924fe486401">MSICallbackID</a></div><div class="ttdeci">MSICallbackID</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00074">msi.h:74</a></div></div>
<div class="ttc" id="msi_8c_html_a1121e56554f776e97436cc9a6a3769c4"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a1121e56554f776e97436cc9a6a3769c4">msi_register_callback</a></div><div class="ttdeci">void msi_register_callback(MSISession *session, MSICallbackType callback, MSICallbackID id, void *userdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01195">msi.c:1195</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="msi_8h_html_afe514f5cbbbb1153f50ab068d405b864"><div class="ttname"><a href="../../d9/d06/msi_8h.html#afe514f5cbbbb1153f50ab068d405b864">MSICallbackType</a></div><div class="ttdeci">void(* MSICallbackType)(void *agent, int32_t call_idx, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00030">msi.h:30</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a9abb9d72d8ce906d4bfc5b472b617017_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a9abb9d72d8ce906d4bfc5b472b617017_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a9abb9d72d8ce906d4bfc5b472b617017_cgraph" id="d8/d0e/toxav_8c_a9abb9d72d8ce906d4bfc5b472b617017_cgraph">
<area shape="rect" id="node2" href="../../d2/d9b/msi_8c.html#a1121e56554f776e97436cc9a6a3769c4" title="msi_register_callback" alt="" coords="213,13,361,39"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a9abb9d72d8ce906d4bfc5b472b617017_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a9abb9d72d8ce906d4bfc5b472b617017_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a9abb9d72d8ce906d4bfc5b472b617017_icgraph" id="d8/d0e/toxav_8c_a9abb9d72d8ce906d4bfc5b472b617017_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#a20d31a781f2f50db76459101b62c5720" title="register_callbacks" alt="" coords="213,13,340,39"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="388,13,495,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a22179185a68fe2a2f126b2c328670f73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void toxav_register_video_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#a17935d23b920a53df6e7f3d7679ffed0">ToxAvVideoCallback</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register callback for video data. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00220">220</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00212">register_callbacks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    av-&gt;vcb.first = cb;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    av-&gt;vcb.second = userdata;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a22179185a68fe2a2f126b2c328670f73_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a22179185a68fe2a2f126b2c328670f73_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a22179185a68fe2a2f126b2c328670f73_icgraph" id="d8/d0e/toxav_8c_a22179185a68fe2a2f126b2c328670f73_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#a20d31a781f2f50db76459101b62c5720" title="register_callbacks" alt="" coords="196,13,323,39"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="371,13,477,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad783f1a19a2765ff6924723193d05d07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_reject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reject incoming call. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00245">245</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d2/d9b/msi_8c_source.html#l01478">msi_reject()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/d9b/msi_8c.html#a9d846fba046c8539b9e183cc01a25fe9">msi_reject</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>, call_index, reason);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="msi_8c_html_a9d846fba046c8539b9e183cc01a25fe9"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a9d846fba046c8539b9e183cc01a25fe9">msi_reject</a></div><div class="ttdeci">int msi_reject(MSISession *session, int32_t call_index, const char *reason)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01478">msi.c:1478</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ad783f1a19a2765ff6924723193d05d07_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ad783f1a19a2765ff6924723193d05d07_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ad783f1a19a2765ff6924723193d05d07_cgraph" id="d8/d0e/toxav_8c_ad783f1a19a2765ff6924723193d05d07_cgraph">
<area shape="rect" id="node2" href="../../d2/d9b/msi_8c.html#a9d846fba046c8539b9e183cc01a25fe9" title="msi_reject" alt="" coords="147,220,229,247"/><area shape="rect" id="node3" href="../../d2/d9b/msi_8c.html#a7a5b1246a4f5680ee60c45e69e04dcd4" title="handle_timeout" alt="" coords="277,169,388,196"/><area shape="rect" id="node6" href="../../d2/d9b/msi_8c.html#abc73c78a9121c32f35e4847af962c889" title="msi_msg_set_reason" alt="" coords="599,81,745,108"/><area shape="rect" id="node7" href="../../d2/d9b/msi_8c.html#aed030e510836ee3cc994f84f06a0cc98" title="msi_new_message" alt="" coords="605,208,739,235"/><area shape="rect" id="node8" href="../../d2/d9b/msi_8c.html#ae174427d97e924339f9e2a961ec773a1" title="send_message" alt="" coords="617,259,727,285"/><area shape="rect" id="node50" href="../../d2/d9b/msi_8c.html#a0a093063a8a2e48ca88d8d47234415cb" title="timer_alloc" alt="" coords="290,359,375,385"/><area shape="rect" id="node4" href="../../d2/d9b/msi_8c.html#af6701ab999e1734c40580997749daf6f" title="invoke_callback" alt="" coords="436,119,551,145"/><area shape="rect" id="node5" href="../../d2/d9b/msi_8c.html#aefbf5f591676d4b56853b21fdf215e69" title="msi_cancel" alt="" coords="449,169,537,196"/><area shape="rect" id="node48" href="../../d2/d9b/msi_8c.html#abf7deacfacdcb5b7cc4cfc163583c40d" title="terminate_call" alt="" coords="621,157,723,184"/><area shape="rect" id="node9" href="../../d8/d8d/_messenger_8c.html#a2374f56c7aeb5fa6d1a3f1a29bb5016b" title="m_msi_packet" alt="" coords="809,309,915,336"/><area shape="rect" id="node45" href="../../d2/d9b/msi_8c.html#a16a648334fa4007ea0d39927bd89eb0b" title="msi_msg_set_callid" alt="" coords="793,208,931,235"/><area shape="rect" id="node46" href="../../d2/d9b/msi_8c.html#aea77316761ab5ed482dc78f727ee9c76" title="parse_send" alt="" coords="817,259,907,285"/><area shape="rect" id="node10" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="979,309,1121,336"/><area shape="rect" id="node11" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="1193,280,1306,307"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="1187,169,1312,196"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="1169,331,1329,373"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2607,165,2760,192"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1377,169,1528,196"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2830,158,2969,199"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1576,144,1755,171"/><area shape="rect" id="node17" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1829,93,1947,120"/><area shape="rect" id="node18" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1803,195,1973,221"/><area shape="rect" id="node39" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1807,245,1969,272"/><area shape="rect" id="node40" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1585,296,1746,323"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="2021,245,2149,272"/><area shape="rect" id="node20" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="3255,271,3420,297"/><area shape="rect" id="node21" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="3277,363,3398,389"/><area shape="rect" id="node22" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="2197,397,2312,424"/><area shape="rect" id="node23" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2370,448,2541,475"/><area shape="rect" id="node29" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2411,397,2500,424"/><area shape="rect" id="node30" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2360,549,2551,576"/><area shape="rect" id="node24" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2644,448,2723,475"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2599,382,2768,423"/><area shape="rect" id="node26" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2844,413,2955,440"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2824,347,2975,389"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="3047,406,3190,447"/><area shape="rect" id="node31" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2616,668,2751,695"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2642,549,2725,576"/><area shape="rect" id="node38" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2621,605,2745,632"/><area shape="rect" id="node32" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2816,667,2983,709"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2829,515,2970,541"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="3031,490,3207,531"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2834,464,2965,491"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="3270,497,3405,524"/><area shape="rect" id="node41" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1820,296,1956,323"/><area shape="rect" id="node43" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1415,343,1490,369"/><area shape="rect" id="node44" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1586,347,1745,373"/><area shape="rect" id="node47" href="../../d2/d9b/msi_8c.html#acd3f86de9a0df45caf147b8a095a89a0" title="format_output" alt="" coords="999,259,1101,285"/><area shape="rect" id="node49" href="../../d2/d9b/msi_8c.html#ab6f36f5852629fabd6e3c85451e5be65" title="timer_release" alt="" coords="812,157,912,184"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_ad783f1a19a2765ff6924723193d05d07_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_ad783f1a19a2765ff6924723193d05d07_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_ad783f1a19a2765ff6924723193d05d07_icgraph" id="d8/d0e/toxav_8c_ad783f1a19a2765ff6924723193d05d07_icgraph">
<area shape="rect" id="node2" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="147,5,253,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abd49d9a595a87814f54eeaa17d7ad833"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_send_audio </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send encoded audio frame. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00565">565</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00090">av_ErrorInvalidState</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00089">av_ErrorNoCall</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00069">av_TypeAudio</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00089">LOGGER_WARNING</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00412">toxav_send_rtp_payload()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00136">in_thread_call()</a>, and <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>)) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Action on nonexisting call: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="../../db/d9e/struct___tox_av_call.html">ToxAvCall</a> *call = &amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[call_index];</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">if</span> (!call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Action on inactive call: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordtype">int</span> rc = <a class="code" href="../../d8/d0e/toxav_8c.html#aa03b009616ed838e27caded4f69483d1">toxav_send_rtp_payload</a>(av, call, <a class="code" href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5">av_TypeAudio</a>, <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>, size);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> rc;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="logger_8h_html_ab3e970f3c1ecb5b71f17eccee4ebb286"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a></div><div class="ttdeci">#define LOGGER_WARNING(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00089">logger.h:89</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00089">toxav.h:89</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="toxav_8c_html_aa03b009616ed838e27caded4f69483d1"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#aa03b009616ed838e27caded4f69483d1">toxav_send_rtp_payload</a></div><div class="ttdeci">static int toxav_send_rtp_payload(ToxAv *av, ToxAvCall *call, ToxAvCallType type, const uint8_t *payload, unsigned int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00412">toxav.c:412</a></div></div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="toxav_8h_html_aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5">av_TypeAudio</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00069">toxav.h:69</a></div></div>
<div class="ttc" id="struct___tox_av_call_html"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00064">toxav.c:64</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00090">toxav.h:90</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_abd49d9a595a87814f54eeaa17d7ad833_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_abd49d9a595a87814f54eeaa17d7ad833_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_abd49d9a595a87814f54eeaa17d7ad833_cgraph" id="d8/d0e/toxav_8c_abd49d9a595a87814f54eeaa17d7ad833_cgraph">
<area shape="rect" id="node2" href="../../d8/d0e/toxav_8c.html#aa03b009616ed838e27caded4f69483d1" title="toxav_send_rtp_payload" alt="" coords="180,132,343,159"/><area shape="rect" id="node3" href="../../d6/d46/rtp_8c.html#a061d9b8e8abbcfb87d365bf65297e3f3" title="rtp_send_msg" alt="" coords="417,81,521,108"/><area shape="rect" id="node41" href="../../d5/def/codec_8c.html#a5da4a305e711e7213dfcbe92d31d37bf" title="cs_split_video_payload" alt="" coords="391,132,548,159"/><area shape="rect" id="node42" href="../../d5/def/codec_8c.html#a61d7fe6f60a95160c4ca434a60cb9bf7" title="cs_get_split_video\l_frame" alt="" coords="404,183,535,225"/><area shape="rect" id="node4" href="../../d6/d46/rtp_8c.html#a19cbf4e4c2831f2e162e7580bb7d5c7b" title="rtp_free_msg" alt="" coords="639,31,737,57"/><area shape="rect" id="node5" href="../../d6/d46/rtp_8c.html#a260a2df3b1d5071548a248619342c45c" title="rtp_new_message" alt="" coords="624,81,752,108"/><area shape="rect" id="node10" href="../../d8/d8d/_messenger_8c.html#a2ebb5527b47fb87384093c4aa3c384c0" title="send_custom_lossy_packet" alt="" coords="596,184,780,211"/><area shape="rect" id="node6" href="../../d6/d46/rtp_8c.html#a8d9087c24d6e8baa293e787799dfdc40" title="add_ext_header" alt="" coords="852,5,967,32"/><area shape="rect" id="node7" href="../../d6/d46/rtp_8c.html#a8128ae518e257a243ee8e91e13716561" title="add_header" alt="" coords="865,56,954,83"/><area shape="rect" id="node8" href="../../d6/d46/rtp_8c.html#a34983523df83bed8f00380ffc692b5b5" title="build_header" alt="" coords="862,107,957,133"/><area shape="rect" id="node9" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1043,105,1205,132"/><area shape="rect" id="node11" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="853,159,966,185"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#a7fcdf763c4a1b4b71e0de620b12f074c" title="send_lossy_cryptpacket" alt="" coords="828,209,991,236"/><area shape="rect" id="node38" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="829,266,989,307"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="1873,265,2027,292"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1039,211,1209,237"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2097,258,2235,299"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1273,237,1401,264"/><area shape="rect" id="node17" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2521,684,2687,711"/><area shape="rect" id="node18" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2543,357,2665,384"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1464,359,1579,385"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="1637,409,1807,436"/><area shape="rect" id="node26" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="1677,308,1767,335"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="1627,507,1817,533"/><area shape="rect" id="node21" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="1911,405,1989,432"/><area shape="rect" id="node22" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="1865,339,2035,381"/><area shape="rect" id="node23" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2111,389,2221,416"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2091,323,2241,365"/><area shape="rect" id="node24" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2314,382,2457,423"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="1883,507,2017,533"/><area shape="rect" id="node30" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="1909,557,1991,584"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="1888,633,2012,660"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2083,441,2249,482"/><area shape="rect" id="node31" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2095,608,2237,635"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2297,575,2473,617"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2101,557,2231,584"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="2537,608,2671,635"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="2559,557,2649,584"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="2735,608,2936,635"/><area shape="rect" id="node39" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1087,284,1161,311"/><area shape="rect" id="node40" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1257,288,1416,315"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_abd49d9a595a87814f54eeaa17d7ad833_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_abd49d9a595a87814f54eeaa17d7ad833_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_abd49d9a595a87814f54eeaa17d7ad833_icgraph" id="d8/d0e/toxav_8c_abd49d9a595a87814f54eeaa17d7ad833_icgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="182,5,285,32"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="180,56,287,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa03b009616ed838e27caded4f69483d1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int toxav_send_rtp_payload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#aec40f142d19ca255ccdf4097b03ef51e">ToxAvCall</a> *&#160;</td>
          <td class="paramname"><em>call</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802">ToxAvCallType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00412">412</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">audio_index</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00087">av_ErrorNone</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00101">av_ErrorNoRtpSession</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00099">av_ErrorSendingPayload</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00069">av_TypeAudio</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00069">_ToxAvCall::crtps</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00070">_ToxAvCall::cs</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00354">cs_get_split_video_frame()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00339">cs_split_video_payload()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00075">_ToxAv::messenger</a>, <a class="el" href="../../d6/d46/rtp_8c_source.html#l00425">rtp_send_msg()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">video_index</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00565">toxav_send_audio()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00507">toxav_send_video()</a>.</p>
<div class="fragment"><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;{</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[type - <a class="code" href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5">av_TypeAudio</a>]) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="comment">/* Audio */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">if</span> (type == <a class="code" href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5">av_TypeAudio</a>)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d6/d46/rtp_8c.html#a061d9b8e8abbcfb87d365bf65297e3f3">rtp_send_msg</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a>], av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>, payload, length);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="comment">/* Video */</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordtype">int</span> parts = <a class="code" href="../../d5/def/codec_8c.html#a5da4a305e711e7213dfcbe92d31d37bf">cs_split_video_payload</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>, payload, length);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (parts &lt; 0) <span class="keywordflow">return</span> parts;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        uint16_t part_size;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keyword">const</span> uint8_t *iter;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; parts; i++) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            iter = <a class="code" href="../../d5/def/codec_8c.html#a61d7fe6f60a95160c4ca434a60cb9bf7">cs_get_split_video_frame</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">cs</a>, &amp;part_size);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d46/rtp_8c.html#a061d9b8e8abbcfb87d365bf65297e3f3">rtp_send_msg</a>(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">crtps</a>[<a class="code" href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a>], av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">messenger</a>, iter, part_size) &lt; 0)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a32cae25023f47db33e901efdcb988bb6">av_ErrorSendingPayload</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40">av_ErrorNone</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a006410f633c4e8269fddc6dca6280b82">av_ErrorNoRtpSession</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_call_html_ae88a02b5082b346e4c90541186364e99"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ae88a02b5082b346e4c90541186364e99">_ToxAvCall::cs</a></div><div class="ttdeci">CSSession * cs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00070">toxav.c:70</a></div></div>
<div class="ttc" id="struct___tox_av_html_a48342badc24a04d2310ca16ff4a3711b"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a48342badc24a04d2310ca16ff4a3711b">_ToxAv::messenger</a></div><div class="ttdeci">Messenger * messenger</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00075">toxav.c:75</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a32cae25023f47db33e901efdcb988bb6"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a32cae25023f47db33e901efdcb988bb6">av_ErrorSendingPayload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00099">toxav.h:99</a></div></div>
<div class="ttc" id="toxav_8c_html_a8aac960ea1e1579b3d90c1ab4a3dfe79"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a8aac960ea1e1579b3d90c1ab4a3dfe79">video_index</a></div><div class="ttdeci">static const uint8_t video_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00062">toxav.c:62</a></div></div>
<div class="ttc" id="codec_8c_html_a5da4a305e711e7213dfcbe92d31d37bf"><div class="ttname"><a href="../../d5/def/codec_8c.html#a5da4a305e711e7213dfcbe92d31d37bf">cs_split_video_payload</a></div><div class="ttdeci">int cs_split_video_payload(CSSession *cs, const uint8_t *payload, uint16_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00339">codec.c:339</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a2e84bee4a1898deac1f63f47235378eb"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a2e84bee4a1898deac1f63f47235378eb">_ToxAvCall::crtps</a></div><div class="ttdeci">RTPSession * crtps[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00069">toxav.c:69</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="toxav_8h_html_aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5">av_TypeAudio</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00069">toxav.h:69</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a006410f633c4e8269fddc6dca6280b82"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a006410f633c4e8269fddc6dca6280b82">av_ErrorNoRtpSession</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00101">toxav.h:101</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a112b17acf03c570f3bd9d1a1b42bdd40">av_ErrorNone</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00087">toxav.h:87</a></div></div>
<div class="ttc" id="toxav_8c_html_adf973963a7840ccbd70ca8f958a8d8fa"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#adf973963a7840ccbd70ca8f958a8d8fa">audio_index</a></div><div class="ttdeci">static const uint8_t audio_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00062">toxav.c:62</a></div></div>
<div class="ttc" id="rtp_8c_html_a061d9b8e8abbcfb87d365bf65297e3f3"><div class="ttname"><a href="../../d6/d46/rtp_8c.html#a061d9b8e8abbcfb87d365bf65297e3f3">rtp_send_msg</a></div><div class="ttdeci">int rtp_send_msg(RTPSession *session, Messenger *messenger, const uint8_t *data, uint16_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d46/rtp_8c_source.html#l00425">rtp.c:425</a></div></div>
<div class="ttc" id="codec_8c_html_a61d7fe6f60a95160c4ca434a60cb9bf7"><div class="ttname"><a href="../../d5/def/codec_8c.html#a61d7fe6f60a95160c4ca434a60cb9bf7">cs_get_split_video_frame</a></div><div class="ttdeci">const uint8_t * cs_get_split_video_frame(CSSession *cs, uint16_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00354">codec.c:354</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_aa03b009616ed838e27caded4f69483d1_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_aa03b009616ed838e27caded4f69483d1_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_aa03b009616ed838e27caded4f69483d1_cgraph" id="d8/d0e/toxav_8c_aa03b009616ed838e27caded4f69483d1_cgraph">
<area shape="rect" id="node2" href="../../d5/def/codec_8c.html#a61d7fe6f60a95160c4ca434a60cb9bf7" title="cs_get_split_video\l_frame" alt="" coords="229,5,360,47"/><area shape="rect" id="node3" href="../../d5/def/codec_8c.html#a5da4a305e711e7213dfcbe92d31d37bf" title="cs_split_video_payload" alt="" coords="216,71,373,98"/><area shape="rect" id="node4" href="../../d6/d46/rtp_8c.html#a061d9b8e8abbcfb87d365bf65297e3f3" title="rtp_send_msg" alt="" coords="243,122,347,149"/><area shape="rect" id="node5" href="../../d6/d46/rtp_8c.html#a19cbf4e4c2831f2e162e7580bb7d5c7b" title="rtp_free_msg" alt="" coords="464,71,563,98"/><area shape="rect" id="node6" href="../../d6/d46/rtp_8c.html#a260a2df3b1d5071548a248619342c45c" title="rtp_new_message" alt="" coords="449,122,577,149"/><area shape="rect" id="node11" href="../../d8/d8d/_messenger_8c.html#a2ebb5527b47fb87384093c4aa3c384c0" title="send_custom_lossy_packet" alt="" coords="421,198,605,225"/><area shape="rect" id="node7" href="../../d6/d46/rtp_8c.html#a8d9087c24d6e8baa293e787799dfdc40" title="add_ext_header" alt="" coords="677,33,792,59"/><area shape="rect" id="node8" href="../../d6/d46/rtp_8c.html#a8128ae518e257a243ee8e91e13716561" title="add_header" alt="" coords="690,83,779,110"/><area shape="rect" id="node9" href="../../d6/d46/rtp_8c.html#a34983523df83bed8f00380ffc692b5b5" title="build_header" alt="" coords="687,134,782,161"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="869,133,1030,159"/><area shape="rect" id="node12" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="678,185,791,211"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#a7fcdf763c4a1b4b71e0de620b12f074c" title="send_lossy_cryptpacket" alt="" coords="653,235,816,262"/><area shape="rect" id="node39" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="655,292,815,333"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="1699,293,1852,319"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="864,238,1035,265"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="1922,285,2061,327"/><area shape="rect" id="node17" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1098,265,1226,291"/><area shape="rect" id="node18" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2347,711,2512,738"/><area shape="rect" id="node19" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2369,385,2490,411"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1289,386,1404,413"/><area shape="rect" id="node21" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="1462,437,1633,463"/><area shape="rect" id="node27" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="1503,335,1592,362"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="1452,534,1643,561"/><area shape="rect" id="node22" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="1736,433,1815,459"/><area shape="rect" id="node23" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="1691,367,1860,408"/><area shape="rect" id="node24" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="1936,417,2047,443"/><area shape="rect" id="node26" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="1916,351,2067,392"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2139,409,2282,451"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="1708,534,1843,561"/><area shape="rect" id="node31" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="1734,585,1817,611"/><area shape="rect" id="node38" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="1713,661,1837,687"/><area shape="rect" id="node30" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="1908,468,2075,509"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="1921,635,2062,662"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2123,603,2299,644"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="1926,585,2057,611"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="2362,635,2497,662"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="2385,585,2474,611"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="2560,635,2761,662"/><area shape="rect" id="node40" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="912,310,987,337"/><area shape="rect" id="node41" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1083,315,1241,342"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_aa03b009616ed838e27caded4f69483d1_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_aa03b009616ed838e27caded4f69483d1_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_aa03b009616ed838e27caded4f69483d1_icgraph" id="d8/d0e/toxav_8c_aa03b009616ed838e27caded4f69483d1_icgraph">
<area shape="rect" id="node2" href="../../d9/d82/toxav_8h.html#a0b848edf3ccbf9088d79ad77e308ac29" title="toxav_send_audio" alt="" coords="216,31,343,57"/><area shape="rect" id="node5" href="../../d8/d0e/toxav_8c.html#a4aa0876a176b4e5e7abea2f72059a502" title="toxav_send_video" alt="" coords="216,81,343,108"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="391,5,497,32"/><area shape="rect" id="node4" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="393,56,495,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4aa0876a176b4e5e7abea2f72059a502"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_send_video </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>frame_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00507">507</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00071">_ToxAvCall::active</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00090">av_ErrorInvalidState</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00089">av_ErrorNoCall</a>, <a class="el" href="../../d9/d82/toxav_8h_source.html#l00070">av_TypeVideo</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00046">CALL_INVALID_INDEX</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00077">_ToxAv::calls</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00089">LOGGER_WARNING</a>, <a class="el" href="../../d9/d06/msi_8h_source.html#l00129">_MSISession::max_calls</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00065">_ToxAvCall::mutex</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00412">toxav_send_rtp_payload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;{</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a>(call_index, av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>-&gt;<a class="code" href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">max_calls</a>)) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Invalid call index: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <a class="code" href="../../db/d9e/struct___tox_av_call.html">ToxAvCall</a> *call = &amp;av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">calls</a>[call_index];</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    pthread_mutex_lock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (!call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">active</a>) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;Action on inactive call: %d&quot;</span>, call_index);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">int</span> rc = <a class="code" href="../../d8/d0e/toxav_8c.html#aa03b009616ed838e27caded4f69483d1">toxav_send_rtp_payload</a>(av, call, <a class="code" href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a4c8031669712d3775b97811c5200ebbc">av_TypeVideo</a>, frame, frame_size);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    pthread_mutex_unlock(call-&gt;<a class="code" href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">mutex</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">return</span> rc;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="ttc" id="toxav_8h_html_aa735e8f3c71af6a841c2ffc3650bb802a4c8031669712d3775b97811c5200ebbc"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a4c8031669712d3775b97811c5200ebbc">av_TypeVideo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00070">toxav.h:70</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_a215df53a125f9b848dc883d9a1164430"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#a215df53a125f9b848dc883d9a1164430">_ToxAvCall::active</a></div><div class="ttdeci">_Bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00071">toxav.c:71</a></div></div>
<div class="ttc" id="struct___tox_av_call_html_ab4293016252c4d4e63549b0773fa0f33"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html#ab4293016252c4d4e63549b0773fa0f33">_ToxAvCall::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00065">toxav.c:65</a></div></div>
<div class="ttc" id="logger_8h_html_ab3e970f3c1ecb5b71f17eccee4ebb286"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a></div><div class="ttdeci">#define LOGGER_WARNING(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00089">logger.h:89</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8ea49f41e11f0f288834a29183fc57b5">av_ErrorNoCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00089">toxav.h:89</a></div></div>
<div class="ttc" id="struct___tox_av_html_abe854f89ac28ebd5112d1639d531b128"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#abe854f89ac28ebd5112d1639d531b128">_ToxAv::calls</a></div><div class="ttdeci">ToxAvCall * calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00077">toxav.c:77</a></div></div>
<div class="ttc" id="toxav_8c_html_aa03b009616ed838e27caded4f69483d1"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#aa03b009616ed838e27caded4f69483d1">toxav_send_rtp_payload</a></div><div class="ttdeci">static int toxav_send_rtp_payload(ToxAv *av, ToxAvCall *call, ToxAvCallType type, const uint8_t *payload, unsigned int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00412">toxav.c:412</a></div></div>
<div class="ttc" id="toxav_8c_html_a9b51ecd9e898c75b7ed6cf9cd5596d1b"><div class="ttname"><a href="../../d8/d0e/toxav_8c.html#a9b51ecd9e898c75b7ed6cf9cd5596d1b">CALL_INVALID_INDEX</a></div><div class="ttdeci">#define CALL_INVALID_INDEX(idx, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00046">toxav.c:46</a></div></div>
<div class="ttc" id="struct___m_s_i_session_html_ae4bbb4682dc5c74588083ca06ac2f76f"><div class="ttname"><a href="../../d5/d5f/struct___m_s_i_session.html#ae4bbb4682dc5c74588083ca06ac2f76f">_MSISession::max_calls</a></div><div class="ttdeci">int32_t max_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00129">msi.h:129</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
<div class="ttc" id="struct___tox_av_call_html"><div class="ttname"><a href="../../db/d9e/struct___tox_av_call.html">_ToxAvCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00064">toxav.c:64</a></div></div>
<div class="ttc" id="toxav_8h_html_a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#a18cce814b2dde9d75ad400fa3d4c4571a8c3a91ff5639f545fbc49378cf7d94ad">av_ErrorInvalidState</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00090">toxav.h:90</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a4aa0876a176b4e5e7abea2f72059a502_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a4aa0876a176b4e5e7abea2f72059a502_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a4aa0876a176b4e5e7abea2f72059a502_cgraph" id="d8/d0e/toxav_8c_a4aa0876a176b4e5e7abea2f72059a502_cgraph">
<area shape="rect" id="node2" href="../../d8/d0e/toxav_8c.html#aa03b009616ed838e27caded4f69483d1" title="toxav_send_rtp_payload" alt="" coords="180,71,343,98"/><area shape="rect" id="node3" href="../../d5/def/codec_8c.html#a61d7fe6f60a95160c4ca434a60cb9bf7" title="cs_get_split_video\l_frame" alt="" coords="404,5,535,47"/><area shape="rect" id="node4" href="../../d5/def/codec_8c.html#a5da4a305e711e7213dfcbe92d31d37bf" title="cs_split_video_payload" alt="" coords="391,71,548,98"/><area shape="rect" id="node5" href="../../d6/d46/rtp_8c.html#a061d9b8e8abbcfb87d365bf65297e3f3" title="rtp_send_msg" alt="" coords="417,122,521,149"/><area shape="rect" id="node6" href="../../d6/d46/rtp_8c.html#a19cbf4e4c2831f2e162e7580bb7d5c7b" title="rtp_free_msg" alt="" coords="639,71,737,98"/><area shape="rect" id="node7" href="../../d6/d46/rtp_8c.html#a260a2df3b1d5071548a248619342c45c" title="rtp_new_message" alt="" coords="624,122,752,149"/><area shape="rect" id="node12" href="../../d8/d8d/_messenger_8c.html#a2ebb5527b47fb87384093c4aa3c384c0" title="send_custom_lossy_packet" alt="" coords="596,198,780,225"/><area shape="rect" id="node8" href="../../d6/d46/rtp_8c.html#a8d9087c24d6e8baa293e787799dfdc40" title="add_ext_header" alt="" coords="852,33,967,59"/><area shape="rect" id="node9" href="../../d6/d46/rtp_8c.html#a8128ae518e257a243ee8e91e13716561" title="add_header" alt="" coords="865,83,954,110"/><area shape="rect" id="node10" href="../../d6/d46/rtp_8c.html#a34983523df83bed8f00380ffc692b5b5" title="build_header" alt="" coords="862,134,957,161"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1043,133,1205,159"/><area shape="rect" id="node13" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="853,185,966,211"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a7fcdf763c4a1b4b71e0de620b12f074c" title="send_lossy_cryptpacket" alt="" coords="828,235,991,262"/><area shape="rect" id="node40" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="829,292,989,333"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="1873,293,2027,319"/><area shape="rect" id="node17" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1039,238,1209,265"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2097,285,2235,327"/><area shape="rect" id="node18" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1273,265,1401,291"/><area shape="rect" id="node19" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2521,711,2687,738"/><area shape="rect" id="node20" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2543,385,2665,411"/><area shape="rect" id="node21" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1464,386,1579,413"/><area shape="rect" id="node22" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="1637,437,1807,463"/><area shape="rect" id="node28" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="1677,335,1767,362"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="1627,534,1817,561"/><area shape="rect" id="node23" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="1911,433,1989,459"/><area shape="rect" id="node24" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="1865,367,2035,408"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2111,417,2221,443"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2091,351,2241,392"/><area shape="rect" id="node26" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2314,409,2457,451"/><area shape="rect" id="node30" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="1883,534,2017,561"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="1909,585,1991,611"/><area shape="rect" id="node39" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="1888,661,2012,687"/><area shape="rect" id="node31" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2083,468,2249,509"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2095,635,2237,662"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2297,603,2473,644"/><area shape="rect" id="node38" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2101,585,2231,611"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="2537,635,2671,662"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="2559,585,2649,611"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="2735,635,2936,662"/><area shape="rect" id="node41" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1087,310,1161,337"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1257,315,1416,342"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7f5a8786bb985cdcdae0cc42a442b23e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int toxav_stop_call </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d82/toxav_8h.html#abdf4715f7de98af6ebe4c599cad42908">ToxAv</a> *&#160;</td>
          <td class="paramname"><em>av</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>call_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Terminate transmission. Note that transmission will be terminated without informing remote peer. Usually called when we can't inform peer. </p>

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00260">260</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>References <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00076">_ToxAv::msi_session</a>, and <a class="el" href="../../d2/d9b/msi_8c_source.html#l01524">msi_stopcall()</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/d9b/msi_8c.html#a4d2aa9bfe7f4a96275204f2797d6e7eb">msi_stopcall</a>(av-&gt;<a class="code" href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">msi_session</a>, call_index);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div>
<div class="ttc" id="msi_8c_html_a4d2aa9bfe7f4a96275204f2797d6e7eb"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a4d2aa9bfe7f4a96275204f2797d6e7eb">msi_stopcall</a></div><div class="ttdeci">int msi_stopcall(MSISession *session, int32_t call_index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l01524">msi.c:1524</a></div></div>
<div class="ttc" id="struct___tox_av_html_a85e3d7dd2ab722ee5ba0cd4b72bc7d60"><div class="ttname"><a href="../../d4/d43/struct___tox_av.html#a85e3d7dd2ab722ee5ba0cd4b72bc7d60">_ToxAv::msi_session</a></div><div class="ttdeci">MSISession * msi_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d0e/toxav_8c_source.html#l00076">toxav.c:76</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a7f5a8786bb985cdcdae0cc42a442b23e_cgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a7f5a8786bb985cdcdae0cc42a442b23e_cgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a7f5a8786bb985cdcdae0cc42a442b23e_cgraph" id="d8/d0e/toxav_8c_a7f5a8786bb985cdcdae0cc42a442b23e_cgraph">
<area shape="rect" id="node2" href="../../d2/d9b/msi_8c.html#a4d2aa9bfe7f4a96275204f2797d6e7eb" title="msi_stopcall" alt="" coords="167,5,261,32"/><area shape="rect" id="node3" href="../../d2/d9b/msi_8c.html#abf7deacfacdcb5b7cc4cfc163583c40d" title="terminate_call" alt="" coords="309,5,412,32"/><area shape="rect" id="node4" href="../../d2/d9b/msi_8c.html#ab6f36f5852629fabd6e3c85451e5be65" title="timer_release" alt="" coords="460,5,560,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8eb45d94b5ed002925b58f36c66426b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a>* toxavcsettings_cast </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d06/msi_8h.html#abe548d26a24458ebf9ab33310ee19600">MSICSettings</a> *&#160;</td>
          <td class="paramname"><em>from</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00095">95</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00587">toxav_get_peer_csettings()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00265">toxav_prepare_transmission()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;{</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    assert(<span class="keyword">sizeof</span>(<a class="code" href="../../d1/dff/struct___m_s_i_codec_settings.html">MSICSettings</a>) == <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d57/struct___tox_av_c_settings.html">ToxAvCSettings</a>));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">const</span> <a class="code" href="../../d9/d57/struct___tox_av_c_settings.html">ToxAvCSettings</a> *) from;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div>
<div class="ttc" id="struct___tox_av_c_settings_html"><div class="ttname"><a href="../../d9/d57/struct___tox_av_c_settings.html">_ToxAvCSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00121">toxav.h:121</a></div></div>
<div class="ttc" id="struct___m_s_i_codec_settings_html"><div class="ttname"><a href="../../d1/dff/struct___m_s_i_codec_settings.html">_MSICodecSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d06/msi_8h_source.html#l00057">msi.h:57</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0e/toxav_8c_a8eb45d94b5ed002925b58f36c66426b1_icgraph.png" border="0" usemap="#d8/d0e/toxav_8c_a8eb45d94b5ed002925b58f36c66426b1_icgraph" alt=""/></div>
<map name="d8/d0e/toxav_8c_a8eb45d94b5ed002925b58f36c66426b1_icgraph" id="d8/d0e/toxav_8c_a8eb45d94b5ed002925b58f36c66426b1_icgraph">
<area shape="rect" id="node2" href="../../d9/d82/toxav_8h.html#aaa65fd5f05a94ed9abf63c42f5e10ed4" title="toxav_get_peer_csettings" alt="" coords="199,56,370,83"/><area shape="rect" id="node7" href="../../d9/d82/toxav_8h.html#a9f2a69dda0bfe14d2a2bcf2497967f31" title="toxav_prepare_transmission" alt="" coords="192,107,377,133"/><area shape="rect" id="node3" href="../../d6/d19/toxav__basic__test_8c.html#a177ecca315a4b526c126e35ab95747a0" title="callback_peer_cs_change" alt="" coords="425,5,597,32"/><area shape="rect" id="node6" href="../../d6/d19/toxav__basic__test_8c.html#a55f0a400c65d34ae3c2bd5cad03eb96e" title="callback_self_cs_change" alt="" coords="427,56,595,83"/><area shape="rect" id="node4" href="../../d6/d19/toxav__basic__test_8c.html#a20d31a781f2f50db76459101b62c5720" title="register_callbacks" alt="" coords="645,56,772,83"/><area shape="rect" id="node5" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="820,56,927,83"/><area shape="rect" id="node8" href="../../d6/d19/toxav__basic__test_8c.html#a2a5cee1a2c214e77eb5297bdd1a60448" title="callback_call_started" alt="" coords="439,107,583,133"/><area shape="rect" id="node9" href="../../d6/dc0/toxav__many__test_8c.html#aba50a9b07c2b19443bb2aae141579dcc" title="in_thread_call" alt="" coords="460,157,563,184"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="adf973963a7840ccbd70ca8f958a8d8fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t audio_index = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">62</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00133">toxav_kill()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00370">toxav_kill_transmission()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00265">toxav_prepare_transmission()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00412">toxav_send_rtp_payload()</a>.</p>

</div>
</div>
<a class="anchor" id="aff13faf6b338ca682c4c206b9fdde7fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d9/d82/toxav_8h.html#ae30c65d2804a20349b0ea2ae240b209e">ToxAvCSettings</a> av_DefaultSettings</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <a class="code" href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5">av_TypeAudio</a>,</div>
<div class="line"></div>
<div class="line">    500,</div>
<div class="line">    1280,</div>
<div class="line">    720,</div>
<div class="line"></div>
<div class="line">    32000,</div>
<div class="line">    20,</div>
<div class="line">    48000,</div>
<div class="line">    1</div>
<div class="line">}</div>
<div class="ttc" id="toxav_8h_html_aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5"><div class="ttname"><a href="../../d9/d82/toxav_8h.html#aa735e8f3c71af6a841c2ffc3650bb802a9a2c48ac5859ccdd4329bd6c31f372a5">av_TypeAudio</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d82/toxav_8h_source.html#l00069">toxav.h:69</a></div></div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00048">48</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00136">in_thread_call()</a>, and <a class="el" href="../../d6/d19/toxav__basic__test_8c_source.html#l00250">START_TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a7e054aaa660429cbca3c5b0e6c83df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t jbuf_capacity = 6</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00061">61</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00265">toxav_prepare_transmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a8aac960ea1e1579b3d90c1ab4a3dfe79"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t video_index = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00062">62</a> of file <a class="el" href="../../d8/d0e/toxav_8c_source.html">toxav.c</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00133">toxav_kill()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00370">toxav_kill_transmission()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00265">toxav_prepare_transmission()</a>, and <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00412">toxav_send_rtp_payload()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 2 2015 23:41:20 for libtoxcore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
