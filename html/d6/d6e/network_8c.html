<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>libtoxcore: toxcore/network.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../tox.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libtoxcore
   </div>
   <div id="projectbrief">The future of instant messaging</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_0b4cb6aa1b49ded7d7b217b80a3955c0.html">toxcore</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">network.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">logger.h</a>&quot;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d94/network_8h_source.html">network.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d3c/util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &lt;sodium.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for network.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/de6/network_8c__incl.png" border="0" usemap="#toxcore_2network_8c" alt=""/></div>
<map name="toxcore_2network_8c" id="toxcore_2network_8c">
<area shape="rect" id="node2" href="../../d1/d8c/logger_8h.html" title="logger.h" alt="" coords="180,80,248,107"/><area shape="rect" id="node5" href="../../d9/d94/network_8h.html" title="network.h" alt="" coords="684,80,763,107"/><area shape="rect" id="node18" href="../../d8/d3c/util_8h.html" title="util.h" alt="" coords="1271,80,1322,107"/></map>
</div>
</div>
<p><a href="../../d6/d6e/network_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac50762666aa00bd3a4308158510f1748"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#ac50762666aa00bd3a4308158510f1748">_WIN32_WINNT</a>&#160;&#160;&#160;0x501</td></tr>
<tr class="separator:ac50762666aa00bd3a4308158510f1748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e448a6a4aa57962204518fd380d7ade"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a0e448a6a4aa57962204518fd380d7ade">loglogdata</a>(__message__, __buffer__, __buflen__, __ip_port__, __res__)</td></tr>
<tr class="separator:a0e448a6a4aa57962204518fd380d7ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a84c3240a3325cbdaaa8a206c96980cd1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a84c3240a3325cbdaaa8a206c96980cd1">sock_valid</a> (<a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>)</td></tr>
<tr class="separator:a84c3240a3325cbdaaa8a206c96980cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512d8ea12392ba9ddfadd83bb7c92b2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a512d8ea12392ba9ddfadd83bb7c92b2e">kill_sock</a> (<a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>)</td></tr>
<tr class="separator:a512d8ea12392ba9ddfadd83bb7c92b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a50bb1345f2d5192fe1ec23ac7a1da9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a6a50bb1345f2d5192fe1ec23ac7a1da9">set_socket_nonblock</a> (<a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>)</td></tr>
<tr class="separator:a6a50bb1345f2d5192fe1ec23ac7a1da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a379153c027c17d7c71797cb0e3ea41a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a379153c027c17d7c71797cb0e3ea41a3">set_socket_nosigpipe</a> (<a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>)</td></tr>
<tr class="separator:a379153c027c17d7c71797cb0e3ea41a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac278c3d25e3807f0b2be9d91c9db328f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#ac278c3d25e3807f0b2be9d91c9db328f">set_socket_reuseaddr</a> (<a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>)</td></tr>
<tr class="separator:ac278c3d25e3807f0b2be9d91c9db328f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2f109728a6345e6862686ea4baf5b27"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#ad2f109728a6345e6862686ea4baf5b27">set_socket_dualstack</a> (<a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>)</td></tr>
<tr class="separator:ad2f109728a6345e6862686ea4baf5b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f5cd2a713e4a17d4c6d36650336cab0"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a9f5cd2a713e4a17d4c6d36650336cab0">current_time_actual</a> (void)</td></tr>
<tr class="separator:a9f5cd2a713e4a17d4c6d36650336cab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ecaef140b786a2720eadbb85918e81"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#ae8ecaef140b786a2720eadbb85918e81">current_time_monotonic</a> (void)</td></tr>
<tr class="separator:ae8ecaef140b786a2720eadbb85918e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b90f87f3ba60cc5c66dd6dd77cd5cb1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1">sendpacket</a> (<a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *net, <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> ip_port, const uint8_t *data, uint16_t length)</td></tr>
<tr class="separator:a7b90f87f3ba60cc5c66dd6dd77cd5cb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44dd69c638b9ee342b7d54e65293850d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a44dd69c638b9ee342b7d54e65293850d">receivepacket</a> (<a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>, <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *ip_port, uint8_t *data, uint32_t *length)</td></tr>
<tr class="separator:a44dd69c638b9ee342b7d54e65293850d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a230a192ca9463ec4985d4f86de439733"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a230a192ca9463ec4985d4f86de439733">networking_registerhandler</a> (<a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *net, uint8_t byte, <a class="el" href="../../d9/d94/network_8h.html#a01fb3f0e3fd19ed8eefe335b64934156">packet_handler_callback</a> cb, void *object)</td></tr>
<tr class="separator:a230a192ca9463ec4985d4f86de439733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6765fe4b08536210a20ac728f991e13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#ab6765fe4b08536210a20ac728f991e13">networking_poll</a> (<a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *net)</td></tr>
<tr class="separator:ab6765fe4b08536210a20ac728f991e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad953dedd6d25d03cf441960dd1e1fed1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1">networking_at_startup</a> (void)</td></tr>
<tr class="separator:ad953dedd6d25d03cf441960dd1e1fed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c272a560dd4b2c18c6546a91656c1b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a0c272a560dd4b2c18c6546a91656c1b5">new_networking</a> (<a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#ae81515e082f9bc33e8968181945586da">ip</a>, uint16_t <a class="el" href="../../db/d11/irc__syncbot_8c.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>)</td></tr>
<tr class="separator:a0c272a560dd4b2c18c6546a91656c1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a899cb8f62b49e71ba9f9f7a50254655c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a899cb8f62b49e71ba9f9f7a50254655c">new_networking_ex</a> (<a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> <a class="el" href="../../db/d11/irc__syncbot_8c.html#ae81515e082f9bc33e8968181945586da">ip</a>, uint16_t port_from, uint16_t port_to, unsigned int *<a class="el" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>)</td></tr>
<tr class="separator:a899cb8f62b49e71ba9f9f7a50254655c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a36a1ed29a0d5dfe1f0095823039627"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a8a36a1ed29a0d5dfe1f0095823039627">kill_networking</a> (<a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *net)</td></tr>
<tr class="separator:a8a36a1ed29a0d5dfe1f0095823039627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af982256c6d8486349bdc13a920884ef6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#af982256c6d8486349bdc13a920884ef6">ip_equal</a> (const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *a, const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *b)</td></tr>
<tr class="separator:af982256c6d8486349bdc13a920884ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6913335cf0b2a76303f5f61d18ea2277"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a6913335cf0b2a76303f5f61d18ea2277">ipport_equal</a> (const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *a, const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *b)</td></tr>
<tr class="separator:a6913335cf0b2a76303f5f61d18ea2277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bfd1efbce5b035b10c879a7e85c08df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a2bfd1efbce5b035b10c879a7e85c08df">ip_reset</a> (<a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *<a class="el" href="../../db/d11/irc__syncbot_8c.html#ae81515e082f9bc33e8968181945586da">ip</a>)</td></tr>
<tr class="separator:a2bfd1efbce5b035b10c879a7e85c08df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aa0dce9c25e370af93bf4a14f79c709"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a6aa0dce9c25e370af93bf4a14f79c709">ip_init</a> (<a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *<a class="el" href="../../db/d11/irc__syncbot_8c.html#ae81515e082f9bc33e8968181945586da">ip</a>, uint8_t ipv6enabled)</td></tr>
<tr class="separator:a6aa0dce9c25e370af93bf4a14f79c709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56c677f4bc8bf8311370ee105ae7cbb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#ac56c677f4bc8bf8311370ee105ae7cbb">ip_isset</a> (const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *<a class="el" href="../../db/d11/irc__syncbot_8c.html#ae81515e082f9bc33e8968181945586da">ip</a>)</td></tr>
<tr class="separator:ac56c677f4bc8bf8311370ee105ae7cbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8436367218afb29bcf1b5fecd071648e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a8436367218afb29bcf1b5fecd071648e">ipport_isset</a> (const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *ipport)</td></tr>
<tr class="separator:a8436367218afb29bcf1b5fecd071648e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66563da83f68de4f5e9d7c5f2f72c8f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a66563da83f68de4f5e9d7c5f2f72c8f3">ip_copy</a> (<a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *target, const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *source)</td></tr>
<tr class="separator:a66563da83f68de4f5e9d7c5f2f72c8f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c8d0713b35c97e9861cd7e59c40890"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a98c8d0713b35c97e9861cd7e59c40890">ipport_copy</a> (<a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *target, const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *source)</td></tr>
<tr class="separator:a98c8d0713b35c97e9861cd7e59c40890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71f49c78ce7b76ccf08785c6ec08706"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706">ip_ntoa</a> (const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *<a class="el" href="../../db/d11/irc__syncbot_8c.html#ae81515e082f9bc33e8968181945586da">ip</a>)</td></tr>
<tr class="separator:af71f49c78ce7b76ccf08785c6ec08706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae25cce1bbb77b6a8b441bb940a75783f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#ae25cce1bbb77b6a8b441bb940a75783f">ip_parse_addr</a> (const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *<a class="el" href="../../db/d11/irc__syncbot_8c.html#ae81515e082f9bc33e8968181945586da">ip</a>, char *address, size_t length)</td></tr>
<tr class="separator:ae25cce1bbb77b6a8b441bb940a75783f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944255f7a47e106de5faea1bf7387a28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a944255f7a47e106de5faea1bf7387a28">addr_parse_ip</a> (const char *address, <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *to)</td></tr>
<tr class="separator:a944255f7a47e106de5faea1bf7387a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af329b139810a0b31f336bdf416333b24"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#af329b139810a0b31f336bdf416333b24">addr_resolve</a> (const char *address, <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *to, <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *extra)</td></tr>
<tr class="separator:af329b139810a0b31f336bdf416333b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c024648679209a12766fedc7e55d5e4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a1c024648679209a12766fedc7e55d5e4">addr_resolve_or_parse_ip</a> (const char *address, <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *to, <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *extra)</td></tr>
<tr class="separator:a1c024648679209a12766fedc7e55d5e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1e407c1eac9f5897472ad66ab31e0b24"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a1e407c1eac9f5897472ad66ab31e0b24">at_startup_ran</a> = 0</td></tr>
<tr class="separator:a1e407c1eac9f5897472ad66ab31e0b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269d957bd615e26e36b2ed0d2757b7e0"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a> [96]</td></tr>
<tr class="separator:a269d957bd615e26e36b2ed0d2757b7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ac50762666aa00bd3a4308158510f1748"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _WIN32_WINNT&#160;&#160;&#160;0x501</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00025">25</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e448a6a4aa57962204518fd380d7ade"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define loglogdata</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__message__, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__buffer__, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__buflen__, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__ip_port__, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__res__&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00270">270</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d6e/network_8c_source.html#l00363">receivepacket()</a>, and <a class="el" href="../../d6/d6e/network_8c_source.html#l00295">sendpacket()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a944255f7a47e106de5faea1bf7387a28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int addr_parse_ip </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00900">900</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00149">IP6::in6_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00140">IP4::in_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00156">IP::ip4</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00157">IP::ip6</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d6e/network_8c_source.html#l01041">addr_resolve_or_parse_ip()</a>.</p>
<div class="fragment"><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;{</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> (!address || !to)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keyword">struct </span>in_addr addr4;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordflow">if</span> (1 == inet_pton(AF_INET, address, &amp;addr4)) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = AF_INET;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a> = addr4;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keyword">struct </span>in6_addr addr6;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span> (1 == inet_pton(AF_INET6, address, &amp;addr6)) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = AF_INET6;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">in6_addr</a> = addr6;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;}</div>
<div class="ttc" id="struct_i_p_html_a14c606eb5ffb078c38ad854dc4e79507"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">IP::ip6</a></div><div class="ttdeci">IP6 ip6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00157">network.h:157</a></div></div>
<div class="ttc" id="struct_i_p_html_aca19646000f55aa927406e68fc41ecf9"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">IP::ip4</a></div><div class="ttdeci">IP4 ip4</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00156">network.h:156</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
<div class="ttc" id="union_i_p4_html_a5a47f63dce37e6eb6be40f022434b1c5"><div class="ttname"><a href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">IP4::in_addr</a></div><div class="ttdeci">struct in_addr in_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00140">network.h:140</a></div></div>
<div class="ttc" id="union_i_p6_html_ac312c20ade57f180c50585e9ea42314c"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">IP6::in6_addr</a></div><div class="ttdeci">struct in6_addr in6_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00149">network.h:149</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a944255f7a47e106de5faea1bf7387a28_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a944255f7a47e106de5faea1bf7387a28_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a944255f7a47e106de5faea1bf7387a28_icgraph" id="d6/d6e/network_8c_a944255f7a47e106de5faea1bf7387a28_icgraph">
<area shape="rect" id="node2" href="../../d9/d94/network_8h.html#a1c024648679209a12766fedc7e55d5e4" title="addr_resolve_or_parse_ip" alt="" coords="156,64,327,91"/><area shape="rect" id="node3" href="../../db/d81/dns3__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="421,5,472,32"/><area shape="rect" id="node4" href="../../df/dad/_d_h_t_8h.html#af342c78837dbed569d4a75a0516455fc" title="DHT_bootstrap_from\l_address" alt="" coords="375,57,519,98"/><area shape="rect" id="node8" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="411,165,482,192"/><area shape="rect" id="node5" href="../../d1/d36/tox-bootstrapd_8c.html#a3b29f8b1522a8d051f35cc76a54f846a" title="bootstrap_from_config" alt="" coords="567,13,717,40"/><area shape="rect" id="node7" href="../../db/d5e/_d_h_t__bootstrap_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="617,64,667,91"/><area shape="rect" id="node6" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="765,13,816,40"/><area shape="rect" id="node9" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="589,115,695,141"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="610,165,674,192"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="603,216,681,243"/><area shape="rect" id="node14" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="617,267,667,293"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="765,165,816,192"/><area shape="rect" id="node13" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="765,216,816,243"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af329b139810a0b31f336bdf416333b24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int addr_resolve </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>extra</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00941">941</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00149">IP6::in6_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00140">IP4::in_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00156">IP::ip4</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00157">IP::ip6</a>, and <a class="el" href="../../d6/d6e/network_8c_source.html#l00444">networking_at_startup()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d6e/network_8c_source.html#l01041">addr_resolve_or_parse_ip()</a>, and <a class="el" href="../../d0/d5a/network__test_8c_source.html#l00016">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;{</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">if</span> (!address || !to)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    sa_family_t family = to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keyword">struct </span>addrinfo *server = NULL;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keyword">struct </span>addrinfo *walker = NULL;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keyword">struct </span>addrinfo  hints;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordtype">int</span>              rc;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    memset(&amp;hints, 0, <span class="keyword">sizeof</span>(hints));</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    hints.ai_family   = family;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    hints.ai_socktype = SOCK_DGRAM; <span class="comment">// type of socket Tox uses.</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1">networking_at_startup</a>() != 0)</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    rc = getaddrinfo(address, NULL, &amp;hints, &amp;server);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="comment">// Lookup failed.</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">if</span> (rc != 0) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="../../d3/da8/union_i_p4.html">IP4</a> ip4;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    memset(&amp;ip4, 0, <span class="keyword">sizeof</span>(ip4));</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="../../d7/dae/union_i_p6.html">IP6</a> ip6;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    memset(&amp;ip6, 0, <span class="keyword">sizeof</span>(ip6));</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">for</span> (walker = server; (walker != NULL) &amp;&amp; (rc != 3); walker = walker-&gt;ai_next) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="keywordflow">switch</span> (walker-&gt;ai_family) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            <span class="keywordflow">case</span> AF_INET:</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                <span class="keywordflow">if</span> (walker-&gt;ai_family == family) { <span class="comment">/* AF_INET requested, done */</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                    <span class="keyword">struct </span>sockaddr_in *addr = (<span class="keyword">struct </span>sockaddr_in *)walker-&gt;ai_addr;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                    to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a> = addr-&gt;sin_addr;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                    rc = 3;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(rc &amp; 1)) { <span class="comment">/* AF_UNSPEC requested, store away */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                    <span class="keyword">struct </span>sockaddr_in *addr = (<span class="keyword">struct </span>sockaddr_in *)walker-&gt;ai_addr;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                    ip4.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a> = addr-&gt;sin_addr;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                    rc |= 1;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                <span class="keywordflow">break</span>; <span class="comment">/* switch */</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <span class="keywordflow">case</span> AF_INET6:</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                <span class="keywordflow">if</span> (walker-&gt;ai_family == family) { <span class="comment">/* AF_INET6 requested, done */</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                    <span class="keywordflow">if</span> (walker-&gt;ai_addrlen == <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in6)) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                        <span class="keyword">struct </span>sockaddr_in6 *addr = (<span class="keyword">struct </span>sockaddr_in6 *)walker-&gt;ai_addr;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                        to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">in6_addr</a> = addr-&gt;sin6_addr;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                        rc = 3;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(rc &amp; 2)) { <span class="comment">/* AF_UNSPEC requested, store away */</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                    <span class="keywordflow">if</span> (walker-&gt;ai_addrlen == <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in6)) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                        <span class="keyword">struct </span>sockaddr_in6 *addr = (<span class="keyword">struct </span>sockaddr_in6 *)walker-&gt;ai_addr;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                        ip6.<a class="code" href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">in6_addr</a> = addr-&gt;sin6_addr;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                        rc |= 2;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                    }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                <span class="keywordflow">break</span>; <span class="comment">/* switch */</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_UNSPEC) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordflow">if</span> (rc &amp; 2) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = AF_INET6;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a> = ip6;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <span class="keywordflow">if</span> ((rc &amp; 1) &amp;&amp; (extra != NULL)) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                extra-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = AF_INET;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                extra-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a> = ip4;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc &amp; 1) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = AF_INET;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            to-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a> = ip4;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            rc = 0;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    freeaddrinfo(server);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">return</span> rc;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;}</div>
<div class="ttc" id="union_i_p4_html"><div class="ttname"><a href="../../d3/da8/union_i_p4.html">IP4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00136">network.h:136</a></div></div>
<div class="ttc" id="struct_i_p_html_a14c606eb5ffb078c38ad854dc4e79507"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">IP::ip6</a></div><div class="ttdeci">IP6 ip6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00157">network.h:157</a></div></div>
<div class="ttc" id="struct_i_p_html_aca19646000f55aa927406e68fc41ecf9"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">IP::ip4</a></div><div class="ttdeci">IP4 ip4</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00156">network.h:156</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
<div class="ttc" id="union_i_p4_html_a5a47f63dce37e6eb6be40f022434b1c5"><div class="ttname"><a href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">IP4::in_addr</a></div><div class="ttdeci">struct in_addr in_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00140">network.h:140</a></div></div>
<div class="ttc" id="union_i_p6_html_ac312c20ade57f180c50585e9ea42314c"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">IP6::in6_addr</a></div><div class="ttdeci">struct in6_addr in6_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00149">network.h:149</a></div></div>
<div class="ttc" id="union_i_p6_html"><div class="ttname"><a href="../../d7/dae/union_i_p6.html">IP6</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00144">network.h:144</a></div></div>
<div class="ttc" id="network_8c_html_ad953dedd6d25d03cf441960dd1e1fed1"><div class="ttname"><a href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1">networking_at_startup</a></div><div class="ttdeci">int networking_at_startup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00444">network.c:444</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_af329b139810a0b31f336bdf416333b24_cgraph.png" border="0" usemap="#d6/d6e/network_8c_af329b139810a0b31f336bdf416333b24_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_af329b139810a0b31f336bdf416333b24_cgraph" id="d6/d6e/network_8c_af329b139810a0b31f336bdf416333b24_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1" title="networking_at_startup" alt="" coords="149,5,300,32"/><area shape="rect" id="node3" href="../../d6/d6e/network_8c.html#a9f5cd2a713e4a17d4c6d36650336cab0" title="current_time_actual" alt="" coords="348,5,484,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_af329b139810a0b31f336bdf416333b24_icgraph.png" border="0" usemap="#d6/d6e/network_8c_af329b139810a0b31f336bdf416333b24_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_af329b139810a0b31f336bdf416333b24_icgraph" id="d6/d6e/network_8c_af329b139810a0b31f336bdf416333b24_icgraph">
<area shape="rect" id="node2" href="../../d9/d94/network_8h.html#a1c024648679209a12766fedc7e55d5e4" title="addr_resolve_or_parse_ip" alt="" coords="149,64,320,91"/><area shape="rect" id="node15" href="../../d0/d5a/network__test_8c.html#a011610afc3d9633e4bec180e6b421d5a" title="START_TEST" alt="" coords="181,115,288,141"/><area shape="rect" id="node3" href="../../db/d81/dns3__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="415,5,465,32"/><area shape="rect" id="node4" href="../../df/dad/_d_h_t_8h.html#af342c78837dbed569d4a75a0516455fc" title="DHT_bootstrap_from\l_address" alt="" coords="368,57,512,98"/><area shape="rect" id="node8" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="405,165,475,192"/><area shape="rect" id="node5" href="../../d1/d36/tox-bootstrapd_8c.html#a3b29f8b1522a8d051f35cc76a54f846a" title="bootstrap_from_config" alt="" coords="560,13,711,40"/><area shape="rect" id="node7" href="../../db/d5e/_d_h_t__bootstrap_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="610,64,661,91"/><area shape="rect" id="node6" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="759,13,809,40"/><area shape="rect" id="node9" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="582,115,689,141"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="603,165,667,192"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="596,216,675,243"/><area shape="rect" id="node14" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="610,267,661,293"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="759,165,809,192"/><area shape="rect" id="node13" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="759,216,809,243"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1c024648679209a12766fedc7e55d5e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int addr_resolve_or_parse_ip </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>extra</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l01041">1041</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d6/d6e/network_8c_source.html#l00900">addr_parse_ip()</a>, and <a class="el" href="../../d6/d6e/network_8c_source.html#l00941">addr_resolve()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01434">DHT_bootstrap_from_address()</a>, <a class="el" href="../../db/d81/dns3__test_8c_source.html#l00045">main()</a>, and <a class="el" href="../../d3/d69/tox_8c_source.html#l00124">tox_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;{</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6e/network_8c.html#af329b139810a0b31f336bdf416333b24">addr_resolve</a>(address, to, extra))</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6e/network_8c.html#a944255f7a47e106de5faea1bf7387a28">addr_parse_ip</a>(address, to))</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;}</div>
<div class="ttc" id="network_8c_html_af329b139810a0b31f336bdf416333b24"><div class="ttname"><a href="../../d6/d6e/network_8c.html#af329b139810a0b31f336bdf416333b24">addr_resolve</a></div><div class="ttdeci">int addr_resolve(const char *address, IP *to, IP *extra)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00941">network.c:941</a></div></div>
<div class="ttc" id="network_8c_html_a944255f7a47e106de5faea1bf7387a28"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a944255f7a47e106de5faea1bf7387a28">addr_parse_ip</a></div><div class="ttdeci">int addr_parse_ip(const char *address, IP *to)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00900">network.c:900</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a1c024648679209a12766fedc7e55d5e4_cgraph.png" border="0" usemap="#d6/d6e/network_8c_a1c024648679209a12766fedc7e55d5e4_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a1c024648679209a12766fedc7e55d5e4_cgraph" id="d6/d6e/network_8c_a1c024648679209a12766fedc7e55d5e4_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#a944255f7a47e106de5faea1bf7387a28" title="addr_parse_ip" alt="" coords="224,5,327,32"/><area shape="rect" id="node3" href="../../d6/d6e/network_8c.html#af329b139810a0b31f336bdf416333b24" title="addr_resolve" alt="" coords="227,56,323,83"/><area shape="rect" id="node4" href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1" title="networking_at_startup" alt="" coords="375,56,525,83"/><area shape="rect" id="node5" href="../../d6/d6e/network_8c.html#a9f5cd2a713e4a17d4c6d36650336cab0" title="current_time_actual" alt="" coords="573,56,709,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a1c024648679209a12766fedc7e55d5e4_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a1c024648679209a12766fedc7e55d5e4_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a1c024648679209a12766fedc7e55d5e4_icgraph" id="d6/d6e/network_8c_a1c024648679209a12766fedc7e55d5e4_icgraph">
<area shape="rect" id="node2" href="../../df/dad/_d_h_t_8h.html#af342c78837dbed569d4a75a0516455fc" title="DHT_bootstrap_from\l_address" alt="" coords="224,47,368,89"/><area shape="rect" id="node6" href="../../db/d81/dns3__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="271,113,321,140"/><area shape="rect" id="node7" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="261,164,331,191"/><area shape="rect" id="node3" href="../../d1/d36/tox-bootstrapd_8c.html#a3b29f8b1522a8d051f35cc76a54f846a" title="bootstrap_from_config" alt="" coords="416,5,567,32"/><area shape="rect" id="node5" href="../../db/d5e/_d_h_t__bootstrap_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="466,56,517,83"/><area shape="rect" id="node4" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="615,5,665,32"/><area shape="rect" id="node8" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="438,111,545,137"/><area shape="rect" id="node9" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="459,161,523,188"/><area shape="rect" id="node11" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="452,212,531,239"/><area shape="rect" id="node13" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="466,263,517,289"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="615,161,665,188"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="615,212,665,239"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9f5cd2a713e4a17d4c6d36650336cab0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t current_time_actual </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00206">206</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d6e/network_8c_source.html#l00444">networking_at_startup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    uint64_t time;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#if defined(_WIN32) || defined(__WIN32__) || defined (WIN32)</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">/* This probably works fine */</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    FILETIME ft;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    GetSystemTimeAsFileTime(&amp;ft);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    time = ft.dwHighDateTime;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    time &lt;&lt;= 32;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    time |= ft.dwLowDateTime;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    time -= 116444736000000000ULL;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">return</span> time / 10;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keyword">struct </span>timeval a;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    gettimeofday(&amp;a, NULL);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    time = 1000000ULL * a.tv_sec + a.tv_usec;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> time;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a9f5cd2a713e4a17d4c6d36650336cab0_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a9f5cd2a713e4a17d4c6d36650336cab0_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a9f5cd2a713e4a17d4c6d36650336cab0_icgraph" id="d6/d6e/network_8c_a9f5cd2a713e4a17d4c6d36650336cab0_icgraph">
<area shape="rect" id="node2" href="../../d9/d94/network_8h.html#ad953dedd6d25d03cf441960dd1e1fed1" title="networking_at_startup" alt="" coords="189,373,340,400"/><area shape="rect" id="node3" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="395,259,532,285"/><area shape="rect" id="node20" href="../../d9/d94/network_8h.html#af329b139810a0b31f336bdf416333b24" title="addr_resolve" alt="" coords="415,411,511,437"/><area shape="rect" id="node27" href="../../d0/df3/_t_c_p__client_8h.html#aedb0d5c54ac7754bb342517247ac632d" title="new_TCP_connection" alt="" coords="388,563,539,589"/><area shape="rect" id="node49" href="../../d6/d03/_t_c_p__server_8h.html#a148e632f4c51645cbc1b414bc3584b60" title="new_TCP_server" alt="" coords="402,335,525,361"/><area shape="rect" id="node4" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="627,259,744,285"/><area shape="rect" id="node13" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="627,157,743,184"/><area shape="rect" id="node5" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="886,259,937,285"/><area shape="rect" id="node6" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="876,309,947,336"/><area shape="rect" id="node7" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1072,259,1179,285"/><area shape="rect" id="node8" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1876,335,1940,361"/><area shape="rect" id="node10" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1086,107,1165,133"/><area shape="rect" id="node12" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1100,208,1151,235"/><area shape="rect" id="node9" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1997,371,2048,397"/><area shape="rect" id="node11" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1307,107,1357,133"/><area shape="rect" id="node14" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="854,95,969,121"/><area shape="rect" id="node16" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="858,208,965,235"/><area shape="rect" id="node17" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="866,19,957,45"/><area shape="rect" id="node19" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1307,360,1357,387"/><area shape="rect" id="node15" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1072,56,1179,83"/><area shape="rect" id="node18" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1072,5,1179,32"/><area shape="rect" id="node21" href="../../d0/d5a/network__test_8c.html#a011610afc3d9633e4bec180e6b421d5a" title="START_TEST" alt="" coords="632,461,739,488"/><area shape="rect" id="node22" href="../../d9/d94/network_8h.html#a1c024648679209a12766fedc7e55d5e4" title="addr_resolve_or_parse_ip" alt="" coords="600,411,771,437"/><area shape="rect" id="node23" href="../../db/d81/dns3__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="886,477,937,504"/><area shape="rect" id="node24" href="../../df/dad/_d_h_t_8h.html#af342c78837dbed569d4a75a0516455fc" title="DHT_bootstrap_from\l_address" alt="" coords="839,411,983,453"/><area shape="rect" id="node25" href="../../d1/d36/tox-bootstrapd_8c.html#a3b29f8b1522a8d051f35cc76a54f846a" title="bootstrap_from_config" alt="" coords="1050,411,1201,437"/><area shape="rect" id="node26" href="../../db/d5e/_d_h_t__bootstrap_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1100,461,1151,488"/><area shape="rect" id="node28" href="../../d2/d8d/_t_c_p__test_8c.html#a54051584eff6e81044025b36d88c9a2b" title="START_TEST" alt="" coords="632,563,739,589"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#a81963b2aeca3eb88b3fea76869b19fad" title="reconnect_tcp_relay\l_connection" alt="" coords="616,614,755,655"/><area shape="rect" id="node38" href="../../d5/d26/_t_c_p__connection_8c.html#a359cec296ed123fc92b9b149266b30a4" title="unsleep_tcp_relay_connection" alt="" coords="587,512,784,539"/><area shape="rect" id="node39" href="../../d5/d26/_t_c_p__connection_8c.html#af221264f649b29407becf0e4ca352cbd" title="add_tcp_relay_instance" alt="" coords="832,668,991,695"/><area shape="rect" id="node30" href="../../d5/d26/_t_c_p__connection_8c.html#a6377f0f3d60ba706c5b014a9439696b7" title="do_tcp_conns" alt="" coords="860,553,963,580"/><area shape="rect" id="node31" href="../../da/d39/_t_c_p__connection_8h.html#a30c1a9c57a8d07cc2327c0505d6619a4" title="do_tcp_connections" alt="" coords="1056,553,1195,580"/><area shape="rect" id="node32" href="../../d2/d8d/_t_c_p__test_8c.html#a1b7f98a901f4b8685223ec1dac1c1ce3" title="START_TEST" alt="" coords="1279,557,1385,584"/><area shape="rect" id="node33" href="../../d8/dc6/net__crypto_8c.html#adf499e22f45244e3660f9da6de77d2a3" title="do_tcp" alt="" coords="1301,499,1363,525"/><area shape="rect" id="node34" href="../../de/d42/net__crypto_8h.html#a6fa028eb320bf09ecd619c5053580436" title="do_net_crypto" alt="" coords="1477,496,1581,523"/><area shape="rect" id="node35" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1683,496,1789,523"/><area shape="rect" id="node36" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1883,496,1933,523"/><area shape="rect" id="node37" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="1867,405,1949,432"/><area shape="rect" id="node40" href="../../da/d39/_t_c_p__connection_8h.html#a5ee1dbaa28ff59e0f452eda3c97418e3" title="add_tcp_relay_global" alt="" coords="1260,668,1404,695"/><area shape="rect" id="node45" href="../../da/d39/_t_c_p__connection_8h.html#a26901882c0b134822660515493683132" title="add_tcp_relay_connection" alt="" coords="1039,612,1212,639"/><area shape="rect" id="node41" href="../../d2/d8d/_t_c_p__test_8c.html#ac45927e61cae5bb70dbde2b32c8f62ff" title="START_TEST" alt="" coords="1475,715,1582,741"/><area shape="rect" id="node42" href="../../de/d42/net__crypto_8h.html#a632021583d7dd2484614071a7080f311" title="add_tcp_relay" alt="" coords="1477,664,1580,691"/><area shape="rect" id="node43" href="../../d2/db1/friend__connection_8c.html#a9360ec098f2b1082b480b4e36b0a5f07" title="tcp_relay_node_callback" alt="" coords="1653,613,1819,640"/><area shape="rect" id="node44" href="../../da/d8f/tox_8h.html#ae858a499d7f8e2e5cbf5533afbd20537" title="tox_add_tcp_relay" alt="" coords="1672,664,1800,691"/><area shape="rect" id="node46" href="../../de/d42/net__crypto_8h.html#a4b9f3aef7b0d4c461294e24a21e64e71" title="add_tcp_relay_peer" alt="" coords="1265,612,1399,639"/><area shape="rect" id="node47" href="../../d2/db1/friend__connection_8c.html#a612a688a590b1836efec92949e3cbdff" title="connect_to_saved_tcp\l_relays" alt="" coords="1452,547,1605,589"/><area shape="rect" id="node48" href="../../d0/d08/friend__connection_8h.html#ac89688f7660c1cb5fb664ecc09bab460" title="friend_add_tcp_relay" alt="" coords="1457,613,1600,640"/><area shape="rect" id="node50" href="../../d2/d8d/_t_c_p__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="632,309,739,336"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae8ecaef140b786a2720eadbb85918e81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t current_time_monotonic </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00233">233</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d46/rtp_8c_source.html#l00261">build_header()</a>, <a class="el" href="../../db/d11/irc__syncbot_8c_source.html#l00043">get_monotime_sec()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l01138">handle_data_packet_helper()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l00661">handle_request_packet()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l00088">logger_new()</a>, <a class="el" href="../../d2/d9b/msi_8c_source.html#l01593">msi_do()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l00791">reset_max_speed_reached()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l02042">send_crypto_packets()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l00831">send_lossless_packet()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l00956">send_requested_packets()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l01057">send_temp_packet()</a>, <a class="el" href="../../d2/d9b/msi_8c_source.html#l00444">timer_alloc()</a>, <a class="el" href="../../d8/d0e/toxav_8c_source.html#l00176">toxav_do()</a>, and <a class="el" href="../../de/df1/util_8c_source.html#l00041">unix_time_update()</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    uint64_t time;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#if defined(_WIN32) || defined(__WIN32__) || defined (WIN32)</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    time = (uint64_t)GetTickCount() + add_monotime;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (time &lt; last_monotime) { <span class="comment">/* Prevent time from ever decreasing because of 32 bit wrap. */</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        uint32_t add = ~0;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        add_monotime += add;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        time += add;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    last_monotime = time;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keyword">struct </span>timespec monotime;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">#if defined(__linux__) &amp;&amp; defined(CLOCK_MONOTONIC_RAW)</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    clock_gettime(CLOCK_MONOTONIC_RAW, &amp;monotime);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">#elif defined(__APPLE__)</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    clock_serv_t muhclock;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    mach_timespec_t machtime;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    host_get_clock_service(mach_host_self(), SYSTEM_CLOCK, &amp;muhclock);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    clock_get_time(muhclock, &amp;machtime);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    mach_port_deallocate(mach_task_self(), muhclock);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    monotime.tv_sec = machtime.tv_sec;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    monotime.tv_nsec = machtime.tv_nsec;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    clock_gettime(CLOCK_MONOTONIC, &amp;monotime);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    time = 1000ULL * monotime.tv_sec + (monotime.tv_nsec / 1000000ULL);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> time;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ae8ecaef140b786a2720eadbb85918e81_icgraph.png" border="0" usemap="#d6/d6e/network_8c_ae8ecaef140b786a2720eadbb85918e81_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ae8ecaef140b786a2720eadbb85918e81_icgraph" id="d6/d6e/network_8c_ae8ecaef140b786a2720eadbb85918e81_icgraph">
<area shape="rect" id="node2" href="../../d6/d46/rtp_8c.html#a34983523df83bed8f00380ffc692b5b5" title="build_header" alt="" coords="257,32,351,59"/><area shape="rect" id="node5" href="../../db/d11/irc__syncbot_8c.html#a47cadb15bd0cc1802c53a0a7c773db6f" title="get_monotime_sec" alt="" coords="238,115,370,141"/><area shape="rect" id="node7" href="../../d8/dc6/net__crypto_8c.html#a38debbf6310a8190eeafd33e42423f1a" title="handle_data_packet\l_helper" alt="" coords="453,302,592,343"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#a4a6efacedb06b73ea8a0ce30b72b3d42" title="handle_request_packet" alt="" coords="226,355,382,381"/><area shape="rect" id="node13" href="../../d1/d8c/logger_8h.html#a015f81551929ba00687be8d9eea85663" title="logger_new" alt="" coords="260,228,348,255"/><area shape="rect" id="node19" href="../../d9/d06/msi_8h.html#a6596ff23a6bcdd19c4fa1985dcc6b257" title="msi_do" alt="" coords="272,659,336,685"/><area shape="rect" id="node20" href="../../d9/d82/toxav_8h.html#a78b4ac618a3683f06432c06594846121" title="toxav_do" alt="" coords="485,659,560,685"/><area shape="rect" id="node22" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="215,709,393,736"/><area shape="rect" id="node25" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="447,760,598,787"/><area shape="rect" id="node30" href="../../d8/dc6/net__crypto_8c.html#ad0fc252748fecbb499c4b01706476a77" title="send_crypto_packets" alt="" coords="449,451,596,477"/><area shape="rect" id="node33" href="../../d8/dc6/net__crypto_8c.html#ac64daefe87866ea116735f3540be3092" title="send_requested_packets" alt="" coords="221,507,387,533"/><area shape="rect" id="node34" href="../../d8/dc6/net__crypto_8c.html#ae0a00f5fe1955d7d15af11eacc20997b" title="send_temp_packet" alt="" coords="238,405,370,432"/><area shape="rect" id="node36" href="../../d2/d9b/msi_8c.html#a0a093063a8a2e48ca88d8d47234415cb" title="timer_alloc" alt="" coords="261,861,347,888"/><area shape="rect" id="node41" href="../../d8/d3c/util_8h.html#a849af10dd491723cf3abdef599846897" title="unix_time_update" alt="" coords="461,608,585,635"/><area shape="rect" id="node3" href="../../d6/d46/rtp_8c.html#a260a2df3b1d5071548a248619342c45c" title="rtp_new_message" alt="" coords="459,5,587,32"/><area shape="rect" id="node4" href="../../df/dc1/rtp_8h.html#a061d9b8e8abbcfb87d365bf65297e3f3" title="rtp_send_msg" alt="" coords="688,5,792,32"/><area shape="rect" id="node6" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="939,132,990,159"/><area shape="rect" id="node8" href="../../d8/dc6/net__crypto_8c.html#a04717fefa34f146623e7c95d5eef8caa" title="handle_packet_connection" alt="" coords="652,309,828,336"/><area shape="rect" id="node9" href="../../d8/dc6/net__crypto_8c.html#ab2eaad4448a5deca58a00316b522e380" title="tcp_data_callback" alt="" coords="901,360,1028,387"/><area shape="rect" id="node11" href="../../d8/dc6/net__crypto_8c.html#a812ca8a7291e22ce343669c9835c7c12" title="udp_handle_packet" alt="" coords="897,309,1032,336"/><area shape="rect" id="node10" href="../../de/d42/net__crypto_8h.html#a5e46c6f42e93e2aa968f8f63de90a53c" title="new_net_crypto" alt="" coords="1101,360,1216,387"/><area shape="rect" id="node14" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="487,208,558,235"/><area shape="rect" id="node15" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="687,259,793,285"/><area shape="rect" id="node16" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="708,208,772,235"/><area shape="rect" id="node17" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="701,107,779,133"/><area shape="rect" id="node18" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="715,157,765,184"/><area shape="rect" id="node21" href="../../d6/d19/toxav__basic__test_8c.html#aa1d0def2e9aa37d5cb681d81baa07667" title="START_TEST" alt="" coords="687,968,793,995"/><area shape="rect" id="node23" href="../../de/d42/net__crypto_8h.html#ac2a5448ebee4fd4f8fd32cc7e3ac69c0" title="max_speed_reached" alt="" coords="451,709,594,736"/><area shape="rect" id="node24" href="../../d8/d8d/_messenger_8c.html#a74c09bcf488256da7b3ed899f541fc8c" title="do_reqchunk_filecb" alt="" coords="673,1019,807,1045"/><area shape="rect" id="node26" href="../../de/d42/net__crypto_8h.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="677,1069,803,1096"/><area shape="rect" id="node27" href="../../d4/d30/_messenger_8h.html#a23c8b52187d4ab113cce5497a19ac997" title="m_send_message_generic" alt="" coords="876,1011,1053,1037"/><area shape="rect" id="node28" href="../../d4/d30/_messenger_8h.html#a14ab15b529cd99d1f87ecf21c75456e1" title="send_custom_lossless\l_packet" alt="" coords="887,1062,1042,1103"/><area shape="rect" id="node29" href="../../d8/d8d/_messenger_8c.html#a2daa1e5d6fa9bc3c7c92d3cd46b11fb7" title="send_file_data_packet" alt="" coords="889,1128,1041,1155"/><area shape="rect" id="node31" href="../../de/d42/net__crypto_8h.html#a6fa028eb320bf09ecd619c5053580436" title="do_net_crypto" alt="" coords="688,360,792,387"/><area shape="rect" id="node32" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="911,512,1018,539"/><area shape="rect" id="node35" href="../../d8/dc6/net__crypto_8c.html#ad2ca4aad15dc0607252aa21cd525b5ba" title="create_send_handshake" alt="" coords="441,379,604,405"/><area shape="rect" id="node37" href="../../d2/d9b/msi_8c.html#ac4fd005ce0f0c990e7982acd92e341e3" title="handle_recv_ringing" alt="" coords="454,912,591,939"/><area shape="rect" id="node38" href="../../d9/d06/msi_8h.html#a8023a8417a3e79e382a9ff3d99cdd24a" title="msi_hangup" alt="" coords="477,963,569,989"/><area shape="rect" id="node39" href="../../d9/d06/msi_8h.html#a9f714a4729f22ca5810ff0ee89313fab" title="msi_invite" alt="" coords="482,811,563,837"/><area shape="rect" id="node40" href="../../d9/d06/msi_8h.html#a9d846fba046c8539b9e183cc01a25fe9" title="msi_reject" alt="" coords="481,861,564,888"/><area shape="rect" id="node42" href="../../db/d0f/assoc__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="715,664,765,691"/><area shape="rect" id="node43" href="../../d2/d8d/_t_c_p__test_8c.html#a54051584eff6e81044025b36d88c9a2b" title="START_TEST" alt="" coords="911,740,1018,767"/><area shape="rect" id="node44" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="699,816,781,843"/><area shape="rect" id="node45" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="705,512,775,539"/><area shape="rect" id="node46" href="../../df/dad/_d_h_t_8h.html#a93770fe498d41d1c6b420275680967b6" title="DHT_isconnected" alt="" coords="677,867,803,893"/><area shape="rect" id="node47" href="../../df/dad/_d_h_t_8h.html#a90cd93b83fdec619c4924fd20c4fc005" title="DHT_non_lan_connected" alt="" coords="655,411,825,437"/><area shape="rect" id="node48" href="../../d9/d94/network_8h.html#ab6765fe4b08536210a20ac728f991e13" title="networking_poll" alt="" coords="684,563,796,589"/><area shape="rect" id="node49" href="../../d0/df3/_t_c_p__client_8h.html#a3333858c51935f9f546cf923b07ed845" title="do_TCP_connection" alt="" coords="670,765,810,792"/><area shape="rect" id="node50" href="../../d6/d03/_t_c_p__server_8h.html#a40e8a0302a359dd4f712eb1e9c346fe5" title="do_TCP_server" alt="" coords="683,613,797,640"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a66563da83f68de4f5e9d7c5f2f72c8f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ip_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00801">801</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01778">punch_holes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;{</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">if</span> (!source || !target)</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    memcpy(target, source, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6d/struct_i_p.html">IP</a>));</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div>
<div class="ttc" id="struct_i_p_html"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html">IP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00153">network.h:153</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a66563da83f68de4f5e9d7c5f2f72c8f3_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a66563da83f68de4f5e9d7c5f2f72c8f3_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a66563da83f68de4f5e9d7c5f2f72c8f3_icgraph" id="d6/d6e/network_8c_a66563da83f68de4f5e9d7c5f2f72c8f3_icgraph">
<area shape="rect" id="node2" href="../../dc/dc1/_d_h_t_8c.html#a7efc873280e2d502bf49489d3ebacc9c" title="punch_holes" alt="" coords="120,157,215,184"/><area shape="rect" id="node3" href="../../dc/dc1/_d_h_t_8c.html#a9243f57fde4a9312f11575eb4e7b1275" title="do_NAT" alt="" coords="263,157,333,184"/><area shape="rect" id="node4" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="381,157,452,184"/><area shape="rect" id="node5" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="500,81,607,108"/><area shape="rect" id="node13" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="516,132,591,159"/><area shape="rect" id="node15" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="513,183,594,209"/><area shape="rect" id="node17" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="528,233,579,260"/><area shape="rect" id="node6" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="683,31,733,57"/><area shape="rect" id="node7" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="667,81,749,108"/><area shape="rect" id="node8" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="809,5,916,32"/><area shape="rect" id="node9" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="837,56,889,83"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="837,107,888,133"/><area shape="rect" id="node11" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="826,157,899,184"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="964,157,1015,184"/><area shape="rect" id="node14" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="655,132,761,159"/><area shape="rect" id="node16" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="655,183,761,209"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af982256c6d8486349bdc13a920884ef6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ip_equal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00716">716</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00140">IP4::in_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00156">IP::ip4</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00157">IP::ip6</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00169">IPV6_IPV4_IN_V6</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00147">IP6::uint32</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00148">IP6::uint64</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d6e/network_8c_source.html#l00749">ipport_equal()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01733">NAT_commonip()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01763">NAT_getports()</a>, <a class="el" href="../../d0/d5a/network__test_8c_source.html#l00137">network_suite()</a>, and <a class="el" href="../../d0/d5a/network__test_8c_source.html#l00078">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;{</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> (!a || !b)</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">/* same family */</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keywordflow">return</span> (a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a>.s_addr == b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a>.s_addr);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET6)</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <span class="keywordflow">return</span> a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#a36c7a85cc2c5062edd5ebf13d46fa343">uint64</a>[0] == b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#a36c7a85cc2c5062edd5ebf13d46fa343">uint64</a>[0] &amp;&amp; a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#a36c7a85cc2c5062edd5ebf13d46fa343">uint64</a>[1] == b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#a36c7a85cc2c5062edd5ebf13d46fa343">uint64</a>[1];</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">/* different family: check on the IPv6 one if it is the IPv4 one embedded */</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET) &amp;&amp; (b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET6)) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d94/network_8h.html#aaaf5ca9c91edc4f8a7529206d7799805">IPV6_IPV4_IN_V6</a>(b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>))</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="keywordflow">return</span> (a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a>.s_addr == b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">uint32</a>[3]);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET6)  &amp;&amp; (b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET)) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d94/network_8h.html#aaaf5ca9c91edc4f8a7529206d7799805">IPV6_IPV4_IN_V6</a>(a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>))</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <span class="keywordflow">return</span> (a-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">uint32</a>[3] == b-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a>.s_addr);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div>
<div class="ttc" id="network_8h_html_aaaf5ca9c91edc4f8a7529206d7799805"><div class="ttname"><a href="../../d9/d94/network_8h.html#aaaf5ca9c91edc4f8a7529206d7799805">IPV6_IPV4_IN_V6</a></div><div class="ttdeci">#define IPV6_IPV4_IN_V6(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00169">network.h:169</a></div></div>
<div class="ttc" id="struct_i_p_html_a14c606eb5ffb078c38ad854dc4e79507"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">IP::ip6</a></div><div class="ttdeci">IP6 ip6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00157">network.h:157</a></div></div>
<div class="ttc" id="struct_i_p_html_aca19646000f55aa927406e68fc41ecf9"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">IP::ip4</a></div><div class="ttdeci">IP4 ip4</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00156">network.h:156</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
<div class="ttc" id="union_i_p4_html_a5a47f63dce37e6eb6be40f022434b1c5"><div class="ttname"><a href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">IP4::in_addr</a></div><div class="ttdeci">struct in_addr in_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00140">network.h:140</a></div></div>
<div class="ttc" id="union_i_p6_html_a1d8ab1f6c1da5565bed41e7095610dea"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">IP6::uint32</a></div><div class="ttdeci">uint32_t uint32[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00147">network.h:147</a></div></div>
<div class="ttc" id="union_i_p6_html_a36c7a85cc2c5062edd5ebf13d46fa343"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#a36c7a85cc2c5062edd5ebf13d46fa343">IP6::uint64</a></div><div class="ttdeci">uint64_t uint64[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00148">network.h:148</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_af982256c6d8486349bdc13a920884ef6_icgraph.png" border="0" usemap="#d6/d6e/network_8c_af982256c6d8486349bdc13a920884ef6_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_af982256c6d8486349bdc13a920884ef6_icgraph" id="d6/d6e/network_8c_af982256c6d8486349bdc13a920884ef6_icgraph">
<area shape="rect" id="node2" href="../../d9/d94/network_8h.html#a6913335cf0b2a76303f5f61d18ea2277" title="ipport_equal" alt="" coords="136,334,228,360"/><area shape="rect" id="node42" href="../../dc/dc1/_d_h_t_8c.html#ae24a26ad9533b87cfbcb0093430bf136" title="NAT_commonip" alt="" coords="124,688,240,715"/><area shape="rect" id="node47" href="../../dc/dc1/_d_h_t_8c.html#a987dbba116d9982c336ea818f05e8c7c" title="NAT_getports" alt="" coords="131,638,233,664"/><area shape="rect" id="node48" href="../../d0/d5a/network__test_8c.html#a92f67c9bea7ef49e6c74386dddbc1582" title="network_suite" alt="" coords="131,739,233,766"/><area shape="rect" id="node50" href="../../d0/d5a/network__test_8c.html#a92f565c272640d707b86a376b6c1cb58" title="START_TEST" alt="" coords="129,790,235,816"/><area shape="rect" id="node3" href="../../d2/d98/dht__test_8c.html#a90ce4d5060f1998109da42a4e83c22c0" title="test_addto_lists_update" alt="" coords="1148,8,1308,35"/><area shape="rect" id="node6" href="../../d4/d9d/assoc_8c.html#a512ebb77cd46109c11a1052a76bf0a66" title="entry_heard_store" alt="" coords="303,211,429,238"/><area shape="rect" id="node10" href="../../d9/d54/ping_8c.html#a3927c1053be4390271a309982aa7284f" title="handle_ping_response" alt="" coords="1153,363,1303,390"/><area shape="rect" id="node20" href="../../dc/dc1/_d_h_t_8c.html#af6cc6aba68b93656a8fdca733e2ae918" title="client_or_ip_port_in_list" alt="" coords="500,160,659,187"/><area shape="rect" id="node21" href="../../dc/dc1/_d_h_t_8c.html#a8def0d75fd95309e03096fbcf5085fe3" title="sent_getnode_to_node" alt="" coords="921,300,1074,327"/><area shape="rect" id="node22" href="../../d8/dc6/net__crypto_8c.html#a9e779393ece10111b0ac7fe2bbc3beeb" title="crypto_connection_add\l_source" alt="" coords="288,512,444,553"/><area shape="rect" id="node29" href="../../de/d42/net__crypto_8h.html#a8ced4e168a95db5708bf4b3095cb4df6" title="set_direct_ip_port" alt="" coords="303,595,429,622"/><area shape="rect" id="node34" href="../../db/d79/onion__client_8c.html#ae8d66f9bb925deae2911c9c00a9a9dc9" title="is_path_used" alt="" coords="317,106,415,132"/><area shape="rect" id="node38" href="../../d9/d54/ping_8c.html#afb4f8490dc31f6d2eab779e12e3ad85b" title="in_list" alt="" coords="338,460,394,487"/><area shape="rect" id="node4" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="1781,110,1896,136"/><area shape="rect" id="node5" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1944,110,2051,136"/><area shape="rect" id="node7" href="../../d4/d9d/assoc_8c.html#a12f651ee082f440e6efcff809958e005" title="candidates_update_assoc" alt="" coords="493,211,666,238"/><area shape="rect" id="node8" href="../../da/d7d/assoc_8h.html#aa0230ae0304fd8540a5bce578d242f30" title="Assoc_add_entry" alt="" coords="729,211,851,238"/><area shape="rect" id="node9" href="../../df/dad/_d_h_t_8h.html#a9d898065db0fd4adf26fdb7f80e6d7ac" title="addto_lists" alt="" coords="955,160,1040,187"/><area shape="rect" id="node19" href="../../dc/dc1/_d_h_t_8c.html#a8c25b3f909399fff843f905f2ad9615f" title="returnedip_ports" alt="" coords="940,236,1055,263"/><area shape="rect" id="node14" href="../../dc/dc1/_d_h_t_8c.html#a4dcc848207b2408def323b8b79b08e4a" title="handle_sendnodes_core" alt="" coords="1147,312,1309,339"/><area shape="rect" id="node16" href="../../d2/d98/dht__test_8c.html#a37f262581ef29d155056c14b2fa0ced1" title="test_addto_lists_bad" alt="" coords="1587,186,1730,212"/><area shape="rect" id="node17" href="../../d2/d98/dht__test_8c.html#a26ee6a8d6a8a726b6a03bdacfa1f3716" title="test_addto_lists_good" alt="" coords="1584,59,1733,86"/><area shape="rect" id="node18" href="../../d2/d98/dht__test_8c.html#a62e2c67aa707a1ea005159db3bc59e36" title="test_addto_lists_possible_bad" alt="" coords="1129,160,1327,187"/><area shape="rect" id="node11" href="../../d6/d2b/ping_8h.html#a86e9eeead72b88b686ce5b7c0f78c325" title="new_ping" alt="" coords="1417,363,1494,390"/><area shape="rect" id="node12" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="1618,363,1699,390"/><area shape="rect" id="node13" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1813,540,1864,567"/><area shape="rect" id="node15" href="../../dc/dc1/_d_h_t_8c.html#ac70b27be10ded8565ffcb94829e40514" title="handle_sendnodes_ipv6" alt="" coords="1375,312,1536,339"/><area shape="rect" id="node23" href="../../de/d42/net__crypto_8h.html#ab11f6e96035c3717a21b809d5373f96f" title="accept_crypto_connection" alt="" coords="492,515,667,542"/><area shape="rect" id="node26" href="../../d8/dc6/net__crypto_8c.html#ae8139c35468806f25d5aed185edcc5a1" title="handle_new_connection\l_handshake" alt="" coords="499,348,660,389"/><area shape="rect" id="node24" href="../../d2/db1/friend__connection_8c.html#ad12421e11a4e0a8ca7223e0d715d2b0c" title="handle_new_connections" alt="" coords="913,566,1081,592"/><area shape="rect" id="node25" href="../../d0/d08/friend__connection_8h.html#a319bec2419cf5fc5525af4fae03b86ef" title="new_friend_connections" alt="" coords="1147,566,1309,592"/><area shape="rect" id="node27" href="../../d8/dc6/net__crypto_8c.html#a86a3ff661a8b9b10fd7c0daee3901091" title="tcp_oob_callback" alt="" coords="729,363,851,390"/><area shape="rect" id="node28" href="../../d8/dc6/net__crypto_8c.html#a812ca8a7291e22ce343669c9835c7c12" title="udp_handle_packet" alt="" coords="723,312,857,339"/><area shape="rect" id="node30" href="../../d2/db1/friend__connection_8c.html#a6aa37bc6ee3246c06d37000677b205e8" title="dht_ip_callback" alt="" coords="523,616,635,643"/><area shape="rect" id="node32" href="../../d0/d08/friend__connection_8h.html#aea88c3aa2deff558e9b13ed5229cbb6b" title="do_friend_connections" alt="" coords="503,667,655,694"/><area shape="rect" id="node31" href="../../d2/db1/friend__connection_8c.html#aa293768f213199a635ce0b4a94489cdf" title="change_dht_pk" alt="" coords="735,616,845,643"/><area shape="rect" id="node33" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="737,667,843,694"/><area shape="rect" id="node35" href="../../db/d79/onion__client_8c.html#a0ec6065dac34021e69682691f70b667c" title="random_path" alt="" coords="531,102,628,128"/><area shape="rect" id="node36" href="../../db/d79/onion__client_8c.html#a4253f1739f978c9aac584c97b7a55f48" title="client_send_announce\l_request" alt="" coords="715,94,865,136"/><area shape="rect" id="node37" href="../../d9/d26/onion__client_8h.html#aa1be42b5ea93bd068f47271831157927" title="send_onion_data" alt="" coords="730,43,850,70"/><area shape="rect" id="node39" href="../../d6/d2b/ping_8h.html#a088e8f057d04ba6808f300cde41fa6af" title="add_to_ping" alt="" coords="951,464,1043,491"/><area shape="rect" id="node40" href="../../dc/dc1/_d_h_t_8c.html#afa4f13a29cbe60809f2446267d109383" title="handle_getnodes" alt="" coords="1395,439,1515,466"/><area shape="rect" id="node41" href="../../d9/d54/ping_8c.html#a8bb0298504d1f6a612100d0b17e3ab90" title="handle_ping_request" alt="" coords="1157,414,1299,440"/><area shape="rect" id="node43" href="../../dc/dc1/_d_h_t_8c.html#a9243f57fde4a9312f11575eb4e7b1275" title="do_NAT" alt="" coords="331,688,401,715"/><area shape="rect" id="node44" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="544,718,615,744"/><area shape="rect" id="node45" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="753,768,827,795"/><area shape="rect" id="node46" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="749,819,831,846"/><area shape="rect" id="node49" href="../../d0/d5a/network__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="341,739,391,766"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6aa0dce9c25e370af93bf4a14f79c709"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ip_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ipv6enabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00770">770</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01434">DHT_bootstrap_from_address()</a>, <a class="el" href="../../d1/d36/tox-bootstrapd_8c_source.html#l00519">main()</a>, <a class="el" href="../../d8/d8d/_messenger_8c_source.html#l01751">new_messenger()</a>, <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00269">new_onions()</a>, <a class="el" href="../../d2/d98/dht__test_8c_source.html#l00349">START_TEST()</a>, and <a class="el" href="../../d3/d69/tox_8c_source.html#l00124">tox_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;{</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (!ip)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    memset(ip, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6d/struct_i_p.html">IP</a>));</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = ipv6enabled ? AF_INET6 : AF_INET;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div>
<div class="ttc" id="struct_i_p_html"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html">IP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00153">network.h:153</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a6aa0dce9c25e370af93bf4a14f79c709_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a6aa0dce9c25e370af93bf4a14f79c709_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a6aa0dce9c25e370af93bf4a14f79c709_icgraph" id="d6/d6e/network_8c_a6aa0dce9c25e370af93bf4a14f79c709_icgraph">
<area shape="rect" id="node2" href="../../df/dad/_d_h_t_8h.html#af342c78837dbed569d4a75a0516455fc" title="DHT_bootstrap_from\l_address" alt="" coords="109,41,253,82"/><area shape="rect" id="node4" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="528,56,579,83"/><area shape="rect" id="node6" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="123,157,240,184"/><area shape="rect" id="node8" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="341,208,412,235"/><area shape="rect" id="node15" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="136,259,227,285"/><area shape="rect" id="node17" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="128,309,235,336"/><area shape="rect" id="node3" href="../../d1/d36/tox-bootstrapd_8c.html#a3b29f8b1522a8d051f35cc76a54f846a" title="bootstrap_from_config" alt="" coords="301,5,452,32"/><area shape="rect" id="node5" href="../../db/d5e/_d_h_t__bootstrap_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="351,56,402,83"/><area shape="rect" id="node7" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="351,157,402,184"/><area shape="rect" id="node9" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="500,132,607,159"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="521,183,585,209"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="514,233,593,260"/><area shape="rect" id="node14" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="528,284,579,311"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="655,183,705,209"/><area shape="rect" id="node13" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="655,233,705,260"/><area shape="rect" id="node16" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="323,259,430,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac56c677f4bc8bf8311370ee105ae7cbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ip_isset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00780">780</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d54/ping_8c_source.html#l00260">add_to_ping()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01434">DHT_bootstrap_from_address()</a>, <a class="el" href="../../d8/d8d/_messenger_8c_source.html#l02280">do_messenger()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01827">do_NAT()</a>, <a class="el" href="../../d9/d54/ping_8c_source.html#l00299">do_to_ping()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01494">friend_iplist()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00789">ipport_isset()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01467">route_packet()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01562">route_tofriend()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01617">routeone_tofriend()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01904">send_hardening_getnode_res()</a>, and <a class="el" href="../../d1/de5/_l_a_n__discovery_8c_source.html#l00324">send_LANdiscovery()</a>.</p>
<div class="fragment"><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;{</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">if</span> (!ip)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">return</span> (ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> != 0);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;}</div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ac56c677f4bc8bf8311370ee105ae7cbb_icgraph.png" border="0" usemap="#d6/d6e/network_8c_ac56c677f4bc8bf8311370ee105ae7cbb_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ac56c677f4bc8bf8311370ee105ae7cbb_icgraph" id="d6/d6e/network_8c_ac56c677f4bc8bf8311370ee105ae7cbb_icgraph">
<area shape="rect" id="node2" href="../../d6/d2b/ping_8h.html#a088e8f057d04ba6808f300cde41fa6af" title="add_to_ping" alt="" coords="790,524,882,551"/><area shape="rect" id="node8" href="../../df/dad/_d_h_t_8h.html#af342c78837dbed569d4a75a0516455fc" title="DHT_bootstrap_from\l_address" alt="" coords="120,347,264,389"/><area shape="rect" id="node11" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1447,107,1554,133"/><area shape="rect" id="node18" href="../../dc/dc1/_d_h_t_8c.html#a9243f57fde4a9312f11575eb4e7b1275" title="do_NAT" alt="" coords="801,163,871,189"/><area shape="rect" id="node22" href="../../d6/d2b/ping_8h.html#af1ade820101b833a4615cb9fb58bebad" title="do_to_ping" alt="" coords="572,296,657,323"/><area shape="rect" id="node23" href="../../dc/dc1/_d_h_t_8c.html#a1b3c1814260eace443e6feb13227cc82" title="friend_iplist" alt="" coords="148,245,236,272"/><area shape="rect" id="node24" href="../../df/dad/_d_h_t_8h.html#aee23d763e291eefd141227cd9e3684ab" title="route_tofriend" alt="" coords="345,195,447,221"/><area shape="rect" id="node27" href="../../d9/d94/network_8h.html#a8436367218afb29bcf1b5fecd071648e" title="ipport_isset" alt="" coords="147,727,237,753"/><area shape="rect" id="node45" href="../../df/dad/_d_h_t_8h.html#a91072d384a61a04ac1e4d679dc7efb3a" title="route_packet" alt="" coords="143,431,241,457"/><area shape="rect" id="node47" href="../../dc/dc1/_d_h_t_8c.html#ad1a9a37b7cda1411149867eb77070bd1" title="routeone_tofriend" alt="" coords="335,144,457,171"/><area shape="rect" id="node48" href="../../dc/dc1/_d_h_t_8c.html#ac35510e6bf4c6cfa950de4da3f4d8718" title="send_hardening_getnode_res" alt="" coords="971,980,1161,1007"/><area shape="rect" id="node49" href="../../dd/db4/_l_a_n__discovery_8h.html#a929a14971d13e5aad2661e834e406391" title="send_LANdiscovery" alt="" coords="123,1031,261,1057"/><area shape="rect" id="node3" href="../../dc/dc1/_d_h_t_8c.html#afa4f13a29cbe60809f2446267d109383" title="handle_getnodes" alt="" coords="1006,575,1126,601"/><area shape="rect" id="node6" href="../../d9/d54/ping_8c.html#a8bb0298504d1f6a612100d0b17e3ab90" title="handle_ping_request" alt="" coords="1220,524,1361,551"/><area shape="rect" id="node4" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="1630,549,1711,576"/><area shape="rect" id="node5" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1788,487,1839,513"/><area shape="rect" id="node7" href="../../d6/d2b/ping_8h.html#a86e9eeead72b88b686ce5b7c0f78c325" title="new_ping" alt="" coords="1462,524,1539,551"/><area shape="rect" id="node9" href="../../d1/d36/tox-bootstrapd_8c.html#a3b29f8b1522a8d051f35cc76a54f846a" title="bootstrap_from_config" alt="" coords="1215,372,1366,399"/><area shape="rect" id="node10" href="../../db/d5e/_d_h_t__bootstrap_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="371,397,421,424"/><area shape="rect" id="node12" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1645,132,1696,159"/><area shape="rect" id="node13" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="1629,81,1712,108"/><area shape="rect" id="node14" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="1760,107,1867,133"/><area shape="rect" id="node15" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="1787,157,1839,184"/><area shape="rect" id="node16" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1788,5,1839,32"/><area shape="rect" id="node17" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="1777,56,1850,83"/><area shape="rect" id="node19" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="1255,271,1326,297"/><area shape="rect" id="node20" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="1463,245,1538,272"/><area shape="rect" id="node21" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="1460,296,1541,323"/><area shape="rect" id="node25" href="../../db/d79/onion__client_8c.html#a35bf565e3fc2b84ba3434d7cb38ba0e4" title="send_dht_dhtpk" alt="" coords="557,195,672,221"/><area shape="rect" id="node26" href="../../dc/dc1/_d_h_t_8c.html#a25f7b3704b34bb8745a0a60939e1f49c" title="send_NATping" alt="" coords="561,144,669,171"/><area shape="rect" id="node28" href="../../d4/d9d/assoc_8c.html#a512ebb77cd46109c11a1052a76bf0a66" title="entry_heard_store" alt="" coords="333,828,459,855"/><area shape="rect" id="node30" href="../../da/d7d/assoc_8h.html#aa0230ae0304fd8540a5bce578d242f30" title="Assoc_add_entry" alt="" coords="775,828,897,855"/><area shape="rect" id="node33" href="../../dc/dc1/_d_h_t_8c.html#ac70b27be10ded8565ffcb94829e40514" title="handle_sendnodes_ipv6" alt="" coords="1420,853,1581,880"/><area shape="rect" id="node36" href="../../d4/d9d/assoc_8c.html#aa745e9c0a5448ce04ab65c5156b4a531" title="candidates_create_new" alt="" coords="535,777,694,804"/><area shape="rect" id="node37" href="../../da/d7d/assoc_8h.html#ad8b38a62362a313e54af7ae07c36606f" title="Assoc_get_close_entries" alt="" coords="312,676,480,703"/><area shape="rect" id="node38" href="../../df/dad/_d_h_t_8h.html#a1dac5e05fd07964cb4914c17afeb9d50" title="DHT_addfriend" alt="" coords="559,727,670,753"/><area shape="rect" id="node39" href="../../df/dad/_d_h_t_8h.html#a8abfc9cea3784b0cae354670bd4643cd" title="get_close_nodes" alt="" coords="555,625,675,652"/><area shape="rect" id="node43" href="../../dc/dc1/_d_h_t_8c.html#a9480aac51c9c74c667267ce89a76604a" title="do_hardening" alt="" coords="1017,372,1115,399"/><area shape="rect" id="node29" href="../../d4/d9d/assoc_8c.html#a12f651ee082f440e6efcff809958e005" title="candidates_update_assoc" alt="" coords="528,828,701,855"/><area shape="rect" id="node31" href="../../df/dad/_d_h_t_8h.html#a9d898065db0fd4adf26fdb7f80e6d7ac" title="addto_lists" alt="" coords="1023,879,1109,905"/><area shape="rect" id="node34" href="../../dc/dc1/_d_h_t_8c.html#a8c25b3f909399fff843f905f2ad9615f" title="returnedip_ports" alt="" coords="1233,828,1348,855"/><area shape="rect" id="node35" href="../../db/d0f/assoc__test_8c.html#a242f6c133a1fef9d5e86336e74b7ddae" title="START_TEST" alt="" coords="1013,777,1119,804"/><area shape="rect" id="node32" href="../../dc/dc1/_d_h_t_8c.html#a4dcc848207b2408def323b8b79b08e4a" title="handle_sendnodes_core" alt="" coords="1209,879,1372,905"/><area shape="rect" id="node40" href="../../df/d75/onion__announce_8c.html#a5cc40944c42a4e0d1d3d702cf93ac8ad" title="handle_announce_request" alt="" coords="749,625,923,652"/><area shape="rect" id="node41" href="../../db/d79/onion__client_8c.html#a18daedee61cc5670d52904fc89e4b32b" title="populate_path_nodes" alt="" coords="763,676,909,703"/><area shape="rect" id="node42" href="../../dc/dc1/_d_h_t_8c.html#af89838d6c1c8e0ec82dfadbe2953e06d" title="random_node" alt="" coords="786,423,886,449"/><area shape="rect" id="node44" href="../../dc/dc1/_d_h_t_8c.html#acce043cdc5108edffc35e6e879197d20" title="sendnodes_ipv6" alt="" coords="778,575,894,601"/><area shape="rect" id="node46" href="../../dc/dc1/_d_h_t_8c.html#aa8dd9b8abd89728492c0c9c6299c0a8b" title="cryptopacket_handle" alt="" coords="995,473,1137,500"/><area shape="rect" id="node50" href="../../d2/db1/friend__connection_8c.html#adfc6df8fda15c84a4c49468d1d2fc3fc" title="LANdiscovery" alt="" coords="344,1081,448,1108"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af71f49c78ce7b76ccf08785c6ec08706"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ip_ntoa </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00827">827</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d6/d6e/network_8c_source.html#l00826">addresstext</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00156">IP::ip4</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00157">IP::ip6</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00886">do_Assoc()</a>, <a class="el" href="../../d8/d8d/_messenger_8c_source.html#l02280">do_messenger()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">new_networking_ex()</a>, <a class="el" href="../../d3/dfd/_d_h_t__test_8c_source.html#l00084">print_assoc()</a>, <a class="el" href="../../d3/dfd/_d_h_t__test_8c_source.html#l00122">print_friendlist()</a>, and <a class="el" href="../../d0/d5a/network__test_8c_source.html#l00016">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;{</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (ip) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">if</span> (ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="comment">/* returns standard quad-dotted notation */</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="keyword">struct </span>in_addr *addr = (<span class="keyword">struct </span>in_addr *)&amp;ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>[0] = 0;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            inet_ntop(ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>, addr, <a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>));</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET6) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="comment">/* returns hex-groups enclosed into square brackets */</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keyword">struct </span>in6_addr *addr = (<span class="keyword">struct </span>in6_addr *)&amp;ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>[0] = <span class="charliteral">&#39;[&#39;</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            inet_ntop(ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>, addr, &amp;<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>[1], <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>) - 3);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <span class="keywordtype">size_t</span> len = strlen(<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>[len] = <span class="charliteral">&#39;]&#39;</span>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            <a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>[len + 1] = 0;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            snprintf(<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>), <span class="stringliteral">&quot;(IP invalid, family %u)&quot;</span>, ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        snprintf(<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>), <span class="stringliteral">&quot;(IP invalid: NULL)&quot;</span>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="comment">/* brute force protection against lacking termination */</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>[<span class="keyword">sizeof</span>(<a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>) - 1] = 0;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;}</div>
<div class="ttc" id="network_8c_html_a269d957bd615e26e36b2ed0d2757b7e0"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a269d957bd615e26e36b2ed0d2757b7e0">addresstext</a></div><div class="ttdeci">static char addresstext[96]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00826">network.c:826</a></div></div>
<div class="ttc" id="struct_i_p_html_a14c606eb5ffb078c38ad854dc4e79507"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">IP::ip6</a></div><div class="ttdeci">IP6 ip6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00157">network.h:157</a></div></div>
<div class="ttc" id="struct_i_p_html_aca19646000f55aa927406e68fc41ecf9"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">IP::ip4</a></div><div class="ttdeci">IP4 ip4</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00156">network.h:156</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_af71f49c78ce7b76ccf08785c6ec08706_icgraph.png" border="0" usemap="#d6/d6e/network_8c_af71f49c78ce7b76ccf08785c6ec08706_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_af71f49c78ce7b76ccf08785c6ec08706_icgraph" id="d6/d6e/network_8c_af71f49c78ce7b76ccf08785c6ec08706_icgraph">
<area shape="rect" id="node2" href="../../da/d7d/assoc_8h.html#a36aff33785fb0db2565cf4cb5b080327" title="do_Assoc" alt="" coords="146,208,226,235"/><area shape="rect" id="node4" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="472,5,579,32"/><area shape="rect" id="node17" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="117,360,255,387"/><area shape="rect" id="node29" href="../../d3/dfd/_d_h_t__test_8c.html#aec1adc27c02d5b5f89578cf204a55499" title="print_assoc" alt="" coords="141,411,231,437"/><area shape="rect" id="node32" href="../../d3/dfd/_d_h_t__test_8c.html#ad94c4250d373760f1702fb8d55050ed7" title="print_friendlist" alt="" coords="310,461,413,488"/><area shape="rect" id="node33" href="../../d0/d5a/network__test_8c.html#a011610afc3d9633e4bec180e6b421d5a" title="START_TEST" alt="" coords="133,512,239,539"/><area shape="rect" id="node3" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="326,107,397,133"/><area shape="rect" id="node12" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="488,56,563,83"/><area shape="rect" id="node14" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="485,107,566,133"/><area shape="rect" id="node16" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="500,157,551,184"/><area shape="rect" id="node5" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="659,5,709,32"/><area shape="rect" id="node6" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="643,81,725,108"/><area shape="rect" id="node7" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="785,107,892,133"/><area shape="rect" id="node8" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="813,56,865,83"/><area shape="rect" id="node9" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="813,247,864,273"/><area shape="rect" id="node10" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="802,183,875,209"/><area shape="rect" id="node11" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="940,253,991,280"/><area shape="rect" id="node13" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="631,132,737,159"/><area shape="rect" id="node15" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="631,183,737,209"/><area shape="rect" id="node18" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="303,360,420,387"/><area shape="rect" id="node25" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="303,259,419,285"/><area shape="rect" id="node19" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="500,411,551,437"/><area shape="rect" id="node20" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="490,360,561,387"/><area shape="rect" id="node21" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="631,385,737,412"/><area shape="rect" id="node22" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="652,284,716,311"/><area shape="rect" id="node23" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="799,323,878,349"/><area shape="rect" id="node24" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="659,436,709,463"/><area shape="rect" id="node26" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="468,309,583,336"/><area shape="rect" id="node28" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="480,259,571,285"/><area shape="rect" id="node27" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="631,233,737,260"/><area shape="rect" id="node30" href="../../d3/dfd/_d_h_t__test_8c.html#a463f6057bfaeb5eb8237803f36414103" title="print_clientlist" alt="" coords="310,411,413,437"/><area shape="rect" id="node31" href="../../d3/dfd/_d_h_t__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="500,461,551,488"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae25cce1bbb77b6a8b441bb940a75783f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ip_parse_addr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00870">870</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00156">IP::ip4</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00157">IP::ip6</a>.</p>

<p>Referenced by <a class="el" href="../../da/da1/_t_c_p__client_8c_source.html#l00074">proxy_http_generate_connection_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;{</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">if</span> (!address || !ip) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keyword">struct </span>in_addr *addr = (<span class="keyword">struct </span>in_addr *)&amp;ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">return</span> inet_ntop(ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>, addr, address, length) != NULL;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET6) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keyword">struct </span>in6_addr *addr = (<span class="keyword">struct </span>in6_addr *)&amp;ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">return</span> inet_ntop(ip-&gt;<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>, addr, address, length) != NULL;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="ttc" id="struct_i_p_html_a14c606eb5ffb078c38ad854dc4e79507"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">IP::ip6</a></div><div class="ttdeci">IP6 ip6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00157">network.h:157</a></div></div>
<div class="ttc" id="struct_i_p_html_aca19646000f55aa927406e68fc41ecf9"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">IP::ip4</a></div><div class="ttdeci">IP4 ip4</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00156">network.h:156</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ae25cce1bbb77b6a8b441bb940a75783f_icgraph.png" border="0" usemap="#d6/d6e/network_8c_ae25cce1bbb77b6a8b441bb940a75783f_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ae25cce1bbb77b6a8b441bb940a75783f_icgraph" id="d6/d6e/network_8c_ae25cce1bbb77b6a8b441bb940a75783f_icgraph">
<area shape="rect" id="node2" href="../../da/da1/_t_c_p__client_8c.html#a3000ce77c7c25ee8a08da815cbd0c7cb" title="proxy_http_generate\l_connection_request" alt="" coords="156,401,299,442"/><area shape="rect" id="node3" href="../../d0/df3/_t_c_p__client_8h.html#aedb0d5c54ac7754bb342517247ac632d" title="new_TCP_connection" alt="" coords="347,408,497,435"/><area shape="rect" id="node4" href="../../d2/d8d/_t_c_p__test_8c.html#a54051584eff6e81044025b36d88c9a2b" title="START_TEST" alt="" coords="591,332,697,359"/><area shape="rect" id="node5" href="../../d5/d26/_t_c_p__connection_8c.html#a81963b2aeca3eb88b3fea76869b19fad" title="reconnect_tcp_relay\l_connection" alt="" coords="575,485,713,526"/><area shape="rect" id="node19" href="../../d5/d26/_t_c_p__connection_8c.html#a359cec296ed123fc92b9b149266b30a4" title="unsleep_tcp_relay_connection" alt="" coords="545,434,743,460"/><area shape="rect" id="node20" href="../../d5/d26/_t_c_p__connection_8c.html#af221264f649b29407becf0e4ca352cbd" title="add_tcp_relay_instance" alt="" coords="565,383,723,410"/><area shape="rect" id="node6" href="../../d5/d26/_t_c_p__connection_8c.html#a6377f0f3d60ba706c5b014a9439696b7" title="do_tcp_conns" alt="" coords="826,488,929,515"/><area shape="rect" id="node7" href="../../da/d39/_t_c_p__connection_8h.html#a30c1a9c57a8d07cc2327c0505d6619a4" title="do_tcp_connections" alt="" coords="1012,488,1151,515"/><area shape="rect" id="node8" href="../../d2/d8d/_t_c_p__test_8c.html#a1b7f98a901f4b8685223ec1dac1c1ce3" title="START_TEST" alt="" coords="1217,383,1324,410"/><area shape="rect" id="node9" href="../../d8/dc6/net__crypto_8c.html#adf499e22f45244e3660f9da6de77d2a3" title="do_tcp" alt="" coords="1240,488,1301,515"/><area shape="rect" id="node10" href="../../de/d42/net__crypto_8h.html#a6fa028eb320bf09ecd619c5053580436" title="do_net_crypto" alt="" coords="1395,492,1499,519"/><area shape="rect" id="node11" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="2420,350,2527,376"/><area shape="rect" id="node12" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="2648,299,2699,326"/><area shape="rect" id="node13" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="2632,350,2715,376"/><area shape="rect" id="node14" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="2795,299,2901,326"/><area shape="rect" id="node15" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="2822,350,2874,376"/><area shape="rect" id="node16" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="2823,400,2873,427"/><area shape="rect" id="node17" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="2811,198,2885,224"/><area shape="rect" id="node18" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="2949,198,3000,224"/><area shape="rect" id="node21" href="../../da/d39/_t_c_p__connection_8h.html#a5ee1dbaa28ff59e0f452eda3c97418e3" title="add_tcp_relay_global" alt="" coords="1199,434,1343,460"/><area shape="rect" id="node38" href="../../da/d39/_t_c_p__connection_8h.html#a26901882c0b134822660515493683132" title="add_tcp_relay_connection" alt="" coords="791,383,964,410"/><area shape="rect" id="node22" href="../../d2/d8d/_t_c_p__test_8c.html#ac45927e61cae5bb70dbde2b32c8f62ff" title="START_TEST" alt="" coords="1393,442,1500,468"/><area shape="rect" id="node23" href="../../de/d42/net__crypto_8h.html#a632021583d7dd2484614071a7080f311" title="add_tcp_relay" alt="" coords="1395,391,1498,418"/><area shape="rect" id="node24" href="../../d2/db1/friend__connection_8c.html#a9360ec098f2b1082b480b4e36b0a5f07" title="tcp_relay_node_callback" alt="" coords="1551,223,1716,250"/><area shape="rect" id="node36" href="../../da/d8f/tox_8h.html#ae858a499d7f8e2e5cbf5533afbd20537" title="tox_add_tcp_relay" alt="" coords="1569,442,1697,468"/><area shape="rect" id="node25" href="../../d0/d08/friend__connection_8h.html#a613a80a004fccd616de2a67d84a25d3c" title="new_friend_connection" alt="" coords="1975,184,2129,211"/><area shape="rect" id="node35" href="../../d9/d26/onion__client_8h.html#a7bb680d62616d0dfbb6f7d2ff097107c" title="recv_tcp_relay_handler" alt="" coords="1764,180,1920,207"/><area shape="rect" id="node26" href="../../df/de9/toxcore_2group_8c.html#ab08da4834d9772b1ef1f3b35ae5197c1" title="connect_to_closest" alt="" coords="2198,246,2333,272"/><area shape="rect" id="node28" href="../../d8/d8d/_messenger_8c.html#aa3be5ad998d2b0ced07aceab765eaa2f" title="init_new_friend" alt="" coords="2211,184,2320,211"/><area shape="rect" id="node27" href="../../dd/de4/toxcore_2group_8h.html#a9529a2149c68cbff38d43419d9ebeecc" title="do_groupchats" alt="" coords="2420,274,2527,300"/><area shape="rect" id="node29" href="../../d4/d30/_messenger_8h.html#ac77431b1ab0b12af003657e11057bd9c" title="m_addfriend" alt="" coords="2427,159,2520,186"/><area shape="rect" id="node33" href="../../d4/d30/_messenger_8h.html#a2f7aa06733a25e8c0edc8f31a22a78dc" title="m_addfriend_norequest" alt="" coords="2395,210,2552,236"/><area shape="rect" id="node30" href="../../d8/d8d/_messenger_8c.html#ad971e0d0877b61a160884d59527d39d9" title="friends_list_load" alt="" coords="2615,198,2731,224"/><area shape="rect" id="node31" href="../../d2/dee/friends__test_8c.html#a7266443b3a915168c8c968318182d3d5" title="parent_friend_request" alt="" coords="2600,96,2747,123"/><area shape="rect" id="node32" href="../../da/d8f/tox_8h.html#aa921c439baad10c03f8d93fda753b0b8" title="tox_friend_add" alt="" coords="2620,147,2727,174"/><area shape="rect" id="node34" href="../../d2/dee/friends__test_8c.html#ace1a1349a29721b64c0cfcf27e867f24" title="child_got_request" alt="" coords="2611,248,2735,275"/><area shape="rect" id="node37" href="../../d9/d35/tox__test_8c.html#a7d4f70e1580986cb8b3ba57d085ccc13" title="START_TEST" alt="" coords="1789,442,1895,468"/><area shape="rect" id="node39" href="../../de/d42/net__crypto_8h.html#a4b9f3aef7b0d4c461294e24a21e64e71" title="add_tcp_relay_peer" alt="" coords="1014,332,1149,359"/><area shape="rect" id="node40" href="../../d2/db1/friend__connection_8c.html#a612a688a590b1836efec92949e3cbdff" title="connect_to_saved_tcp\l_relays" alt="" coords="1557,325,1710,366"/><area shape="rect" id="node42" href="../../d0/d08/friend__connection_8h.html#ac89688f7660c1cb5fb664ecc09bab460" title="friend_add_tcp_relay" alt="" coords="1199,223,1342,250"/><area shape="rect" id="node41" href="../../d0/d08/friend__connection_8h.html#aea88c3aa2deff558e9b13ed5229cbb6b" title="do_friend_connections" alt="" coords="2189,307,2341,334"/><area shape="rect" id="node43" href="../../d2/db1/friend__connection_8c.html#a6aa37bc6ee3246c06d37000677b205e8" title="dht_ip_callback" alt="" coords="1391,130,1503,156"/><area shape="rect" id="node49" href="../../d2/db1/friend__connection_8c.html#a5f8ad19d23bf2ff57659934d2c2eb904" title="handle_packet" alt="" coords="1789,28,1895,55"/><area shape="rect" id="node50" href="../../d2/db1/friend__connection_8c.html#a6e0e582317de001468faab8240bd2b5c" title="send_relays" alt="" coords="2006,282,2098,308"/><area shape="rect" id="node44" href="../../d2/db1/friend__connection_8c.html#aa293768f213199a635ce0b4a94489cdf" title="change_dht_pk" alt="" coords="1578,79,1689,106"/><area shape="rect" id="node45" href="../../d2/db1/friend__connection_8c.html#a53d1bd9e6126683e05e0e14cc70d1a8a" title="dht_pk_callback" alt="" coords="1784,79,1900,106"/><area shape="rect" id="node47" href="../../d2/db1/friend__connection_8c.html#ad12421e11a4e0a8ca7223e0d715d2b0c" title="handle_new_connections" alt="" coords="1968,28,2136,55"/><area shape="rect" id="node46" href="../../d2/db1/friend__connection_8c.html#ac2af058fd8684e6abc7b136889f5f4e5" title="friend_new_connection" alt="" coords="1975,79,2129,106"/><area shape="rect" id="node48" href="../../d0/d08/friend__connection_8h.html#a319bec2419cf5fc5525af4fae03b86ef" title="new_friend_connections" alt="" coords="2184,28,2347,55"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2bfd1efbce5b035b10c879a7e85c08df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ip_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a> *&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00761">761</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d1/de5/_l_a_n__discovery_8c_source.html#l00199">broadcast_ip()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01434">DHT_bootstrap_from_address()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01295">DHT_getfriendip()</a>, <a class="el" href="../../d9/d54/ping_8c_source.html#l00299">do_to_ping()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01733">NAT_commonip()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l00700">replace_all()</a>, and <a class="el" href="../../d0/d5a/network__test_8c_source.html#l00016">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">if</span> (!ip)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    memset(ip, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6d/struct_i_p.html">IP</a>));</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;}</div>
<div class="ttc" id="struct_i_p_html"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html">IP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00153">network.h:153</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a2bfd1efbce5b035b10c879a7e85c08df_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a2bfd1efbce5b035b10c879a7e85c08df_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a2bfd1efbce5b035b10c879a7e85c08df_icgraph" id="d6/d6e/network_8c_a2bfd1efbce5b035b10c879a7e85c08df_icgraph">
<area shape="rect" id="node2" href="../../d1/de5/_l_a_n__discovery_8c.html#a9fa84b6ea98e56c412f2c45673c180cc" title="broadcast_ip" alt="" coords="145,76,241,103"/><area shape="rect" id="node15" href="../../df/dad/_d_h_t_8h.html#af342c78837dbed569d4a75a0516455fc" title="DHT_bootstrap_from\l_address" alt="" coords="121,145,265,186"/><area shape="rect" id="node18" href="../../df/dad/_d_h_t_8h.html#a963cf2afd9283277f69a94381e3fc5f0" title="DHT_getfriendip" alt="" coords="135,312,252,339"/><area shape="rect" id="node23" href="../../d6/d2b/ping_8h.html#af1ade820101b833a4615cb9fb58bebad" title="do_to_ping" alt="" coords="340,262,425,288"/><area shape="rect" id="node28" href="../../dc/dc1/_d_h_t_8c.html#ae24a26ad9533b87cfbcb0093430bf136" title="NAT_commonip" alt="" coords="135,211,251,238"/><area shape="rect" id="node30" href="../../dc/dc1/_d_h_t_8c.html#adfcc072141badf7d1cd04542b3dd26b1" title="replace_all" alt="" coords="151,363,235,390"/><area shape="rect" id="node50" href="../../d0/d5a/network__test_8c.html#a011610afc3d9633e4bec180e6b421d5a" title="START_TEST" alt="" coords="140,414,247,440"/><area shape="rect" id="node3" href="../../dd/db4/_l_a_n__discovery_8h.html#a929a14971d13e5aad2661e834e406391" title="send_LANdiscovery" alt="" coords="313,59,452,86"/><area shape="rect" id="node4" href="../../d2/db1/friend__connection_8c.html#adfc6df8fda15c84a4c49468d1d2fc3fc" title="LANdiscovery" alt="" coords="547,59,651,86"/><area shape="rect" id="node14" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1185,186,1236,212"/><area shape="rect" id="node5" href="../../d0/d08/friend__connection_8h.html#aea88c3aa2deff558e9b13ed5229cbb6b" title="do_friend_connections" alt="" coords="750,66,902,92"/><area shape="rect" id="node6" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="976,84,1083,111"/><area shape="rect" id="node7" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1185,84,1236,111"/><area shape="rect" id="node8" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="1329,211,1412,238"/><area shape="rect" id="node9" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="1472,211,1579,238"/><area shape="rect" id="node10" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="1499,312,1551,339"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1627,338,1677,364"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="1489,160,1562,187"/><area shape="rect" id="node13" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1627,287,1677,314"/><area shape="rect" id="node16" href="../../d1/d36/tox-bootstrapd_8c.html#a3b29f8b1522a8d051f35cc76a54f846a" title="bootstrap_from_config" alt="" coords="751,123,901,150"/><area shape="rect" id="node17" href="../../db/d5e/_d_h_t__bootstrap_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="357,160,408,187"/><area shape="rect" id="node19" href="../../d9/d26/onion__client_8h.html#a729c34e35841408f6d775179f4e7a48b" title="onion_getfriendip" alt="" coords="969,351,1089,378"/><area shape="rect" id="node21" href="../../d3/dfd/_d_h_t__test_8c.html#ad94c4250d373760f1702fb8d55050ed7" title="print_friendlist" alt="" coords="331,312,434,339"/><area shape="rect" id="node20" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1317,338,1424,364"/><area shape="rect" id="node22" href="../../d3/dfd/_d_h_t__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="573,312,624,339"/><area shape="rect" id="node24" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="791,224,861,251"/><area shape="rect" id="node25" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="992,287,1067,314"/><area shape="rect" id="node27" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="989,236,1070,263"/><area shape="rect" id="node26" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1157,287,1264,314"/><area shape="rect" id="node29" href="../../dc/dc1/_d_h_t_8c.html#a9243f57fde4a9312f11575eb4e7b1275" title="do_NAT" alt="" coords="563,211,634,238"/><area shape="rect" id="node31" href="../../df/dad/_d_h_t_8h.html#a9d898065db0fd4adf26fdb7f80e6d7ac" title="addto_lists" alt="" coords="340,540,425,567"/><area shape="rect" id="node32" href="../../d9/d54/ping_8c.html#a3927c1053be4390271a309982aa7284f" title="handle_ping_response" alt="" coords="523,414,674,440"/><area shape="rect" id="node42" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="1153,566,1268,592"/><area shape="rect" id="node44" href="../../dc/dc1/_d_h_t_8c.html#a4dcc848207b2408def323b8b79b08e4a" title="handle_sendnodes_core" alt="" coords="517,464,680,491"/><area shape="rect" id="node46" href="../../d2/d98/dht__test_8c.html#a37f262581ef29d155056c14b2fa0ced1" title="test_addto_lists_bad" alt="" coords="755,566,897,592"/><area shape="rect" id="node47" href="../../d2/d98/dht__test_8c.html#a26ee6a8d6a8a726b6a03bdacfa1f3716" title="test_addto_lists_good" alt="" coords="955,616,1104,643"/><area shape="rect" id="node48" href="../../d2/d98/dht__test_8c.html#a62e2c67aa707a1ea005159db3bc59e36" title="test_addto_lists_possible_bad" alt="" coords="500,667,697,694"/><area shape="rect" id="node49" href="../../d2/d98/dht__test_8c.html#a90ce4d5060f1998109da42a4e83c22c0" title="test_addto_lists_update" alt="" coords="746,704,906,731"/><area shape="rect" id="node33" href="../../d6/d2b/ping_8h.html#a86e9eeead72b88b686ce5b7c0f78c325" title="new_ping" alt="" coords="787,414,865,440"/><area shape="rect" id="node34" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="989,414,1070,440"/><area shape="rect" id="node35" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="1152,439,1269,466"/><area shape="rect" id="node41" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="1165,388,1256,415"/><area shape="rect" id="node36" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1345,388,1396,415"/><area shape="rect" id="node37" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="1335,439,1406,466"/><area shape="rect" id="node38" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1472,464,1579,491"/><area shape="rect" id="node39" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1493,414,1557,440"/><area shape="rect" id="node40" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1486,363,1565,390"/><area shape="rect" id="node43" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1317,566,1424,592"/><area shape="rect" id="node45" href="../../dc/dc1/_d_h_t_8c.html#ac70b27be10ded8565ffcb94829e40514" title="handle_sendnodes_ipv6" alt="" coords="745,464,907,491"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a98c8d0713b35c97e9861cd7e59c40890"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ipport_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00810">810</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d54/ping_8c_source.html#l00260">add_to_ping()</a>, and <a class="el" href="../../d2/d98/dht__test_8c_source.html#l00081">test_addto_lists_update()</a>.</p>
<div class="fragment"><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;{</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (!source || !target)</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    memcpy(target, source, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d14/struct_i_p___port.html">IP_Port</a>));</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div>
<div class="ttc" id="struct_i_p___port_html"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html">IP_Port</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00162">network.h:162</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a98c8d0713b35c97e9861cd7e59c40890_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a98c8d0713b35c97e9861cd7e59c40890_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a98c8d0713b35c97e9861cd7e59c40890_icgraph" id="d6/d6e/network_8c_a98c8d0713b35c97e9861cd7e59c40890_icgraph">
<area shape="rect" id="node2" href="../../d6/d2b/ping_8h.html#a088e8f057d04ba6808f300cde41fa6af" title="add_to_ping" alt="" coords="143,183,235,209"/><area shape="rect" id="node22" href="../../d2/d98/dht__test_8c.html#a90ce4d5060f1998109da42a4e83c22c0" title="test_addto_lists_update" alt="" coords="283,233,443,260"/><area shape="rect" id="node3" href="../../dc/dc1/_d_h_t_8c.html#afa4f13a29cbe60809f2446267d109383" title="handle_getnodes" alt="" coords="491,132,611,159"/><area shape="rect" id="node20" href="../../d9/d54/ping_8c.html#a8bb0298504d1f6a612100d0b17e3ab90" title="handle_ping_request" alt="" coords="292,183,433,209"/><area shape="rect" id="node4" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="659,132,740,159"/><area shape="rect" id="node5" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="821,31,872,57"/><area shape="rect" id="node6" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="788,81,905,108"/><area shape="rect" id="node15" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="801,132,892,159"/><area shape="rect" id="node17" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="793,183,900,209"/><area shape="rect" id="node18" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="789,233,904,260"/><area shape="rect" id="node7" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="981,31,1032,57"/><area shape="rect" id="node8" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="971,81,1042,108"/><area shape="rect" id="node9" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1108,5,1215,32"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1129,56,1193,83"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1122,107,1201,133"/><area shape="rect" id="node14" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1136,157,1187,184"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1263,56,1313,83"/><area shape="rect" id="node13" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1263,107,1313,133"/><area shape="rect" id="node16" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="953,132,1060,159"/><area shape="rect" id="node19" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="953,233,1060,260"/><area shape="rect" id="node21" href="../../d6/d2b/ping_8h.html#a86e9eeead72b88b686ce5b7c0f78c325" title="new_ping" alt="" coords="512,183,589,209"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6913335cf0b2a76303f5f61d18ea2277"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ipport_equal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00749">749</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00163">IP_Port::ip</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00716">ip_equal()</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00164">IP_Port::port</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l00343">client_or_ip_port_in_list()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l01469">crypto_connection_add_source()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00274">entry_heard_store()</a>, <a class="el" href="../../d9/d54/ping_8c_source.html#l00171">handle_ping_response()</a>, <a class="el" href="../../d9/d54/ping_8c_source.html#l00228">in_list()</a>, <a class="el" href="../../db/d79/onion__client_8c_source.html#l00180">is_path_used()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01051">sent_getnode_to_node()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l01680">set_direct_ip_port()</a>, and <a class="el" href="../../d2/d98/dht__test_8c_source.html#l00081">test_addto_lists_update()</a>.</p>
<div class="fragment"><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;{</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (!a || !b)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (!a-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> || (a-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> != b-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>))</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d6e/network_8c.html#af982256c6d8486349bdc13a920884ef6">ip_equal</a>(&amp;a-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>, &amp;b-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div>
<div class="ttc" id="struct_i_p___port_html_a0c6193a337a223c63411b2fe722d79ec"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">IP_Port::ip</a></div><div class="ttdeci">IP ip</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00163">network.h:163</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">IP_Port::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00164">network.h:164</a></div></div>
<div class="ttc" id="network_8c_html_af982256c6d8486349bdc13a920884ef6"><div class="ttname"><a href="../../d6/d6e/network_8c.html#af982256c6d8486349bdc13a920884ef6">ip_equal</a></div><div class="ttdeci">int ip_equal(const IP *a, const IP *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00716">network.c:716</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a6913335cf0b2a76303f5f61d18ea2277_cgraph.png" border="0" usemap="#d6/d6e/network_8c_a6913335cf0b2a76303f5f61d18ea2277_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a6913335cf0b2a76303f5f61d18ea2277_cgraph" id="d6/d6e/network_8c_a6913335cf0b2a76303f5f61d18ea2277_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#af982256c6d8486349bdc13a920884ef6" title="ip_equal" alt="" coords="145,5,216,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a6913335cf0b2a76303f5f61d18ea2277_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a6913335cf0b2a76303f5f61d18ea2277_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a6913335cf0b2a76303f5f61d18ea2277_icgraph" id="d6/d6e/network_8c_a6913335cf0b2a76303f5f61d18ea2277_icgraph">
<area shape="rect" id="node2" href="../../dc/dc1/_d_h_t_8c.html#af6cc6aba68b93656a8fdca733e2ae918" title="client_or_ip_port_in_list" alt="" coords="145,168,304,195"/><area shape="rect" id="node4" href="../../d9/d54/ping_8c.html#a3927c1053be4390271a309982aa7284f" title="handle_ping_response" alt="" coords="1035,360,1186,387"/><area shape="rect" id="node18" href="../../d2/d98/dht__test_8c.html#a90ce4d5060f1998109da42a4e83c22c0" title="test_addto_lists_update" alt="" coords="1031,5,1191,32"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a9e779393ece10111b0ac7fe2bbc3beeb" title="crypto_connection_add\l_source" alt="" coords="361,462,517,503"/><area shape="rect" id="node27" href="../../d4/d9d/assoc_8c.html#a512ebb77cd46109c11a1052a76bf0a66" title="entry_heard_store" alt="" coords="161,252,288,279"/><area shape="rect" id="node32" href="../../d9/d54/ping_8c.html#afb4f8490dc31f6d2eab779e12e3ad85b" title="in_list" alt="" coords="197,411,253,437"/><area shape="rect" id="node36" href="../../db/d79/onion__client_8c.html#ae8d66f9bb925deae2911c9c00a9a9dc9" title="is_path_used" alt="" coords="175,689,274,716"/><area shape="rect" id="node45" href="../../dc/dc1/_d_h_t_8c.html#a8def0d75fd95309e03096fbcf5085fe3" title="sent_getnode_to_node" alt="" coords="148,309,301,336"/><area shape="rect" id="node46" href="../../de/d42/net__crypto_8h.html#a8ced4e168a95db5708bf4b3095cb4df6" title="set_direct_ip_port" alt="" coords="162,588,287,615"/><area shape="rect" id="node3" href="../../df/dad/_d_h_t_8h.html#a9d898065db0fd4adf26fdb7f80e6d7ac" title="addto_lists" alt="" coords="837,157,923,184"/><area shape="rect" id="node11" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="1679,157,1793,184"/><area shape="rect" id="node13" href="../../dc/dc1/_d_h_t_8c.html#a4dcc848207b2408def323b8b79b08e4a" title="handle_sendnodes_core" alt="" coords="1029,259,1192,285"/><area shape="rect" id="node15" href="../../d2/d98/dht__test_8c.html#a37f262581ef29d155056c14b2fa0ced1" title="test_addto_lists_bad" alt="" coords="1477,157,1619,184"/><area shape="rect" id="node16" href="../../d2/d98/dht__test_8c.html#a26ee6a8d6a8a726b6a03bdacfa1f3716" title="test_addto_lists_good" alt="" coords="1263,208,1413,235"/><area shape="rect" id="node17" href="../../d2/d98/dht__test_8c.html#a62e2c67aa707a1ea005159db3bc59e36" title="test_addto_lists_possible_bad" alt="" coords="1012,56,1209,83"/><area shape="rect" id="node5" href="../../d6/d2b/ping_8h.html#a86e9eeead72b88b686ce5b7c0f78c325" title="new_ping" alt="" coords="1299,379,1377,405"/><area shape="rect" id="node6" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="1507,379,1589,405"/><area shape="rect" id="node7" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1711,328,1761,355"/><area shape="rect" id="node8" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="1677,480,1795,507"/><area shape="rect" id="node9" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="1691,429,1781,456"/><area shape="rect" id="node10" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1683,379,1789,405"/><area shape="rect" id="node12" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1843,157,1949,184"/><area shape="rect" id="node14" href="../../dc/dc1/_d_h_t_8c.html#ac70b27be10ded8565ffcb94829e40514" title="handle_sendnodes_ipv6" alt="" coords="1257,309,1419,336"/><area shape="rect" id="node20" href="../../de/d42/net__crypto_8h.html#ab11f6e96035c3717a21b809d5373f96f" title="accept_crypto_connection" alt="" coords="573,512,748,539"/><area shape="rect" id="node23" href="../../d8/dc6/net__crypto_8c.html#ae8139c35468806f25d5aed185edcc5a1" title="handle_new_connection\l_handshake" alt="" coords="1030,513,1191,554"/><area shape="rect" id="node21" href="../../d2/db1/friend__connection_8c.html#ad12421e11a4e0a8ca7223e0d715d2b0c" title="handle_new_connections" alt="" coords="796,599,964,625"/><area shape="rect" id="node22" href="../../d0/d08/friend__connection_8h.html#a319bec2419cf5fc5525af4fae03b86ef" title="new_friend_connections" alt="" coords="1467,561,1629,588"/><area shape="rect" id="node24" href="../../d8/dc6/net__crypto_8c.html#a86a3ff661a8b9b10fd7c0daee3901091" title="tcp_oob_callback" alt="" coords="1277,480,1399,507"/><area shape="rect" id="node26" href="../../d8/dc6/net__crypto_8c.html#a812ca8a7291e22ce343669c9835c7c12" title="udp_handle_packet" alt="" coords="1271,531,1405,557"/><area shape="rect" id="node25" href="../../de/d42/net__crypto_8h.html#a5e46c6f42e93e2aa968f8f63de90a53c" title="new_net_crypto" alt="" coords="1491,480,1605,507"/><area shape="rect" id="node28" href="../../d4/d9d/assoc_8c.html#a12f651ee082f440e6efcff809958e005" title="candidates_update_assoc" alt="" coords="352,240,525,267"/><area shape="rect" id="node29" href="../../da/d7d/assoc_8h.html#aa0230ae0304fd8540a5bce578d242f30" title="Assoc_add_entry" alt="" coords="599,233,722,260"/><area shape="rect" id="node30" href="../../dc/dc1/_d_h_t_8c.html#a8c25b3f909399fff843f905f2ad9615f" title="returnedip_ports" alt="" coords="1053,309,1168,336"/><area shape="rect" id="node31" href="../../db/d0f/assoc__test_8c.html#a242f6c133a1fef9d5e86336e74b7ddae" title="START_TEST" alt="" coords="827,208,933,235"/><area shape="rect" id="node33" href="../../d6/d2b/ping_8h.html#a088e8f057d04ba6808f300cde41fa6af" title="add_to_ping" alt="" coords="834,411,926,437"/><area shape="rect" id="node34" href="../../dc/dc1/_d_h_t_8c.html#afa4f13a29cbe60809f2446267d109383" title="handle_getnodes" alt="" coords="1278,429,1398,456"/><area shape="rect" id="node35" href="../../d9/d54/ping_8c.html#a8bb0298504d1f6a612100d0b17e3ab90" title="handle_ping_request" alt="" coords="1040,411,1181,437"/><area shape="rect" id="node37" href="../../db/d79/onion__client_8c.html#a0ec6065dac34021e69682691f70b667c" title="random_path" alt="" coords="390,715,487,741"/><area shape="rect" id="node38" href="../../db/d79/onion__client_8c.html#a4253f1739f978c9aac584c97b7a55f48" title="client_send_announce\l_request" alt="" coords="585,791,736,833"/><area shape="rect" id="node42" href="../../d9/d26/onion__client_8h.html#aa1be42b5ea93bd068f47271831157927" title="send_onion_data" alt="" coords="601,715,721,741"/><area shape="rect" id="node39" href="../../db/d79/onion__client_8c.html#a934df896ad375a9dbd82f563fb27144f" title="client_ping_nodes" alt="" coords="817,824,943,851"/><area shape="rect" id="node40" href="../../db/d79/onion__client_8c.html#a02301d507ab3c11bfee8112560f36f87" title="do_friend" alt="" coords="1073,765,1148,792"/><area shape="rect" id="node41" href="../../db/d79/onion__client_8c.html#ae37f00e2304222b24cef2cce370e58d3" title="do_announce" alt="" coords="831,773,929,800"/><area shape="rect" id="node43" href="../../d0/d08/friend__connection_8h.html#a2af492c22c086276ed147d0826839d25" title="send_friend_request\l_packet" alt="" coords="811,707,949,749"/><area shape="rect" id="node44" href="../../db/d79/onion__client_8c.html#a64e317f7dd22c983c325f62aed9ecfae" title="send_dhtpk_announce" alt="" coords="804,656,956,683"/><area shape="rect" id="node47" href="../../d2/db1/friend__connection_8c.html#a6aa37bc6ee3246c06d37000677b205e8" title="dht_ip_callback" alt="" coords="383,613,495,640"/><area shape="rect" id="node49" href="../../d0/d08/friend__connection_8h.html#aea88c3aa2deff558e9b13ed5229cbb6b" title="do_friend_connections" alt="" coords="363,563,515,589"/><area shape="rect" id="node48" href="../../d2/db1/friend__connection_8c.html#aa293768f213199a635ce0b4a94489cdf" title="change_dht_pk" alt="" coords="605,613,716,640"/><area shape="rect" id="node50" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="607,563,714,589"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8436367218afb29bcf1b5fecd071648e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ipport_isset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *&#160;</td>
          <td class="paramname"><em>ipport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00789">789</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00163">IP_Port::ip</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00780">ip_isset()</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00164">IP_Port::port</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00552">Assoc_add_entry()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00602">Assoc_get_close_entries()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00458">candidates_create_new()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01167">DHT_addfriend()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l02102">do_hardening()</a>, <a class="el" href="../../d4/d9d/assoc_8c_source.html#l00274">entry_heard_store()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l00570">get_close_nodes()</a>, and <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01139">handle_sendnodes_ipv6()</a>.</p>
<div class="fragment"><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;{</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">if</span> (!ipport)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (!ipport-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d6e/network_8c.html#ac56c677f4bc8bf8311370ee105ae7cbb">ip_isset</a>(&amp;ipport-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;}</div>
<div class="ttc" id="network_8c_html_ac56c677f4bc8bf8311370ee105ae7cbb"><div class="ttname"><a href="../../d6/d6e/network_8c.html#ac56c677f4bc8bf8311370ee105ae7cbb">ip_isset</a></div><div class="ttdeci">int ip_isset(const IP *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00780">network.c:780</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a0c6193a337a223c63411b2fe722d79ec"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">IP_Port::ip</a></div><div class="ttdeci">IP ip</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00163">network.h:163</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">IP_Port::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00164">network.h:164</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a8436367218afb29bcf1b5fecd071648e_cgraph.png" border="0" usemap="#d6/d6e/network_8c_a8436367218afb29bcf1b5fecd071648e_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a8436367218afb29bcf1b5fecd071648e_cgraph" id="d6/d6e/network_8c_a8436367218afb29bcf1b5fecd071648e_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#ac56c677f4bc8bf8311370ee105ae7cbb" title="ip_isset" alt="" coords="143,5,209,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a8436367218afb29bcf1b5fecd071648e_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a8436367218afb29bcf1b5fecd071648e_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a8436367218afb29bcf1b5fecd071648e_icgraph" id="d6/d6e/network_8c_a8436367218afb29bcf1b5fecd071648e_icgraph">
<area shape="rect" id="node2" href="../../da/d7d/assoc_8h.html#aa0230ae0304fd8540a5bce578d242f30" title="Assoc_add_entry" alt="" coords="571,461,693,488"/><area shape="rect" id="node17" href="../../dc/dc1/_d_h_t_8c.html#ac70b27be10ded8565ffcb94829e40514" title="handle_sendnodes_ipv6" alt="" coords="1211,360,1373,387"/><area shape="rect" id="node24" href="../../da/d7d/assoc_8h.html#ad8b38a62362a313e54af7ae07c36606f" title="Assoc_get_close_entries" alt="" coords="352,625,520,652"/><area shape="rect" id="node25" href="../../df/dad/_d_h_t_8h.html#a1dac5e05fd07964cb4914c17afeb9d50" title="DHT_addfriend" alt="" coords="577,601,687,628"/><area shape="rect" id="node35" href="../../df/dad/_d_h_t_8h.html#a8abfc9cea3784b0cae354670bd4643cd" title="get_close_nodes" alt="" coords="572,740,692,767"/><area shape="rect" id="node43" href="../../dc/dc1/_d_h_t_8c.html#a9480aac51c9c74c667267ce89a76604a" title="do_hardening" alt="" coords="1012,867,1111,893"/><area shape="rect" id="node48" href="../../d4/d9d/assoc_8c.html#aa745e9c0a5448ce04ab65c5156b4a531" title="candidates_create_new" alt="" coords="143,524,301,551"/><area shape="rect" id="node49" href="../../d4/d9d/assoc_8c.html#a512ebb77cd46109c11a1052a76bf0a66" title="entry_heard_store" alt="" coords="159,423,285,449"/><area shape="rect" id="node3" href="../../df/dad/_d_h_t_8h.html#a9d898065db0fd4adf26fdb7f80e6d7ac" title="addto_lists" alt="" coords="785,183,871,209"/><area shape="rect" id="node22" href="../../dc/dc1/_d_h_t_8c.html#a8c25b3f909399fff843f905f2ad9615f" title="returnedip_ports" alt="" coords="1004,411,1119,437"/><area shape="rect" id="node23" href="../../db/d0f/assoc__test_8c.html#a242f6c133a1fef9d5e86336e74b7ddae" title="START_TEST" alt="" coords="775,461,881,488"/><area shape="rect" id="node4" href="../../d9/d54/ping_8c.html#a3927c1053be4390271a309982aa7284f" title="handle_ping_response" alt="" coords="986,259,1137,285"/><area shape="rect" id="node14" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="1636,107,1751,133"/><area shape="rect" id="node16" href="../../dc/dc1/_d_h_t_8c.html#a4dcc848207b2408def323b8b79b08e4a" title="handle_sendnodes_core" alt="" coords="980,309,1143,336"/><area shape="rect" id="node18" href="../../d2/d98/dht__test_8c.html#a37f262581ef29d155056c14b2fa0ced1" title="test_addto_lists_bad" alt="" coords="1434,183,1577,209"/><area shape="rect" id="node19" href="../../d2/d98/dht__test_8c.html#a26ee6a8d6a8a726b6a03bdacfa1f3716" title="test_addto_lists_good" alt="" coords="987,5,1136,32"/><area shape="rect" id="node20" href="../../d2/d98/dht__test_8c.html#a62e2c67aa707a1ea005159db3bc59e36" title="test_addto_lists_possible_bad" alt="" coords="963,157,1160,184"/><area shape="rect" id="node21" href="../../d2/d98/dht__test_8c.html#a90ce4d5060f1998109da42a4e83c22c0" title="test_addto_lists_update" alt="" coords="981,56,1141,83"/><area shape="rect" id="node5" href="../../d6/d2b/ping_8h.html#a86e9eeead72b88b686ce5b7c0f78c325" title="new_ping" alt="" coords="1253,284,1331,311"/><area shape="rect" id="node6" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="1465,613,1546,640"/><area shape="rect" id="node7" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1668,765,1719,792"/><area shape="rect" id="node8" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="1635,563,1752,589"/><area shape="rect" id="node11" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="1648,664,1739,691"/><area shape="rect" id="node13" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1640,715,1747,741"/><area shape="rect" id="node9" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1828,588,1879,615"/><area shape="rect" id="node10" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="1818,537,1889,564"/><area shape="rect" id="node12" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1800,664,1907,691"/><area shape="rect" id="node15" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1800,107,1907,133"/><area shape="rect" id="node26" href="../../d2/db1/friend__connection_8c.html#aa293768f213199a635ce0b4a94489cdf" title="change_dht_pk" alt="" coords="773,512,883,539"/><area shape="rect" id="node33" href="../../d7/dd9/onion__test_8c.html#a53d1bd9e6126683e05e0e14cc70d1a8a" title="dht_pk_callback" alt="" coords="1635,613,1751,640"/><area shape="rect" id="node34" href="../../d3/dfd/_d_h_t__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="803,563,853,589"/><area shape="rect" id="node27" href="../../d2/db1/friend__connection_8c.html#a53d1bd9e6126683e05e0e14cc70d1a8a" title="dht_pk_callback" alt="" coords="1003,512,1119,539"/><area shape="rect" id="node29" href="../../d2/db1/friend__connection_8c.html#ad12421e11a4e0a8ca7223e0d715d2b0c" title="handle_new_connections" alt="" coords="1208,411,1376,437"/><area shape="rect" id="node28" href="../../d2/db1/friend__connection_8c.html#ac2af058fd8684e6abc7b136889f5f4e5" title="friend_new_connection" alt="" coords="1215,461,1369,488"/><area shape="rect" id="node31" href="../../d0/d08/friend__connection_8h.html#a613a80a004fccd616de2a67d84a25d3c" title="new_friend_connection" alt="" coords="1215,512,1369,539"/><area shape="rect" id="node32" href="../../d0/d08/friend__connection_8h.html#a04fb221a2ac726ec3ca86be7b1e63238" title="set_dht_temp_pk" alt="" coords="1231,563,1353,589"/><area shape="rect" id="node30" href="../../d0/d08/friend__connection_8h.html#a319bec2419cf5fc5525af4fae03b86ef" title="new_friend_connections" alt="" coords="1424,487,1587,513"/><area shape="rect" id="node36" href="../../df/d75/onion__announce_8c.html#a5cc40944c42a4e0d1d3d702cf93ac8ad" title="handle_announce_request" alt="" coords="741,765,915,792"/><area shape="rect" id="node38" href="../../db/d79/onion__client_8c.html#a18daedee61cc5670d52904fc89e4b32b" title="populate_path_nodes" alt="" coords="755,816,901,843"/><area shape="rect" id="node42" href="../../dc/dc1/_d_h_t_8c.html#af89838d6c1c8e0ec82dfadbe2953e06d" title="random_node" alt="" coords="778,867,878,893"/><area shape="rect" id="node46" href="../../dc/dc1/_d_h_t_8c.html#acce043cdc5108edffc35e6e879197d20" title="sendnodes_ipv6" alt="" coords="770,715,886,741"/><area shape="rect" id="node37" href="../../d7/dfd/onion__announce_8h.html#a1807a1d99b93e29c2a27648afe3e6c2c" title="new_onion_announce" alt="" coords="1432,715,1579,741"/><area shape="rect" id="node39" href="../../d9/d26/onion__client_8h.html#aa1771a7c1ebf446973e8d2bbb7ea8c2d" title="do_onion_client" alt="" coords="1236,816,1348,843"/><area shape="rect" id="node40" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="1465,765,1546,792"/><area shape="rect" id="node41" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1452,816,1559,843"/><area shape="rect" id="node44" href="../../df/dad/_d_h_t_8h.html#a5be9dfb66fbf1fa7c267b016f3357534" title="do_DHT" alt="" coords="1257,867,1327,893"/><area shape="rect" id="node45" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="1468,867,1543,893"/><area shape="rect" id="node47" href="../../dc/dc1/_d_h_t_8c.html#afa4f13a29cbe60809f2446267d109383" title="handle_getnodes" alt="" coords="1232,715,1352,741"/><area shape="rect" id="node50" href="../../d4/d9d/assoc_8c.html#a12f651ee082f440e6efcff809958e005" title="candidates_update_assoc" alt="" coords="349,423,523,449"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8a36a1ed29a0d5dfe1f0095823039627"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kill_networking </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *&#160;</td>
          <td class="paramname"><em>net</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00700">700</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00299">Networking_Core::family</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00136">kill_sock()</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00302">Networking_Core::sock</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d8d/_messenger_8c_source.html#l01848">kill_messenger()</a>, <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00294">kill_onions()</a>, <a class="el" href="../../d8/d8d/_messenger_8c_source.html#l01751">new_messenger()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">new_networking_ex()</a>, <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00129">START_TEST()</a>, and <a class="el" href="../../d2/d98/dht__test_8c_source.html#l00285">test_addto_lists()</a>.</p>
<div class="fragment"><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a> != 0) <span class="comment">/* Socket not initialized */</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <a class="code" href="../../d6/d6e/network_8c.html#a512d8ea12392ba9ddfadd83bb7c92b2e">kill_sock</a>(net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    free(net);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;}</div>
<div class="ttc" id="struct_networking___core_html_a35b19d84fb632ca8ce5cab237f7089a5"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">Networking_Core::sock</a></div><div class="ttdeci">sock_t sock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00302">network.h:302</a></div></div>
<div class="ttc" id="network_8c_html_a512d8ea12392ba9ddfadd83bb7c92b2e"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a512d8ea12392ba9ddfadd83bb7c92b2e">kill_sock</a></div><div class="ttdeci">void kill_sock(sock_t sock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00136">network.c:136</a></div></div>
<div class="ttc" id="struct_networking___core_html_a59fa33606a579e9080aced9a5d2659de"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">Networking_Core::family</a></div><div class="ttdeci">sa_family_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00299">network.h:299</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a8a36a1ed29a0d5dfe1f0095823039627_cgraph.png" border="0" usemap="#d6/d6e/network_8c_a8a36a1ed29a0d5dfe1f0095823039627_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a8a36a1ed29a0d5dfe1f0095823039627_cgraph" id="d6/d6e/network_8c_a8a36a1ed29a0d5dfe1f0095823039627_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#a512d8ea12392ba9ddfadd83bb7c92b2e" title="kill_sock" alt="" coords="161,5,235,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a8a36a1ed29a0d5dfe1f0095823039627_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a8a36a1ed29a0d5dfe1f0095823039627_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a8a36a1ed29a0d5dfe1f0095823039627_icgraph" id="d6/d6e/network_8c_a8a36a1ed29a0d5dfe1f0095823039627_icgraph">
<area shape="rect" id="node2" href="../../d4/d30/_messenger_8h.html#a771c65c3057d870b0653c2fdf0a12fb7" title="kill_messenger" alt="" coords="351,56,460,83"/><area shape="rect" id="node12" href="../../d7/dd9/onion__test_8c.html#a11b4d3c94243b8abdd439dea94ee679e" title="kill_onions" alt="" coords="189,347,271,373"/><area shape="rect" id="node14" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="347,107,464,133"/><area shape="rect" id="node15" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="161,208,299,235"/><area shape="rect" id="node17" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="512,157,627,184"/><area shape="rect" id="node19" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="516,309,623,336"/><area shape="rect" id="node3" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="544,56,595,83"/><area shape="rect" id="node4" href="../../da/d8f/tox_8h.html#a52259e134bfb9396d9fef4fffe94e878" title="tox_kill" alt="" coords="538,5,601,32"/><area shape="rect" id="node5" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="534,107,605,133"/><area shape="rect" id="node6" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="675,107,781,133"/><area shape="rect" id="node7" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="696,157,760,184"/><area shape="rect" id="node9" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="689,5,767,32"/><area shape="rect" id="node11" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="703,56,753,83"/><area shape="rect" id="node8" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="829,157,880,184"/><area shape="rect" id="node10" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="829,5,880,32"/><area shape="rect" id="node13" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="675,309,781,336"/><area shape="rect" id="node16" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="347,208,463,235"/><area shape="rect" id="node20" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="524,259,615,285"/><area shape="rect" id="node21" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="544,208,595,235"/><area shape="rect" id="node18" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="675,208,781,235"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a512d8ea12392ba9ddfadd83bb7c92b2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kill_sock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a>&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00136">136</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00884">accept_connection()</a>, <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00460">kill_accepted()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00700">kill_networking()</a>, <a class="el" href="../../d2/d8d/_t_c_p__test_8c_source.html#l00179">kill_TCP_con()</a>, <a class="el" href="../../da/da1/_t_c_p__client_8c_source.html#l00958">kill_TCP_connection()</a>, <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l01321">kill_TCP_server()</a>, <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00914">new_listening_TCP_socket()</a>, and <a class="el" href="../../da/da1/_t_c_p__client_8c_source.html#l00611">new_TCP_connection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#if defined(_WIN32) || defined(__WIN32__) || defined (WIN32)</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    closesocket(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    close(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="ttc" id="irc__syncbot_8c_html_a5903d0b282fc5eae503de618f896b5e1"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a></div><div class="ttdeci">int sock</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00035">irc_syncbot.c:35</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a512d8ea12392ba9ddfadd83bb7c92b2e_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a512d8ea12392ba9ddfadd83bb7c92b2e_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a512d8ea12392ba9ddfadd83bb7c92b2e_icgraph" id="d6/d6e/network_8c_a512d8ea12392ba9ddfadd83bb7c92b2e_icgraph">
<area shape="rect" id="node2" href="../../d4/d40/_t_c_p__server_8c.html#ad3971e4c18ffe30a530ef41da1008bf7" title="accept_connection" alt="" coords="152,93,283,120"/><area shape="rect" id="node10" href="../../d4/d40/_t_c_p__server_8c.html#a2f45b38fbf8f1646a682172973fd7a25" title="kill_accepted" alt="" coords="168,195,267,221"/><area shape="rect" id="node17" href="../../d9/d94/network_8h.html#a8a36a1ed29a0d5dfe1f0095823039627" title="kill_networking" alt="" coords="631,448,739,475"/><area shape="rect" id="node31" href="../../d2/d8d/_t_c_p__test_8c.html#a45b16f4a525767c13ad26ad71c7045f2" title="kill_TCP_con" alt="" coords="167,17,267,44"/><area shape="rect" id="node32" href="../../d0/df3/_t_c_p__client_8h.html#a437ba55ccf24fb881acf298f3e225a63" title="kill_TCP_connection" alt="" coords="146,673,289,700"/><area shape="rect" id="node44" href="../../d6/d03/_t_c_p__server_8h.html#af6df6382ad309456dcf5b7b350313714" title="kill_TCP_server" alt="" coords="843,296,958,323"/><area shape="rect" id="node45" href="../../d4/d40/_t_c_p__server_8c.html#aa6d558b4e988007697894aff27271927" title="new_listening_TCP_socket" alt="" coords="127,296,308,323"/><area shape="rect" id="node47" href="../../d0/df3/_t_c_p__client_8h.html#aedb0d5c54ac7754bb342517247ac632d" title="new_TCP_connection" alt="" coords="142,851,293,877"/><area shape="rect" id="node3" href="../../d4/d40/_t_c_p__server_8c.html#a8bcfa0b79de4e0fad8720af7d1ed1d70" title="do_TCP_accept_new" alt="" coords="1018,43,1165,69"/><area shape="rect" id="node4" href="../../d6/d03/_t_c_p__server_8h.html#a40e8a0302a359dd4f712eb1e9c346fe5" title="do_TCP_server" alt="" coords="1214,119,1327,145"/><area shape="rect" id="node5" href="../../d2/d8d/_t_c_p__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1377,195,1483,221"/><area shape="rect" id="node6" href="../../d2/d8d/_t_c_p__test_8c.html#a8958ca530ce6534e81eaa06e582a26ad" title="new_TCP_con" alt="" coords="1376,55,1484,81"/><area shape="rect" id="node8" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1405,296,1455,323"/><area shape="rect" id="node9" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1377,119,1483,145"/><area shape="rect" id="node7" href="../../d2/d8d/_t_c_p__test_8c.html#a0ee98d716eb7311dd4b6d217289734ff" title="START_TEST" alt="" coords="1532,24,1639,51"/><area shape="rect" id="node11" href="../../d4/d40/_t_c_p__server_8c.html#a1ae92403cba7d9cf7248d594f15b0d62" title="add_accepted" alt="" coords="396,93,499,120"/><area shape="rect" id="node12" href="../../d4/d40/_t_c_p__server_8c.html#a00813f259948ef060f6ab7ec40da2f2c" title="confirm_TCP_connection" alt="" coords="601,93,770,120"/><area shape="rect" id="node15" href="../../d4/d40/_t_c_p__server_8c.html#ab84742dd52ed6c8e83287ea5202e4326" title="do_confirmed_recv" alt="" coords="381,245,513,272"/><area shape="rect" id="node16" href="../../d4/d40/_t_c_p__server_8c.html#a001f38d27860442b6fe9fe7dd030a7a0" title="do_TCP_confirmed" alt="" coords="618,195,753,221"/><area shape="rect" id="node13" href="../../d4/d40/_t_c_p__server_8c.html#a8cdae1ef768b85b02dcc79ff2258606f" title="do_unconfirmed" alt="" coords="843,93,958,120"/><area shape="rect" id="node14" href="../../d4/d40/_t_c_p__server_8c.html#aed90b296bcb98bcb905565ae68548c9a" title="do_TCP_unconfirmed" alt="" coords="1017,93,1165,120"/><area shape="rect" id="node18" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="1213,448,1328,475"/><area shape="rect" id="node20" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1217,347,1324,373"/><area shape="rect" id="node21" href="../../d7/dd9/onion__test_8c.html#a11b4d3c94243b8abdd439dea94ee679e" title="kill_onions" alt="" coords="1050,676,1133,703"/><area shape="rect" id="node23" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="1033,549,1150,576"/><area shape="rect" id="node27" href="../../d4/d30/_messenger_8h.html#a771c65c3057d870b0653c2fdf0a12fb7" title="kill_messenger" alt="" coords="1037,499,1146,525"/><area shape="rect" id="node29" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="832,397,969,424"/><area shape="rect" id="node19" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1377,448,1483,475"/><area shape="rect" id="node22" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1217,676,1324,703"/><area shape="rect" id="node24" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1245,600,1296,627"/><area shape="rect" id="node25" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="1235,549,1306,576"/><area shape="rect" id="node26" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1377,549,1483,576"/><area shape="rect" id="node28" href="../../da/d8f/tox_8h.html#a52259e134bfb9396d9fef4fffe94e878" title="tox_kill" alt="" coords="1239,499,1302,525"/><area shape="rect" id="node30" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="1033,397,1149,424"/><area shape="rect" id="node33" href="../../d2/d8d/_t_c_p__test_8c.html#a54051584eff6e81044025b36d88c9a2b" title="START_TEST" alt="" coords="394,800,501,827"/><area shape="rect" id="node34" href="../../d5/d26/_t_c_p__connection_8c.html#aa2768924d23efbf6770245379d89da4c" title="kill_tcp_relay_connection" alt="" coords="363,648,531,675"/><area shape="rect" id="node35" href="../../d5/d26/_t_c_p__connection_8c.html#a81963b2aeca3eb88b3fea76869b19fad" title="reconnect_tcp_relay\l_connection" alt="" coords="616,750,755,791"/><area shape="rect" id="node39" href="../../d5/d26/_t_c_p__connection_8c.html#ac91d3707f1b16a4a9e0f6d4d70cdee14" title="sleep_tcp_relay_connection" alt="" coords="356,749,539,776"/><area shape="rect" id="node40" href="../../da/d39/_t_c_p__connection_8h.html#a6938788005ebe33a896755ac2b9f501a" title="kill_tcp_connections" alt="" coords="615,597,755,624"/><area shape="rect" id="node36" href="../../d5/d26/_t_c_p__connection_8c.html#a6377f0f3d60ba706c5b014a9439696b7" title="do_tcp_conns" alt="" coords="849,815,952,841"/><area shape="rect" id="node37" href="../../d5/d26/_t_c_p__connection_8c.html#a359cec296ed123fc92b9b149266b30a4" title="unsleep_tcp_relay_connection" alt="" coords="587,867,784,893"/><area shape="rect" id="node38" href="../../d5/d26/_t_c_p__connection_8c.html#a49dd47efa4f43cd5ba37a4836c6e55ff" title="kill_nonused_tcp" alt="" coords="626,648,745,675"/><area shape="rect" id="node41" href="../../d2/d8d/_t_c_p__test_8c.html#a1b7f98a901f4b8685223ec1dac1c1ce3" title="START_TEST" alt="" coords="847,760,954,787"/><area shape="rect" id="node42" href="../../de/d42/net__crypto_8h.html#a5e46c6f42e93e2aa968f8f63de90a53c" title="new_net_crypto" alt="" coords="843,600,958,627"/><area shape="rect" id="node43" href="../../de/d42/net__crypto_8h.html#abb3546495adde3f08c0474f31c5d3a37" title="kill_net_crypto" alt="" coords="847,651,954,677"/><area shape="rect" id="node46" href="../../d6/d03/_t_c_p__server_8h.html#a148e632f4c51645cbc1b414bc3584b60" title="new_TCP_server" alt="" coords="839,245,962,272"/><area shape="rect" id="node48" href="../../d5/d26/_t_c_p__connection_8c.html#af221264f649b29407becf0e4ca352cbd" title="add_tcp_relay_instance" alt="" coords="368,952,527,979"/><area shape="rect" id="node49" href="../../da/d39/_t_c_p__connection_8h.html#a5ee1dbaa28ff59e0f452eda3c97418e3" title="add_tcp_relay_global" alt="" coords="613,968,757,995"/><area shape="rect" id="node50" href="../../da/d39/_t_c_p__connection_8h.html#a26901882c0b134822660515493683132" title="add_tcp_relay_connection" alt="" coords="599,917,772,944"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad953dedd6d25d03cf441960dd1e1fed1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int networking_at_startup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00444">444</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d6/d6e/network_8c_source.html#l00206">current_time_actual()</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d6e/network_8c_source.html#l00941">addr_resolve()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">new_networking_ex()</a>, <a class="el" href="../../da/da1/_t_c_p__client_8c_source.html#l00611">new_TCP_connection()</a>, and <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00942">new_TCP_server()</a>.</p>
<div class="fragment"><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d6e/network_8c.html#a1e407c1eac9f5897472ad66ab31e0b24">at_startup_ran</a> != 0)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">#ifndef VANILLA_NACL</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">#ifdef USE_RANDOMBYTES_STIR</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    randombytes_stir();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    sodium_init();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*USE_RANDOMBYTES_STIR*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">#endif</span><span class="comment">/*VANILLA_NACL*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#if defined(_WIN32) || defined(__WIN32__) || defined (WIN32)</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    WSADATA wsaData;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span> (WSAStartup(MAKEWORD(2, 2), &amp;wsaData) != NO_ERROR)</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    srand((uint32_t)<a class="code" href="../../d6/d6e/network_8c.html#a9f5cd2a713e4a17d4c6d36650336cab0">current_time_actual</a>());</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="../../d6/d6e/network_8c.html#a1e407c1eac9f5897472ad66ab31e0b24">at_startup_ran</a> = 1;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div>
<div class="ttc" id="network_8c_html_a9f5cd2a713e4a17d4c6d36650336cab0"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a9f5cd2a713e4a17d4c6d36650336cab0">current_time_actual</a></div><div class="ttdeci">static uint64_t current_time_actual(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00206">network.c:206</a></div></div>
<div class="ttc" id="network_8c_html_a1e407c1eac9f5897472ad66ab31e0b24"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a1e407c1eac9f5897472ad66ab31e0b24">at_startup_ran</a></div><div class="ttdeci">uint8_t at_startup_ran</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00443">network.c:443</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ad953dedd6d25d03cf441960dd1e1fed1_cgraph.png" border="0" usemap="#d6/d6e/network_8c_ad953dedd6d25d03cf441960dd1e1fed1_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ad953dedd6d25d03cf441960dd1e1fed1_cgraph" id="d6/d6e/network_8c_ad953dedd6d25d03cf441960dd1e1fed1_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#a9f5cd2a713e4a17d4c6d36650336cab0" title="current_time_actual" alt="" coords="204,5,340,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ad953dedd6d25d03cf441960dd1e1fed1_icgraph.png" border="0" usemap="#d6/d6e/network_8c_ad953dedd6d25d03cf441960dd1e1fed1_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ad953dedd6d25d03cf441960dd1e1fed1_icgraph" id="d6/d6e/network_8c_ad953dedd6d25d03cf441960dd1e1fed1_icgraph">
<area shape="rect" id="node2" href="../../d9/d94/network_8h.html#af329b139810a0b31f336bdf416333b24" title="addr_resolve" alt="" coords="231,71,327,98"/><area shape="rect" id="node17" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="211,247,348,274"/><area shape="rect" id="node26" href="../../d0/df3/_t_c_p__client_8h.html#aedb0d5c54ac7754bb342517247ac632d" title="new_TCP_connection" alt="" coords="204,574,355,601"/><area shape="rect" id="node49" href="../../d6/d03/_t_c_p__server_8h.html#a148e632f4c51645cbc1b414bc3584b60" title="new_TCP_server" alt="" coords="218,197,341,223"/><area shape="rect" id="node3" href="../../d0/d5a/network__test_8c.html#a011610afc3d9633e4bec180e6b421d5a" title="START_TEST" alt="" coords="448,21,555,47"/><area shape="rect" id="node4" href="../../d9/d94/network_8h.html#a1c024648679209a12766fedc7e55d5e4" title="addr_resolve_or_parse_ip" alt="" coords="416,71,587,98"/><area shape="rect" id="node5" href="../../db/d81/dns3__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="702,71,753,98"/><area shape="rect" id="node6" href="../../df/dad/_d_h_t_8h.html#af342c78837dbed569d4a75a0516455fc" title="DHT_bootstrap_from\l_address" alt="" coords="655,5,799,47"/><area shape="rect" id="node10" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="692,219,763,246"/><area shape="rect" id="node7" href="../../d1/d36/tox-bootstrapd_8c.html#a3b29f8b1522a8d051f35cc76a54f846a" title="bootstrap_from_config" alt="" coords="866,13,1017,39"/><area shape="rect" id="node9" href="../../db/d5e/_d_h_t__bootstrap_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="916,63,967,90"/><area shape="rect" id="node8" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1123,118,1173,145"/><area shape="rect" id="node11" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="888,219,995,246"/><area shape="rect" id="node12" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1520,314,1584,341"/><area shape="rect" id="node14" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="902,169,981,195"/><area shape="rect" id="node16" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="916,321,967,347"/><area shape="rect" id="node13" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1885,443,1936,470"/><area shape="rect" id="node15" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1123,169,1173,195"/><area shape="rect" id="node18" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="443,247,560,274"/><area shape="rect" id="node20" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="443,422,559,449"/><area shape="rect" id="node19" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="702,270,753,297"/><area shape="rect" id="node21" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="670,371,785,398"/><area shape="rect" id="node23" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="674,473,781,499"/><area shape="rect" id="node24" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="682,523,773,550"/><area shape="rect" id="node22" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="888,371,995,398"/><area shape="rect" id="node25" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="888,523,995,550"/><area shape="rect" id="node27" href="../../d2/d8d/_t_c_p__test_8c.html#a54051584eff6e81044025b36d88c9a2b" title="START_TEST" alt="" coords="448,683,555,710"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#a81963b2aeca3eb88b3fea76869b19fad" title="reconnect_tcp_relay\l_connection" alt="" coords="432,567,571,608"/><area shape="rect" id="node37" href="../../d5/d26/_t_c_p__connection_8c.html#a359cec296ed123fc92b9b149266b30a4" title="unsleep_tcp_relay_connection" alt="" coords="403,515,600,542"/><area shape="rect" id="node38" href="../../d5/d26/_t_c_p__connection_8c.html#af221264f649b29407becf0e4ca352cbd" title="add_tcp_relay_instance" alt="" coords="648,633,807,659"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#a6377f0f3d60ba706c5b014a9439696b7" title="do_tcp_conns" alt="" coords="676,574,779,601"/><area shape="rect" id="node30" href="../../da/d39/_t_c_p__connection_8h.html#a30c1a9c57a8d07cc2327c0505d6619a4" title="do_tcp_connections" alt="" coords="872,574,1011,601"/><area shape="rect" id="node31" href="../../d2/d8d/_t_c_p__test_8c.html#a1b7f98a901f4b8685223ec1dac1c1ce3" title="START_TEST" alt="" coords="1095,650,1201,677"/><area shape="rect" id="node32" href="../../d8/dc6/net__crypto_8c.html#adf499e22f45244e3660f9da6de77d2a3" title="do_tcp" alt="" coords="1117,523,1179,550"/><area shape="rect" id="node33" href="../../de/d42/net__crypto_8h.html#a6fa028eb320bf09ecd619c5053580436" title="do_net_crypto" alt="" coords="1293,510,1397,537"/><area shape="rect" id="node34" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1499,510,1605,537"/><area shape="rect" id="node35" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1735,459,1785,486"/><area shape="rect" id="node36" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="1719,510,1801,537"/><area shape="rect" id="node39" href="../../da/d39/_t_c_p__connection_8h.html#a5ee1dbaa28ff59e0f452eda3c97418e3" title="add_tcp_relay_global" alt="" coords="1076,599,1220,626"/><area shape="rect" id="node45" href="../../da/d39/_t_c_p__connection_8h.html#a26901882c0b134822660515493683132" title="add_tcp_relay_connection" alt="" coords="855,675,1028,702"/><area shape="rect" id="node40" href="../../d2/d8d/_t_c_p__test_8c.html#ac45927e61cae5bb70dbde2b32c8f62ff" title="START_TEST" alt="" coords="1291,611,1398,638"/><area shape="rect" id="node41" href="../../de/d42/net__crypto_8h.html#a632021583d7dd2484614071a7080f311" title="add_tcp_relay" alt="" coords="1293,561,1396,587"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#a9360ec098f2b1082b480b4e36b0a5f07" title="tcp_relay_node_callback" alt="" coords="1469,670,1635,697"/><area shape="rect" id="node44" href="../../da/d8f/tox_8h.html#ae858a499d7f8e2e5cbf5533afbd20537" title="tox_add_tcp_relay" alt="" coords="1488,561,1616,587"/><area shape="rect" id="node43" href="../../d0/d08/friend__connection_8h.html#a613a80a004fccd616de2a67d84a25d3c" title="new_friend_connection" alt="" coords="1683,670,1837,697"/><area shape="rect" id="node46" href="../../de/d42/net__crypto_8h.html#a4b9f3aef7b0d4c461294e24a21e64e71" title="add_tcp_relay_peer" alt="" coords="1081,701,1215,727"/><area shape="rect" id="node47" href="../../d2/db1/friend__connection_8c.html#a612a688a590b1836efec92949e3cbdff" title="connect_to_saved_tcp\l_relays" alt="" coords="1268,663,1421,704"/><area shape="rect" id="node48" href="../../d0/d08/friend__connection_8h.html#ac89688f7660c1cb5fb664ecc09bab460" title="friend_add_tcp_relay" alt="" coords="1273,729,1416,755"/><area shape="rect" id="node50" href="../../d2/d8d/_t_c_p__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="448,197,555,223"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab6765fe4b08536210a20ac728f991e13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networking_poll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *&#160;</td>
          <td class="paramname"><em>net</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00415">415</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile::data</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00299">Networking_Core::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00292">Packet_Handles::function</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00089">LOGGER_WARNING</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00095">MAX_UDP_PACKET_SIZE</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00293">Packet_Handles::object</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00297">Networking_Core::packethandlers</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00363">receivepacket()</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00302">Networking_Core::sock</a>, and <a class="el" href="../../de/df1/util_8c_source.html#l00041">unix_time_update()</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d8d/_messenger_8c_source.html#l02280">do_messenger()</a>, <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00026">do_onion()</a>, <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00287">do_onions()</a>, and <a class="el" href="../../d1/d36/tox-bootstrapd_8c_source.html#l00519">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;{</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a> == 0) <span class="comment">/* Socket not initialized */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="../../de/df1/util_8c.html#a849af10dd491723cf3abdef599846897">unix_time_update</a>();</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="../../db/d14/struct_i_p___port.html">IP_Port</a> ip_port;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    uint8_t <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>[<a class="code" href="../../d9/d94/network_8h.html#a9fd837ac38736fed27e32d824a824259">MAX_UDP_PACKET_SIZE</a>];</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    uint32_t length;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d6/d6e/network_8c.html#a44dd69c638b9ee342b7d54e65293850d">receivepacket</a>(net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>, &amp;ip_port, data, &amp;length) != -1) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (length &lt; 1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span> (!(net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#acf65b41b1fc6f52a40016a2329a8ba30">packethandlers</a>[data[0]].<a class="code" href="../../d7/dd2/struct_packet___handles.html#a197979c60c06b39ac717b08f5091dd0e">function</a>)) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a>(<span class="stringliteral">&quot;[%02u] -- Packet has no handler&quot;</span>, data[0]);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#acf65b41b1fc6f52a40016a2329a8ba30">packethandlers</a>[data[0]].<a class="code" href="../../d7/dd2/struct_packet___handles.html#a197979c60c06b39ac717b08f5091dd0e">function</a>(net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#acf65b41b1fc6f52a40016a2329a8ba30">packethandlers</a>[data[0]].<a class="code" href="../../d7/dd2/struct_packet___handles.html#a077376d12464f945e2414d5499c79b3f">object</a>, ip_port, data, length);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="ttc" id="struct_networking___core_html_acf65b41b1fc6f52a40016a2329a8ba30"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#acf65b41b1fc6f52a40016a2329a8ba30">Networking_Core::packethandlers</a></div><div class="ttdeci">Packet_Handles packethandlers[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00297">network.h:297</a></div></div>
<div class="ttc" id="struct_networking___core_html_a35b19d84fb632ca8ce5cab237f7089a5"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">Networking_Core::sock</a></div><div class="ttdeci">sock_t sock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00302">network.h:302</a></div></div>
<div class="ttc" id="struct_packet___handles_html_a197979c60c06b39ac717b08f5091dd0e"><div class="ttname"><a href="../../d7/dd2/struct_packet___handles.html#a197979c60c06b39ac717b08f5091dd0e">Packet_Handles::function</a></div><div class="ttdeci">packet_handler_callback function</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00292">network.h:292</a></div></div>
<div class="ttc" id="logger_8h_html_ab3e970f3c1ecb5b71f17eccee4ebb286"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ab3e970f3c1ecb5b71f17eccee4ebb286">LOGGER_WARNING</a></div><div class="ttdeci">#define LOGGER_WARNING(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00089">logger.h:89</a></div></div>
<div class="ttc" id="network_8h_html_a9fd837ac38736fed27e32d824a824259"><div class="ttname"><a href="../../d9/d94/network_8h.html#a9fd837ac38736fed27e32d824a824259">MAX_UDP_PACKET_SIZE</a></div><div class="ttdeci">#define MAX_UDP_PACKET_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00095">network.h:95</a></div></div>
<div class="ttc" id="struct_i_p___port_html"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html">IP_Port</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00162">network.h:162</a></div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
<div class="ttc" id="struct_packet___handles_html_a077376d12464f945e2414d5499c79b3f"><div class="ttname"><a href="../../d7/dd2/struct_packet___handles.html#a077376d12464f945e2414d5499c79b3f">Packet_Handles::object</a></div><div class="ttdeci">void * object</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00293">network.h:293</a></div></div>
<div class="ttc" id="struct_networking___core_html_a59fa33606a579e9080aced9a5d2659de"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">Networking_Core::family</a></div><div class="ttdeci">sa_family_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00299">network.h:299</a></div></div>
<div class="ttc" id="util_8c_html_a849af10dd491723cf3abdef599846897"><div class="ttname"><a href="../../de/df1/util_8c.html#a849af10dd491723cf3abdef599846897">unix_time_update</a></div><div class="ttdeci">void unix_time_update()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df1/util_8c_source.html#l00041">util.c:41</a></div></div>
<div class="ttc" id="network_8c_html_a44dd69c638b9ee342b7d54e65293850d"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a44dd69c638b9ee342b7d54e65293850d">receivepacket</a></div><div class="ttdeci">static int receivepacket(sock_t sock, IP_Port *ip_port, uint8_t *data, uint32_t *length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00363">network.c:363</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ab6765fe4b08536210a20ac728f991e13_cgraph.png" border="0" usemap="#d6/d6e/network_8c_ab6765fe4b08536210a20ac728f991e13_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ab6765fe4b08536210a20ac728f991e13_cgraph" id="d6/d6e/network_8c_ab6765fe4b08536210a20ac728f991e13_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#a44dd69c638b9ee342b7d54e65293850d" title="receivepacket" alt="" coords="176,5,279,32"/><area shape="rect" id="node3" href="../../de/df1/util_8c.html#a849af10dd491723cf3abdef599846897" title="unix_time_update" alt="" coords="165,56,289,83"/><area shape="rect" id="node4" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="337,56,499,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ab6765fe4b08536210a20ac728f991e13_icgraph.png" border="0" usemap="#d6/d6e/network_8c_ab6765fe4b08536210a20ac728f991e13_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ab6765fe4b08536210a20ac728f991e13_icgraph" id="d6/d6e/network_8c_ab6765fe4b08536210a20ac728f991e13_icgraph">
<area shape="rect" id="node2" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="165,81,272,108"/><area shape="rect" id="node10" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="181,132,256,159"/><area shape="rect" id="node12" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="178,183,259,209"/><area shape="rect" id="node14" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="193,233,244,260"/><area shape="rect" id="node3" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="348,31,399,57"/><area shape="rect" id="node4" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="332,81,415,108"/><area shape="rect" id="node5" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="475,5,581,32"/><area shape="rect" id="node6" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="502,56,554,83"/><area shape="rect" id="node7" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="503,107,553,133"/><area shape="rect" id="node8" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="491,157,565,184"/><area shape="rect" id="node9" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="629,157,680,184"/><area shape="rect" id="node11" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="320,132,427,159"/><area shape="rect" id="node13" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="320,183,427,209"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a230a192ca9463ec4985d4f86de439733"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networking_registerhandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *&#160;</td>
          <td class="paramname"><em>net</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d94/network_8h.html#a01fb3f0e3fd19ed8eefe335b64934156">packet_handler_callback</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00409">409</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00292">Packet_Handles::function</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00293">Packet_Handles::object</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00297">Networking_Core::packethandlers</a>.</p>

<p>Referenced by <a class="el" href="../../de/d7d/bootstrap__node__packets_8c_source.html#l00054">bootstrap_set_callbacks()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l02268">kill_DHT()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l02505">kill_net_crypto()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00608">kill_onion()</a>, <a class="el" href="../../df/d75/onion__announce_8c_source.html#l00428">kill_onion_announce()</a>, <a class="el" href="../../db/d79/onion__client_8c_source.html#l01506">kill_onion_client()</a>, <a class="el" href="../../d9/d54/ping_8c_source.html#l00341">kill_ping()</a>, <a class="el" href="../../d1/de5/_l_a_n__discovery_8c_source.html#l00356">LANdiscovery_init()</a>, <a class="el" href="../../d1/de5/_l_a_n__discovery_8c_source.html#l00361">LANdiscovery_kill()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l02196">new_DHT()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l02414">new_net_crypto()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00582">new_onion()</a>, <a class="el" href="../../df/d75/onion__announce_8c_source.html#l00408">new_onion_announce()</a>, <a class="el" href="../../db/d79/onion__client_8c_source.html#l01477">new_onion_client()</a>, <a class="el" href="../../d9/d54/ping_8c_source.html#l00322">new_ping()</a>, and <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00129">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;{</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#acf65b41b1fc6f52a40016a2329a8ba30">packethandlers</a>[byte].<a class="code" href="../../d7/dd2/struct_packet___handles.html#a197979c60c06b39ac717b08f5091dd0e">function</a> = cb;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#acf65b41b1fc6f52a40016a2329a8ba30">packethandlers</a>[byte].<a class="code" href="../../d7/dd2/struct_packet___handles.html#a077376d12464f945e2414d5499c79b3f">object</a> = object;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
<div class="ttc" id="struct_networking___core_html_acf65b41b1fc6f52a40016a2329a8ba30"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#acf65b41b1fc6f52a40016a2329a8ba30">Networking_Core::packethandlers</a></div><div class="ttdeci">Packet_Handles packethandlers[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00297">network.h:297</a></div></div>
<div class="ttc" id="struct_packet___handles_html_a197979c60c06b39ac717b08f5091dd0e"><div class="ttname"><a href="../../d7/dd2/struct_packet___handles.html#a197979c60c06b39ac717b08f5091dd0e">Packet_Handles::function</a></div><div class="ttdeci">packet_handler_callback function</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00292">network.h:292</a></div></div>
<div class="ttc" id="struct_packet___handles_html_a077376d12464f945e2414d5499c79b3f"><div class="ttname"><a href="../../d7/dd2/struct_packet___handles.html#a077376d12464f945e2414d5499c79b3f">Packet_Handles::object</a></div><div class="ttdeci">void * object</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00293">network.h:293</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a230a192ca9463ec4985d4f86de439733_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a230a192ca9463ec4985d4f86de439733_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a230a192ca9463ec4985d4f86de439733_icgraph" id="d6/d6e/network_8c_a230a192ca9463ec4985d4f86de439733_icgraph">
<area shape="rect" id="node2" href="../../de/d7d/bootstrap__node__packets_8c.html#af45f0ce6a723f57dc9f667f2fcd4772c" title="bootstrap_set_callbacks" alt="" coords="231,9,393,36"/><area shape="rect" id="node4" href="../../df/dad/_d_h_t_8h.html#a816851e4f0f454c52b93d65544a2b2bb" title="kill_DHT" alt="" coords="469,180,542,207"/><area shape="rect" id="node17" href="../../df/dad/_d_h_t_8h.html#adad04fa897751b06948a172044bf1c58" title="new_DHT" alt="" coords="658,85,739,112"/><area shape="rect" id="node20" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="833,288,940,315"/><area shape="rect" id="node23" href="../../de/d42/net__crypto_8h.html#abb3546495adde3f08c0474f31c5d3a37" title="kill_net_crypto" alt="" coords="645,744,752,771"/><area shape="rect" id="node24" href="../../d3/db9/onion_8h.html#a301c5cb9db2604dc1ea885c3a2cf8408" title="kill_onion" alt="" coords="661,693,737,720"/><area shape="rect" id="node25" href="../../d7/dfd/onion__announce_8h.html#ad21ecb14ae7a2a0d11a1d0523a459146" title="kill_onion_announce" alt="" coords="629,643,768,669"/><area shape="rect" id="node26" href="../../d9/d26/onion__client_8h.html#a591041f85e43cf886ab4c72fb3b8d468" title="kill_onion_client" alt="" coords="641,795,756,821"/><area shape="rect" id="node27" href="../../d6/d2b/ping_8h.html#a9487f04f4bb6ac4be59a4166236ec896" title="kill_ping" alt="" coords="277,168,347,195"/><area shape="rect" id="node28" href="../../dd/db4/_l_a_n__discovery_8h.html#ab5177e8d5fc82b7c156f777f13649912" title="LANdiscovery_init" alt="" coords="441,371,569,397"/><area shape="rect" id="node30" href="../../dd/db4/_l_a_n__discovery_8h.html#af2a395c13cd4dff580e3638f41ef02d0" title="LANdiscovery_kill" alt="" coords="249,835,375,861"/><area shape="rect" id="node32" href="../../de/d42/net__crypto_8h.html#a5e46c6f42e93e2aa968f8f63de90a53c" title="new_net_crypto" alt="" coords="641,541,756,568"/><area shape="rect" id="node33" href="../../d3/db9/onion_8h.html#a71877ec5931feec418ed1ae10b0963d8" title="new_onion" alt="" coords="657,288,741,315"/><area shape="rect" id="node34" href="../../d7/dfd/onion__announce_8h.html#a1807a1d99b93e29c2a27648afe3e6c2c" title="new_onion_announce" alt="" coords="625,339,772,365"/><area shape="rect" id="node35" href="../../d9/d26/onion__client_8h.html#a9a6ae3a9c70a5221a65bd1c9be751a2e" title="new_onion_client" alt="" coords="637,491,760,517"/><area shape="rect" id="node36" href="../../d6/d2b/ping_8h.html#a86e9eeead72b88b686ce5b7c0f78c325" title="new_ping" alt="" coords="467,67,544,93"/><area shape="rect" id="node3" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="861,237,912,264"/><area shape="rect" id="node5" href="../../d4/d30/_messenger_8h.html#a771c65c3057d870b0653c2fdf0a12fb7" title="kill_messenger" alt="" coords="832,719,941,745"/><area shape="rect" id="node15" href="../../d7/dd9/onion__test_8c.html#a11b4d3c94243b8abdd439dea94ee679e" title="kill_onions" alt="" coords="845,668,928,695"/><area shape="rect" id="node18" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="828,567,945,593"/><area shape="rect" id="node21" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="829,60,944,87"/><area shape="rect" id="node6" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1021,636,1072,663"/><area shape="rect" id="node7" href="../../da/d8f/tox_8h.html#a52259e134bfb9396d9fef4fffe94e878" title="tox_kill" alt="" coords="1015,719,1078,745"/><area shape="rect" id="node8" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="1011,579,1082,605"/><area shape="rect" id="node9" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1148,503,1255,529"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1169,553,1233,580"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1162,604,1241,631"/><area shape="rect" id="node14" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1176,655,1227,681"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1303,553,1353,580"/><area shape="rect" id="node13" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1303,604,1353,631"/><area shape="rect" id="node16" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="993,471,1100,497"/><area shape="rect" id="node19" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="841,415,932,441"/><area shape="rect" id="node22" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="993,60,1100,87"/><area shape="rect" id="node29" href="../../d0/d08/friend__connection_8h.html#a319bec2419cf5fc5525af4fae03b86ef" title="new_friend_connections" alt="" coords="617,440,780,467"/><area shape="rect" id="node31" href="../../d0/d08/friend__connection_8h.html#a2ef8cdbd93f21f11ff0333a9527c2c02" title="kill_friend_connections" alt="" coords="621,845,776,872"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0c272a560dd4b2c18c6546a91656c1b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a>* new_networking </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a>&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00483">483</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">new_networking_ex()</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00126">TOX_PORTRANGE_FROM</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00127">TOX_PORTRANGE_TO</a>.</p>

<p>Referenced by <a class="el" href="../../d1/d36/tox-bootstrapd_8c_source.html#l00519">main()</a>, <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00269">new_onions()</a>, <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00129">START_TEST()</a>, and <a class="el" href="../../d2/d98/dht__test_8c_source.html#l00285">test_addto_lists()</a>.</p>
<div class="fragment"><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d6e/network_8c.html#a899cb8f62b49e71ba9f9f7a50254655c">new_networking_ex</a>(ip, <a class="code" href="../../db/d11/irc__syncbot_8c.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>, <a class="code" href="../../db/d11/irc__syncbot_8c.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> + (<a class="code" href="../../d9/d94/network_8h.html#ae22d1a7b52c5fb38a33df754621e407f">TOX_PORTRANGE_TO</a> - <a class="code" href="../../d9/d94/network_8h.html#abb99b46273eebad6426abc06423c0d9f">TOX_PORTRANGE_FROM</a>), 0);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div>
<div class="ttc" id="network_8h_html_ae22d1a7b52c5fb38a33df754621e407f"><div class="ttname"><a href="../../d9/d94/network_8h.html#ae22d1a7b52c5fb38a33df754621e407f">TOX_PORTRANGE_TO</a></div><div class="ttdeci">#define TOX_PORTRANGE_TO</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00127">network.h:127</a></div></div>
<div class="ttc" id="network_8c_html_a899cb8f62b49e71ba9f9f7a50254655c"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a899cb8f62b49e71ba9f9f7a50254655c">new_networking_ex</a></div><div class="ttdeci">Networking_Core * new_networking_ex(IP ip, uint16_t port_from, uint16_t port_to, unsigned int *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00498">network.c:498</a></div></div>
<div class="ttc" id="network_8h_html_abb99b46273eebad6426abc06423c0d9f"><div class="ttname"><a href="../../d9/d94/network_8h.html#abb99b46273eebad6426abc06423c0d9f">TOX_PORTRANGE_FROM</a></div><div class="ttdeci">#define TOX_PORTRANGE_FROM</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00126">network.h:126</a></div></div>
<div class="ttc" id="irc__syncbot_8c_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00031">irc_syncbot.c:31</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a0c272a560dd4b2c18c6546a91656c1b5_cgraph.png" border="0" usemap="#d6/d6e/network_8c_a0c272a560dd4b2c18c6546a91656c1b5_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a0c272a560dd4b2c18c6546a91656c1b5_cgraph" id="d6/d6e/network_8c_a0c272a560dd4b2c18c6546a91656c1b5_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="169,157,307,184"/><area shape="rect" id="node3" href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1" title="networking_at_startup" alt="" coords="355,5,505,32"/><area shape="rect" id="node5" href="../../d6/d6e/network_8c.html#a84c3240a3325cbdaaa8a206c96980cd1" title="sock_valid" alt="" coords="388,56,472,83"/><area shape="rect" id="node6" href="../../d6/d6e/network_8c.html#a379153c027c17d7c71797cb0e3ea41a3" title="set_socket_nosigpipe" alt="" coords="356,107,504,133"/><area shape="rect" id="node7" href="../../d6/d6e/network_8c.html#a8a36a1ed29a0d5dfe1f0095823039627" title="kill_networking" alt="" coords="376,157,484,184"/><area shape="rect" id="node9" href="../../d6/d6e/network_8c.html#a6a50bb1345f2d5192fe1ec23ac7a1da9" title="set_socket_nonblock" alt="" coords="357,208,503,235"/><area shape="rect" id="node10" href="../../d6/d6e/network_8c.html#ad2f109728a6345e6862686ea4baf5b27" title="set_socket_dualstack" alt="" coords="355,259,505,285"/><area shape="rect" id="node11" href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706" title="ip_ntoa" alt="" coords="398,309,462,336"/><area shape="rect" id="node4" href="../../d6/d6e/network_8c.html#a9f5cd2a713e4a17d4c6d36650336cab0" title="current_time_actual" alt="" coords="553,5,689,32"/><area shape="rect" id="node8" href="../../d6/d6e/network_8c.html#a512d8ea12392ba9ddfadd83bb7c92b2e" title="kill_sock" alt="" coords="585,157,658,184"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a0c272a560dd4b2c18c6546a91656c1b5_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a0c272a560dd4b2c18c6546a91656c1b5_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a0c272a560dd4b2c18c6546a91656c1b5_icgraph" id="d6/d6e/network_8c_a0c272a560dd4b2c18c6546a91656c1b5_icgraph">
<area shape="rect" id="node2" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="201,5,252,32"/><area shape="rect" id="node3" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="181,56,272,83"/><area shape="rect" id="node5" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="173,107,280,133"/><area shape="rect" id="node6" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="169,157,284,184"/><area shape="rect" id="node4" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="332,56,439,83"/><area shape="rect" id="node7" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="332,157,439,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a899cb8f62b49e71ba9f9f7a50254655c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a>* new_networking_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d6d/struct_i_p.html">IP</a>&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port_from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port_to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">498</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00299">Networking_Core::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00149">IP6::in6_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00140">IP4::in_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00156">IP::ip4</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00157">IP::ip6</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00827">ip_ntoa()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00700">kill_networking()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00087">LOGGER_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00090">LOGGER_ERROR</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00444">networking_at_startup()</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00300">Networking_Core::port</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00191">set_socket_dualstack()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00150">set_socket_nonblock()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00165">set_socket_nosigpipe()</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00302">Networking_Core::sock</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00119">sock_valid()</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00126">TOX_PORTRANGE_FROM</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00127">TOX_PORTRANGE_TO</a>.</p>

<p>Referenced by <a class="el" href="../../d8/d8d/_messenger_8c_source.html#l01751">new_messenger()</a>, and <a class="el" href="../../d6/d6e/network_8c_source.html#l00483">new_networking()</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">/* If both from and to are 0, use default port range</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">     * If one is 0 and the other is non-0, use the non-0 value as only port</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">     * If from &gt; to, swap</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (port_from == 0 &amp;&amp; port_to == 0) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        port_from = <a class="code" href="../../d9/d94/network_8h.html#abb99b46273eebad6426abc06423c0d9f">TOX_PORTRANGE_FROM</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        port_to = <a class="code" href="../../d9/d94/network_8h.html#ae22d1a7b52c5fb38a33df754621e407f">TOX_PORTRANGE_TO</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port_from == 0 &amp;&amp; port_to != 0) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        port_from = port_to;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port_from != 0 &amp;&amp; port_to == 0) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        port_to = port_from;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port_from &gt; port_to) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        uint16_t temp = port_from;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        port_from = port_to;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        port_to = temp;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        *<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a> = 2;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">/* maybe check for invalid IPs like 224+.x.y.z? if there is any IP set ever */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (ip.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> != AF_INET &amp;&amp; ip.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> != AF_INET6) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Invalid address family: %u\n&quot;</span>, ip.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1">networking_at_startup</a>() != 0)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *temp = calloc(1, <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a>));</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> (temp == NULL)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a> = ip.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> = 0;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">/* Initialize our socket. */</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">/* add log message what we&#39;re creating */</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a> = <a class="code" href="../../df/d08/namespacesocket.html">socket</a>(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a>, SOCK_DGRAM, IPPROTO_UDP);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">/* Check for socket error. */</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6e/network_8c.html#a84c3240a3325cbdaaa8a206c96980cd1">sock_valid</a>(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>)) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Failed to get a socket?! %u, %s\n&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        free(temp);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>)</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            *<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a> = 1;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">/* Functions to increase the size of the send and receive UDP buffers.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordtype">int</span> n = 1024 * 1024 * 2;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    setsockopt(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>, SOL_SOCKET, SO_RCVBUF, (<span class="keywordtype">char</span> *)&amp;n, <span class="keyword">sizeof</span>(n));</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    setsockopt(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>, SOL_SOCKET, SO_SNDBUF, (<span class="keywordtype">char</span> *)&amp;n, <span class="keyword">sizeof</span>(n));</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">/* Enable broadcast on socket */</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordtype">int</span> broadcast = 1;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    setsockopt(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>, SOL_SOCKET, SO_BROADCAST, (<span class="keywordtype">char</span> *)&amp;broadcast, <span class="keyword">sizeof</span>(broadcast));</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">/* iOS UDP sockets are weird and apparently can SIGPIPE */</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6e/network_8c.html#a379153c027c17d7c71797cb0e3ea41a3">set_socket_nosigpipe</a>(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>)) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="../../d6/d6e/network_8c.html#a8a36a1ed29a0d5dfe1f0095823039627">kill_networking</a>(temp);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            *<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a> = 1;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">/* Set socket nonblocking. */</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6e/network_8c.html#a6a50bb1345f2d5192fe1ec23ac7a1da9">set_socket_nonblock</a>(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>)) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="../../d6/d6e/network_8c.html#a8a36a1ed29a0d5dfe1f0095823039627">kill_networking</a>(temp);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            *<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a> = 1;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">/* Bind our socket to port PORT and the given IP address (usually 0.0.0.0 or ::) */</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    uint16_t *portptr = NULL;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keyword">struct </span>sockaddr_storage addr;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordtype">size_t</span> addrsize;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">if</span> (temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a> == AF_INET) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keyword">struct </span>sockaddr_in *addr4 = (<span class="keyword">struct </span>sockaddr_in *)&amp;addr;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        addrsize = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>sockaddr_in);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        addr4-&gt;sin_family = AF_INET;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        addr4-&gt;sin_port = 0;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        addr4-&gt;sin_addr = ip.<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        portptr = &amp;addr4-&gt;sin_port;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a> == AF_INET6) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keyword">struct </span>sockaddr_in6 *addr6 = (<span class="keyword">struct </span>sockaddr_in6 *)&amp;addr;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        addrsize = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>sockaddr_in6);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        addr6-&gt;sin6_family = AF_INET6;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        addr6-&gt;sin6_port = 0;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        addr6-&gt;sin6_addr = ip.<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">in6_addr</a>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        addr6-&gt;sin6_flowinfo = 0;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        addr6-&gt;sin6_scope_id = 0;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        portptr = &amp;addr6-&gt;sin6_port;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        free(temp);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (ip.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET6) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="preprocessor">#ifdef LOGGING</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordtype">int</span> is_dualstack =</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LOGGING */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <a class="code" href="../../d6/d6e/network_8c.html#ad2f109728a6345e6862686ea4baf5b27">set_socket_dualstack</a>(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a>( <span class="stringliteral">&quot;Dual-stack socket: %s&quot;</span>,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                      is_dualstack ? <span class="stringliteral">&quot;enabled&quot;</span> : <span class="stringliteral">&quot;Failed to enable, won&#39;t be able to receive from/send to IPv4 addresses&quot;</span> );</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="comment">/* multicast local nodes */</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keyword">struct </span>ipv6_mreq mreq;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        memset(&amp;mreq, 0, <span class="keyword">sizeof</span>(mreq));</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        mreq.ipv6mr_multiaddr.s6_addr[ 0] = 0xFF;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        mreq.ipv6mr_multiaddr.s6_addr[ 1] = 0x02;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        mreq.ipv6mr_multiaddr.s6_addr[15] = 0x01;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        mreq.ipv6mr_interface = 0;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="preprocessor">#ifdef LOGGING</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordtype">int</span> res =</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LOGGING */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            setsockopt(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>, IPPROTO_IPV6, IPV6_ADD_MEMBERSHIP, (<span class="keywordtype">char</span> *)&amp;mreq, <span class="keyword">sizeof</span>(mreq));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a>(res &lt; 0 ? <span class="stringliteral">&quot;Failed to activate local multicast membership. (%u, %s)&quot;</span> :</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                     <span class="stringliteral">&quot;Local multicast group FF02::1 joined successfully&quot;</span>, errno, strerror(errno) );</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">/* a hanging program or a different user might block the standard port;</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">     * as long as it isn&#39;t a parameter coming from the commandline,</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">     * try a few ports after it, to see if we can find a &quot;free&quot; one</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">     * if we go on without binding, the first sendto() automatically binds to</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">     * a free port chosen by the system (i.e. anything from 1024 to 65535)</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">     * returning NULL after bind fails has both advantages and disadvantages:</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">     * advantage:</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">     *   we can rely on getting the port in the range 33445..33450, which</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">     *   enables us to tell joe user to open their firewall to a small range</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">     * disadvantage:</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">     *   some clients might not test return of tox_new(), blindly assuming that</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">     *   it worked ok (which it did previously without a successful bind)</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    uint16_t port_to_try = port_from;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    *portptr = htons(port_to_try);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordtype">int</span> tries;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">for</span> (tries = port_from; tries &lt;= port_to; tries++) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordtype">int</span> res = bind(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>, (<span class="keyword">struct</span> sockaddr *)&amp;addr, addrsize);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">if</span> (!res) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> = *portptr;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a>(<span class="stringliteral">&quot;Bound successfully to %s:%u&quot;</span>, <a class="code" href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706">ip_ntoa</a>(&amp;ip), ntohs(temp-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>));</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="comment">/* errno isn&#39;t reset on success, only set on failure, the failed</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">             * binds with parallel clients yield a -EPERM to the outside if</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">             * errno isn&#39;t cleared here */</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            <span class="keywordflow">if</span> (tries &gt; 0)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                errno = 0;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                *<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a> = 0;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="keywordflow">return</span> temp;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        port_to_try++;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">if</span> (port_to_try &gt; port_to)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            port_to_try = port_from;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        *portptr = htons(port_to_try);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Failed to bind socket: %u, %s IP: %s port_from: %u port_to: %u&quot;</span>, errno, strerror(errno),</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                 <a class="code" href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706">ip_ntoa</a>(&amp;ip), port_from, port_to);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="../../d6/d6e/network_8c.html#a8a36a1ed29a0d5dfe1f0095823039627">kill_networking</a>(temp);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a>)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        *<a class="code" href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a> = 1;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div>
<div class="ttc" id="struct_networking___core_html_a35b19d84fb632ca8ce5cab237f7089a5"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">Networking_Core::sock</a></div><div class="ttdeci">sock_t sock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00302">network.h:302</a></div></div>
<div class="ttc" id="msi_8c_html_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed"><div class="ttname"><a href="../../d2/d9b/msi_8c.html#a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed">error</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9b/msi_8c_source.html#l00080">msi.c:80</a></div></div>
<div class="ttc" id="struct_networking___core_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a8e0798404bf2cf5dabb84c5ba9a4f236">Networking_Core::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00300">network.h:300</a></div></div>
<div class="ttc" id="network_8h_html_ae22d1a7b52c5fb38a33df754621e407f"><div class="ttname"><a href="../../d9/d94/network_8h.html#ae22d1a7b52c5fb38a33df754621e407f">TOX_PORTRANGE_TO</a></div><div class="ttdeci">#define TOX_PORTRANGE_TO</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00127">network.h:127</a></div></div>
<div class="ttc" id="network_8c_html_a379153c027c17d7c71797cb0e3ea41a3"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a379153c027c17d7c71797cb0e3ea41a3">set_socket_nosigpipe</a></div><div class="ttdeci">int set_socket_nosigpipe(sock_t sock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00165">network.c:165</a></div></div>
<div class="ttc" id="network_8c_html_ad2f109728a6345e6862686ea4baf5b27"><div class="ttname"><a href="../../d6/d6e/network_8c.html#ad2f109728a6345e6862686ea4baf5b27">set_socket_dualstack</a></div><div class="ttdeci">int set_socket_dualstack(sock_t sock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00191">network.c:191</a></div></div>
<div class="ttc" id="namespacesocket_html"><div class="ttname"><a href="../../df/d08/namespacesocket.html">socket</a></div></div>
<div class="ttc" id="network_8c_html_a8a36a1ed29a0d5dfe1f0095823039627"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a8a36a1ed29a0d5dfe1f0095823039627">kill_networking</a></div><div class="ttdeci">void kill_networking(Networking_Core *net)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00700">network.c:700</a></div></div>
<div class="ttc" id="struct_i_p_html_a14c606eb5ffb078c38ad854dc4e79507"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">IP::ip6</a></div><div class="ttdeci">IP6 ip6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00157">network.h:157</a></div></div>
<div class="ttc" id="network_8c_html_a6a50bb1345f2d5192fe1ec23ac7a1da9"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a6a50bb1345f2d5192fe1ec23ac7a1da9">set_socket_nonblock</a></div><div class="ttdeci">int set_socket_nonblock(sock_t sock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00150">network.c:150</a></div></div>
<div class="ttc" id="struct_i_p_html_aca19646000f55aa927406e68fc41ecf9"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">IP::ip4</a></div><div class="ttdeci">IP4 ip4</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00156">network.h:156</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
<div class="ttc" id="union_i_p4_html_a5a47f63dce37e6eb6be40f022434b1c5"><div class="ttname"><a href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">IP4::in_addr</a></div><div class="ttdeci">struct in_addr in_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00140">network.h:140</a></div></div>
<div class="ttc" id="union_i_p6_html_ac312c20ade57f180c50585e9ea42314c"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">IP6::in6_addr</a></div><div class="ttdeci">struct in6_addr in6_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00149">network.h:149</a></div></div>
<div class="ttc" id="network_8h_html_abb99b46273eebad6426abc06423c0d9f"><div class="ttname"><a href="../../d9/d94/network_8h.html#abb99b46273eebad6426abc06423c0d9f">TOX_PORTRANGE_FROM</a></div><div class="ttdeci">#define TOX_PORTRANGE_FROM</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00126">network.h:126</a></div></div>
<div class="ttc" id="struct_networking___core_html_a59fa33606a579e9080aced9a5d2659de"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">Networking_Core::family</a></div><div class="ttdeci">sa_family_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00299">network.h:299</a></div></div>
<div class="ttc" id="logger_8h_html_a9885ca09ce5f94d936c91a5b0856a024"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a9885ca09ce5f94d936c91a5b0856a024">LOGGER_DEBUG</a></div><div class="ttdeci">#define LOGGER_DEBUG(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00087">logger.h:87</a></div></div>
<div class="ttc" id="logger_8h_html_aedad6a1e3ffe0d4cd0992b822ec0eeeb"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a></div><div class="ttdeci">#define LOGGER_ERROR(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00090">logger.h:90</a></div></div>
<div class="ttc" id="network_8c_html_a84c3240a3325cbdaaa8a206c96980cd1"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a84c3240a3325cbdaaa8a206c96980cd1">sock_valid</a></div><div class="ttdeci">int sock_valid(sock_t sock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00119">network.c:119</a></div></div>
<div class="ttc" id="network_8c_html_af71f49c78ce7b76ccf08785c6ec08706"><div class="ttname"><a href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706">ip_ntoa</a></div><div class="ttdeci">const char * ip_ntoa(const IP *ip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00827">network.c:827</a></div></div>
<div class="ttc" id="network_8c_html_ad953dedd6d25d03cf441960dd1e1fed1"><div class="ttname"><a href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1">networking_at_startup</a></div><div class="ttdeci">int networking_at_startup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00444">network.c:444</a></div></div>
<div class="ttc" id="struct_networking___core_html"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html">Networking_Core</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00296">network.h:296</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a899cb8f62b49e71ba9f9f7a50254655c_cgraph.png" border="0" usemap="#d6/d6e/network_8c_a899cb8f62b49e71ba9f9f7a50254655c_cgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a899cb8f62b49e71ba9f9f7a50254655c_cgraph" id="d6/d6e/network_8c_a899cb8f62b49e71ba9f9f7a50254655c_cgraph">
<area shape="rect" id="node2" href="../../d6/d6e/network_8c.html#af71f49c78ce7b76ccf08785c6ec08706" title="ip_ntoa" alt="" coords="234,5,298,32"/><area shape="rect" id="node3" href="../../d6/d6e/network_8c.html#a8a36a1ed29a0d5dfe1f0095823039627" title="kill_networking" alt="" coords="212,56,320,83"/><area shape="rect" id="node5" href="../../d6/d6e/network_8c.html#ad953dedd6d25d03cf441960dd1e1fed1" title="networking_at_startup" alt="" coords="191,107,341,133"/><area shape="rect" id="node7" href="../../d6/d6e/network_8c.html#ad2f109728a6345e6862686ea4baf5b27" title="set_socket_dualstack" alt="" coords="191,157,341,184"/><area shape="rect" id="node8" href="../../d6/d6e/network_8c.html#a6a50bb1345f2d5192fe1ec23ac7a1da9" title="set_socket_nonblock" alt="" coords="193,208,339,235"/><area shape="rect" id="node9" href="../../d6/d6e/network_8c.html#a379153c027c17d7c71797cb0e3ea41a3" title="set_socket_nosigpipe" alt="" coords="192,259,340,285"/><area shape="rect" id="node10" href="../../d6/d6e/network_8c.html#a84c3240a3325cbdaaa8a206c96980cd1" title="sock_valid" alt="" coords="224,309,308,336"/><area shape="rect" id="node4" href="../../d6/d6e/network_8c.html#a512d8ea12392ba9ddfadd83bb7c92b2e" title="kill_sock" alt="" coords="421,56,494,83"/><area shape="rect" id="node6" href="../../d6/d6e/network_8c.html#a9f5cd2a713e4a17d4c6d36650336cab0" title="current_time_actual" alt="" coords="389,107,525,133"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a899cb8f62b49e71ba9f9f7a50254655c_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a899cb8f62b49e71ba9f9f7a50254655c_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a899cb8f62b49e71ba9f9f7a50254655c_icgraph" id="d6/d6e/network_8c_a899cb8f62b49e71ba9f9f7a50254655c_icgraph">
<area shape="rect" id="node2" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="191,107,308,133"/><area shape="rect" id="node11" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="191,233,307,260"/><area shape="rect" id="node3" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="388,56,439,83"/><area shape="rect" id="node4" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="378,107,449,133"/><area shape="rect" id="node5" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="519,5,625,32"/><area shape="rect" id="node6" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="540,56,604,83"/><area shape="rect" id="node8" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="533,107,611,133"/><area shape="rect" id="node10" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="547,157,597,184"/><area shape="rect" id="node7" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="673,56,724,83"/><area shape="rect" id="node9" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="673,107,724,133"/><area shape="rect" id="node12" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="356,183,471,209"/><area shape="rect" id="node14" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="360,233,467,260"/><area shape="rect" id="node15" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="368,284,459,311"/><area shape="rect" id="node17" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="388,335,439,361"/><area shape="rect" id="node13" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="519,208,625,235"/><area shape="rect" id="node16" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="519,284,625,311"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a44dd69c638b9ee342b7d54e65293850d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int receivepacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a>&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a> *&#160;</td>
          <td class="paramname"><em>ip_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00363">363</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00149">IP6::in6_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00140">IP4::in_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00163">IP_Port::ip</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00156">IP::ip4</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00157">IP::ip6</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00169">IPV6_IPV4_IN_V6</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00090">LOGGER_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00074">LOGGER_SCOPE</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00270">loglogdata</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00095">MAX_UDP_PACKET_SIZE</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00164">IP_Port::port</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00139">IP4::uint32</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00147">IP6::uint32</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d6e/network_8c_source.html#l00415">networking_poll()</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    memset(ip_port, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d14/struct_i_p___port.html">IP_Port</a>));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keyword">struct </span>sockaddr_storage addr;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">#if defined(_WIN32) || defined(__WIN32__) || defined (WIN32)</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">int</span> addrlen = <span class="keyword">sizeof</span>(addr);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    socklen_t addrlen = <span class="keyword">sizeof</span>(addr);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    *length = 0;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordtype">int</span> fail_or_len = recvfrom(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>, (<span class="keywordtype">char</span> *) <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>, <a class="code" href="../../d9/d94/network_8h.html#a9fd837ac38736fed27e32d824a824259">MAX_UDP_PACKET_SIZE</a>, 0, (<span class="keyword">struct</span> sockaddr *)&amp;addr, &amp;addrlen);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (fail_or_len &lt; 0) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="../../d1/d8c/logger_8h.html#a3c9976e3ba8401ba5a2117ee6297c669">LOGGER_SCOPE</a>( <span class="keywordflow">if</span> ((fail_or_len &lt; 0) &amp;&amp; (errno != EWOULDBLOCK))</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                      <a class="code" href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a>(<span class="stringliteral">&quot;Unexpected error reading from socket: %u, %s\n&quot;</span>, errno, strerror(errno)); );</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">return</span> -1; <span class="comment">/* Nothing received. */</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    *length = (uint32_t)fail_or_len;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span> (addr.ss_family == AF_INET) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keyword">struct </span>sockaddr_in *addr_in = (<span class="keyword">struct </span>sockaddr_in *)&amp;addr;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = addr_in-&gt;sin_family;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a> = addr_in-&gt;sin_addr;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> = addr_in-&gt;sin_port;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (addr.ss_family == AF_INET6) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keyword">struct </span>sockaddr_in6 *addr_in6 = (<span class="keyword">struct </span>sockaddr_in6 *)&amp;addr;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = addr_in6-&gt;sin6_family;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">in6_addr</a> = addr_in6-&gt;sin6_addr;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> = addr_in6-&gt;sin6_port;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d94/network_8h.html#aaaf5ca9c91edc4f8a7529206d7799805">IPV6_IPV4_IN_V6</a>(ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>)) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> = AF_INET;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5ad776be1fb768f3399aafcd1b58b3a2">uint32</a> = ip_port-&gt;<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">uint32</a>[3];</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="../../d6/d6e/network_8c.html#a0e448a6a4aa57962204518fd380d7ade">loglogdata</a>(<span class="stringliteral">&quot;=&gt;O&quot;</span>, <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>, <a class="code" href="../../d9/d94/network_8h.html#a9fd837ac38736fed27e32d824a824259">MAX_UDP_PACKET_SIZE</a>, *ip_port, *length);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div>
<div class="ttc" id="logger_8h_html_a3c9976e3ba8401ba5a2117ee6297c669"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3c9976e3ba8401ba5a2117ee6297c669">LOGGER_SCOPE</a></div><div class="ttdeci">#define LOGGER_SCOPE(__SCOPE_DO__)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00074">logger.h:74</a></div></div>
<div class="ttc" id="network_8h_html_a9fd837ac38736fed27e32d824a824259"><div class="ttname"><a href="../../d9/d94/network_8h.html#a9fd837ac38736fed27e32d824a824259">MAX_UDP_PACKET_SIZE</a></div><div class="ttdeci">#define MAX_UDP_PACKET_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00095">network.h:95</a></div></div>
<div class="ttc" id="irc__syncbot_8c_html_a5903d0b282fc5eae503de618f896b5e1"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a></div><div class="ttdeci">int sock</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00035">irc_syncbot.c:35</a></div></div>
<div class="ttc" id="network_8h_html_aaaf5ca9c91edc4f8a7529206d7799805"><div class="ttname"><a href="../../d9/d94/network_8h.html#aaaf5ca9c91edc4f8a7529206d7799805">IPV6_IPV4_IN_V6</a></div><div class="ttdeci">#define IPV6_IPV4_IN_V6(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00169">network.h:169</a></div></div>
<div class="ttc" id="struct_i_p_html_a14c606eb5ffb078c38ad854dc4e79507"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">IP::ip6</a></div><div class="ttdeci">IP6 ip6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00157">network.h:157</a></div></div>
<div class="ttc" id="struct_i_p___port_html"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html">IP_Port</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00162">network.h:162</a></div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
<div class="ttc" id="struct_i_p_html_aca19646000f55aa927406e68fc41ecf9"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">IP::ip4</a></div><div class="ttdeci">IP4 ip4</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00156">network.h:156</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
<div class="ttc" id="union_i_p4_html_a5a47f63dce37e6eb6be40f022434b1c5"><div class="ttname"><a href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">IP4::in_addr</a></div><div class="ttdeci">struct in_addr in_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00140">network.h:140</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a0c6193a337a223c63411b2fe722d79ec"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">IP_Port::ip</a></div><div class="ttdeci">IP ip</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00163">network.h:163</a></div></div>
<div class="ttc" id="union_i_p6_html_a1d8ab1f6c1da5565bed41e7095610dea"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">IP6::uint32</a></div><div class="ttdeci">uint32_t uint32[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00147">network.h:147</a></div></div>
<div class="ttc" id="union_i_p6_html_ac312c20ade57f180c50585e9ea42314c"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">IP6::in6_addr</a></div><div class="ttdeci">struct in6_addr in6_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00149">network.h:149</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">IP_Port::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00164">network.h:164</a></div></div>
<div class="ttc" id="union_i_p4_html_a5ad776be1fb768f3399aafcd1b58b3a2"><div class="ttname"><a href="../../d3/da8/union_i_p4.html#a5ad776be1fb768f3399aafcd1b58b3a2">IP4::uint32</a></div><div class="ttdeci">uint32_t uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00139">network.h:139</a></div></div>
<div class="ttc" id="logger_8h_html_aedad6a1e3ffe0d4cd0992b822ec0eeeb"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aedad6a1e3ffe0d4cd0992b822ec0eeeb">LOGGER_ERROR</a></div><div class="ttdeci">#define LOGGER_ERROR(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00090">logger.h:90</a></div></div>
<div class="ttc" id="network_8c_html_a0e448a6a4aa57962204518fd380d7ade"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a0e448a6a4aa57962204518fd380d7ade">loglogdata</a></div><div class="ttdeci">#define loglogdata(__message__, __buffer__, __buflen__, __ip_port__, __res__)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00270">network.c:270</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a44dd69c638b9ee342b7d54e65293850d_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a44dd69c638b9ee342b7d54e65293850d_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a44dd69c638b9ee342b7d54e65293850d_icgraph" id="d6/d6e/network_8c_a44dd69c638b9ee342b7d54e65293850d_icgraph">
<area shape="rect" id="node2" href="../../d9/d94/network_8h.html#ab6765fe4b08536210a20ac728f991e13" title="networking_poll" alt="" coords="156,81,268,108"/><area shape="rect" id="node3" href="../../d7/dd9/onion__test_8c.html#a3c2943b251ccd76e2814f77ada04f51e" title="do_onion" alt="" coords="332,5,407,32"/><area shape="rect" id="node5" href="../../d7/dd9/onion__test_8c.html#ab45bd517e9eb750ba65272a4a8ebc250" title="do_onions" alt="" coords="329,56,410,83"/><area shape="rect" id="node7" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="344,107,395,133"/><area shape="rect" id="node8" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="316,157,423,184"/><area shape="rect" id="node4" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="471,5,577,32"/><area shape="rect" id="node6" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="471,56,577,83"/><area shape="rect" id="node9" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="499,132,549,159"/><area shape="rect" id="node10" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="483,183,565,209"/><area shape="rect" id="node11" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="625,107,732,133"/><area shape="rect" id="node12" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="653,157,705,184"/><area shape="rect" id="node13" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="653,208,704,235"/><area shape="rect" id="node14" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="642,259,715,285"/><area shape="rect" id="node15" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="780,259,831,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7b90f87f3ba60cc5c66dd6dd77cd5cb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sendpacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0b/struct_networking___core.html">Networking_Core</a> *&#160;</td>
          <td class="paramname"><em>net</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d14/struct_i_p___port.html">IP_Port</a>&#160;</td>
          <td class="paramname"><em>ip_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00295">295</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>References <a class="el" href="../../d9/d94/network_8h_source.html#l00154">IP::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00299">Networking_Core::family</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00149">IP6::in6_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00140">IP4::in_addr</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00163">IP_Port::ip</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00156">IP::ip4</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00157">IP::ip6</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00270">loglogdata</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00164">IP_Port::port</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00302">Networking_Core::sock</a>, <a class="el" href="../../d9/d94/network_8h_source.html#l00139">IP4::uint32</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00147">IP6::uint32</a>.</p>

<p>Referenced by <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l00912">getnodes()</a>, <a class="el" href="../../de/d7d/bootstrap__node__packets_8c_source.html#l00037">handle_info_request()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00541">handle_recv_1()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00505">handle_recv_2()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00469">handle_recv_3()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00370">handle_send_1()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00420">handle_send_2()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00333">onion_send_1()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01467">route_packet()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01562">route_tofriend()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01617">routeone_tofriend()</a>, <a class="el" href="../../df/d75/onion__announce_8c_source.html#l00132">send_announce_request()</a>, <a class="el" href="../../d1/de5/_l_a_n__discovery_8c_source.html#l00180">send_broadcasts()</a>, <a class="el" href="../../df/d75/onion__announce_8c_source.html#l00169">send_data_request()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01904">send_hardening_getnode_res()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l01876">send_hardening_req()</a>, <a class="el" href="../../d1/de5/_l_a_n__discovery_8c_source.html#l00324">send_LANdiscovery()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00273">send_onion_packet()</a>, <a class="el" href="../../db/d79/onion__client_8c_source.html#l00311">send_onion_packet_tcp_udp()</a>, <a class="el" href="../../d4/d18/onion_8c_source.html#l00293">send_onion_response()</a>, <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l00392">send_packet_to()</a>, <a class="el" href="../../d9/d54/ping_8c_source.html#l00061">send_ping_request()</a>, <a class="el" href="../../d9/d54/ping_8c_source.html#l00103">send_ping_response()</a>, <a class="el" href="../../dc/dc1/_d_h_t_8c_source.html#l00969">sendnodes_ipv6()</a>, and <a class="el" href="../../d8/dc6/net__crypto_8c_source.html#l00194">udp_handle_cookie_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a> == 0) <span class="comment">/* Socket not initialized */</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">/* socket AF_INET, but target IP NOT: can&#39;t send */</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> ((net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a> == AF_INET) &amp;&amp; (ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> != AF_INET))</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">struct </span>sockaddr_storage addr;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">size_t</span> addrsize = 0;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">if</span> (net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">family</a> == AF_INET6) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="comment">/* must convert to IPV4-in-IPV6 address */</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keyword">struct </span>sockaddr_in6 *addr6 = (<span class="keyword">struct </span>sockaddr_in6 *)&amp;addr;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            addrsize = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>sockaddr_in6);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            addr6-&gt;sin6_family = AF_INET6;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            addr6-&gt;sin6_port = ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="comment">/* there should be a macro for this in a standards compliant</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">             * environment, not found */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <a class="code" href="../../d7/dae/union_i_p6.html">IP6</a> ip6;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            ip6.<a class="code" href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">uint32</a>[0] = 0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            ip6.<a class="code" href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">uint32</a>[1] = 0;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            ip6.<a class="code" href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">uint32</a>[2] = htonl(0xFFFF);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            ip6.<a class="code" href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">uint32</a>[3] = ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5ad776be1fb768f3399aafcd1b58b3a2">uint32</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            addr6-&gt;sin6_addr = ip6.<a class="code" href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">in6_addr</a>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            addr6-&gt;sin6_flowinfo = 0;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            addr6-&gt;sin6_scope_id = 0;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keyword">struct </span>sockaddr_in *addr4 = (<span class="keyword">struct </span>sockaddr_in *)&amp;addr;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            addrsize = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>sockaddr_in);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            addr4-&gt;sin_family = AF_INET;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            addr4-&gt;sin_addr = ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">ip4</a>.<a class="code" href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">in_addr</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            addr4-&gt;sin_port = ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">family</a> == AF_INET6) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keyword">struct </span>sockaddr_in6 *addr6 = (<span class="keyword">struct </span>sockaddr_in6 *)&amp;addr;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        addrsize = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>sockaddr_in6);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        addr6-&gt;sin6_family = AF_INET6;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        addr6-&gt;sin6_port = ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        addr6-&gt;sin6_addr = ip_port.<a class="code" href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">ip</a>.<a class="code" href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">ip6</a>.<a class="code" href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">in6_addr</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        addr6-&gt;sin6_flowinfo = 0;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        addr6-&gt;sin6_scope_id = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="comment">/* unknown address type*/</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordtype">int</span> res = sendto(net-&gt;<a class="code" href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">sock</a>, (<span class="keywordtype">char</span> *) <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>, length, 0, (<span class="keyword">struct</span> sockaddr *)&amp;addr, addrsize);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="../../d6/d6e/network_8c.html#a0e448a6a4aa57962204518fd380d7ade">loglogdata</a>(<span class="stringliteral">&quot;O=&gt;&quot;</span>, <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>, length, ip_port, res);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
<div class="ttc" id="struct_networking___core_html_a35b19d84fb632ca8ce5cab237f7089a5"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a35b19d84fb632ca8ce5cab237f7089a5">Networking_Core::sock</a></div><div class="ttdeci">sock_t sock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00302">network.h:302</a></div></div>
<div class="ttc" id="struct_i_p_html_a14c606eb5ffb078c38ad854dc4e79507"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#a14c606eb5ffb078c38ad854dc4e79507">IP::ip6</a></div><div class="ttdeci">IP6 ip6</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00157">network.h:157</a></div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
<div class="ttc" id="struct_i_p_html_aca19646000f55aa927406e68fc41ecf9"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#aca19646000f55aa927406e68fc41ecf9">IP::ip4</a></div><div class="ttdeci">IP4 ip4</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00156">network.h:156</a></div></div>
<div class="ttc" id="struct_i_p_html_adad4493a852deb413bb8c515368deaac"><div class="ttname"><a href="../../d4/d6d/struct_i_p.html#adad4493a852deb413bb8c515368deaac">IP::family</a></div><div class="ttdeci">uint8_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00154">network.h:154</a></div></div>
<div class="ttc" id="union_i_p4_html_a5a47f63dce37e6eb6be40f022434b1c5"><div class="ttname"><a href="../../d3/da8/union_i_p4.html#a5a47f63dce37e6eb6be40f022434b1c5">IP4::in_addr</a></div><div class="ttdeci">struct in_addr in_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00140">network.h:140</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a0c6193a337a223c63411b2fe722d79ec"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a0c6193a337a223c63411b2fe722d79ec">IP_Port::ip</a></div><div class="ttdeci">IP ip</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00163">network.h:163</a></div></div>
<div class="ttc" id="union_i_p6_html_a1d8ab1f6c1da5565bed41e7095610dea"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#a1d8ab1f6c1da5565bed41e7095610dea">IP6::uint32</a></div><div class="ttdeci">uint32_t uint32[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00147">network.h:147</a></div></div>
<div class="ttc" id="union_i_p6_html_ac312c20ade57f180c50585e9ea42314c"><div class="ttname"><a href="../../d7/dae/union_i_p6.html#ac312c20ade57f180c50585e9ea42314c">IP6::in6_addr</a></div><div class="ttdeci">struct in6_addr in6_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00149">network.h:149</a></div></div>
<div class="ttc" id="struct_i_p___port_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../db/d14/struct_i_p___port.html#a8e0798404bf2cf5dabb84c5ba9a4f236">IP_Port::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00164">network.h:164</a></div></div>
<div class="ttc" id="union_i_p4_html_a5ad776be1fb768f3399aafcd1b58b3a2"><div class="ttname"><a href="../../d3/da8/union_i_p4.html#a5ad776be1fb768f3399aafcd1b58b3a2">IP4::uint32</a></div><div class="ttdeci">uint32_t uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00139">network.h:139</a></div></div>
<div class="ttc" id="struct_networking___core_html_a59fa33606a579e9080aced9a5d2659de"><div class="ttname"><a href="../../d3/d0b/struct_networking___core.html#a59fa33606a579e9080aced9a5d2659de">Networking_Core::family</a></div><div class="ttdeci">sa_family_t family</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00299">network.h:299</a></div></div>
<div class="ttc" id="union_i_p6_html"><div class="ttname"><a href="../../d7/dae/union_i_p6.html">IP6</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00144">network.h:144</a></div></div>
<div class="ttc" id="network_8c_html_a0e448a6a4aa57962204518fd380d7ade"><div class="ttname"><a href="../../d6/d6e/network_8c.html#a0e448a6a4aa57962204518fd380d7ade">loglogdata</a></div><div class="ttdeci">#define loglogdata(__message__, __buffer__, __buflen__, __ip_port__, __res__)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6e/network_8c_source.html#l00270">network.c:270</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a7b90f87f3ba60cc5c66dd6dd77cd5cb1_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a7b90f87f3ba60cc5c66dd6dd77cd5cb1_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a7b90f87f3ba60cc5c66dd6dd77cd5cb1_icgraph" id="d6/d6e/network_8c_a7b90f87f3ba60cc5c66dd6dd77cd5cb1_icgraph">
<area shape="rect" id="node2" href="../../dc/dc1/_d_h_t_8c.html#a7af6c30b12e5cbda1e6d6d824794956e" title="getnodes" alt="" coords="201,132,275,159"/><area shape="rect" id="node8" href="../../de/d7d/bootstrap__node__packets_8c.html#a0556af728df68fb3a9c4b7cc4b7d9049" title="handle_info_request" alt="" coords="169,275,307,301"/><area shape="rect" id="node11" href="../../d4/d18/onion_8c.html#a733219ca8d321d01a999f10447b2e301" title="handle_recv_1" alt="" coords="423,376,530,403"/><area shape="rect" id="node14" href="../../d4/d18/onion_8c.html#a2efffc024cccd53f433718980ccf4541" title="handle_recv_2" alt="" coords="185,477,291,504"/><area shape="rect" id="node15" href="../../d4/d18/onion_8c.html#aad67ae9de051b78358faf690eaa03099" title="handle_recv_3" alt="" coords="185,528,291,555"/><area shape="rect" id="node16" href="../../d4/d18/onion_8c.html#af8b808b43786292e39b10d6e05ba1cb7" title="handle_send_1" alt="" coords="183,579,293,605"/><area shape="rect" id="node17" href="../../d4/d18/onion_8c.html#a60a847c1f3f33f8e2efdc13ede5f7ecc" title="handle_send_2" alt="" coords="183,680,293,707"/><area shape="rect" id="node18" href="../../d3/db9/onion_8h.html#a112ff3dd6d8a1e104516eb4b465fc2fa" title="onion_send_1" alt="" coords="187,629,289,656"/><area shape="rect" id="node21" href="../../df/dad/_d_h_t_8h.html#a91072d384a61a04ac1e4d679dc7efb3a" title="route_packet" alt="" coords="189,996,287,1023"/><area shape="rect" id="node23" href="../../df/dad/_d_h_t_8h.html#aee23d763e291eefd141227cd9e3684ab" title="route_tofriend" alt="" coords="187,1065,289,1092"/><area shape="rect" id="node26" href="../../dc/dc1/_d_h_t_8c.html#ad1a9a37b7cda1411149867eb77070bd1" title="routeone_tofriend" alt="" coords="177,1116,299,1143"/><area shape="rect" id="node27" href="../../d7/dfd/onion__announce_8h.html#adf4563e859323282731b183ef62cfbcc" title="send_announce_request" alt="" coords="620,731,783,757"/><area shape="rect" id="node28" href="../../d1/de5/_l_a_n__discovery_8c.html#a1fc7e8d37a627f59ac5afa2c7b204568" title="send_broadcasts" alt="" coords="177,325,299,352"/><area shape="rect" id="node29" href="../../dd/db4/_l_a_n__discovery_8h.html#a929a14971d13e5aad2661e834e406391" title="send_LANdiscovery" alt="" coords="407,325,546,352"/><area shape="rect" id="node31" href="../../d7/dfd/onion__announce_8h.html#a16a4948e44b16b56b9c0de61d2988082" title="send_data_request" alt="" coords="635,781,767,808"/><area shape="rect" id="node32" href="../../dc/dc1/_d_h_t_8c.html#ac35510e6bf4c6cfa950de4da3f4d8718" title="send_hardening_getnode_res" alt="" coords="143,1167,333,1193"/><area shape="rect" id="node34" href="../../dc/dc1/_d_h_t_8c.html#a6461cdeec360ffa10fa03beb6af29aaf" title="send_hardening_req" alt="" coords="169,1217,307,1244"/><area shape="rect" id="node36" href="../../d3/db9/onion_8h.html#af06edfff31b42d31803e24fc7f47d365" title="send_onion_packet" alt="" coords="634,832,769,859"/><area shape="rect" id="node37" href="../../db/d79/onion__client_8c.html#a4be9a76607f006a407f4f96dd49f25da" title="send_onion_packet_tcp_udp" alt="" coords="145,1268,331,1295"/><area shape="rect" id="node40" href="../../d3/db9/onion_8h.html#a8d81f915fcff64bfe2508296d325f7d4" title="send_onion_response" alt="" coords="164,908,312,935"/><area shape="rect" id="node44" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="181,1319,295,1345"/><area shape="rect" id="node47" href="../../d6/d2b/ping_8h.html#a1b3882fdfddc79be369ff230cd3e7a6a" title="send_ping_request" alt="" coords="173,220,303,247"/><area shape="rect" id="node48" href="../../d9/d54/ping_8c.html#a1449aca220d4e6998783667115958a3d" title="send_ping_response" alt="" coords="167,1369,309,1396"/><area shape="rect" id="node49" href="../../dc/dc1/_d_h_t_8c.html#acce043cdc5108edffc35e6e879197d20" title="sendnodes_ipv6" alt="" coords="180,1420,296,1447"/><area shape="rect" id="node50" href="../../d8/dc6/net__crypto_8c.html#a04fc41a4cb0d904536626006f3b7d7dd" title="udp_handle_cookie_request" alt="" coords="147,1471,329,1497"/><area shape="rect" id="node3" href="../../df/dad/_d_h_t_8h.html#a1dac5e05fd07964cb4914c17afeb9d50" title="DHT_addfriend" alt="" coords="421,56,532,83"/><area shape="rect" id="node4" href="../../df/dad/_d_h_t_8h.html#ab6d732074bab2377a7884c41c219cf96" title="DHT_bootstrap" alt="" coords="421,107,532,133"/><area shape="rect" id="node5" href="../../df/dad/_d_h_t_8h.html#a769ef744f969e1b4c55547cb74abee59" title="DHT_getnodes" alt="" coords="421,157,532,184"/><area shape="rect" id="node6" href="../../dc/dc1/_d_h_t_8c.html#a1d3aa20a7622e95d168e3220f61f6227" title="do_ping_and_sendnode\l_requests" alt="" coords="397,209,556,250"/><area shape="rect" id="node7" href="../../dc/dc1/_d_h_t_8c.html#aa38b3670da696f600f37989e79ce4966" title="handle_hardening" alt="" coords="415,5,538,32"/><area shape="rect" id="node9" href="../../de/d7d/bootstrap__node__packets_8c.html#af45f0ce6a723f57dc9f667f2fcd4772c" title="bootstrap_set_callbacks" alt="" coords="620,275,783,301"/><area shape="rect" id="node10" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="859,325,909,352"/><area shape="rect" id="node12" href="../../d3/db9/onion_8h.html#a71877ec5931feec418ed1ae10b0963d8" title="new_onion" alt="" coords="659,503,743,529"/><area shape="rect" id="node13" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="831,781,937,808"/><area shape="rect" id="node19" href="../../d4/d18/onion_8c.html#ad1a4dfd05094ff479cda552ed94059f7" title="handle_send_initial" alt="" coords="411,629,543,656"/><area shape="rect" id="node20" href="../../d4/d40/_t_c_p__server_8c.html#a904af6fcbd24cb3f75c4a04470be46de" title="handle_TCP_packet" alt="" coords="407,579,547,605"/><area shape="rect" id="node22" href="../../dc/dc1/_d_h_t_8c.html#aa8dd9b8abd89728492c0c9c6299c0a8b" title="cryptopacket_handle" alt="" coords="405,1035,548,1061"/><area shape="rect" id="node24" href="../../db/d79/onion__client_8c.html#a35bf565e3fc2b84ba3434d7cb38ba0e4" title="send_dht_dhtpk" alt="" coords="419,1085,534,1112"/><area shape="rect" id="node25" href="../../dc/dc1/_d_h_t_8c.html#a25f7b3704b34bb8745a0a60939e1f49c" title="send_NATping" alt="" coords="423,1136,531,1163"/><area shape="rect" id="node30" href="../../d2/db1/friend__connection_8c.html#adfc6df8fda15c84a4c49468d1d2fc3fc" title="LANdiscovery" alt="" coords="649,376,753,403"/><area shape="rect" id="node33" href="../../dc/dc1/_d_h_t_8c.html#a4dcc848207b2408def323b8b79b08e4a" title="handle_sendnodes_core" alt="" coords="395,1187,558,1213"/><area shape="rect" id="node35" href="../../dc/dc1/_d_h_t_8c.html#a3322fa3865c8dbbcd21b1a9a4955c193" title="send_hardening_getnode_req" alt="" coords="381,1237,572,1264"/><area shape="rect" id="node38" href="../../db/d79/onion__client_8c.html#a4253f1739f978c9aac584c97b7a55f48" title="client_send_announce\l_request" alt="" coords="401,1339,552,1381"/><area shape="rect" id="node39" href="../../d9/d26/onion__client_8h.html#aa1be42b5ea93bd068f47271831157927" title="send_onion_data" alt="" coords="417,1288,537,1315"/><area shape="rect" id="node41" href="../../d7/dd9/onion__test_8c.html#a0f896edb91ee630e579972c553919398" title="handle_test_1" alt="" coords="650,933,753,960"/><area shape="rect" id="node42" href="../../df/d75/onion__announce_8c.html#a5cc40944c42a4e0d1d3d702cf93ac8ad" title="handle_announce_request" alt="" coords="390,883,563,909"/><area shape="rect" id="node43" href="../../df/d75/onion__announce_8c.html#a938e61f5184d72e920e81cab7dc8056a" title="handle_data_request" alt="" coords="405,933,548,960"/><area shape="rect" id="node45" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="413,1456,541,1483"/><area shape="rect" id="node46" href="../../d8/dc6/net__crypto_8c.html#ae0a00f5fe1955d7d15af11eacc20997b" title="send_temp_packet" alt="" coords="411,1405,543,1432"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad2f109728a6345e6862686ea4baf5b27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_socket_dualstack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a>&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00191">191</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00914">new_listening_TCP_socket()</a>, and <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">new_networking_ex()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;{</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">int</span> ipv6only = 0;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    socklen_t optsize = <span class="keyword">sizeof</span>(ipv6only);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">int</span> res = getsockopt(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>, IPPROTO_IPV6, IPV6_V6ONLY, (<span class="keywordtype">void</span> *)&amp;ipv6only, &amp;optsize);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> ((res == 0) &amp;&amp; (ipv6only == 0))</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    ipv6only = 0;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> (setsockopt(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>, IPPROTO_IPV6, IPV6_V6ONLY, (<span class="keywordtype">void</span> *)&amp;ipv6only, <span class="keyword">sizeof</span>(ipv6only)) == 0);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="ttc" id="irc__syncbot_8c_html_a5903d0b282fc5eae503de618f896b5e1"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a></div><div class="ttdeci">int sock</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00035">irc_syncbot.c:35</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ad2f109728a6345e6862686ea4baf5b27_icgraph.png" border="0" usemap="#d6/d6e/network_8c_ad2f109728a6345e6862686ea4baf5b27_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ad2f109728a6345e6862686ea4baf5b27_icgraph" id="d6/d6e/network_8c_ad2f109728a6345e6862686ea4baf5b27_icgraph">
<area shape="rect" id="node2" href="../../d4/d40/_t_c_p__server_8c.html#aa6d558b4e988007697894aff27271927" title="new_listening_TCP_socket" alt="" coords="203,56,384,83"/><area shape="rect" id="node15" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="225,107,362,133"/><area shape="rect" id="node3" href="../../d6/d03/_t_c_p__server_8h.html#a148e632f4c51645cbc1b414bc3584b60" title="new_TCP_server" alt="" coords="432,56,555,83"/><area shape="rect" id="node4" href="../../d2/d8d/_t_c_p__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="608,5,715,32"/><area shape="rect" id="node5" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="636,107,687,133"/><area shape="rect" id="node6" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="603,56,720,83"/><area shape="rect" id="node7" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="796,31,847,57"/><area shape="rect" id="node8" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="786,81,857,108"/><area shape="rect" id="node9" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="923,5,1029,32"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="944,56,1008,83"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="937,107,1015,133"/><area shape="rect" id="node14" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="951,157,1001,184"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1077,56,1128,83"/><area shape="rect" id="node13" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1077,107,1128,133"/><area shape="rect" id="node16" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="435,157,551,184"/><area shape="rect" id="node17" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="604,157,719,184"/><area shape="rect" id="node19" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="608,208,715,235"/><area shape="rect" id="node20" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="616,259,707,285"/><area shape="rect" id="node18" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="768,157,875,184"/><area shape="rect" id="node21" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="768,259,875,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6a50bb1345f2d5192fe1ec23ac7a1da9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_socket_nonblock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a>&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00150">150</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00884">accept_connection()</a>, <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00914">new_listening_TCP_socket()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">new_networking_ex()</a>, and <a class="el" href="../../da/da1/_t_c_p__client_8c_source.html#l00611">new_TCP_connection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#if defined(_WIN32) || defined(__WIN32__) || defined (WIN32)</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    u_long mode = 1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> (ioctlsocket(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>, FIONBIO, &amp;mode) == 0);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> (fcntl(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>, F_SETFL, O_NONBLOCK, 1) == 0);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="ttc" id="irc__syncbot_8c_html_a5903d0b282fc5eae503de618f896b5e1"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a></div><div class="ttdeci">int sock</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00035">irc_syncbot.c:35</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a6a50bb1345f2d5192fe1ec23ac7a1da9_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a6a50bb1345f2d5192fe1ec23ac7a1da9_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a6a50bb1345f2d5192fe1ec23ac7a1da9_icgraph" id="d6/d6e/network_8c_a6a50bb1345f2d5192fe1ec23ac7a1da9_icgraph">
<area shape="rect" id="node2" href="../../d4/d40/_t_c_p__server_8c.html#ad3971e4c18ffe30a530ef41da1008bf7" title="accept_connection" alt="" coords="224,259,355,285"/><area shape="rect" id="node17" href="../../d4/d40/_t_c_p__server_8c.html#aa6d558b4e988007697894aff27271927" title="new_listening_TCP_socket" alt="" coords="199,208,380,235"/><area shape="rect" id="node26" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="458,157,595,184"/><area shape="rect" id="node33" href="../../d0/df3/_t_c_p__client_8h.html#aedb0d5c54ac7754bb342517247ac632d" title="new_TCP_connection" alt="" coords="214,415,365,441"/><area shape="rect" id="node3" href="../../d4/d40/_t_c_p__server_8c.html#a8bcfa0b79de4e0fad8720af7d1ed1d70" title="do_TCP_accept_new" alt="" coords="453,259,600,285"/><area shape="rect" id="node4" href="../../d6/d03/_t_c_p__server_8h.html#a40e8a0302a359dd4f712eb1e9c346fe5" title="do_TCP_server" alt="" coords="703,259,817,285"/><area shape="rect" id="node5" href="../../d2/d8d/_t_c_p__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="911,259,1017,285"/><area shape="rect" id="node6" href="../../d2/d8d/_t_c_p__test_8c.html#a8958ca530ce6534e81eaa06e582a26ad" title="new_TCP_con" alt="" coords="910,309,1018,336"/><area shape="rect" id="node8" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="939,208,989,235"/><area shape="rect" id="node9" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1105,411,1211,437"/><area shape="rect" id="node7" href="../../d2/d8d/_t_c_p__test_8c.html#a0ee98d716eb7311dd4b6d217289734ff" title="START_TEST" alt="" coords="1105,259,1211,285"/><area shape="rect" id="node10" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1340,411,1391,437"/><area shape="rect" id="node11" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="1324,360,1407,387"/><area shape="rect" id="node12" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="1496,360,1603,387"/><area shape="rect" id="node13" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="1523,411,1575,437"/><area shape="rect" id="node14" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1524,259,1575,285"/><area shape="rect" id="node15" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="1513,309,1586,336"/><area shape="rect" id="node16" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1651,247,1701,273"/><area shape="rect" id="node18" href="../../d6/d03/_t_c_p__server_8h.html#a148e632f4c51645cbc1b414bc3584b60" title="new_TCP_server" alt="" coords="699,208,821,235"/><area shape="rect" id="node19" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="905,157,1023,184"/><area shape="rect" id="node20" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1133,208,1183,235"/><area shape="rect" id="node21" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="1123,157,1193,184"/><area shape="rect" id="node22" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1312,107,1419,133"/><area shape="rect" id="node23" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1333,259,1397,285"/><area shape="rect" id="node24" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1510,183,1589,209"/><area shape="rect" id="node25" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1340,208,1391,235"/><area shape="rect" id="node27" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="702,107,818,133"/><area shape="rect" id="node28" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="907,5,1021,32"/><area shape="rect" id="node30" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="911,56,1017,83"/><area shape="rect" id="node31" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="919,107,1009,133"/><area shape="rect" id="node29" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1105,5,1211,32"/><area shape="rect" id="node32" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1105,107,1211,133"/><area shape="rect" id="node34" href="../../d2/d8d/_t_c_p__test_8c.html#a54051584eff6e81044025b36d88c9a2b" title="START_TEST" alt="" coords="473,516,580,543"/><area shape="rect" id="node35" href="../../d5/d26/_t_c_p__connection_8c.html#a81963b2aeca3eb88b3fea76869b19fad" title="reconnect_tcp_relay\l_connection" alt="" coords="457,349,596,390"/><area shape="rect" id="node40" href="../../d5/d26/_t_c_p__connection_8c.html#a359cec296ed123fc92b9b149266b30a4" title="unsleep_tcp_relay_connection" alt="" coords="428,415,625,441"/><area shape="rect" id="node41" href="../../d5/d26/_t_c_p__connection_8c.html#af221264f649b29407becf0e4ca352cbd" title="add_tcp_relay_instance" alt="" coords="447,465,606,492"/><area shape="rect" id="node36" href="../../d5/d26/_t_c_p__connection_8c.html#a6377f0f3d60ba706c5b014a9439696b7" title="do_tcp_conns" alt="" coords="709,360,811,387"/><area shape="rect" id="node37" href="../../da/d39/_t_c_p__connection_8h.html#a30c1a9c57a8d07cc2327c0505d6619a4" title="do_tcp_connections" alt="" coords="895,360,1033,387"/><area shape="rect" id="node38" href="../../d2/d8d/_t_c_p__test_8c.html#a1b7f98a901f4b8685223ec1dac1c1ce3" title="START_TEST" alt="" coords="1105,360,1211,387"/><area shape="rect" id="node39" href="../../d8/dc6/net__crypto_8c.html#adf499e22f45244e3660f9da6de77d2a3" title="do_tcp" alt="" coords="1127,309,1189,336"/><area shape="rect" id="node42" href="../../da/d39/_t_c_p__connection_8h.html#a5ee1dbaa28ff59e0f452eda3c97418e3" title="add_tcp_relay_global" alt="" coords="688,571,832,597"/><area shape="rect" id="node47" href="../../da/d39/_t_c_p__connection_8h.html#a26901882c0b134822660515493683132" title="add_tcp_relay_connection" alt="" coords="673,465,847,492"/><area shape="rect" id="node43" href="../../d2/d8d/_t_c_p__test_8c.html#ac45927e61cae5bb70dbde2b32c8f62ff" title="START_TEST" alt="" coords="911,621,1017,648"/><area shape="rect" id="node44" href="../../de/d42/net__crypto_8h.html#a632021583d7dd2484614071a7080f311" title="add_tcp_relay" alt="" coords="913,571,1015,597"/><area shape="rect" id="node45" href="../../d2/db1/friend__connection_8c.html#a9360ec098f2b1082b480b4e36b0a5f07" title="tcp_relay_node_callback" alt="" coords="1283,520,1448,547"/><area shape="rect" id="node46" href="../../da/d8f/tox_8h.html#ae858a499d7f8e2e5cbf5533afbd20537" title="tox_add_tcp_relay" alt="" coords="1094,629,1222,656"/><area shape="rect" id="node48" href="../../de/d42/net__crypto_8h.html#a4b9f3aef7b0d4c461294e24a21e64e71" title="add_tcp_relay_peer" alt="" coords="897,512,1031,539"/><area shape="rect" id="node49" href="../../d2/db1/friend__connection_8c.html#a612a688a590b1836efec92949e3cbdff" title="connect_to_saved_tcp\l_relays" alt="" coords="1081,513,1235,554"/><area shape="rect" id="node50" href="../../d0/d08/friend__connection_8h.html#ac89688f7660c1cb5fb664ecc09bab460" title="friend_add_tcp_relay" alt="" coords="1087,461,1229,488"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a379153c027c17d7c71797cb0e3ea41a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_socket_nosigpipe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a>&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00165">165</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00884">accept_connection()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">new_networking_ex()</a>, and <a class="el" href="../../da/da1/_t_c_p__client_8c_source.html#l00611">new_TCP_connection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#if defined(__MACH__)</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">int</span> set = 1;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> (setsockopt(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>, SOL_SOCKET, SO_NOSIGPIPE, (<span class="keywordtype">void</span> *)&amp;set, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)) == 0);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div>
<div class="ttc" id="irc__syncbot_8c_html_a5903d0b282fc5eae503de618f896b5e1"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a></div><div class="ttdeci">int sock</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00035">irc_syncbot.c:35</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a379153c027c17d7c71797cb0e3ea41a3_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a379153c027c17d7c71797cb0e3ea41a3_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a379153c027c17d7c71797cb0e3ea41a3_icgraph" id="d6/d6e/network_8c_a379153c027c17d7c71797cb0e3ea41a3_icgraph">
<area shape="rect" id="node2" href="../../d4/d40/_t_c_p__server_8c.html#ad3971e4c18ffe30a530ef41da1008bf7" title="accept_connection" alt="" coords="211,177,342,204"/><area shape="rect" id="node17" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="1077,304,1214,331"/><area shape="rect" id="node31" href="../../d0/df3/_t_c_p__client_8h.html#aedb0d5c54ac7754bb342517247ac632d" title="new_TCP_connection" alt="" coords="201,423,352,449"/><area shape="rect" id="node3" href="../../d4/d40/_t_c_p__server_8c.html#a8bcfa0b79de4e0fad8720af7d1ed1d70" title="do_TCP_accept_new" alt="" coords="651,121,798,148"/><area shape="rect" id="node4" href="../../d6/d03/_t_c_p__server_8h.html#a40e8a0302a359dd4f712eb1e9c346fe5" title="do_TCP_server" alt="" coords="1285,107,1399,133"/><area shape="rect" id="node5" href="../../d2/d8d/_t_c_p__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1496,5,1603,32"/><area shape="rect" id="node6" href="../../d2/d8d/_t_c_p__test_8c.html#a8958ca530ce6534e81eaa06e582a26ad" title="new_TCP_con" alt="" coords="1495,56,1603,83"/><area shape="rect" id="node8" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1524,107,1575,133"/><area shape="rect" id="node9" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1496,461,1603,488"/><area shape="rect" id="node7" href="../../d2/d8d/_t_c_p__test_8c.html#a0ee98d716eb7311dd4b6d217289734ff" title="START_TEST" alt="" coords="1704,56,1811,83"/><area shape="rect" id="node10" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1732,512,1783,539"/><area shape="rect" id="node11" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="1716,461,1799,488"/><area shape="rect" id="node12" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="1883,499,1989,525"/><area shape="rect" id="node13" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="1910,549,1962,576"/><area shape="rect" id="node14" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1911,397,1961,424"/><area shape="rect" id="node15" href="../../d2/d65/n_tox_8c.html#a1e3c1630c0ca8b687a6a878aa27dd69c" title="line_eval" alt="" coords="1899,448,1973,475"/><area shape="rect" id="node16" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="2037,392,2088,419"/><area shape="rect" id="node18" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="1283,309,1401,336"/><area shape="rect" id="node25" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="1284,208,1400,235"/><area shape="rect" id="node19" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1524,309,1575,336"/><area shape="rect" id="node20" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="1514,360,1585,387"/><area shape="rect" id="node21" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1704,259,1811,285"/><area shape="rect" id="node22" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1725,411,1789,437"/><area shape="rect" id="node23" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1897,335,1975,361"/><area shape="rect" id="node24" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1732,360,1783,387"/><area shape="rect" id="node26" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="1492,208,1607,235"/><area shape="rect" id="node28" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="1496,259,1603,285"/><area shape="rect" id="node29" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="1504,157,1595,184"/><area shape="rect" id="node27" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1704,208,1811,235"/><area shape="rect" id="node30" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1704,157,1811,184"/><area shape="rect" id="node32" href="../../d2/d8d/_t_c_p__test_8c.html#a54051584eff6e81044025b36d88c9a2b" title="START_TEST" alt="" coords="445,532,552,559"/><area shape="rect" id="node33" href="../../d5/d26/_t_c_p__connection_8c.html#a81963b2aeca3eb88b3fea76869b19fad" title="reconnect_tcp_relay\l_connection" alt="" coords="429,415,568,457"/><area shape="rect" id="node39" href="../../d5/d26/_t_c_p__connection_8c.html#a359cec296ed123fc92b9b149266b30a4" title="unsleep_tcp_relay_connection" alt="" coords="400,364,597,391"/><area shape="rect" id="node40" href="../../d5/d26/_t_c_p__connection_8c.html#af221264f649b29407becf0e4ca352cbd" title="add_tcp_relay_instance" alt="" coords="645,485,804,512"/><area shape="rect" id="node34" href="../../d5/d26/_t_c_p__connection_8c.html#a6377f0f3d60ba706c5b014a9439696b7" title="do_tcp_conns" alt="" coords="673,407,776,433"/><area shape="rect" id="node35" href="../../da/d39/_t_c_p__connection_8h.html#a30c1a9c57a8d07cc2327c0505d6619a4" title="do_tcp_connections" alt="" coords="869,407,1008,433"/><area shape="rect" id="node36" href="../../d2/d8d/_t_c_p__test_8c.html#a1b7f98a901f4b8685223ec1dac1c1ce3" title="START_TEST" alt="" coords="1092,448,1199,475"/><area shape="rect" id="node37" href="../../d8/dc6/net__crypto_8c.html#adf499e22f45244e3660f9da6de77d2a3" title="do_tcp" alt="" coords="1115,397,1176,424"/><area shape="rect" id="node38" href="../../de/d42/net__crypto_8h.html#a6fa028eb320bf09ecd619c5053580436" title="do_net_crypto" alt="" coords="1290,397,1394,424"/><area shape="rect" id="node41" href="../../da/d39/_t_c_p__connection_8h.html#a5ee1dbaa28ff59e0f452eda3c97418e3" title="add_tcp_relay_global" alt="" coords="1073,565,1217,592"/><area shape="rect" id="node47" href="../../da/d39/_t_c_p__connection_8h.html#a26901882c0b134822660515493683132" title="add_tcp_relay_connection" alt="" coords="852,485,1025,512"/><area shape="rect" id="node42" href="../../d2/d8d/_t_c_p__test_8c.html#ac45927e61cae5bb70dbde2b32c8f62ff" title="START_TEST" alt="" coords="1289,616,1395,643"/><area shape="rect" id="node43" href="../../de/d42/net__crypto_8h.html#a632021583d7dd2484614071a7080f311" title="add_tcp_relay" alt="" coords="1291,565,1393,592"/><area shape="rect" id="node44" href="../../d2/db1/friend__connection_8c.html#a9360ec098f2b1082b480b4e36b0a5f07" title="tcp_relay_node_callback" alt="" coords="1467,520,1632,547"/><area shape="rect" id="node46" href="../../da/d8f/tox_8h.html#ae858a499d7f8e2e5cbf5533afbd20537" title="tox_add_tcp_relay" alt="" coords="1485,571,1613,597"/><area shape="rect" id="node45" href="../../d0/d08/friend__connection_8h.html#a613a80a004fccd616de2a67d84a25d3c" title="new_friend_connection" alt="" coords="1680,563,1835,589"/><area shape="rect" id="node48" href="../../de/d42/net__crypto_8h.html#a4b9f3aef7b0d4c461294e24a21e64e71" title="add_tcp_relay_peer" alt="" coords="1078,499,1213,525"/><area shape="rect" id="node49" href="../../d2/db1/friend__connection_8c.html#a612a688a590b1836efec92949e3cbdff" title="connect_to_saved_tcp\l_relays" alt="" coords="1265,449,1419,490"/><area shape="rect" id="node50" href="../../d0/d08/friend__connection_8h.html#ac89688f7660c1cb5fb664ecc09bab460" title="friend_add_tcp_relay" alt="" coords="1271,515,1413,541"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac278c3d25e3807f0b2be9d91c9db328f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_socket_reuseaddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a>&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00180">180</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00914">new_listening_TCP_socket()</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">int</span> set = 1;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> (setsockopt(<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a>, SOL_SOCKET, SO_REUSEADDR, (<span class="keywordtype">void</span> *)&amp;set, <span class="keyword">sizeof</span>(set)) == 0);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="ttc" id="irc__syncbot_8c_html_a5903d0b282fc5eae503de618f896b5e1"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a></div><div class="ttdeci">int sock</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00035">irc_syncbot.c:35</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_ac278c3d25e3807f0b2be9d91c9db328f_icgraph.png" border="0" usemap="#d6/d6e/network_8c_ac278c3d25e3807f0b2be9d91c9db328f_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_ac278c3d25e3807f0b2be9d91c9db328f_icgraph" id="d6/d6e/network_8c_ac278c3d25e3807f0b2be9d91c9db328f_icgraph">
<area shape="rect" id="node2" href="../../d4/d40/_t_c_p__server_8c.html#aa6d558b4e988007697894aff27271927" title="new_listening_TCP_socket" alt="" coords="204,56,385,83"/><area shape="rect" id="node3" href="../../d6/d03/_t_c_p__server_8h.html#a148e632f4c51645cbc1b414bc3584b60" title="new_TCP_server" alt="" coords="433,56,556,83"/><area shape="rect" id="node4" href="../../d2/d8d/_t_c_p__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="609,5,716,32"/><area shape="rect" id="node5" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="637,56,688,83"/><area shape="rect" id="node6" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="604,107,721,133"/><area shape="rect" id="node7" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="779,81,830,108"/><area shape="rect" id="node8" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="769,132,840,159"/><area shape="rect" id="node9" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="888,56,995,83"/><area shape="rect" id="node10" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="909,107,973,133"/><area shape="rect" id="node12" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="902,157,981,184"/><area shape="rect" id="node14" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="916,208,967,235"/><area shape="rect" id="node11" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1043,107,1093,133"/><area shape="rect" id="node13" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1043,157,1093,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a84c3240a3325cbdaaa8a206c96980cd1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sock_valid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d94/network_8h.html#ae5faf8a8d23da59c3e3025a62039d8c1">sock_t</a>&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00119">119</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00884">accept_connection()</a>, <a class="el" href="../../db/d81/dns3__test_8c_source.html#l00045">main()</a>, <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00914">new_listening_TCP_socket()</a>, <a class="el" href="../../d6/d6e/network_8c_source.html#l00498">new_networking_ex()</a>, <a class="el" href="../../da/da1/_t_c_p__client_8c_source.html#l00611">new_TCP_connection()</a>, and <a class="el" href="../../d4/d40/_t_c_p__server_8c_source.html#l00942">new_TCP_server()</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#if defined(_WIN32) || defined(__WIN32__) || defined (WIN32)</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a> == INVALID_SOCKET) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a> &lt; 0) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="ttc" id="irc__syncbot_8c_html_a5903d0b282fc5eae503de618f896b5e1"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a5903d0b282fc5eae503de618f896b5e1">sock</a></div><div class="ttdeci">int sock</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00035">irc_syncbot.c:35</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6e/network_8c_a84c3240a3325cbdaaa8a206c96980cd1_icgraph.png" border="0" usemap="#d6/d6e/network_8c_a84c3240a3325cbdaaa8a206c96980cd1_icgraph" alt=""/></div>
<map name="d6/d6e/network_8c_a84c3240a3325cbdaaa8a206c96980cd1_icgraph" id="d6/d6e/network_8c_a84c3240a3325cbdaaa8a206c96980cd1_icgraph">
<area shape="rect" id="node2" href="../../d4/d40/_t_c_p__server_8c.html#ad3971e4c18ffe30a530ef41da1008bf7" title="accept_connection" alt="" coords="163,272,293,299"/><area shape="rect" id="node15" href="../../db/d81/dns3__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="203,171,253,197"/><area shape="rect" id="node16" href="../../d4/d40/_t_c_p__server_8c.html#aa6d558b4e988007697894aff27271927" title="new_listening_TCP_socket" alt="" coords="137,120,319,147"/><area shape="rect" id="node17" href="../../d6/d03/_t_c_p__server_8h.html#a148e632f4c51645cbc1b414bc3584b60" title="new_TCP_server" alt="" coords="404,132,527,159"/><area shape="rect" id="node26" href="../../d9/d94/network_8h.html#a899cb8f62b49e71ba9f9f7a50254655c" title="new_networking_ex" alt="" coords="397,323,534,349"/><area shape="rect" id="node33" href="../../d0/df3/_t_c_p__client_8h.html#aedb0d5c54ac7754bb342517247ac632d" title="new_TCP_connection" alt="" coords="153,592,303,619"/><area shape="rect" id="node3" href="../../d4/d40/_t_c_p__server_8c.html#a8bcfa0b79de4e0fad8720af7d1ed1d70" title="do_TCP_accept_new" alt="" coords="392,259,539,285"/><area shape="rect" id="node4" href="../../d6/d03/_t_c_p__server_8h.html#a40e8a0302a359dd4f712eb1e9c346fe5" title="do_TCP_server" alt="" coords="642,233,755,260"/><area shape="rect" id="node5" href="../../d2/d8d/_t_c_p__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="849,132,956,159"/><area shape="rect" id="node6" href="../../d2/d8d/_t_c_p__test_8c.html#a8958ca530ce6534e81eaa06e582a26ad" title="new_TCP_con" alt="" coords="849,183,957,209"/><area shape="rect" id="node8" href="../../d1/d36/tox-bootstrapd_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="877,284,928,311"/><area shape="rect" id="node9" href="../../d4/d30/_messenger_8h.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="1043,436,1150,463"/><area shape="rect" id="node7" href="../../d2/d8d/_t_c_p__test_8c.html#a0ee98d716eb7311dd4b6d217289734ff" title="START_TEST" alt="" coords="1043,208,1150,235"/><area shape="rect" id="node10" href="../../db/de9/_messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1279,385,1329,412"/><area shape="rect" id="node11" href="../../da/d8f/tox_8h.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="1263,436,1345,463"/><area shape="rect" id="node12" href="../../d9/d35/tox__test_8c.html#a4c612d3a3f15c8fbf2e4bde8002bc33b" title="START_TEST" alt="" coords="1435,461,1541,488"/><area shape="rect" id="node13" href="../../d6/dc0/toxav__many__test_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39" title="while" alt="" coords="1462,411,1514,437"/><area shape="rect" id="node14" href="../../db/d11/irc__syncbot_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1463,208,1513,235"/><area shape="rect" id="node18" href="../../d4/d30/_messenger_8h.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="640,81,757,108"/><area shape="rect" id="node19" href="../../d8/dda/messenger__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="877,31,928,57"/><area shape="rect" id="node20" href="../../da/d8f/tox_8h.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="867,81,938,108"/><area shape="rect" id="node21" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="1043,5,1150,32"/><area shape="rect" id="node22" href="../../db/d11/irc__syncbot_8c.html#a7a3ec256dab5cbac9fc01ff328980da7" title="init_tox" alt="" coords="1272,56,1336,83"/><area shape="rect" id="node23" href="../../d2/d65/n_tox_8c.html#ac47fc78dd12365ddfd46c70003627250" title="load_data" alt="" coords="1057,107,1136,133"/><area shape="rect" id="node25" href="../../d7/db1/tox__shell_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1071,157,1122,184"/><area shape="rect" id="node24" href="../../d2/d65/n_tox_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="1279,107,1329,133"/><area shape="rect" id="node27" href="../../d9/d94/network_8h.html#a0c272a560dd4b2c18c6546a91656c1b5" title="new_networking" alt="" coords="641,335,757,361"/><area shape="rect" id="node28" href="../../d2/d98/dht__test_8c.html#aa4b7c82b70f87539daa26f6935d06a03" title="test_addto_lists" alt="" coords="845,335,960,361"/><area shape="rect" id="node30" href="../../d7/dd9/onion__test_8c.html#ad7475d1539db4bb3bcf8673dd7f7cf68" title="START_TEST" alt="" coords="849,385,956,412"/><area shape="rect" id="node31" href="../../d7/dd9/onion__test_8c.html#a5945771cafdfe39074adf8ddd47ae81b" title="new_onions" alt="" coords="857,436,948,463"/><area shape="rect" id="node29" href="../../d2/d98/dht__test_8c.html#a1d9c8c274c7bcbb86b2c757ad3d3c0bd" title="START_TEST" alt="" coords="1043,335,1150,361"/><area shape="rect" id="node32" href="../../d7/dd9/onion__test_8c.html#a1bd0e98b361db6749c50308a7555a192" title="START_TEST" alt="" coords="1043,385,1150,412"/><area shape="rect" id="node34" href="../../d2/d8d/_t_c_p__test_8c.html#a54051584eff6e81044025b36d88c9a2b" title="START_TEST" alt="" coords="412,643,519,669"/><area shape="rect" id="node35" href="../../d5/d26/_t_c_p__connection_8c.html#a81963b2aeca3eb88b3fea76869b19fad" title="reconnect_tcp_relay\l_connection" alt="" coords="396,694,535,735"/><area shape="rect" id="node40" href="../../d5/d26/_t_c_p__connection_8c.html#a359cec296ed123fc92b9b149266b30a4" title="unsleep_tcp_relay_connection" alt="" coords="367,592,564,619"/><area shape="rect" id="node41" href="../../d5/d26/_t_c_p__connection_8c.html#af221264f649b29407becf0e4ca352cbd" title="add_tcp_relay_instance" alt="" coords="386,541,545,568"/><area shape="rect" id="node36" href="../../d5/d26/_t_c_p__connection_8c.html#a6377f0f3d60ba706c5b014a9439696b7" title="do_tcp_conns" alt="" coords="647,701,750,728"/><area shape="rect" id="node37" href="../../da/d39/_t_c_p__connection_8h.html#a30c1a9c57a8d07cc2327c0505d6619a4" title="do_tcp_connections" alt="" coords="833,705,972,732"/><area shape="rect" id="node38" href="../../d2/d8d/_t_c_p__test_8c.html#a1b7f98a901f4b8685223ec1dac1c1ce3" title="START_TEST" alt="" coords="1043,705,1150,732"/><area shape="rect" id="node39" href="../../d8/dc6/net__crypto_8c.html#adf499e22f45244e3660f9da6de77d2a3" title="do_tcp" alt="" coords="1066,756,1127,783"/><area shape="rect" id="node42" href="../../da/d39/_t_c_p__connection_8h.html#a5ee1dbaa28ff59e0f452eda3c97418e3" title="add_tcp_relay_global" alt="" coords="627,537,771,564"/><area shape="rect" id="node47" href="../../da/d39/_t_c_p__connection_8h.html#a26901882c0b134822660515493683132" title="add_tcp_relay_connection" alt="" coords="612,599,785,625"/><area shape="rect" id="node43" href="../../d2/d8d/_t_c_p__test_8c.html#ac45927e61cae5bb70dbde2b32c8f62ff" title="START_TEST" alt="" coords="849,487,956,513"/><area shape="rect" id="node44" href="../../de/d42/net__crypto_8h.html#a632021583d7dd2484614071a7080f311" title="add_tcp_relay" alt="" coords="851,537,954,564"/><area shape="rect" id="node45" href="../../d2/db1/friend__connection_8c.html#a9360ec098f2b1082b480b4e36b0a5f07" title="tcp_relay_node_callback" alt="" coords="1221,571,1387,597"/><area shape="rect" id="node46" href="../../da/d8f/tox_8h.html#ae858a499d7f8e2e5cbf5533afbd20537" title="tox_add_tcp_relay" alt="" coords="1033,537,1161,564"/><area shape="rect" id="node48" href="../../de/d42/net__crypto_8h.html#a4b9f3aef7b0d4c461294e24a21e64e71" title="add_tcp_relay_peer" alt="" coords="835,599,970,625"/><area shape="rect" id="node49" href="../../d2/db1/friend__connection_8c.html#a612a688a590b1836efec92949e3cbdff" title="connect_to_saved_tcp\l_relays" alt="" coords="1020,589,1173,630"/><area shape="rect" id="node50" href="../../d0/d08/friend__connection_8h.html#ac89688f7660c1cb5fb664ecc09bab460" title="friend_add_tcp_relay" alt="" coords="1025,655,1168,681"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a269d957bd615e26e36b2ed0d2757b7e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char addresstext[96]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00826">826</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d6e/network_8c_source.html#l00827">ip_ntoa()</a>.</p>

</div>
</div>
<a class="anchor" id="a1e407c1eac9f5897472ad66ab31e0b24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t at_startup_ran = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d6e/network_8c_source.html#l00443">443</a> of file <a class="el" href="../../d6/d6e/network_8c_source.html">network.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 2 2015 23:41:27 for libtoxcore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
