<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>libtoxcore: testing/tox_sync.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../tox.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libtoxcore
   </div>
   <div id="projectbrief">The future of instant messaging</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_64f94c193e4d03baf6e89b1053934749.html">testing</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tox_sync.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../da/d8f/tox_8h_source.html">../toxcore/tox.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da3/misc__tools_8c_source.html">misc_tools.c</a>&quot;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tox_sync.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d5b/tox__sync_8c__incl.png" border="0" usemap="#testing_2tox__sync_8c" alt=""/></div>
<map name="testing_2tox__sync_8c" id="testing_2tox__sync_8c">
<area shape="rect" id="node2" href="../../da/d8f/tox_8h.html" title="../toxcore/tox.h" alt="" coords="179,80,290,107"/><area shape="rect" id="node7" href="../../d5/da3/misc__tools_8c.html" title="misc_tools.c" alt="" coords="415,80,511,107"/><area shape="rect" id="node6" href="../../d4/d71/tox__old_8h.html" title="tox_old.h" alt="" coords="197,155,272,181"/></map>
</div>
</div>
<p><a href="../../dd/d99/tox__sync_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d93/struct_file__t.html">File_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5d21ea3d7da27fbd9f40c59aaa04da62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a5d21ea3d7da27fbd9f40c59aaa04da62">c_sleep</a>(<a class="el" href="../../d2/d65/n_tox_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>)&#160;&#160;&#160;usleep(1000*<a class="el" href="../../d2/d65/n_tox_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>)</td></tr>
<tr class="separator:a5d21ea3d7da27fbd9f40c59aaa04da62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f5a542a8edd51f567edf1e7b37d272b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a3f5a542a8edd51f567edf1e7b37d272b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7209b965126c3b606c3f0030a088ed27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a7209b965126c3b606c3f0030a088ed27">tox_file_chunk_request</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *tox, uint32_t <a class="el" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a>, uint32_t file_number, uint64_t position, size_t length, void *user_data)</td></tr>
<tr class="separator:a7209b965126c3b606c3f0030a088ed27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa834c164f5a649c381bb5dcca7a5b4fc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#aa834c164f5a649c381bb5dcca7a5b4fc">add_filesender</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *<a class="el" href="../../db/de9/_messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a>, uint16_t friendnum, char *filename)</td></tr>
<tr class="separator:aa834c164f5a649c381bb5dcca7a5b4fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2038b24d242a7c5f31cbb116f2f30820"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a2038b24d242a7c5f31cbb116f2f30820">kill_filesender</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *<a class="el" href="../../db/de9/_messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a>, uint32_t <a class="el" href="../../d9/d35/tox__test_8c.html#aed845bec91f99896ce34a65a6f248ea5">filenum</a>)</td></tr>
<tr class="separator:a2038b24d242a7c5f31cbb116f2f30820"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7628254e3a34910ea0712e135948be46"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a7628254e3a34910ea0712e135948be46">not_sending</a> ()</td></tr>
<tr class="separator:a7628254e3a34910ea0712e135948be46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d2460a7b0d3135f757dd8849dd3d353"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a6d2460a7b0d3135f757dd8849dd3d353">file_request_accept</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *tox, uint32_t <a class="el" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a>, uint32_t file_number, uint32_t type, uint64_t <a class="el" href="../../d9/d35/tox__test_8c.html#af564d0d073559935815f33b08f7fbd51">file_size</a>, const uint8_t *filename, size_t filename_length, void *user_data)</td></tr>
<tr class="separator:a6d2460a7b0d3135f757dd8849dd3d353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4f5fe76ced673923d8ef17321a227e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a6d4f5fe76ced673923d8ef17321a227e">file_print_control</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *tox, uint32_t <a class="el" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a>, uint32_t file_number, <a class="el" href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9">TOX_FILE_CONTROL</a> control, void *user_data)</td></tr>
<tr class="separator:a6d4f5fe76ced673923d8ef17321a227e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d81671277a08fc6e90ef2dae0f3ea4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a2d81671277a08fc6e90ef2dae0f3ea4e">write_file</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *tox, uint32_t friendnumber, uint32_t filenumber, uint64_t position, const uint8_t *data, size_t length, void *user_data)</td></tr>
<tr class="separator:a2d81671277a08fc6e90ef2dae0f3ea4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61256aeab299b47ada9659cb790e8634"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a61256aeab299b47ada9659cb790e8634">print_online</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *tox, uint32_t friendnumber, <a class="el" href="../../da/d8f/tox_8h.html#ab13b9741ea8c99016819171a0b869dbb">TOX_CONNECTION</a> status, void *userdata)</td></tr>
<tr class="separator:a61256aeab299b47ada9659cb790e8634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0bf9288cb8c4212721cf843edb8053cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d93/struct_file__t.html">File_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a> [<a class="el" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>]</td></tr>
<tr class="separator:a0bf9288cb8c4212721cf843edb8053cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c15925710b7704e276c230d73f7f4f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d93/struct_file__t.html">File_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a> [<a class="el" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>]</td></tr>
<tr class="separator:a7c15925710b7704e276c230d73f7f4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adba72303546f264686b8b2c05c0e83aa"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#adba72303546f264686b8b2c05c0e83aa">numfilesenders</a></td></tr>
<tr class="separator:adba72303546f264686b8b2c05c0e83aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f50c85874ef8f3405625e5a26febbcb"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a> [1024]</td></tr>
<tr class="separator:a6f50c85874ef8f3405625e5a26febbcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a5d21ea3d7da27fbd9f40c59aaa04da62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define c_sleep</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d2/d65/n_tox_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;usleep(1000*<a class="el" href="../../d2/d65/n_tox_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00039">39</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f5a542a8edd51f567edf1e7b37d272b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_FILE_SENDERS&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00046">46</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00104">kill_filesender()</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00114">not_sending()</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00210">print_online()</a>, and <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00056">tox_file_chunk_request()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa834c164f5a649c381bb5dcca7a5b4fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t add_filesender </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>friendnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00081">81</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00048">File_t::file</a>, <a class="el" href="../../d9/d35/tox__test_8c_source.html#l00112">filenum</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00050">File_t::filenumber</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00049">File_t::friendnum</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00054">numfilesenders</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l01608">TOX_FILE_KIND_DATA</a>, and <a class="el" href="../../d3/d69/tox_8c_source.html#l01034">tox_file_send()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    FILE *tempfile = fopen(filename, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> (tempfile == 0)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    fseek(tempfile, 0, SEEK_END);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    uint64_t filesize = ftell(tempfile);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    fseek(tempfile, 0, SEEK_SET);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    uint32_t <a class="code" href="../../d9/d35/tox__test_8c.html#aed845bec91f99896ce34a65a6f248ea5">filenum</a> = <a class="code" href="../../d3/d69/tox_8c.html#a57990fd242dca24aa7e1f29f5fa56be7">tox_file_send</a>(m, friendnum, <a class="code" href="../../da/d8f/tox_8h.html#a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0">TOX_FILE_KIND_DATA</a>, filesize, 0, (uint8_t *)filename,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                     strlen(filename), 0);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (filenum == -1)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[<a class="code" href="../../dd/d99/tox__sync_8c.html#adba72303546f264686b8b2c05c0e83aa">numfilesenders</a>].<a class="code" href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">file</a> = tempfile;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[<a class="code" href="../../dd/d99/tox__sync_8c.html#adba72303546f264686b8b2c05c0e83aa">numfilesenders</a>].<a class="code" href="../../d8/d93/struct_file__t.html#af02b3246ba69ea99fddd081f6e95598f">friendnum</a> = friendnum;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[<a class="code" href="../../dd/d99/tox__sync_8c.html#adba72303546f264686b8b2c05c0e83aa">numfilesenders</a>].<a class="code" href="../../d8/d93/struct_file__t.html#a32e4dffe2d73a1eeddb1bc8ce5511367">filenumber</a> = <a class="code" href="../../d9/d35/tox__test_8c.html#aed845bec91f99896ce34a65a6f248ea5">filenum</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    ++<a class="code" href="../../dd/d99/tox__sync_8c.html#adba72303546f264686b8b2c05c0e83aa">numfilesenders</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d35/tox__test_8c.html#aed845bec91f99896ce34a65a6f248ea5">filenum</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
<div class="ttc" id="tox__test_8c_html_aed845bec91f99896ce34a65a6f248ea5"><div class="ttname"><a href="../../d9/d35/tox__test_8c.html#aed845bec91f99896ce34a65a6f248ea5">filenum</a></div><div class="ttdeci">uint8_t filenum</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/tox__test_8c_source.html#l00112">tox_test.c:112</a></div></div>
<div class="ttc" id="struct_file__t_html_a702945180aa732857b380a007a7e2a21"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">File_t::file</a></div><div class="ttdeci">FILE * file</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00048">tox_sync.c:48</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a0bf9288cb8c4212721cf843edb8053cc"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a></div><div class="ttdeci">File_t file_senders[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00052">tox_sync.c:52</a></div></div>
<div class="ttc" id="tox_8c_html_a57990fd242dca24aa7e1f29f5fa56be7"><div class="ttname"><a href="../../d3/d69/tox_8c.html#a57990fd242dca24aa7e1f29f5fa56be7">tox_file_send</a></div><div class="ttdeci">uint32_t tox_file_send(Tox *tox, uint32_t friend_number, uint32_t kind, uint64_t file_size, const uint8_t *file_id, const uint8_t *filename, size_t filename_length, TOX_ERR_FILE_SEND *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l01034">tox.c:1034</a></div></div>
<div class="ttc" id="tox__sync_8c_html_adba72303546f264686b8b2c05c0e83aa"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#adba72303546f264686b8b2c05c0e83aa">numfilesenders</a></div><div class="ttdeci">uint8_t numfilesenders</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00054">tox_sync.c:54</a></div></div>
<div class="ttc" id="tox_8h_html_a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0">TOX_FILE_KIND_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l01608">tox.h:1608</a></div></div>
<div class="ttc" id="struct_file__t_html_a32e4dffe2d73a1eeddb1bc8ce5511367"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#a32e4dffe2d73a1eeddb1bc8ce5511367">File_t::filenumber</a></div><div class="ttdeci">uint32_t filenumber</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00050">tox_sync.c:50</a></div></div>
<div class="ttc" id="struct_file__t_html_af02b3246ba69ea99fddd081f6e95598f"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#af02b3246ba69ea99fddd081f6e95598f">File_t::friendnum</a></div><div class="ttdeci">uint32_t friendnum</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00049">tox_sync.c:49</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_aa834c164f5a649c381bb5dcca7a5b4fc_cgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_aa834c164f5a649c381bb5dcca7a5b4fc_cgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_aa834c164f5a649c381bb5dcca7a5b4fc_cgraph" id="dd/d99/tox__sync_8c_aa834c164f5a649c381bb5dcca7a5b4fc_cgraph">
<area shape="rect" id="node2" href="../../d3/d69/tox_8c.html#a57990fd242dca24aa7e1f29f5fa56be7" title="tox_file_send" alt="" coords="160,305,259,332"/><area shape="rect" id="node3" href="../../dc/d85/crypto__core_8c.html#a89b4a1a4a7d8bfabdf0e1b60f074e531" title="new_symmetric_key" alt="" coords="307,280,449,307"/><area shape="rect" id="node4" href="../../d8/d8d/_messenger_8c.html#a9390d980f0320f6c53c932c7244fa504" title="new_filesender" alt="" coords="323,331,433,357"/><area shape="rect" id="node5" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="877,356,990,383"/><area shape="rect" id="node6" href="../../d8/d8d/_messenger_8c.html#af0e440a0c993bf8a9adbf85b37753337" title="file_sendrequest" alt="" coords="497,381,615,408"/><area shape="rect" id="node7" href="../../de/df1/util_8c.html#aa199044077924fcae89d59d2a5af5629" title="host_to_net" alt="" coords="689,407,779,433"/><area shape="rect" id="node8" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="663,457,805,484"/><area shape="rect" id="node9" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="871,531,996,557"/><area shape="rect" id="node41" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="853,429,1013,470"/><area shape="rect" id="node10" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2291,493,2444,520"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1061,531,1212,557"/><area shape="rect" id="node11" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2514,486,2653,527"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1260,497,1439,524"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1513,599,1631,625"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1487,447,1657,473"/><area shape="rect" id="node38" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1491,548,1653,575"/><area shape="rect" id="node39" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1269,396,1430,423"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1705,320,1833,347"/><area shape="rect" id="node17" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2939,5,3104,32"/><area shape="rect" id="node18" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2961,68,3082,95"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1881,320,1996,347"/><area shape="rect" id="node20" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2054,295,2225,321"/><area shape="rect" id="node26" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2095,345,2184,372"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2044,244,2235,271"/><area shape="rect" id="node21" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2328,421,2407,448"/><area shape="rect" id="node22" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2283,355,2452,397"/><area shape="rect" id="node23" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2528,363,2639,389"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2508,414,2659,455"/><area shape="rect" id="node24" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2731,355,2874,397"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2300,248,2435,275"/><area shape="rect" id="node30" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2326,196,2409,223"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2305,120,2429,147"/><area shape="rect" id="node29" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2500,297,2667,338"/><area shape="rect" id="node31" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2513,245,2654,272"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2715,130,2891,171"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2518,195,2649,221"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="2954,131,3089,157"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="2977,181,3066,208"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="3152,131,3353,157"/><area shape="rect" id="node40" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1504,396,1640,423"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1099,364,1174,391"/><area shape="rect" id="node43" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1270,345,1429,372"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_aa834c164f5a649c381bb5dcca7a5b4fc_icgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_aa834c164f5a649c381bb5dcca7a5b4fc_icgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_aa834c164f5a649c381bb5dcca7a5b4fc_icgraph" id="dd/d99/tox__sync_8c_aa834c164f5a649c381bb5dcca7a5b4fc_icgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="160,5,211,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6d4f5fe76ced673923d8ef17321a227e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void file_print_control </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>tox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>friend_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>file_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9">TOX_FILE_CONTROL</a>&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00172">172</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00048">File_t::file</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00104">kill_filesender()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf()</a>, and <a class="el" href="../../da/d8f/tox_8h_source.html#l01655">TOX_FILE_CONTROL_CANCEL</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (file_number &lt; (1 &lt;&lt; 15) &amp;&amp; (control == <a class="code" href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423">TOX_FILE_CONTROL_CANCEL</a>)) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="../../dd/d99/tox__sync_8c.html#a2038b24d242a7c5f31cbb116f2f30820">kill_filesender</a>(tox, file_number);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (file_number &gt; (1 &lt;&lt; 15) &amp;&amp; (control == <a class="code" href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423">TOX_FILE_CONTROL_CANCEL</a>)) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        uint8_t file_index = (file_number &gt;&gt; 16) - 1;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        fclose(<a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].file);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;File closed\n&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].<a class="code" href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">file</a> = 0;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="ttc" id="tox__sync_8c_html_a2038b24d242a7c5f31cbb116f2f30820"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a2038b24d242a7c5f31cbb116f2f30820">kill_filesender</a></div><div class="ttdeci">void kill_filesender(Tox *m, uint32_t filenum)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00104">tox_sync.c:104</a></div></div>
<div class="ttc" id="struct_file__t_html_a702945180aa732857b380a007a7e2a21"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">File_t::file</a></div><div class="ttdeci">FILE * file</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00048">tox_sync.c:48</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a7c15925710b7704e276c230d73f7f4f0"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a></div><div class="ttdeci">File_t file_recv[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00053">tox_sync.c:53</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a1b88a4421cf9eef5af4895904ce2d905"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a></div><div class="ttdeci">printf(&quot;All set after %llu seconds! Starting call...\n&quot;, time(NULL)-cur_time)</div></div>
<div class="ttc" id="tox_8h_html_a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423">TOX_FILE_CONTROL_CANCEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l01655">tox.h:1655</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a6d4f5fe76ced673923d8ef17321a227e_cgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a6d4f5fe76ced673923d8ef17321a227e_cgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a6d4f5fe76ced673923d8ef17321a227e_cgraph" id="dd/d99/tox__sync_8c_a6d4f5fe76ced673923d8ef17321a227e_cgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a2038b24d242a7c5f31cbb116f2f30820" title="kill_filesender" alt="" coords="171,5,272,32"/><area shape="rect" id="node3" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905" title="printf" alt="" coords="196,56,247,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a6d4f5fe76ced673923d8ef17321a227e_icgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a6d4f5fe76ced673923d8ef17321a227e_icgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a6d4f5fe76ced673923d8ef17321a227e_icgraph" id="dd/d99/tox__sync_8c_a6d4f5fe76ced673923d8ef17321a227e_icgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="171,5,221,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6d2460a7b0d3135f757dd8849dd3d353"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void file_request_accept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>tox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>friend_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>file_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>file_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>filename_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00127">127</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00048">File_t::file</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00125">path</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00914">tox_file_control()</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l01655">TOX_FILE_CONTROL_CANCEL</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l01641">TOX_FILE_CONTROL_RESUME</a>, and <a class="el" href="../../da/d8f/tox_8h_source.html#l01608">TOX_FILE_KIND_DATA</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (type != <a class="code" href="../../da/d8f/tox_8h.html#a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0">TOX_FILE_KIND_DATA</a>) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;Refused invalid file type.&quot;</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="../../d3/d69/tox_8c.html#ad839087bf9cc7e8594eaaca66b111ba1">tox_file_control</a>(tox, <a class="code" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a>, file_number, <a class="code" href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423">TOX_FILE_CONTROL_CANCEL</a>, 0);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">char</span> fullpath[1024];</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    uint32_t <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    uint16_t rm = 0;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; strlen((<span class="keywordtype">char</span> *)filename); ++<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">if</span> (filename[i] == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            rm = <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>[strlen(<a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>) - 1] == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        sprintf(fullpath, <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>, filename + rm + 1);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        sprintf(fullpath, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>, filename + rm + 1);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    FILE *tempfile = fopen(fullpath, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (tempfile != 0) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        fclose(tempfile);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="../../d3/d69/tox_8c.html#ad839087bf9cc7e8594eaaca66b111ba1">tox_file_control</a>(tox, <a class="code" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a>, file_number, <a class="code" href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423">TOX_FILE_CONTROL_CANCEL</a>, 0);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    uint8_t file_index = (file_number &gt;&gt; 16) - 1;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].<a class="code" href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">file</a> = fopen(fullpath, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].file == 0) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="../../d3/d69/tox_8c.html#ad839087bf9cc7e8594eaaca66b111ba1">tox_file_control</a>(tox, <a class="code" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a>, file_number, <a class="code" href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423">TOX_FILE_CONTROL_CANCEL</a>, 0);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d69/tox_8c.html#ad839087bf9cc7e8594eaaca66b111ba1">tox_file_control</a>(tox, <a class="code" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a>, file_number, <a class="code" href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9aa5df194635dbb35c0519a811b57c524c">TOX_FILE_CONTROL_RESUME</a>, 0)) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;Accepted file transfer. (file: %s)\n&quot;</span>, fullpath);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="ttc" id="tox_8h_html_a18a7808bc88ad8a040b4ee0c4e1461f9aa5df194635dbb35c0519a811b57c524c"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9aa5df194635dbb35c0519a811b57c524c">TOX_FILE_CONTROL_RESUME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l01641">tox.h:1641</a></div></div>
<div class="ttc" id="struct_file__t_html_a702945180aa732857b380a007a7e2a21"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">File_t::file</a></div><div class="ttdeci">FILE * file</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00048">tox_sync.c:48</a></div></div>
<div class="ttc" id="_d_h_t_8c_html_a6cbd0f66d63003cc0def913dc7a4254b"><div class="ttname"><a href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a></div><div class="ttdeci">static int friend_number(const DHT *dht, const uint8_t *public_key)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc1/_d_h_t_8c_source.html#l00437">DHT.c:437</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a6f50c85874ef8f3405625e5a26febbcb"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a></div><div class="ttdeci">static char path[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00125">tox_sync.c:125</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a7c15925710b7704e276c230d73f7f4f0"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a></div><div class="ttdeci">File_t file_recv[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00053">tox_sync.c:53</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a1b88a4421cf9eef5af4895904ce2d905"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a></div><div class="ttdeci">printf(&quot;All set after %llu seconds! Starting call...\n&quot;, time(NULL)-cur_time)</div></div>
<div class="ttc" id="tox_8h_html_a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a18a7808bc88ad8a040b4ee0c4e1461f9a420d1b7e532e540ec7018cd2218a7423">TOX_FILE_CONTROL_CANCEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l01655">tox.h:1655</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="tox_8h_html_a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0">TOX_FILE_KIND_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l01608">tox.h:1608</a></div></div>
<div class="ttc" id="tox_8c_html_ad839087bf9cc7e8594eaaca66b111ba1"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ad839087bf9cc7e8594eaaca66b111ba1">tox_file_control</a></div><div class="ttdeci">bool tox_file_control(Tox *tox, uint32_t friend_number, uint32_t file_number, TOX_FILE_CONTROL control, TOX_ERR_FILE_CONTROL *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00914">tox.c:914</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a6d2460a7b0d3135f757dd8849dd3d353_cgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a6d2460a7b0d3135f757dd8849dd3d353_cgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a6d2460a7b0d3135f757dd8849dd3d353_cgraph" id="dd/d99/tox__sync_8c_a6d2460a7b0d3135f757dd8849dd3d353_cgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905" title="printf" alt="" coords="218,297,269,324"/><area shape="rect" id="node3" href="../../d3/d69/tox_8c.html#ad839087bf9cc7e8594eaaca66b111ba1" title="tox_file_control" alt="" coords="188,348,299,375"/><area shape="rect" id="node4" href="../../d8/d8d/_messenger_8c.html#a903e700229aa9c1e9bc85286c0cc538e" title="file_control" alt="" coords="347,348,432,375"/><area shape="rect" id="node5" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="909,320,1022,347"/><area shape="rect" id="node6" href="../../d8/d8d/_messenger_8c.html#a573ae5677a4dc9958bcec9bd3c9af6df" title="send_file_control_packet" alt="" coords="480,373,647,400"/><area shape="rect" id="node7" href="../../d8/d8d/_messenger_8c.html#af2b983c0aba45068c878e24e155f1ed2" title="write_cryptpacket_id" alt="" coords="695,377,837,404"/><area shape="rect" id="node8" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="903,509,1028,536"/><area shape="rect" id="node40" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="885,371,1045,413"/><area shape="rect" id="node9" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2323,476,2476,503"/><area shape="rect" id="node11" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="1093,509,1244,536"/><area shape="rect" id="node10" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2546,479,2685,521"/><area shape="rect" id="node12" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1292,476,1471,503"/><area shape="rect" id="node13" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1545,527,1663,553"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1519,425,1689,452"/><area shape="rect" id="node37" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1523,577,1685,604"/><area shape="rect" id="node38" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1301,375,1462,401"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1737,299,1865,325"/><area shape="rect" id="node16" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2971,11,3136,37"/><area shape="rect" id="node17" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2993,97,3114,124"/><area shape="rect" id="node18" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1913,299,2028,325"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="2086,273,2257,300"/><area shape="rect" id="node25" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="2127,324,2216,351"/><area shape="rect" id="node26" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="2076,211,2267,237"/><area shape="rect" id="node20" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2360,379,2439,405"/><area shape="rect" id="node21" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2315,313,2484,354"/><area shape="rect" id="node22" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2560,160,2671,187"/><area shape="rect" id="node24" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2540,414,2691,455"/><area shape="rect" id="node23" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2763,153,2906,194"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2332,105,2467,132"/><area shape="rect" id="node29" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2358,261,2441,288"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2337,211,2461,237"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2532,94,2699,135"/><area shape="rect" id="node30" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2545,363,2686,389"/><area shape="rect" id="node31" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2747,237,2923,278"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2550,312,2681,339"/><area shape="rect" id="node32" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="2986,219,3121,245"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="3009,269,3098,296"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="3184,219,3385,245"/><area shape="rect" id="node39" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1536,375,1672,401"/><area shape="rect" id="node41" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1131,343,1206,369"/><area shape="rect" id="node42" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1302,324,1461,351"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a6d2460a7b0d3135f757dd8849dd3d353_icgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a6d2460a7b0d3135f757dd8849dd3d353_icgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a6d2460a7b0d3135f757dd8849dd3d353_icgraph" id="dd/d99/tox__sync_8c_a6d2460a7b0d3135f757dd8849dd3d353_icgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="188,5,239,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2038b24d242a7c5f31cbb116f2f30820"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kill_filesender </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>filenum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00104">104</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00048">File_t::file</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, and <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00046">NUM_FILE_SENDERS</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00172">file_print_control()</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    uint32_t <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>; ++<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file != 0 &amp;&amp; <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].filenumber == <a class="code" href="../../d9/d35/tox__test_8c.html#aed845bec91f99896ce34a65a6f248ea5">filenum</a>) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            fclose(<a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">file</a> = 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="ttc" id="tox__test_8c_html_aed845bec91f99896ce34a65a6f248ea5"><div class="ttname"><a href="../../d9/d35/tox__test_8c.html#aed845bec91f99896ce34a65a6f248ea5">filenum</a></div><div class="ttdeci">uint8_t filenum</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/tox__test_8c_source.html#l00112">tox_test.c:112</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a3f5a542a8edd51f567edf1e7b37d272b"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a></div><div class="ttdeci">#define NUM_FILE_SENDERS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00046">tox_sync.c:46</a></div></div>
<div class="ttc" id="struct_file__t_html_a702945180aa732857b380a007a7e2a21"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">File_t::file</a></div><div class="ttdeci">FILE * file</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00048">tox_sync.c:48</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a0bf9288cb8c4212721cf843edb8053cc"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a></div><div class="ttdeci">File_t file_senders[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00052">tox_sync.c:52</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a2038b24d242a7c5f31cbb116f2f30820_icgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a2038b24d242a7c5f31cbb116f2f30820_icgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a2038b24d242a7c5f31cbb116f2f30820_icgraph" id="dd/d99/tox__sync_8c_a2038b24d242a7c5f31cbb116f2f30820_icgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a6d4f5fe76ced673923d8ef17321a227e" title="file_print_control" alt="" coords="155,5,272,32"/><area shape="rect" id="node3" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="320,5,371,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">232</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00081">add_filesender()</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00039">c_sleep</a>, <a class="el" href="../../d5/da3/misc__tools_8c_source.html#l00055">cmdline_parsefor_ipv46()</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00172">file_print_control()</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00127">file_request_accept()</a>, <a class="el" href="../../d5/da3/misc__tools_8c_source.html#l00038">hex_string_to_bin()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00114">not_sending()</a>, <a class="el" href="../../d9/d35/tox__test_8c_source.html#l00246">num</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00125">path</a>, <a class="el" href="../../db/d11/irc__syncbot_8c_source.html#l00031">port</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00210">print_online()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf()</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00235">TOX_ADDRESS_SIZE</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00260">tox_bootstrap()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l01125">tox_callback_file_chunk_request()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l01131">tox_callback_file_recv()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l01137">tox_callback_file_recv_chunk()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l01005">tox_callback_file_recv_control()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00799">tox_callback_friend_connection_status()</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00056">tox_file_chunk_request()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00557">tox_friend_add()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00784">tox_friend_get_connection_status()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00402">tox_iterate()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00124">tox_new()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00409">tox_self_get_address()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00374">tox_self_get_connection_status()</a>, and <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00189">write_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    uint8_t ipv6enabled = 1; <span class="comment">/* x */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">int</span> argvoffset = <a class="code" href="../../d5/da3/misc__tools_8c.html#a71e9fc36ac2daca56b990437704bd35f">cmdline_parsefor_ipv46</a>(argc, argv, &amp;ipv6enabled);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (argvoffset &lt; 0)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        exit(1);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">/* with optional --ipvx, now it can be 1-4 arguments... */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> ((argc != argvoffset + 3) &amp;&amp; (argc != argvoffset + 5)) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;Usage: %s [--ipv4|--ipv6] ip port public_key (of the DHT bootstrap node) folder (to sync)\n&quot;</span>, argv[0]);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        exit(0);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="../../d3/d79/struct_messenger.html">Tox</a> *tox = <a class="code" href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165">tox_new</a>(0, 0);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#ad828f18b7b4901f258fe7132b1bec4f6">tox_callback_file_recv_chunk</a>(tox, <a class="code" href="../../dd/d99/tox__sync_8c.html#a2d81671277a08fc6e90ef2dae0f3ea4e">write_file</a>, NULL);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#abb0eca9253a594357dfa0da0c9c64a0d">tox_callback_file_recv_control</a>(tox, <a class="code" href="../../dd/d99/tox__sync_8c.html#a6d4f5fe76ced673923d8ef17321a227e">file_print_control</a>, NULL);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#a2838aa05de2c47f58a45645248303b60">tox_callback_file_recv</a>(tox, <a class="code" href="../../dd/d99/tox__sync_8c.html#a6d2460a7b0d3135f757dd8849dd3d353">file_request_accept</a>, NULL);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#ade12d3a935a20a1e2a87afa1799343a9">tox_callback_file_chunk_request</a>(tox, <a class="code" href="../../dd/d99/tox__sync_8c.html#a7209b965126c3b606c3f0030a088ed27">tox_file_chunk_request</a>, NULL);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#aa7d891aaf1f15ee03f55b66227744157">tox_callback_friend_connection_status</a>(tox, <a class="code" href="../../dd/d99/tox__sync_8c.html#a61256aeab299b47ada9659cb790e8634">print_online</a>, NULL);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    uint16_t <a class="code" href="../../db/d11/irc__syncbot_8c.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> = atoi(argv[argvoffset + 2]);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *binary_string = <a class="code" href="../../d5/da3/misc__tools_8c.html#aff7dee3cea854d8a56b5a29f77910f96">hex_string_to_bin</a>(argv[argvoffset + 3]);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">int</span> res = <a class="code" href="../../d3/d69/tox_8c.html#ae7e49c1e9e6c3a0f9e55bfcb78044c1e">tox_bootstrap</a>(tox, argv[argvoffset + 1], port, binary_string, 0);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    free(binary_string);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (!res) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;Failed to convert \&quot;%s\&quot; into an IP address. Exiting...\n&quot;</span>, argv[argvoffset + 1]);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        exit(1);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    uint8_t address[<a class="code" href="../../da/d8f/tox_8h.html#a3a8d42ad8b2803ba6d69e88aac567113">TOX_ADDRESS_SIZE</a>];</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#ab52d4512e58c7ff8f62121beff5c0a49">tox_self_get_address</a>(tox, address);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    uint32_t <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../da/d8f/tox_8h.html#a3a8d42ad8b2803ba6d69e88aac567113">TOX_ADDRESS_SIZE</a>; i++) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;%02X&quot;</span>, address[i]);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">char</span> temp_id[128];</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;\nEnter the address of the other id you want to sync with (38 bytes HEX format):\n&quot;</span>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (scanf(<span class="stringliteral">&quot;%s&quot;</span>, temp_id) != 1) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    uint8_t *bin_id = <a class="code" href="../../d5/da3/misc__tools_8c.html#aff7dee3cea854d8a56b5a29f77910f96">hex_string_to_bin</a>(temp_id);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    uint32_t <a class="code" href="../../d9/d35/tox__test_8c.html#abea371f9030e15a5d2a4c181576833d8">num</a> = <a class="code" href="../../d3/d69/tox_8c.html#aa921c439baad10c03f8d93fda753b0b8">tox_friend_add</a>(tox, bin_id, (uint8_t *)<span class="stringliteral">&quot;Install Gentoo&quot;</span>, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;Install Gentoo&quot;</span>), 0);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    free(bin_id);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (num == UINT32_MAX) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;\nSomething went wrong when adding friend.\n&quot;</span>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    memcpy(<a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>, argv[argvoffset + 4], strlen(argv[argvoffset + 4]));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    DIR           *d;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">struct </span>dirent *dir;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    uint8_t notconnected = 1;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d69/tox_8c.html#a737d5d61ce41d26205b7e4a6edd7bc94">tox_self_get_connection_status</a>(tox) &amp;&amp; notconnected) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;\nDHT connected.\n&quot;</span>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            notconnected = 0;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a7628254e3a34910ea0712e135948be46">not_sending</a>() &amp;&amp; <a class="code" href="../../d3/d69/tox_8c.html#a21c61f8efb52a75bac6cb7858071d00a">tox_friend_get_connection_status</a>(tox, num, 0)) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            d = opendir(<a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">if</span> (d) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keywordflow">while</span> ((dir = readdir(d)) != NULL) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    <span class="keywordflow">if</span> (dir-&gt;d_type == DT_REG) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                        <span class="keywordtype">char</span> fullpath[1024];</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>[strlen(<a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>) - 1] == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                            sprintf(fullpath, <span class="stringliteral">&quot;%s%s&quot;</span>, <a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>, dir-&gt;d_name);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                            sprintf(fullpath, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a>, dir-&gt;d_name);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                        <a class="code" href="../../dd/d99/tox__sync_8c.html#aa834c164f5a649c381bb5dcca7a5b4fc">add_filesender</a>(tox, num, fullpath);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                closedir(d);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;\nFailed to open directory.\n&quot;</span>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="../../d3/d69/tox_8c.html#a649c8740c523fb52272396cb0b70b8dc">tox_iterate</a>(tox);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="../../dd/d99/tox__sync_8c.html#a5d21ea3d7da27fbd9f40c59aaa04da62">c_sleep</a>(1);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="ttc" id="tox_8h_html_a3a8d42ad8b2803ba6d69e88aac567113"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a3a8d42ad8b2803ba6d69e88aac567113">TOX_ADDRESS_SIZE</a></div><div class="ttdeci">#define TOX_ADDRESS_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l00235">tox.h:235</a></div></div>
<div class="ttc" id="tox_8c_html_a737d5d61ce41d26205b7e4a6edd7bc94"><div class="ttname"><a href="../../d3/d69/tox_8c.html#a737d5d61ce41d26205b7e4a6edd7bc94">tox_self_get_connection_status</a></div><div class="ttdeci">TOX_CONNECTION tox_self_get_connection_status(const Tox *tox)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00374">tox.c:374</a></div></div>
<div class="ttc" id="tox__sync_8c_html_aa834c164f5a649c381bb5dcca7a5b4fc"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#aa834c164f5a649c381bb5dcca7a5b4fc">add_filesender</a></div><div class="ttdeci">uint32_t add_filesender(Tox *m, uint16_t friendnum, char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00081">tox_sync.c:81</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a6f50c85874ef8f3405625e5a26febbcb"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a6f50c85874ef8f3405625e5a26febbcb">path</a></div><div class="ttdeci">static char path[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00125">tox_sync.c:125</a></div></div>
<div class="ttc" id="tox_8c_html_a21c61f8efb52a75bac6cb7858071d00a"><div class="ttname"><a href="../../d3/d69/tox_8c.html#a21c61f8efb52a75bac6cb7858071d00a">tox_friend_get_connection_status</a></div><div class="ttdeci">TOX_CONNECTION tox_friend_get_connection_status(const Tox *tox, uint32_t friend_number, TOX_ERR_FRIEND_QUERY *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00784">tox.c:784</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a1b88a4421cf9eef5af4895904ce2d905"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a></div><div class="ttdeci">printf(&quot;All set after %llu seconds! Starting call...\n&quot;, time(NULL)-cur_time)</div></div>
<div class="ttc" id="tox__sync_8c_html_a6d4f5fe76ced673923d8ef17321a227e"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a6d4f5fe76ced673923d8ef17321a227e">file_print_control</a></div><div class="ttdeci">void file_print_control(Tox *tox, uint32_t friend_number, uint32_t file_number, TOX_FILE_CONTROL control, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00172">tox_sync.c:172</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a2d81671277a08fc6e90ef2dae0f3ea4e"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a2d81671277a08fc6e90ef2dae0f3ea4e">write_file</a></div><div class="ttdeci">void write_file(Tox *tox, uint32_t friendnumber, uint32_t filenumber, uint64_t position, const uint8_t *data, size_t length, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00189">tox_sync.c:189</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a7209b965126c3b606c3f0030a088ed27"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a7209b965126c3b606c3f0030a088ed27">tox_file_chunk_request</a></div><div class="ttdeci">void tox_file_chunk_request(Tox *tox, uint32_t friend_number, uint32_t file_number, uint64_t position, size_t length, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00056">tox_sync.c:56</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a61256aeab299b47ada9659cb790e8634"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a61256aeab299b47ada9659cb790e8634">print_online</a></div><div class="ttdeci">void print_online(Tox *tox, uint32_t friendnumber, TOX_CONNECTION status, void *userdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00210">tox_sync.c:210</a></div></div>
<div class="ttc" id="tox_8c_html_a2838aa05de2c47f58a45645248303b60"><div class="ttname"><a href="../../d3/d69/tox_8c.html#a2838aa05de2c47f58a45645248303b60">tox_callback_file_recv</a></div><div class="ttdeci">void tox_callback_file_recv(Tox *tox, tox_file_recv_cb *function, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l01131">tox.c:1131</a></div></div>
<div class="ttc" id="tox__test_8c_html_abea371f9030e15a5d2a4c181576833d8"><div class="ttname"><a href="../../d9/d35/tox__test_8c.html#abea371f9030e15a5d2a4c181576833d8">num</a></div><div class="ttdeci">uint8_t num</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/tox__test_8c_source.html#l00246">tox_test.c:246</a></div></div>
<div class="ttc" id="misc__tools_8c_html_a71e9fc36ac2daca56b990437704bd35f"><div class="ttname"><a href="../../d5/da3/misc__tools_8c.html#a71e9fc36ac2daca56b990437704bd35f">cmdline_parsefor_ipv46</a></div><div class="ttdeci">int cmdline_parsefor_ipv46(int argc, char **argv, uint8_t *ipv6enabled)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da3/misc__tools_8c_source.html#l00055">misc_tools.c:55</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a7628254e3a34910ea0712e135948be46"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a7628254e3a34910ea0712e135948be46">not_sending</a></div><div class="ttdeci">int not_sending()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00114">tox_sync.c:114</a></div></div>
<div class="ttc" id="misc__tools_8c_html_aff7dee3cea854d8a56b5a29f77910f96"><div class="ttname"><a href="../../d5/da3/misc__tools_8c.html#aff7dee3cea854d8a56b5a29f77910f96">hex_string_to_bin</a></div><div class="ttdeci">uint8_t * hex_string_to_bin(char *hex_string)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da3/misc__tools_8c_source.html#l00038">misc_tools.c:38</a></div></div>
<div class="ttc" id="tox_8c_html_aa0e6afccd06a766b84a0633e259f9165"><div class="ttname"><a href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165">tox_new</a></div><div class="ttdeci">Tox * tox_new(const struct Tox_Options *options, TOX_ERR_NEW *error)</div><div class="ttdoc">Creates and initialises a new Tox instance with the options passed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00124">tox.c:124</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="tox_8c_html_ad828f18b7b4901f258fe7132b1bec4f6"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ad828f18b7b4901f258fe7132b1bec4f6">tox_callback_file_recv_chunk</a></div><div class="ttdeci">void tox_callback_file_recv_chunk(Tox *tox, tox_file_recv_chunk_cb *function, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l01137">tox.c:1137</a></div></div>
<div class="ttc" id="tox_8c_html_ae7e49c1e9e6c3a0f9e55bfcb78044c1e"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ae7e49c1e9e6c3a0f9e55bfcb78044c1e">tox_bootstrap</a></div><div class="ttdeci">bool tox_bootstrap(Tox *tox, const char *address, uint16_t port, const uint8_t *public_key, TOX_ERR_BOOTSTRAP *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00260">tox.c:260</a></div></div>
<div class="ttc" id="tox_8c_html_a649c8740c523fb52272396cb0b70b8dc"><div class="ttname"><a href="../../d3/d69/tox_8c.html#a649c8740c523fb52272396cb0b70b8dc">tox_iterate</a></div><div class="ttdeci">void tox_iterate(Tox *tox)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00402">tox.c:402</a></div></div>
<div class="ttc" id="tox_8c_html_aa921c439baad10c03f8d93fda753b0b8"><div class="ttname"><a href="../../d3/d69/tox_8c.html#aa921c439baad10c03f8d93fda753b0b8">tox_friend_add</a></div><div class="ttdeci">uint32_t tox_friend_add(Tox *tox, const uint8_t *address, const uint8_t *message, size_t length, TOX_ERR_FRIEND_ADD *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00557">tox.c:557</a></div></div>
<div class="ttc" id="irc__syncbot_8c_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="../../db/d11/irc__syncbot_8c.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d11/irc__syncbot_8c_source.html#l00031">irc_syncbot.c:31</a></div></div>
<div class="ttc" id="struct_messenger_html"><div class="ttname"><a href="../../d3/d79/struct_messenger.html">Messenger</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00211">Messenger.h:211</a></div></div>
<div class="ttc" id="tox_8c_html_ab52d4512e58c7ff8f62121beff5c0a49"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ab52d4512e58c7ff8f62121beff5c0a49">tox_self_get_address</a></div><div class="ttdeci">void tox_self_get_address(const Tox *tox, uint8_t *address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00409">tox.c:409</a></div></div>
<div class="ttc" id="tox_8c_html_ade12d3a935a20a1e2a87afa1799343a9"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ade12d3a935a20a1e2a87afa1799343a9">tox_callback_file_chunk_request</a></div><div class="ttdeci">void tox_callback_file_chunk_request(Tox *tox, tox_file_chunk_request_cb *function, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l01125">tox.c:1125</a></div></div>
<div class="ttc" id="tox_8c_html_abb0eca9253a594357dfa0da0c9c64a0d"><div class="ttname"><a href="../../d3/d69/tox_8c.html#abb0eca9253a594357dfa0da0c9c64a0d">tox_callback_file_recv_control</a></div><div class="ttdeci">void tox_callback_file_recv_control(Tox *tox, tox_file_recv_control_cb *function, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l01005">tox.c:1005</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a6d2460a7b0d3135f757dd8849dd3d353"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a6d2460a7b0d3135f757dd8849dd3d353">file_request_accept</a></div><div class="ttdeci">void file_request_accept(Tox *tox, uint32_t friend_number, uint32_t file_number, uint32_t type, uint64_t file_size, const uint8_t *filename, size_t filename_length, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00127">tox_sync.c:127</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a5d21ea3d7da27fbd9f40c59aaa04da62"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a5d21ea3d7da27fbd9f40c59aaa04da62">c_sleep</a></div><div class="ttdeci">#define c_sleep(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00039">tox_sync.c:39</a></div></div>
<div class="ttc" id="tox_8c_html_aa7d891aaf1f15ee03f55b66227744157"><div class="ttname"><a href="../../d3/d69/tox_8c.html#aa7d891aaf1f15ee03f55b66227744157">tox_callback_friend_connection_status</a></div><div class="ttdeci">void tox_callback_friend_connection_status(Tox *tox, tox_friend_connection_status_cb *function, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00799">tox.c:799</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="dd/d99/tox__sync_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#aa834c164f5a649c381bb5dcca7a5b4fc" title="add_filesender" alt="" coords="138,5,245,32"/><area shape="rect" id="node4" href="../../d5/da3/misc__tools_8c.html#a71e9fc36ac2daca56b990437704bd35f" title="cmdline_parsefor_ipv46" alt="" coords="112,208,271,235"/><area shape="rect" id="node5" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905" title="printf" alt="" coords="403,208,453,235"/><area shape="rect" id="node6" href="../../dd/d99/tox__sync_8c.html#a6d4f5fe76ced673923d8ef17321a227e" title="file_print_control" alt="" coords="133,56,250,83"/><area shape="rect" id="node8" href="../../dd/d99/tox__sync_8c.html#a6d2460a7b0d3135f757dd8849dd3d353" title="file_request_accept" alt="" coords="124,411,259,437"/><area shape="rect" id="node10" href="../../d5/da3/misc__tools_8c.html#aff7dee3cea854d8a56b5a29f77910f96" title="hex_string_to_bin" alt="" coords="129,259,253,285"/><area shape="rect" id="node11" href="../../dd/d99/tox__sync_8c.html#a7628254e3a34910ea0712e135948be46" title="not_sending" alt="" coords="145,309,237,336"/><area shape="rect" id="node12" href="../../dd/d99/tox__sync_8c.html#a61256aeab299b47ada9659cb790e8634" title="print_online" alt="" coords="147,107,235,133"/><area shape="rect" id="node13" href="../../d3/d69/tox_8c.html#ae7e49c1e9e6c3a0f9e55bfcb78044c1e" title="tox_bootstrap" alt="" coords="141,512,242,539"/><area shape="rect" id="node16" href="../../d3/d69/tox_8c.html#ade12d3a935a20a1e2a87afa1799343a9" title="tox_callback_file_chunk\l_request" alt="" coords="111,563,272,605"/><area shape="rect" id="node18" href="../../d3/d69/tox_8c.html#a2838aa05de2c47f58a45645248303b60" title="tox_callback_file_recv" alt="" coords="116,629,267,656"/><area shape="rect" id="node20" href="../../d3/d69/tox_8c.html#ad828f18b7b4901f258fe7132b1bec4f6" title="tox_callback_file_recv\l_chunk" alt="" coords="116,681,267,722"/><area shape="rect" id="node22" href="../../d3/d69/tox_8c.html#abb0eca9253a594357dfa0da0c9c64a0d" title="tox_callback_file_recv\l_control" alt="" coords="116,746,267,787"/><area shape="rect" id="node24" href="../../d3/d69/tox_8c.html#aa7d891aaf1f15ee03f55b66227744157" title="tox_callback_friend\l_connection_status" alt="" coords="124,811,259,853"/><area shape="rect" id="node26" href="../../dd/d99/tox__sync_8c.html#a7209b965126c3b606c3f0030a088ed27" title="tox_file_chunk_request" alt="" coords="113,461,269,488"/><area shape="rect" id="node28" href="../../d3/d69/tox_8c.html#aa921c439baad10c03f8d93fda753b0b8" title="tox_friend_add" alt="" coords="138,877,245,904"/><area shape="rect" id="node31" href="../../d3/d69/tox_8c.html#a21c61f8efb52a75bac6cb7858071d00a" title="tox_friend_get_connection\l_status" alt="" coords="104,929,279,970"/><area shape="rect" id="node33" href="../../d3/d69/tox_8c.html#a649c8740c523fb52272396cb0b70b8dc" title="tox_iterate" alt="" coords="150,995,233,1021"/><area shape="rect" id="node36" href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="156,1265,227,1292"/><area shape="rect" id="node47" href="../../d3/d69/tox_8c.html#ab52d4512e58c7ff8f62121beff5c0a49" title="tox_self_get_address" alt="" coords="118,1501,265,1528"/><area shape="rect" id="node49" href="../../d3/d69/tox_8c.html#a737d5d61ce41d26205b7e4a6edd7bc94" title="tox_self_get_connection\l_status" alt="" coords="110,1317,273,1358"/><area shape="rect" id="node50" href="../../dd/d99/tox__sync_8c.html#a2d81671277a08fc6e90ef2dae0f3ea4e" title="write_file" alt="" coords="154,157,229,184"/><area shape="rect" id="node3" href="../../d3/d69/tox_8c.html#a57990fd242dca24aa7e1f29f5fa56be7" title="tox_file_send" alt="" coords="379,5,477,32"/><area shape="rect" id="node7" href="../../dd/d99/tox__sync_8c.html#a2038b24d242a7c5f31cbb116f2f30820" title="kill_filesender" alt="" coords="377,56,479,83"/><area shape="rect" id="node9" href="../../d3/d69/tox_8c.html#ad839087bf9cc7e8594eaaca66b111ba1" title="tox_file_control" alt="" coords="373,377,483,404"/><area shape="rect" id="node14" href="../../db/d79/onion__client_8c.html#accbc9c20b5933ea088d718ea09abd6b8" title="onion_add_bs_path_node" alt="" coords="343,479,513,505"/><area shape="rect" id="node15" href="../../dc/dc1/_d_h_t_8c.html#ab6d732074bab2377a7884c41c219cf96" title="DHT_bootstrap" alt="" coords="373,529,483,556"/><area shape="rect" id="node17" href="../../d8/d8d/_messenger_8c.html#a0c7a3d860cfa4e141ca842dfa107d34d" title="callback_file_reqchunk" alt="" coords="351,580,505,607"/><area shape="rect" id="node19" href="../../d8/d8d/_messenger_8c.html#ac72a8b0dcbbb5d359476e1d978e1cba2" title="callback_file_sendrequest" alt="" coords="342,631,514,657"/><area shape="rect" id="node21" href="../../d8/d8d/_messenger_8c.html#a0e2d1738c18e9220dac9e23122011de9" title="callback_file_data" alt="" coords="365,683,491,709"/><area shape="rect" id="node23" href="../../d8/d8d/_messenger_8c.html#a97fde93e5944768530b23c8120219f36" title="callback_file_control" alt="" coords="358,733,498,760"/><area shape="rect" id="node25" href="../../d8/d8d/_messenger_8c.html#a7afea43fa4a1f455c381dc93711ed68e" title="m_callback_connectionstatus" alt="" coords="331,784,525,811"/><area shape="rect" id="node27" href="../../d3/d69/tox_8c.html#a7653dd0bbf8bda8e18d211277f3e7577" title="tox_file_send_chunk" alt="" coords="357,428,499,455"/><area shape="rect" id="node29" href="../../d8/d8d/_messenger_8c.html#ac77431b1ab0b12af003657e11057bd9c" title="m_addfriend" alt="" coords="381,835,475,861"/><area shape="rect" id="node30" href="../../d3/d69/tox_8c.html#ab7b39298b0dacf4941a99c29dc8bfaee" title="set_friend_error" alt="" coords="372,885,484,912"/><area shape="rect" id="node32" href="../../d8/d8d/_messenger_8c.html#a4b1f7ee3f635e7a80c8f3cbe98588e4d" title="m_get_friend_connectionstatus" alt="" coords="327,936,529,963"/><area shape="rect" id="node34" href="../../d8/d8d/_messenger_8c.html#ae0686caa878183a98920aeb7486afcb6" title="do_messenger" alt="" coords="375,987,481,1013"/><area shape="rect" id="node35" href="../../df/de9/toxcore_2group_8c.html#a9529a2149c68cbff38d43419d9ebeecc" title="do_groupchats" alt="" coords="375,1037,481,1064"/><area shape="rect" id="node37" href="../../d1/d22/logger_8c.html#a4445a3fab2c47652b5b2a985bc8fbb77" title="logger_get_global" alt="" coords="367,1291,489,1317"/><area shape="rect" id="node38" href="../../d1/d22/logger_8c.html#a5ff7d6f8171fb0b26f99d46c94abb4c0" title="logger_set_global" alt="" coords="367,1341,489,1368"/><area shape="rect" id="node39" href="../../d1/d22/logger_8c.html#a015f81551929ba00687be8d9eea85663" title="logger_new" alt="" coords="384,1392,472,1419"/><area shape="rect" id="node40" href="../../d6/d6e/network_8c.html#a6aa0dce9c25e370af93bf4a14f79c709" title="ip_init" alt="" coords="577,1493,633,1520"/><area shape="rect" id="node41" href="../../d6/d6e/network_8c.html#a1c024648679209a12766fedc7e55d5e4" title="addr_resolve_or_parse_ip" alt="" coords="343,1493,513,1520"/><area shape="rect" id="node42" href="../../d8/d8d/_messenger_8c.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="369,1544,487,1571"/><area shape="rect" id="node43" href="../../df/de9/toxcore_2group_8c.html#a16ac0b94fed484d710f76d390b7a85d8" title="new_groupchats" alt="" coords="369,1088,487,1115"/><area shape="rect" id="node44" href="../../d8/d8d/_messenger_8c.html#a771c65c3057d870b0653c2fdf0a12fb7" title="kill_messenger" alt="" coords="373,1139,483,1165"/><area shape="rect" id="node45" href="../../d8/d8d/_messenger_8c.html#a4871cd41d2a53b07ee4b2467a844e17e" title="messenger_load" alt="" coords="369,1189,487,1216"/><area shape="rect" id="node46" href="../../d8/dc6/net__crypto_8c.html#ac8131842eafef1819a6e6da5404e3234" title="load_secret_key" alt="" coords="369,1240,487,1267"/><area shape="rect" id="node48" href="../../d8/d8d/_messenger_8c.html#a50d7f1102c25158f02b2943dcfe253c8" title="getaddress" alt="" coords="385,1595,471,1621"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7628254e3a34910ea0712e135948be46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int not_sending </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00114">114</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, and <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00046">NUM_FILE_SENDERS</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    uint32_t <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>; ++<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file != 0)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="ttc" id="tox__sync_8c_html_a3f5a542a8edd51f567edf1e7b37d272b"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a></div><div class="ttdeci">#define NUM_FILE_SENDERS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00046">tox_sync.c:46</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a0bf9288cb8c4212721cf843edb8053cc"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a></div><div class="ttdeci">File_t file_senders[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00052">tox_sync.c:52</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a7628254e3a34910ea0712e135948be46_icgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a7628254e3a34910ea0712e135948be46_icgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a7628254e3a34910ea0712e135948be46_icgraph" id="dd/d99/tox__sync_8c_a7628254e3a34910ea0712e135948be46_icgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="145,5,196,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a61256aeab299b47ada9659cb790e8634"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_online </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>tox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>friendnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d8f/tox_8h.html#ab13b9741ea8c99016819171a0b869dbb">TOX_CONNECTION</a>&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00210">210</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00048">File_t::file</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00046">NUM_FILE_SENDERS</a>, and <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> (status)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;\nOther went online.\n&quot;</span>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;\nOther went offline.\n&quot;</span>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>; ++<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file != 0) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                fclose(<a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">file</a> = 0;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[i].file != 0) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                fclose(<a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[i].file);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">file</a> = 0;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="ttc" id="tox__sync_8c_html_a3f5a542a8edd51f567edf1e7b37d272b"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a></div><div class="ttdeci">#define NUM_FILE_SENDERS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00046">tox_sync.c:46</a></div></div>
<div class="ttc" id="struct_file__t_html_a702945180aa732857b380a007a7e2a21"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">File_t::file</a></div><div class="ttdeci">FILE * file</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00048">tox_sync.c:48</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a7c15925710b7704e276c230d73f7f4f0"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a></div><div class="ttdeci">File_t file_recv[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00053">tox_sync.c:53</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a1b88a4421cf9eef5af4895904ce2d905"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a></div><div class="ttdeci">printf(&quot;All set after %llu seconds! Starting call...\n&quot;, time(NULL)-cur_time)</div></div>
<div class="ttc" id="tox__sync_8c_html_a0bf9288cb8c4212721cf843edb8053cc"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a></div><div class="ttdeci">File_t file_senders[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00052">tox_sync.c:52</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a61256aeab299b47ada9659cb790e8634_cgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a61256aeab299b47ada9659cb790e8634_cgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a61256aeab299b47ada9659cb790e8634_cgraph" id="dd/d99/tox__sync_8c_a61256aeab299b47ada9659cb790e8634_cgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905" title="printf" alt="" coords="141,5,192,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a61256aeab299b47ada9659cb790e8634_icgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a61256aeab299b47ada9659cb790e8634_icgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a61256aeab299b47ada9659cb790e8634_icgraph" id="dd/d99/tox__sync_8c_a61256aeab299b47ada9659cb790e8634_icgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="141,5,192,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7209b965126c3b606c3f0030a088ed27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tox_file_chunk_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>tox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>friend_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>file_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00056">56</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile::data</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00048">File_t::file</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">i</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00046">NUM_FILE_SENDERS</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf()</a>, and <a class="el" href="../../d3/d69/tox_8c_source.html#l01080">tox_file_send_chunk()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>; ++<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="comment">/* This is slow */</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file &amp;&amp; <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].friendnum == <a class="code" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a> &amp;&amp; <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].filenumber == file_number) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">if</span> (length == 0) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                fclose(<a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[<a class="code" href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">file</a> = 0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;[t] %u file transfer: %u completed\n&quot;</span>, <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].friendnum, <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].filenumber);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            fseek(<a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file, position, SEEK_SET);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            uint8_t <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>[length];</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordtype">int</span> len = fread(data, 1, length, <a class="code" href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a>[i].file);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <a class="code" href="../../d3/d69/tox_8c.html#a7653dd0bbf8bda8e18d211277f3e7577">tox_file_send_chunk</a>(tox, <a class="code" href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a>, file_number, position, data, len, 0);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="ttc" id="tox__sync_8c_html_a3f5a542a8edd51f567edf1e7b37d272b"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a></div><div class="ttdeci">#define NUM_FILE_SENDERS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00046">tox_sync.c:46</a></div></div>
<div class="ttc" id="struct_file__t_html_a702945180aa732857b380a007a7e2a21"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">File_t::file</a></div><div class="ttdeci">FILE * file</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00048">tox_sync.c:48</a></div></div>
<div class="ttc" id="_d_h_t_8c_html_a6cbd0f66d63003cc0def913dc7a4254b"><div class="ttname"><a href="../../dc/dc1/_d_h_t_8c.html#a6cbd0f66d63003cc0def913dc7a4254b">friend_number</a></div><div class="ttdeci">static int friend_number(const DHT *dht, const uint8_t *public_key)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc1/_d_h_t_8c_source.html#l00437">DHT.c:437</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a1b88a4421cf9eef5af4895904ce2d905"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a></div><div class="ttdeci">printf(&quot;All set after %llu seconds! Starting call...\n&quot;, time(NULL)-cur_time)</div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a0bf9288cb8c4212721cf843edb8053cc"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a0bf9288cb8c4212721cf843edb8053cc">file_senders</a></div><div class="ttdeci">File_t file_senders[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00052">tox_sync.c:52</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc0/toxav__many__test_8c_source.html#l00278">toxav_many_test.c:278</a></div></div>
<div class="ttc" id="tox_8c_html_a7653dd0bbf8bda8e18d211277f3e7577"><div class="ttname"><a href="../../d3/d69/tox_8c.html#a7653dd0bbf8bda8e18d211277f3e7577">tox_file_send_chunk</a></div><div class="ttdeci">bool tox_file_send_chunk(Tox *tox, uint32_t friend_number, uint32_t file_number, uint64_t position, const uint8_t *data, size_t length, TOX_ERR_FILE_SEND_CHUNK *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l01080">tox.c:1080</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a7209b965126c3b606c3f0030a088ed27_cgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a7209b965126c3b606c3f0030a088ed27_cgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a7209b965126c3b606c3f0030a088ed27_cgraph" id="dd/d99/tox__sync_8c_a7209b965126c3b606c3f0030a088ed27_cgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905" title="printf" alt="" coords="255,131,305,157"/><area shape="rect" id="node3" href="../../d3/d69/tox_8c.html#a7653dd0bbf8bda8e18d211277f3e7577" title="tox_file_send_chunk" alt="" coords="209,181,351,208"/><area shape="rect" id="node4" href="../../d8/d8d/_messenger_8c.html#a2d94ca52e2129848ab7b137edb049eb4" title="file_data" alt="" coords="399,181,469,208"/><area shape="rect" id="node5" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="741,207,854,233"/><area shape="rect" id="node6" href="../../d8/dc6/net__crypto_8c.html#a4680603c9714e8742ad580b74ff1d891" title="crypto_num_free_sendqueue\l_slots" alt="" coords="1124,411,1313,453"/><area shape="rect" id="node10" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="717,90,877,131"/><area shape="rect" id="node13" href="../../d8/d8d/_messenger_8c.html#a2daa1e5d6fa9bc3c7c92d3cd46b11fb7" title="send_file_data_packet" alt="" coords="517,156,669,183"/><area shape="rect" id="node7" href="../../d8/dc6/net__crypto_8c.html#a909daa4b6d420cbd028f2c956a8642db" title="get_crypto_connection" alt="" coords="2165,321,2319,348"/><area shape="rect" id="node9" href="../../d8/dc6/net__crypto_8c.html#abbe1101e6464100c19aea7cde5c1d3a0" title="num_packets_array" alt="" coords="1379,360,1515,387"/><area shape="rect" id="node8" href="../../d8/dc6/net__crypto_8c.html#a8aae93bf17f0b4a4305b88334e820310" title="crypt_connection_id\l_not_valid" alt="" coords="2389,314,2527,355"/><area shape="rect" id="node11" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="963,5,1038,32"/><area shape="rect" id="node12" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1139,5,1298,32"/><area shape="rect" id="node14" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="735,156,860,183"/><area shape="rect" id="node15" href="../../d8/dc6/net__crypto_8c.html#a06c8bdc27b9865d1b7d775b654f44d1a" title="send_lossless_packet" alt="" coords="925,208,1076,235"/><area shape="rect" id="node16" href="../../d8/dc6/net__crypto_8c.html#abb8a6ea2bdfb75eb366cc0a026649e2c" title="reset_max_speed_reached" alt="" coords="1129,208,1308,235"/><area shape="rect" id="node17" href="../../d8/dc6/net__crypto_8c.html#a1e36bfc22078fc52c29d90e8ab79295d" title="get_data_pointer" alt="" coords="1387,259,1506,285"/><area shape="rect" id="node18" href="../../d8/dc6/net__crypto_8c.html#a572e703b36ffafdc4cf9dafd31a279d7" title="send_data_packet_helper" alt="" coords="1361,309,1532,336"/><area shape="rect" id="node41" href="../../db/d11/irc__syncbot_8c.html#ae8ecaef140b786a2720eadbb85918e81" title="current_time_monotonic" alt="" coords="1366,157,1527,184"/><area shape="rect" id="node42" href="../../d8/dc6/net__crypto_8c.html#af55d3f30f6b07366883f01a8fa09d866" title="add_data_end_of_buffer" alt="" coords="1138,360,1299,387"/><area shape="rect" id="node19" href="../../d8/dc6/net__crypto_8c.html#a507dd998c297ff5a666bd08121dd4143" title="send_data_packet" alt="" coords="1580,423,1708,449"/><area shape="rect" id="node20" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="2813,476,2979,503"/><area shape="rect" id="node21" href="../../dc/d85/crypto__core_8c.html#ab953f1e92b8a9a193f69f02323b9c980" title="increment_nonce" alt="" coords="2835,604,2957,631"/><area shape="rect" id="node22" href="../../d8/dc6/net__crypto_8c.html#a94d4c99b16cb7bd2dd61f9a7a8caf94a" title="send_packet_to" alt="" coords="1756,575,1871,601"/><area shape="rect" id="node23" href="../../d8/dc6/net__crypto_8c.html#afb5c59e6df7f38fe0bdf9e0f6c459869" title="crypto_connection_status" alt="" coords="1929,625,2099,652"/><area shape="rect" id="node29" href="../../d6/d6e/network_8c.html#a7b90f87f3ba60cc5c66dd6dd77cd5cb1" title="sendpacket" alt="" coords="1969,575,2059,601"/><area shape="rect" id="node30" href="../../d5/d26/_t_c_p__connection_8c.html#a455e955e01d34ff3db0b22b8f6d49d98" title="send_packet_tcp_connection" alt="" coords="1919,743,2109,769"/><area shape="rect" id="node24" href="../../de/df1/util_8c.html#ac958d9f8847cb8039444bfa3d304233a" title="unix_time" alt="" coords="2203,641,2281,668"/><area shape="rect" id="node25" href="../../d5/d26/_t_c_p__connection_8c.html#ae843b0b4c8041f08bf9c18f68cae8a61" title="tcp_connection_to_online\l_tcp_relays" alt="" coords="2157,575,2327,617"/><area shape="rect" id="node26" href="../../d5/d26/_t_c_p__connection_8c.html#a95c3e01ee87339f2dc2e87646f464b51" title="get_connection" alt="" coords="2403,641,2513,668"/><area shape="rect" id="node28" href="../../d5/d26/_t_c_p__connection_8c.html#a255916e82a74ad6c617216af786ec335" title="online_tcp_connection\l_from_conn" alt="" coords="2383,575,2533,617"/><area shape="rect" id="node27" href="../../d5/d26/_t_c_p__connection_8c.html#aafa7b2a7f56b8f6bb0c1e44b9aec7262" title="connections_number\l_not_valid" alt="" coords="2606,634,2749,675"/><area shape="rect" id="node31" href="../../d5/d26/_t_c_p__connection_8c.html#ab051b2158958b954824dbed361ec588a" title="get_tcp_connection" alt="" coords="2175,743,2309,769"/><area shape="rect" id="node33" href="../../da/da1/_t_c_p__client_8c.html#aea842652030d00bd8302e3c0201f95b9" title="send_data" alt="" coords="2201,801,2283,828"/><area shape="rect" id="node40" href="../../da/da1/_t_c_p__client_8c.html#a7818a314434c2bb01c3ea406744f076b" title="send_oob_packet" alt="" coords="2180,877,2304,904"/><area shape="rect" id="node32" href="../../d5/d26/_t_c_p__connection_8c.html#ae8f5b59977d8d4221ff8da3922d257a5" title="tcp_connections_number\l_not_valid" alt="" coords="2375,693,2541,734"/><area shape="rect" id="node34" href="../../da/da1/_t_c_p__client_8c.html#a8e1ca90aa8db34a58b3b38cfcb1bb9de" title="send_ping_response" alt="" coords="2387,860,2529,887"/><area shape="rect" id="node35" href="../../da/da1/_t_c_p__client_8c.html#ab959397449cc23b5811168e4395bdaea" title="write_packet_TCP_secure\l_connection" alt="" coords="2589,777,2765,818"/><area shape="rect" id="node39" href="../../da/da1/_t_c_p__client_8c.html#a5aad81831c1333b763c9fd5eaf41603f" title="send_ping_request" alt="" coords="2393,809,2523,836"/><area shape="rect" id="node36" href="../../da/da1/_t_c_p__client_8c.html#a878656cc36ac482c8063082d0d86850f" title="send_pending_data" alt="" coords="2829,759,2963,785"/><area shape="rect" id="node38" href="../../da/da1/_t_c_p__client_8c.html#a87e67ddfe8fdabe9f2d32080097c3970" title="add_priority" alt="" coords="2851,809,2941,836"/><area shape="rect" id="node37" href="../../da/da1/_t_c_p__client_8c.html#a531708d11982cfb4c8d31ac915c25386" title="send_pending_data_nonpriority" alt="" coords="3027,759,3228,785"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a7209b965126c3b606c3f0030a088ed27_icgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a7209b965126c3b606c3f0030a088ed27_icgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a7209b965126c3b606c3f0030a088ed27_icgraph" id="dd/d99/tox__sync_8c_a7209b965126c3b606c3f0030a088ed27_icgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="209,5,260,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2d81671277a08fc6e90ef2dae0f3ea4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>tox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>friendnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>filenumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00189">189</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>References <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00048">File_t::file</a>, and <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf()</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    uint8_t file_index = (filenumber &gt;&gt; 16) - 1;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (length == 0) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        fclose(<a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].file);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;File closed\n&quot;</span>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].<a class="code" href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">file</a> = 0;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;%u file transfer: %u completed\n&quot;</span>, friendnumber, filenumber);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].file != 0) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        fseek(<a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].file, position, SEEK_SET);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span> (fwrite(<a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>, length, 1, <a class="code" href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a>[file_index].file) != 1)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a>(<span class="stringliteral">&quot;Error writing data\n&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="ttc" id="struct_file__t_html_a702945180aa732857b380a007a7e2a21"><div class="ttname"><a href="../../d8/d93/struct_file__t.html#a702945180aa732857b380a007a7e2a21">File_t::file</a></div><div class="ttdeci">FILE * file</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00048">tox_sync.c:48</a></div></div>
<div class="ttc" id="tox__sync_8c_html_a7c15925710b7704e276c230d73f7f4f0"><div class="ttname"><a href="../../dd/d99/tox__sync_8c.html#a7c15925710b7704e276c230d73f7f4f0">file_recv</a></div><div class="ttdeci">File_t file_recv[NUM_FILE_SENDERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/tox__sync_8c_source.html#l00053">tox_sync.c:53</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a1b88a4421cf9eef5af4895904ce2d905"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905">printf</a></div><div class="ttdeci">printf(&quot;All set after %llu seconds! Starting call...\n&quot;, time(NULL)-cur_time)</div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_cgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_cgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_cgraph" id="dd/d99/tox__sync_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_cgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#a1b88a4421cf9eef5af4895904ce2d905" title="printf" alt="" coords="128,5,179,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/d99/tox__sync_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_icgraph.png" border="0" usemap="#dd/d99/tox__sync_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_icgraph" alt=""/></div>
<map name="dd/d99/tox__sync_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_icgraph" id="dd/d99/tox__sync_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_icgraph">
<area shape="rect" id="node2" href="../../dd/d99/tox__sync_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="128,5,179,32"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a7c15925710b7704e276c230d73f7f4f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d93/struct_file__t.html">File_t</a> file_recv[<a class="el" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00053">53</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0bf9288cb8c4212721cf843edb8053cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d93/struct_file__t.html">File_t</a> file_senders[<a class="el" href="../../dd/d99/tox__sync_8c.html#a3f5a542a8edd51f567edf1e7b37d272b">NUM_FILE_SENDERS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00052">52</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

</div>
</div>
<a class="anchor" id="adba72303546f264686b8b2c05c0e83aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t numfilesenders</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00054">54</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>Referenced by <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00081">add_filesender()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f50c85874ef8f3405625e5a26febbcb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char path[1024]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00125">125</a> of file <a class="el" href="../../dd/d99/tox__sync_8c_source.html">tox_sync.c</a>.</p>

<p>Referenced by <a class="el" href="../../db/d79/onion__client_8c_source.html#l00398">client_send_announce_request()</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00127">file_request_accept()</a>, <a class="el" href="../../dd/d99/tox__sync_8c_source.html#l00232">main()</a>, <a class="el" href="../../d2/d65/n_tox_8c_source.html#l00996">save_data_file()</a>, <a class="el" href="../../db/d79/onion__client_8c_source.html#l00789">send_onion_data()</a>, and <a class="el" href="../../d7/dd9/onion__test_8c_source.html#l00129">START_TEST()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 2 2015 23:41:18 for libtoxcore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
