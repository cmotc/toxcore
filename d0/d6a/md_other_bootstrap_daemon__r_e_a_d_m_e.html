<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>libtoxcore: README</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../tox.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libtoxcore
   </div>
   <div id="projectbrief">The future of instant messaging</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>#Instructions</p>
<ul>
<li><a href="../../#systemd">For `systemd` users</a><ul>
<li><a href="../../#systemd-troubleshooting">Troubleshooting</a> <br />
</li>
</ul>
</li>
<li><a href="../../#initd">For `init.d` users</a><ul>
<li><a href="../../#initd-troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
<p>These instructions are primarily tested on Debian Linux, Wheezy for init.d and Jessie for systemd, but they should work on other POSIX-compliant systems too.</p>
<p><a class="anchor" id="systemd"></a> </p><h2>For <code>systemd</code> users:</h2>
<p>For security reasons we run the daemon under its own user.</p>
<p>Create a new user by executing the following: ```sh sudo useradd &ndash;home-dir /var/lib/tox-bootstrapd &ndash;create-home &ndash;system &ndash;shell /sbin/nologin &ndash;comment "Account to run Tox's DHT bootstrap daemon" &ndash;user-group tox-bootstrapd ```</p>
<p>Restrict access to home directory: ```sh sudo chmod 700 /var/lib/tox-bootstrapd ```</p>
<p>Copy <code>tox-bootstrapd.conf</code> file to where <code>ExecStart=</code> from <code>tox-bootstrapd.service</code> points to. By default it's <code>/etc/tox-bootstrapd.conf</code>. ```sh sudo cp tox-bootstrapd.conf /etc/tox-bootstrapd.conf ```</p>
<p>Go over everything in the copied <code>tox-bootstrapd.conf</code> file. Set options you want and add actual working nodes to the <code>bootstrap_nodes</code> list, instead of the example ones, if you want your node to connect to the Tox network. Make sure <code>pid_file_path</code> matches <code>PIDFile=</code> from <code>tox-bootstrapd.service</code>.</p>
<p>Copy <code>tox-bootstrapd.service</code> to <code>/etc/systemd/system/</code>: ```sh sudo cp tox-bootstrapd.service /etc/systemd/system/ ```</p>
<p>You must uncomment the next line in tox-bootstrapd.service, if you want to use port number &lt; 1024 </p><pre class="fragment">#CapabilityBoundingSet=CAP_NET_BIND_SERVICE
</pre><p>and, possibly, install <code>libcap2-bin</code> or <code>libcap2</code> package, depending of your distribution.</p>
<p>Reload systemd units definitions, enable service for automatic start (if needed), start it and verify it's running: ```sh sudo systemctl daemon-reload sudo systemctl enable tox-bootstrapd.service sudo systemctl start tox-bootstrapd.service sudo systemctl status tox-bootstrapd.service ```</p>
<p>Get your public key and check that the daemon initialized correctly: ```sh sudo grep "tox-bootstrapd" /var/log/syslog ```</p>
<p><a class="anchor" id="systemd-troubleshooting"></a> </p><h3>Troubleshooting:</h3>
<ul>
<li>Check daemon's status: ```sh sudo systemctl status tox-bootstrapd.service ```</li>
<li>Check the log for errors: ```sh sudo grep "tox-bootstrapd" /var/log/syslog <h1>or</h1>
</li>
</ul>
<p>sudo journalctl &ndash;pager-end </p><h1>or</h1>
<p>sudo journalctl -f _SYSTEMD_UNIT=tox-bootstrapd.service ```</p>
<ul>
<li>Make sure tox-bootstrapd user has write permission for keys and pid files.</li>
<li>Make sure tox-bootstrapd has read permission for the config file.</li>
<li>Make sure tox-bootstrapd location matches its path in tox-bootstrapd.service file.</li>
</ul>
<p><a class="anchor" id="initd"></a> </p><h2>For <code>init.d</code> users</h2>
<p>For security reasons we run the daemon under its own user.</p>
<p>Create a new user by executing the following: ```sh sudo useradd &ndash;home-dir /var/lib/tox-bootstrapd &ndash;create-home &ndash;system &ndash;shell /sbin/nologin &ndash;comment "Account to run Tox's DHT bootstrap daemon" &ndash;user-group tox-bootstrapd ```</p>
<p>Restrict access to home directory: ```sh sudo chmod 700 /var/lib/tox-bootstrapd ```</p>
<p>Copy <code>tox-bootstrapd.conf</code> file to where <code>CFGFILE</code> variable from <code>tox-bootstrapd.sh</code> points to. By default it's <code>/etc/tox-bootstrapd.conf</code>. ```sh sudo cp tox-bootstrapd.conf /etc/tox-bootstrapd.conf ```</p>
<p>Go over everything in the copied <code>tox-bootstrapd.conf</code> file. Set options you want and add actual working nodes to the <code>bootstrap_nodes</code> list, instead of the example ones, if you want your node to connect to the Tox network. Make sure <code>pid_file_path</code> matches <code>PIDFILE</code> from <code>tox-bootstrapd.sh</code>.</p>
<p>Look at the variable declarations in the beginning of <code>tox-bootstrapd.sh</code> init script to see if you need to change anything for it to work on your system. The default values must be fine for most users and we assume that you use those next.</p>
<p>Copy <code>tox-bootstrapd.sh</code> init script to <code>/etc/init.d/tox-bootstrapd</code> (note the disappearance of ".sh" ending): ```sh sudo cp tox-bootstrapd.sh /etc/init.d/tox-bootstrapd ```</p>
<p>Set permissions for the init system to run the script: ```sh sudo chmod 755 /etc/init.d/tox-bootstrapd ```</p>
<p>Make the init system aware of the script, start the daemon and verify it's running: ```sh sudo update-rc.d tox-bootstrapd defaults sudo service tox-bootstrapd start sudo service tox-bootstrapd status ```</p>
<p>Get your public key and check that the daemon initialized correctly: ```sh sudo grep "tox-bootstrapd" /var/log/syslog ```</p>
<p><a class="anchor" id="initd-troubleshooting"></a> </p><h3>Troubleshooting:</h3>
<ul>
<li>Check daemon's status: ```sh sudo service tox-bootstrapd status ```</li>
<li>Check the log for errors: ```sh sudo grep "tox-bootstrapd" /var/log/syslog ```</li>
<li>Check that variables in the beginning of <code>/etc/init.d/tox-bootstrapd</code> are valid.</li>
<li>Make sure tox-bootstrapd user has write permission for keys and pid files.</li>
<li>Make sure tox-bootstrapd has read permission for the config file.</li>
<li>Make sure tox-bootstrapd location matches its path in the <code>/etc/init.d/tox-bootstrapd</code> init script. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 2 2015 23:41:33 for libtoxcore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
