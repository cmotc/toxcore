<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>libtoxcore: auto_tests/encryptsave_test.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../tox.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libtoxcore
   </div>
   <div id="projectbrief">The future of instant messaging</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_cd4e3f2ba7b96192ef94ff128b3942f7.html">auto_tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">encryptsave_test.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;check.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d98/helpers_8h_source.html">helpers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d8f/tox_8h_source.html">../toxcore/tox.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d81/toxencryptsave_8h_source.html">../toxencryptsave/toxencryptsave.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d3e/crypto__core_8h_source.html">../toxcore/crypto_core.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for encryptsave_test.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d95/encryptsave__test_8c__incl.png" border="0" usemap="#auto__tests_2encryptsave__test_8c" alt=""/></div>
<map name="auto__tests_2encryptsave__test_8c" id="auto__tests_2encryptsave__test_8c">
<area shape="rect" id="node8" href="../../d1/d98/helpers_8h.html" title="helpers.h" alt="" coords="963,95,1037,121"/><area shape="rect" id="node9" href="../../da/d8f/tox_8h.html" title="../toxcore/tox.h" alt="" coords="257,95,367,121"/><area shape="rect" id="node13" href="../../d8/d81/toxencryptsave_8h.html" title="../toxencryptsave/toxencryptsave.h" alt="" coords="5,95,232,121"/><area shape="rect" id="node14" href="../../dd/d3e/crypto__core_8h.html" title="../toxcore/crypto_core.h" alt="" coords="627,95,787,121"/><area shape="rect" id="node12" href="../../d4/d71/tox__old_8h.html" title="tox_old.h" alt="" coords="275,169,349,196"/><area shape="rect" id="node15" href="../../d9/d94/network_8h.html" title="network.h" alt="" coords="758,169,837,196"/></map>
</div>
</div>
<p><a href="../../d0/de9/encryptsave__test_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a23435c36683784fe0b913e77c8445c32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#a23435c36683784fe0b913e77c8445c32">accept_friend_request</a> (<a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *<a class="el" href="../../db/de9/_messenger__test_8c.html#aea6eb6c7c30a659f1b0dee83eaf03ea2">m</a>, const uint8_t *public_key, const uint8_t *data, size_t length, void *userdata)</td></tr>
<tr class="separator:a23435c36683784fe0b913e77c8445c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f6957dd9908c4bee46242a32d6fe80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#ab9f6957dd9908c4bee46242a32d6fe80">START_TEST</a> (test_known_kdf)</td></tr>
<tr class="separator:ab9f6957dd9908c4bee46242a32d6fe80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc6ca1e662bc2b41efecb0b9e35cc9d"><td class="memItemLeft" align="right" valign="top">END_TEST&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d">START_TEST</a> (test_save_friend)</td></tr>
<tr class="separator:abfc6ca1e662bc2b41efecb0b9e35cc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab96cf00902264a0b414a9c7978117359"><td class="memItemLeft" align="right" valign="top">END_TEST&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#ab96cf00902264a0b414a9c7978117359">START_TEST</a> (test_keys)</td></tr>
<tr class="separator:ab96cf00902264a0b414a9c7978117359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5613aa7c62caf967e8ce1a3b44a849f8"><td class="memItemLeft" align="right" valign="top">END_TEST Suite *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#a5613aa7c62caf967e8ce1a3b44a849f8">encryptsave_suite</a> (void)</td></tr>
<tr class="separator:a5613aa7c62caf967e8ce1a3b44a849f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afe7c1b38a4076f26998228dd4a3d097c"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#afe7c1b38a4076f26998228dd4a3d097c">salt</a> [32] = {0xB1, 0xC2, 0x09, 0xEE, 0x50, 0x6C, 0xF0, 0x20, 0xC4, 0xD6, 0xEB, 0xC0, 0x44, 0x51, 0x3B, 0x60, 0x4B, 0x39, 0x4A, 0xCF, 0x09, 0x53, 0x4F, 0xEA, 0x08, 0x41, 0xFA, 0xCA, 0x66, 0xD2, 0x68, 0x7F}</td></tr>
<tr class="separator:afe7c1b38a4076f26998228dd4a3d097c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53eb5701a69d33a36094d0211d8f644c"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#a53eb5701a69d33a36094d0211d8f644c">known_key</a> [crypto_box_BEFORENMBYTES] = {0x29, 0x36, 0x1c, 0x9e, 0x65, 0xbb, 0x46, 0x8b, 0xde, 0xa1, 0xac, 0xf, 0xd5, 0x11, 0x81, 0xc8, 0x29, 0x28, 0x17, 0x23, 0xa6, 0xc3, 0x6b, 0x77, 0x2e, 0xd7, 0xd3, 0x10, 0xeb, 0xd2, 0xf7, 0xc8}</td></tr>
<tr class="separator:a53eb5701a69d33a36094d0211d8f644c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de63ee82055dc8a1fa5770955e3e6ba"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#a7de63ee82055dc8a1fa5770955e3e6ba">pw</a> = &quot;hunter2&quot;</td></tr>
<tr class="separator:a7de63ee82055dc8a1fa5770955e3e6ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cccc1370102c2eb422643aaaa640e5d"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#a5cccc1370102c2eb422643aaaa640e5d">pwlen</a> = 7</td></tr>
<tr class="separator:a5cccc1370102c2eb422643aaaa640e5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d528b88d5085849036050d28c4c601"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/de9/encryptsave__test_8c.html#af7d528b88d5085849036050d28c4c601">known_key2</a> [crypto_box_BEFORENMBYTES] = {0x7a, 0xfa, 0x95, 0x45, 0x36, 0x8a, 0xa2, 0x5c, 0x40, 0xfd, 0xc0, 0xe2, 0x35, 0x8, 0x7, 0x88, 0xfa, 0xf9, 0x37, 0x86, 0xeb, 0xff, 0x50, 0x4f, 0x3, 0xe2, 0xf6, 0xd9, 0xef, 0x9, 0x17, 0x1}</td></tr>
<tr class="separator:af7d528b88d5085849036050d28c4c601"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a23435c36683784fe0b913e77c8445c32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void accept_friend_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d0e/toxav_8c.html#a9e678c08e286eb1f36ebc7f770354e82">Tox</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>public_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00032">32</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>References <a class="el" href="../../d3/d69/tox_8c_source.html#l00577">tox_friend_add_norequest()</a>.</p>

<p>Referenced by <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00056">START_TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">if</span> (*((uint32_t *)userdata) != 974536)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">if</span> (length == 7 &amp;&amp; memcmp(<span class="stringliteral">&quot;Gentoo&quot;</span>, <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>, 7) == 0) {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <a class="code" href="../../d3/d69/tox_8c.html#ad499c853b628d04dd0f3c6ef5a14ebe4">tox_friend_add_norequest</a>(m, <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#a6734667aeff5c30ad9e5624ccb556a87">public_key</a>, 0);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    }</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
<div class="ttc" id="namespacemake-funny-savefile_html_a6734667aeff5c30ad9e5624ccb556a87"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#a6734667aeff5c30ad9e5624ccb556a87">make-funny-savefile.public_key</a></div><div class="ttdeci">list public_key</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00068">make-funny-savefile.py:68</a></div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
<div class="ttc" id="tox_8c_html_ad499c853b628d04dd0f3c6ef5a14ebe4"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ad499c853b628d04dd0f3c6ef5a14ebe4">tox_friend_add_norequest</a></div><div class="ttdeci">uint32_t tox_friend_add_norequest(Tox *tox, const uint8_t *public_key, TOX_ERR_FRIEND_ADD *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00577">tox.c:577</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/de9/encryptsave__test_8c_a23435c36683784fe0b913e77c8445c32_cgraph.png" border="0" usemap="#d0/de9/encryptsave__test_8c_a23435c36683784fe0b913e77c8445c32_cgraph" alt=""/></div>
<map name="d0/de9/encryptsave__test_8c_a23435c36683784fe0b913e77c8445c32_cgraph" id="d0/de9/encryptsave__test_8c_a23435c36683784fe0b913e77c8445c32_cgraph">
<area shape="rect" id="node2" href="../../d3/d69/tox_8c.html#ad499c853b628d04dd0f3c6ef5a14ebe4" title="tox_friend_add_norequest" alt="" coords="204,107,375,133"/><area shape="rect" id="node3" href="../../d8/d8d/_messenger_8c.html#a2f7aa06733a25e8c0edc8f31a22a78dc" title="m_addfriend_norequest" alt="" coords="423,81,580,108"/><area shape="rect" id="node50" href="../../d3/d69/tox_8c.html#ab7b39298b0dacf4941a99c29dc8bfaee" title="set_friend_error" alt="" coords="445,132,557,159"/><area shape="rect" id="node4" href="../../d8/d8d/_messenger_8c.html#a32203f86be17e650ef0f7e5b7eff66bc" title="getfriend_id" alt="" coords="643,5,732,32"/><area shape="rect" id="node5" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="853,5,923,32"/><area shape="rect" id="node6" href="../../dc/d85/crypto__core_8c.html#ab4a996d3466879a493cc6496acb6cd7e" title="public_key_valid" alt="" coords="628,107,747,133"/><area shape="rect" id="node7" href="../../d8/d8d/_messenger_8c.html#aa3be5ad998d2b0ced07aceab765eaa2f" title="init_new_friend" alt="" coords="633,604,742,631"/><area shape="rect" id="node8" href="../../d8/d8d/_messenger_8c.html#ade10ae2516f68845c8b2e0c5eb95bd41" title="realloc_friendlist" alt="" coords="830,372,946,399"/><area shape="rect" id="node9" href="../../d2/db1/friend__connection_8c.html#a613a80a004fccd616de2a67d84a25d3c" title="new_friend_connection" alt="" coords="811,423,965,449"/><area shape="rect" id="node29" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b" title="id_copy" alt="" coords="855,579,921,605"/><area shape="rect" id="node30" href="../../d2/db1/friend__connection_8c.html#a15c404d517b4a4fb3976f4d85bfbaef0" title="friend_connection_callbacks" alt="" coords="795,629,981,656"/><area shape="rect" id="node33" href="../../d8/d8d/_messenger_8c.html#a2be56d7329b8b89d95918eba9b692c71" title="handle_status" alt="" coords="837,731,939,757"/><area shape="rect" id="node34" href="../../d8/d8d/_messenger_8c.html#a3bf115e8b97c037d1d40faa946905b3b" title="send_online_packet" alt="" coords="1048,781,1185,808"/><area shape="rect" id="node40" href="../../d8/d8d/_messenger_8c.html#a8fce9b8564a3a552ff2b77a9f81914ad" title="handle_packet" alt="" coords="835,883,941,909"/><area shape="rect" id="node48" href="../../d8/d8d/_messenger_8c.html#a24c5719d515558a6e9d768a861d6dc22" title="handle_custom_lossy\l_packet" alt="" coords="814,1039,962,1081"/><area shape="rect" id="node49" href="../../d2/db1/friend__connection_8c.html#ae5c94f8543c84506c85faac6d2b3a9dd" title="friend_con_connected" alt="" coords="1503,107,1652,133"/><area shape="rect" id="node10" href="../../d2/db1/friend__connection_8c.html#a97c5d86b2475e17f2cda62ad13df1bea" title="getfriend_conn_id_pk" alt="" coords="1505,604,1650,631"/><area shape="rect" id="node13" href="../../d2/db1/friend__connection_8c.html#ad22b76facda79873a4cde9562c8cd663" title="create_friend_conn" alt="" coords="1051,475,1183,501"/><area shape="rect" id="node15" href="../../db/d79/onion__client_8c.html#a4dd8a80061f115daba3ffb2a3f611b38" title="onion_addfriend" alt="" coords="1060,157,1173,184"/><area shape="rect" id="node18" href="../../db/d79/onion__client_8c.html#a7bb680d62616d0dfbb6f7d2ff097107c" title="recv_tcp_relay_handler" alt="" coords="1039,224,1195,251"/><area shape="rect" id="node19" href="../../d2/db1/friend__connection_8c.html#a9360ec098f2b1082b480b4e36b0a5f07" title="tcp_relay_node_callback" alt="" coords="1271,208,1436,235"/><area shape="rect" id="node22" href="../../db/d79/onion__client_8c.html#a08895281211a01749ee466338fedbeec" title="onion_dht_pk_callback" alt="" coords="1039,372,1194,399"/><area shape="rect" id="node23" href="../../d2/db1/friend__connection_8c.html#a53d1bd9e6126683e05e0e14cc70d1a8a" title="dht_pk_callback" alt="" coords="1059,423,1175,449"/><area shape="rect" id="node11" href="../../d2/db1/friend__connection_8c.html#a0c0c32645b094058a6e6d6bcab4ed718" title="get_conn" alt="" coords="1700,452,1775,479"/><area shape="rect" id="node12" href="../../d2/db1/friend__connection_8c.html#abecf42b27a016431837ee0b8a4ac5a5e" title="friendconn_id_not_valid" alt="" coords="1823,452,1981,479"/><area shape="rect" id="node14" href="../../d2/db1/friend__connection_8c.html#a7560121d48da253e4b63df88bfc47e55" title="realloc_friendconns" alt="" coords="1286,579,1421,605"/><area shape="rect" id="node16" href="../../db/d79/onion__client_8c.html#a5c2b07b25a5892051b8e132361c54d53" title="onion_friend_num" alt="" coords="1291,157,1415,184"/><area shape="rect" id="node17" href="../../db/d79/onion__client_8c.html#aa5f27f182606ab701dfc948bfb3a1b42" title="realloc_onion_friends" alt="" coords="1281,107,1425,133"/><area shape="rect" id="node20" href="../../d2/db1/friend__connection_8c.html#ac89688f7660c1cb5fb664ecc09bab460" title="friend_add_tcp_relay" alt="" coords="1506,315,1649,341"/><area shape="rect" id="node21" href="../../d8/dc6/net__crypto_8c.html#a632021583d7dd2484614071a7080f311" title="add_tcp_relay" alt="" coords="1526,208,1629,235"/><area shape="rect" id="node24" href="../../d2/db1/friend__connection_8c.html#aa293768f213199a635ce0b4a94489cdf" title="change_dht_pk" alt="" coords="1522,373,1633,400"/><area shape="rect" id="node25" href="../../d8/dc6/net__crypto_8c.html#a16c3a0008512675dad8eb00ff1822763" title="crypto_kill" alt="" coords="1313,259,1394,285"/><area shape="rect" id="node26" href="../../d2/db1/friend__connection_8c.html#abf73eaa3805a863ab454fb4afe0fb49f" title="handle_status" alt="" coords="1526,427,1629,453"/><area shape="rect" id="node27" href="../../d2/db1/friend__connection_8c.html#ac2af058fd8684e6abc7b136889f5f4e5" title="friend_new_connection" alt="" coords="1276,477,1431,504"/><area shape="rect" id="node28" href="../../db/d79/onion__client_8c.html#a1c5dc5e030ac14db475a4b45214f2a88" title="onion_set_friend_DHT\l_pubkey" alt="" coords="1277,411,1429,453"/><area shape="rect" id="node31" href="../../d2/d8d/_t_c_p__test_8c.html#ae4f12b6805a17277d33e73ac030d7aca" title="status_callback" alt="" coords="1060,629,1173,656"/><area shape="rect" id="node32" href="../../d2/d8d/_t_c_p__test_8c.html#a36ed22ce4a6bec3fb113a4eaf29df5e1" title="data_callback" alt="" coords="1065,579,1168,605"/><area shape="rect" id="node38" href="../../d8/d8d/_messenger_8c.html#a2e422bac86f120965227703f1930c8e6" title="set_friend_status" alt="" coords="1055,731,1178,757"/><area shape="rect" id="node35" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="1297,1043,1410,1069"/><area shape="rect" id="node36" href="../../d8/dc6/net__crypto_8c.html#ab17ccce6d503f75b7d98be214ebd7621" title="write_cryptpacket" alt="" coords="1291,781,1416,808"/><area shape="rect" id="node37" href="../../d2/db1/friend__connection_8c.html#a8586e3dfb2047821c4214adf8d06a877" title="friend_connection_crypt\l_connection_id" alt="" coords="1273,883,1433,925"/><area shape="rect" id="node39" href="../../d8/d8d/_messenger_8c.html#a961f02c4cb668e9932894d0f8969dbb1" title="check_friend_connectionstatus" alt="" coords="1252,731,1455,757"/><area shape="rect" id="node41" href="../../d8/d8d/_messenger_8c.html#ad317d62e3ddf9894af11093d30cae31b" title="set_friend_statusmessage" alt="" coords="1029,1101,1204,1128"/><area shape="rect" id="node42" href="../../d8/d8d/_messenger_8c.html#a57a114bf07876ef46d27c7cfee31137f" title="set_friend_userstatus" alt="" coords="1043,933,1190,960"/><area shape="rect" id="node43" href="../../d8/d8d/_messenger_8c.html#abed35de4c690ded50f67fdaf5e96324c" title="set_friend_typing" alt="" coords="1056,984,1177,1011"/><area shape="rect" id="node44" href="../../d8/d8d/_messenger_8c.html#a56b6a138fb4522b859fda806c8ca4c20" title="handle_filecontrol" alt="" coords="1055,832,1178,859"/><area shape="rect" id="node46" href="../../d8/d8d/_messenger_8c.html#a2d94ca52e2129848ab7b137edb049eb4" title="file_data" alt="" coords="1081,883,1152,909"/><area shape="rect" id="node47" href="../../d8/d8d/_messenger_8c.html#a4816c8b0bbf3b241f07654a2b6593fee" title="handle_custom_lossless\l_packet" alt="" coords="1034,1035,1199,1077"/><area shape="rect" id="node45" href="../../d8/d8d/_messenger_8c.html#a573ae5677a4dc9958bcec9bd3c9af6df" title="send_file_control_packet" alt="" coords="1270,832,1437,859"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/de9/encryptsave__test_8c_a23435c36683784fe0b913e77c8445c32_icgraph.png" border="0" usemap="#d0/de9/encryptsave__test_8c_a23435c36683784fe0b913e77c8445c32_icgraph" alt=""/></div>
<map name="d0/de9/encryptsave__test_8c_a23435c36683784fe0b913e77c8445c32_icgraph" id="d0/de9/encryptsave__test_8c_a23435c36683784fe0b913e77c8445c32_icgraph">
<area shape="rect" id="node2" href="../../d0/de9/encryptsave__test_8c.html#abfc6ca1e662bc2b41efecb0b9e35cc9d" title="START_TEST" alt="" coords="204,5,311,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5613aa7c62caf967e8ce1a3b44a849f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">END_TEST Suite* encryptsave_suite </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00185">185</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>References <a class="el" href="../../d1/d98/helpers_8h_source.html#l00011">DEFTESTCASE_SLOW</a>.</p>

<p>Referenced by <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00196">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    Suite *s = suite_create(<span class="stringliteral">&quot;encryptsave&quot;</span>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="../../d1/d98/helpers_8h.html#a04d7721023739a366a0baae1b1a32b50">DEFTESTCASE_SLOW</a>(known_kdf, 60);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="../../d1/d98/helpers_8h.html#a04d7721023739a366a0baae1b1a32b50">DEFTESTCASE_SLOW</a>(save_friend, 20);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="../../d1/d98/helpers_8h.html#a04d7721023739a366a0baae1b1a32b50">DEFTESTCASE_SLOW</a>(keys, 30);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="ttc" id="helpers_8h_html_a04d7721023739a366a0baae1b1a32b50"><div class="ttname"><a href="../../d1/d98/helpers_8h.html#a04d7721023739a366a0baae1b1a32b50">DEFTESTCASE_SLOW</a></div><div class="ttdeci">#define DEFTESTCASE_SLOW(NAME, TIMEOUT)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d98/helpers_8h_source.html#l00011">helpers.h:11</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/de9/encryptsave__test_8c_a5613aa7c62caf967e8ce1a3b44a849f8_icgraph.png" border="0" usemap="#d0/de9/encryptsave__test_8c_a5613aa7c62caf967e8ce1a3b44a849f8_icgraph" alt=""/></div>
<map name="d0/de9/encryptsave__test_8c_a5613aa7c62caf967e8ce1a3b44a849f8_icgraph" id="d0/de9/encryptsave__test_8c_a5613aa7c62caf967e8ce1a3b44a849f8_icgraph">
<area shape="rect" id="node2" href="../../d0/de9/encryptsave__test_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="181,5,232,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00196">196</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>References <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00185">encryptsave_suite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    srand((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) time(NULL));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    Suite *encryptsave =  <a class="code" href="../../d0/de9/encryptsave__test_8c.html#a5613aa7c62caf967e8ce1a3b44a849f8">encryptsave_suite</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    SRunner *test_runner = srunner_create(encryptsave);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">int</span> number_failed = 0;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    srunner_run_all(test_runner, CK_NORMAL);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    number_failed = srunner_ntests_failed(test_runner);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    srunner_free(test_runner);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">return</span> number_failed;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="ttc" id="encryptsave__test_8c_html_a5613aa7c62caf967e8ce1a3b44a849f8"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#a5613aa7c62caf967e8ce1a3b44a849f8">encryptsave_suite</a></div><div class="ttdeci">END_TEST Suite * encryptsave_suite(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00185">encryptsave_test.c:185</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/de9/encryptsave__test_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#d0/de9/encryptsave__test_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="d0/de9/encryptsave__test_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="d0/de9/encryptsave__test_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" id="node2" href="../../d0/de9/encryptsave__test_8c.html#a5613aa7c62caf967e8ce1a3b44a849f8" title="encryptsave_suite" alt="" coords="104,5,232,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab9f6957dd9908c4bee46242a32d6fe80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">START_TEST </td>
          <td>(</td>
          <td class="paramtype">test_known_kdf&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00042">42</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>References <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg()</a>, <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00024">known_key</a>, <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00025">pw</a>, <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00026">pwlen</a>, and <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00023">salt</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> out[crypto_box_BEFORENMBYTES];</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    crypto_pwhash_scryptsalsa208sha256(out,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                       crypto_box_BEFORENMBYTES,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                       <a class="code" href="../../d0/de9/encryptsave__test_8c.html#a7de63ee82055dc8a1fa5770955e3e6ba">pw</a>,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                       <a class="code" href="../../d0/de9/encryptsave__test_8c.html#a5cccc1370102c2eb422643aaaa640e5d">pwlen</a>,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                       <a class="code" href="../../d0/de9/encryptsave__test_8c.html#afe7c1b38a4076f26998228dd4a3d097c">salt</a>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                       crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_INTERACTIVE * 8,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                       crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_INTERACTIVE);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(memcmp(out, <a class="code" href="../../d0/de9/encryptsave__test_8c.html#a53eb5701a69d33a36094d0211d8f644c">known_key</a>, crypto_box_BEFORENMBYTES) == 0, <span class="stringliteral">&quot;derived key is wrong&quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="ttc" id="encryptsave__test_8c_html_afe7c1b38a4076f26998228dd4a3d097c"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#afe7c1b38a4076f26998228dd4a3d097c">salt</a></div><div class="ttdeci">unsigned char salt[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00023">encryptsave_test.c:23</a></div></div>
<div class="ttc" id="encryptsave__test_8c_html_a5cccc1370102c2eb422643aaaa640e5d"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#a5cccc1370102c2eb422643aaaa640e5d">pwlen</a></div><div class="ttdeci">unsigned int pwlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00026">encryptsave_test.c:26</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a4bd4b2294bdedc4af8c708ecc5c58516"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a></div><div class="ttdeci">ck_assert_msg(bootstrap_node!=NULL,&quot;Failed to create bootstrap node&quot;)</div></div>
<div class="ttc" id="encryptsave__test_8c_html_a53eb5701a69d33a36094d0211d8f644c"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#a53eb5701a69d33a36094d0211d8f644c">known_key</a></div><div class="ttdeci">unsigned char known_key[crypto_box_BEFORENMBYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00024">encryptsave_test.c:24</a></div></div>
<div class="ttc" id="encryptsave__test_8c_html_a7de63ee82055dc8a1fa5770955e3e6ba"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#a7de63ee82055dc8a1fa5770955e3e6ba">pw</a></div><div class="ttdeci">char * pw</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00025">encryptsave_test.c:25</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/de9/encryptsave__test_8c_ab9f6957dd9908c4bee46242a32d6fe80_cgraph.png" border="0" usemap="#d0/de9/encryptsave__test_8c_ab9f6957dd9908c4bee46242a32d6fe80_cgraph" alt=""/></div>
<map name="d0/de9/encryptsave__test_8c_ab9f6957dd9908c4bee46242a32d6fe80_cgraph" id="d0/de9/encryptsave__test_8c_ab9f6957dd9908c4bee46242a32d6fe80_cgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516" title="ck_assert_msg" alt="" coords="160,5,271,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abfc6ca1e662bc2b41efecb0b9e35cc9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">END_TEST START_TEST </td>
          <td>(</td>
          <td class="paramtype">test_save_friend&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00056">56</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>References <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00032">accept_friend_request()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg()</a>, <a class="el" href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile::data</a>, <a class="el" href="../../d8/d81/toxencryptsave_8h_source.html#l00172">TOX_PASS_KEY::key</a>, <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00028">known_key2</a>, <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00025">pw</a>, <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00026">pwlen</a>, <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00023">salt</a>, <a class="el" href="../../d8/d81/toxencryptsave_8h_source.html#l00171">TOX_PASS_KEY::salt</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00485">Tox_Options::savedata_data</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00491">Tox_Options::savedata_length</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00479">Tox_Options::savedata_type</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00235">TOX_ADDRESS_SIZE</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00892">tox_callback_friend_request()</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00602">TOX_ERR_NEW_LOAD_ENCRYPTED</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00558">TOX_ERR_NEW_OK</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00557">tox_friend_add()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00630">tox_friend_get_public_key()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00252">tox_get_savedata()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00246">tox_get_savedata_size()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00290">tox_is_data_encrypted()</a>, <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#af2393a0da85871ba0cefc23497cb19fa">tox_kill()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00124">tox_new()</a>, <a class="el" href="../../d3/d69/tox_8c_source.html#l00095">tox_options_default()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00255">tox_pass_decrypt()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00183">tox_pass_encrypt()</a>, <a class="el" href="../../d8/d81/toxencryptsave_8h_source.html#l00043">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00209">tox_pass_key_decrypt()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00137">tox_pass_key_encrypt()</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00220">TOX_PUBLIC_KEY_SIZE</a>, <a class="el" href="../../da/d8f/tox_8h_source.html#l00376">TOX_SAVEDATA_TYPE_TOX_SAVE</a>, and <a class="el" href="../../d3/d69/tox_8c_source.html#l00409">tox_self_get_address()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="../../d3/d79/struct_messenger.html">Tox</a> *tox1 = <a class="code" href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165">tox_new</a>(0, 0);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../d3/d79/struct_messenger.html">Tox</a> *tox2 = <a class="code" href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165">tox_new</a>(0, 0);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(tox1 || tox2, <span class="stringliteral">&quot;Failed to create 2 tox instances&quot;</span>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    uint32_t to_compare = 974536;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#a2cf9a901fd5db3b6635a3ece389cc349">tox_callback_friend_request</a>(tox2, <a class="code" href="../../d0/de9/encryptsave__test_8c.html#a23435c36683784fe0b913e77c8445c32">accept_friend_request</a>, &amp;to_compare);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    uint8_t address[<a class="code" href="../../da/d8f/tox_8h.html#a3a8d42ad8b2803ba6d69e88aac567113">TOX_ADDRESS_SIZE</a>];</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#ab52d4512e58c7ff8f62121beff5c0a49">tox_self_get_address</a>(tox2, address);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    uint32_t test = <a class="code" href="../../d3/d69/tox_8c.html#aa921c439baad10c03f8d93fda753b0b8">tox_friend_add</a>(tox1, address, (uint8_t *)<span class="stringliteral">&quot;Gentoo&quot;</span>, 7, 0);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(test != UINT32_MAX, <span class="stringliteral">&quot;Failed to add friend&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">size_t</span> size = <a class="code" href="../../d3/d69/tox_8c.html#ac2b90c8597ff7afa2e9532e81b65d412">tox_get_savedata_size</a>(tox1);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    uint8_t <a class="code" href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">data</a>[size];</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#ae13c8810890ae2d73b8c46e0c8033ab4">tox_get_savedata</a>(tox1, data);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordtype">size_t</span> size2 = size + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    uint8_t enc_data[size2];</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="../../d8/d81/toxencryptsave_8h.html#ae960705edfa51ec826e3662ab664c95b">TOX_ERR_ENCRYPTION</a> error1;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">bool</span> ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#ad912f1925318a0b7f6d034856d489162">tox_pass_encrypt</a>(data, size, <span class="stringliteral">&quot;correcthorsebatterystaple&quot;</span>, 25, enc_data, &amp;error1);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;failed to encrypted save: %u&quot;</span>, error1);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(<a class="code" href="../../df/d1d/toxencryptsave_8c.html#ae2912763623a50bd548d7ce74431c7fe">tox_is_data_encrypted</a>(enc_data), <span class="stringliteral">&quot;magic number missing&quot;</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../db/dca/struct_tox___options.html">Tox_Options</a> options;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#ac9b57278d2ca390623624409303ea390">tox_options_default</a>(&amp;options);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    options.savedata_type = <a class="code" href="../../da/d8f/tox_8h.html#a01a36d032dee4dd9e79be31a13128913aa48a8bb179a2f3539de506941d5b0c8c">TOX_SAVEDATA_TYPE_TOX_SAVE</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    options.savedata_data = enc_data;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    options.savedata_length = size2;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../da/d8f/tox_8h.html#a035d2fc729a3389019d9e75b1779ee5f">TOX_ERR_NEW</a> err2;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="../../d3/d79/struct_messenger.html">Tox</a> *tox3 = <a class="code" href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165">tox_new</a>(&amp;options, &amp;err2);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(err2 == <a class="code" href="../../da/d8f/tox_8h.html#a035d2fc729a3389019d9e75b1779ee5fa3ad88264863080c9b5835f36cc5a7e35">TOX_ERR_NEW_LOAD_ENCRYPTED</a>, <span class="stringliteral">&quot;wrong error! %u. should fail with %u&quot;</span>, err2,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                  <a class="code" href="../../da/d8f/tox_8h.html#a035d2fc729a3389019d9e75b1779ee5fa3ad88264863080c9b5835f36cc5a7e35">TOX_ERR_NEW_LOAD_ENCRYPTED</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    uint8_t dec_data[size];</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="../../d8/d81/toxencryptsave_8h.html#af9237d8431dc939559b2660b2ac6f80c">TOX_ERR_DECRYPTION</a> err3;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0">tox_pass_decrypt</a>(enc_data, size2, <span class="stringliteral">&quot;correcthorsebatterystaple&quot;</span>, 25, dec_data, &amp;err3);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;failed to decrypt save: %u&quot;</span>, err3);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    options.savedata_data = dec_data;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    options.savedata_length = size;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    tox3 = <a class="code" href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165">tox_new</a>(&amp;options, &amp;err2);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(err2 == <a class="code" href="../../da/d8f/tox_8h.html#a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4">TOX_ERR_NEW_OK</a>, <span class="stringliteral">&quot;failed to load from decrypted data: %u&quot;</span>, err2);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    uint8_t address2[<a class="code" href="../../da/d8f/tox_8h.html#a6a25b8b522f6d65bacd1d84981b8c75c">TOX_PUBLIC_KEY_SIZE</a>];</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    ret = <a class="code" href="../../d3/d69/tox_8c.html#a62f9e53ec4d674d30a5f1be690f5623b">tox_friend_get_public_key</a>(tox3, 0, address2, 0);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;no friends!&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(memcmp(address, address2, <a class="code" href="../../da/d8f/tox_8h.html#a6a25b8b522f6d65bacd1d84981b8c75c">TOX_PUBLIC_KEY_SIZE</a>) == 0, <span class="stringliteral">&quot;addresses don&#39;t match!&quot;</span>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    size = <a class="code" href="../../d3/d69/tox_8c.html#ac2b90c8597ff7afa2e9532e81b65d412">tox_get_savedata_size</a>(tox3);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    uint8_t data2[size];</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="../../d3/d69/tox_8c.html#ae13c8810890ae2d73b8c46e0c8033ab4">tox_get_savedata</a>(tox3, data2);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html">TOX_PASS_KEY</a> key;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    memcpy(key.<a class="code" href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html#a6434f2e799e75beacc91c217bc797339">salt</a>, <a class="code" href="../../d0/de9/encryptsave__test_8c.html#afe7c1b38a4076f26998228dd4a3d097c">salt</a>, 32);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    memcpy(key.<a class="code" href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html#aaa46672326ab451b679129167f39055e">key</a>, <a class="code" href="../../d0/de9/encryptsave__test_8c.html#af7d528b88d5085849036050d28c4c601">known_key2</a>, crypto_box_BEFORENMBYTES);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    size2 = size + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    uint8_t encdata2[size2];</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#ae7dfa4a7d1660caff18a2384cfd7668f">tox_pass_key_encrypt</a>(data2, size, &amp;key, encdata2, &amp;error1);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;failed to key encrypt %u&quot;</span>, error1);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(<a class="code" href="../../df/d1d/toxencryptsave_8c.html#ae2912763623a50bd548d7ce74431c7fe">tox_is_data_encrypted</a>(encdata2), <span class="stringliteral">&quot;magic number the second missing&quot;</span>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    uint8_t out1[size], out2[size];</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0">tox_pass_decrypt</a>(encdata2, size2, <a class="code" href="../../d0/de9/encryptsave__test_8c.html#a7de63ee82055dc8a1fa5770955e3e6ba">pw</a>, <a class="code" href="../../d0/de9/encryptsave__test_8c.html#a5cccc1370102c2eb422643aaaa640e5d">pwlen</a>, out1, &amp;err3);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;failed to pw decrypt %u&quot;</span>, err3);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#ab45a9cfd04ff66792ddd250185b355c1">tox_pass_key_decrypt</a>(encdata2, size2, &amp;key, out2, &amp;err3);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;failed to key decrypt %u&quot;</span>, err3);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(memcmp(out1, out2, size) == 0, <span class="stringliteral">&quot;differing output data&quot;</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// and now with the code in use (I only bothered with manually to debug this, and it seems a waste</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// to remove the manual check now that it&#39;s there)</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    options.savedata_data = out1;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    options.savedata_length = size;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="../../d3/d79/struct_messenger.html">Tox</a> *tox4 = <a class="code" href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165">tox_new</a>(&amp;options, &amp;err2);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(err2 == <a class="code" href="../../da/d8f/tox_8h.html#a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4">TOX_ERR_NEW_OK</a>, <span class="stringliteral">&quot;failed to new the third&quot;</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    uint8_t address5[<a class="code" href="../../da/d8f/tox_8h.html#a6a25b8b522f6d65bacd1d84981b8c75c">TOX_PUBLIC_KEY_SIZE</a>];</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    ret = <a class="code" href="../../d3/d69/tox_8c.html#a62f9e53ec4d674d30a5f1be690f5623b">tox_friend_get_public_key</a>(tox4, 0, address5, 0);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;no friends! the third&quot;</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(memcmp(address, address2, <a class="code" href="../../da/d8f/tox_8h.html#a6a25b8b522f6d65bacd1d84981b8c75c">TOX_PUBLIC_KEY_SIZE</a>) == 0, <span class="stringliteral">&quot;addresses don&#39;t match! the third&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#af2393a0da85871ba0cefc23497cb19fa">tox_kill</a>(tox1);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#af2393a0da85871ba0cefc23497cb19fa">tox_kill</a>(tox2);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#af2393a0da85871ba0cefc23497cb19fa">tox_kill</a>(tox3);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#af2393a0da85871ba0cefc23497cb19fa">tox_kill</a>(tox4);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="ttc" id="tox_8h_html_a01a36d032dee4dd9e79be31a13128913aa48a8bb179a2f3539de506941d5b0c8c"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a01a36d032dee4dd9e79be31a13128913aa48a8bb179a2f3539de506941d5b0c8c">TOX_SAVEDATA_TYPE_TOX_SAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l00376">tox.h:376</a></div></div>
<div class="ttc" id="struct_t_o_x___p_a_s_s___k_e_y_html_aaa46672326ab451b679129167f39055e"><div class="ttname"><a href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html#aaa46672326ab451b679129167f39055e">TOX_PASS_KEY::key</a></div><div class="ttdeci">uint8_t key[TOX_PASS_KEY_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00172">toxencryptsave.h:172</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_ad912f1925318a0b7f6d034856d489162"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#ad912f1925318a0b7f6d034856d489162">tox_pass_encrypt</a></div><div class="ttdeci">bool tox_pass_encrypt(const uint8_t *data, size_t data_len, const uint8_t *passphrase, size_t pplength, uint8_t *out, TOX_ERR_ENCRYPTION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00183">toxencryptsave.c:183</a></div></div>
<div class="ttc" id="encryptsave__test_8c_html_afe7c1b38a4076f26998228dd4a3d097c"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#afe7c1b38a4076f26998228dd4a3d097c">salt</a></div><div class="ttdeci">unsigned char salt[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00023">encryptsave_test.c:23</a></div></div>
<div class="ttc" id="tox_8c_html_ac9b57278d2ca390623624409303ea390"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ac9b57278d2ca390623624409303ea390">tox_options_default</a></div><div class="ttdeci">void tox_options_default(struct Tox_Options *options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00095">tox.c:95</a></div></div>
<div class="ttc" id="tox_8h_html_a3a8d42ad8b2803ba6d69e88aac567113"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a3a8d42ad8b2803ba6d69e88aac567113">TOX_ADDRESS_SIZE</a></div><div class="ttdeci">#define TOX_ADDRESS_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l00235">tox.h:235</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_a9ff85072665d7a2804a88835ac09867d"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a></div><div class="ttdeci">#define TOX_PASS_ENCRYPTION_EXTRA_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00043">toxencryptsave.h:43</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_adb8d2c287f3f1c405f4f880ceb5e41e0"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0">tox_pass_decrypt</a></div><div class="ttdeci">bool tox_pass_decrypt(const uint8_t *data, size_t length, const uint8_t *passphrase, size_t pplength, uint8_t *out, TOX_ERR_DECRYPTION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00255">toxencryptsave.c:255</a></div></div>
<div class="ttc" id="tox_8h_html_a6a25b8b522f6d65bacd1d84981b8c75c"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a6a25b8b522f6d65bacd1d84981b8c75c">TOX_PUBLIC_KEY_SIZE</a></div><div class="ttdeci">#define TOX_PUBLIC_KEY_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l00220">tox.h:220</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_ae2912763623a50bd548d7ce74431c7fe"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#ae2912763623a50bd548d7ce74431c7fe">tox_is_data_encrypted</a></div><div class="ttdeci">bool tox_is_data_encrypted(const uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00290">toxencryptsave.c:290</a></div></div>
<div class="ttc" id="tox_8h_html_a035d2fc729a3389019d9e75b1779ee5f"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a035d2fc729a3389019d9e75b1779ee5f">TOX_ERR_NEW</a></div><div class="ttdeci">TOX_ERR_NEW</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l00553">tox.h:553</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_ae7dfa4a7d1660caff18a2384cfd7668f"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#ae7dfa4a7d1660caff18a2384cfd7668f">tox_pass_key_encrypt</a></div><div class="ttdeci">bool tox_pass_key_encrypt(const uint8_t *data, size_t data_len, const TOX_PASS_KEY *key, uint8_t *out, TOX_ERR_ENCRYPTION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00137">toxencryptsave.c:137</a></div></div>
<div class="ttc" id="struct_t_o_x___p_a_s_s___k_e_y_html"><div class="ttname"><a href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html">TOX_PASS_KEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00170">toxencryptsave.h:170</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_af9237d8431dc939559b2660b2ac6f80c"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#af9237d8431dc939559b2660b2ac6f80c">TOX_ERR_DECRYPTION</a></div><div class="ttdeci">TOX_ERR_DECRYPTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00104">toxencryptsave.h:104</a></div></div>
<div class="ttc" id="namespacemake-funny-savefile_html_aa7a0efb8690a34f61a95b00cc723ca27"><div class="ttname"><a href="../../df/db5/namespacemake-funny-savefile.html#aa7a0efb8690a34f61a95b00cc723ca27">make-funny-savefile.data</a></div><div class="ttdeci">tuple data</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d01/make-funny-savefile_8py_source.html#l00098">make-funny-savefile.py:98</a></div></div>
<div class="ttc" id="encryptsave__test_8c_html_a23435c36683784fe0b913e77c8445c32"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#a23435c36683784fe0b913e77c8445c32">accept_friend_request</a></div><div class="ttdeci">void accept_friend_request(Tox *m, const uint8_t *public_key, const uint8_t *data, size_t length, void *userdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00032">encryptsave_test.c:32</a></div></div>
<div class="ttc" id="tox_8h_html_a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4">TOX_ERR_NEW_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l00558">tox.h:558</a></div></div>
<div class="ttc" id="tox_8c_html_aa0e6afccd06a766b84a0633e259f9165"><div class="ttname"><a href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165">tox_new</a></div><div class="ttdeci">Tox * tox_new(const struct Tox_Options *options, TOX_ERR_NEW *error)</div><div class="ttdoc">Creates and initialises a new Tox instance with the options passed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00124">tox.c:124</a></div></div>
<div class="ttc" id="struct_tox___options_html"><div class="ttname"><a href="../../db/dca/struct_tox___options.html">Tox_Options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l00391">tox.h:391</a></div></div>
<div class="ttc" id="encryptsave__test_8c_html_a5cccc1370102c2eb422643aaaa640e5d"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#a5cccc1370102c2eb422643aaaa640e5d">pwlen</a></div><div class="ttdeci">unsigned int pwlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00026">encryptsave_test.c:26</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a4bd4b2294bdedc4af8c708ecc5c58516"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a></div><div class="ttdeci">ck_assert_msg(bootstrap_node!=NULL,&quot;Failed to create bootstrap node&quot;)</div></div>
<div class="ttc" id="tox_8c_html_ac2b90c8597ff7afa2e9532e81b65d412"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ac2b90c8597ff7afa2e9532e81b65d412">tox_get_savedata_size</a></div><div class="ttdeci">size_t tox_get_savedata_size(const Tox *tox)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00246">tox.c:246</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_ab45a9cfd04ff66792ddd250185b355c1"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#ab45a9cfd04ff66792ddd250185b355c1">tox_pass_key_decrypt</a></div><div class="ttdeci">bool tox_pass_key_decrypt(const uint8_t *data, size_t length, const TOX_PASS_KEY *key, uint8_t *out, TOX_ERR_DECRYPTION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00209">toxencryptsave.c:209</a></div></div>
<div class="ttc" id="tox_8c_html_a62f9e53ec4d674d30a5f1be690f5623b"><div class="ttname"><a href="../../d3/d69/tox_8c.html#a62f9e53ec4d674d30a5f1be690f5623b">tox_friend_get_public_key</a></div><div class="ttdeci">bool tox_friend_get_public_key(const Tox *tox, uint32_t friend_number, uint8_t *public_key, TOX_ERR_FRIEND_GET_PUBLIC_KEY *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00630">tox.c:630</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_ae960705edfa51ec826e3662ab664c95b"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#ae960705edfa51ec826e3662ab664c95b">TOX_ERR_ENCRYPTION</a></div><div class="ttdeci">TOX_ERR_ENCRYPTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00086">toxencryptsave.h:86</a></div></div>
<div class="ttc" id="tox_8c_html_aa921c439baad10c03f8d93fda753b0b8"><div class="ttname"><a href="../../d3/d69/tox_8c.html#aa921c439baad10c03f8d93fda753b0b8">tox_friend_add</a></div><div class="ttdeci">uint32_t tox_friend_add(Tox *tox, const uint8_t *address, const uint8_t *message, size_t length, TOX_ERR_FRIEND_ADD *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00557">tox.c:557</a></div></div>
<div class="ttc" id="tox_8c_html_a2cf9a901fd5db3b6635a3ece389cc349"><div class="ttname"><a href="../../d3/d69/tox_8c.html#a2cf9a901fd5db3b6635a3ece389cc349">tox_callback_friend_request</a></div><div class="ttdeci">void tox_callback_friend_request(Tox *tox, tox_friend_request_cb *function, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00892">tox.c:892</a></div></div>
<div class="ttc" id="struct_messenger_html"><div class="ttname"><a href="../../d3/d79/struct_messenger.html">Messenger</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d30/_messenger_8h_source.html#l00211">Messenger.h:211</a></div></div>
<div class="ttc" id="tox_8c_html_ab52d4512e58c7ff8f62121beff5c0a49"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ab52d4512e58c7ff8f62121beff5c0a49">tox_self_get_address</a></div><div class="ttdeci">void tox_self_get_address(const Tox *tox, uint8_t *address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00409">tox.c:409</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_af2393a0da85871ba0cefc23497cb19fa"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#af2393a0da85871ba0cefc23497cb19fa">tox_kill</a></div><div class="ttdeci">tox_kill(bootstrap_node)</div></div>
<div class="ttc" id="struct_t_o_x___p_a_s_s___k_e_y_html_a6434f2e799e75beacc91c217bc797339"><div class="ttname"><a href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html#a6434f2e799e75beacc91c217bc797339">TOX_PASS_KEY::salt</a></div><div class="ttdeci">uint8_t salt[TOX_PASS_SALT_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00171">toxencryptsave.h:171</a></div></div>
<div class="ttc" id="tox_8c_html_ae13c8810890ae2d73b8c46e0c8033ab4"><div class="ttname"><a href="../../d3/d69/tox_8c.html#ae13c8810890ae2d73b8c46e0c8033ab4">tox_get_savedata</a></div><div class="ttdeci">void tox_get_savedata(const Tox *tox, uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d69/tox_8c_source.html#l00252">tox.c:252</a></div></div>
<div class="ttc" id="encryptsave__test_8c_html_a7de63ee82055dc8a1fa5770955e3e6ba"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#a7de63ee82055dc8a1fa5770955e3e6ba">pw</a></div><div class="ttdeci">char * pw</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00025">encryptsave_test.c:25</a></div></div>
<div class="ttc" id="tox_8h_html_a035d2fc729a3389019d9e75b1779ee5fa3ad88264863080c9b5835f36cc5a7e35"><div class="ttname"><a href="../../da/d8f/tox_8h.html#a035d2fc729a3389019d9e75b1779ee5fa3ad88264863080c9b5835f36cc5a7e35">TOX_ERR_NEW_LOAD_ENCRYPTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d8f/tox_8h_source.html#l00602">tox.h:602</a></div></div>
<div class="ttc" id="encryptsave__test_8c_html_af7d528b88d5085849036050d28c4c601"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#af7d528b88d5085849036050d28c4c601">known_key2</a></div><div class="ttdeci">unsigned char known_key2[crypto_box_BEFORENMBYTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00028">encryptsave_test.c:28</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/de9/encryptsave__test_8c_abfc6ca1e662bc2b41efecb0b9e35cc9d_cgraph.png" border="0" usemap="#d0/de9/encryptsave__test_8c_abfc6ca1e662bc2b41efecb0b9e35cc9d_cgraph" alt=""/></div>
<map name="d0/de9/encryptsave__test_8c_abfc6ca1e662bc2b41efecb0b9e35cc9d_cgraph" id="d0/de9/encryptsave__test_8c_abfc6ca1e662bc2b41efecb0b9e35cc9d_cgraph">
<area shape="rect" id="node2" href="../../d0/de9/encryptsave__test_8c.html#a23435c36683784fe0b913e77c8445c32" title="accept_friend_request" alt="" coords="171,135,322,162"/><area shape="rect" id="node11" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516" title="ck_assert_msg" alt="" coords="191,324,302,351"/><area shape="rect" id="node12" href="../../d3/d69/tox_8c.html#a2cf9a901fd5db3b6635a3ece389cc349" title="tox_callback_friend\l_request" alt="" coords="179,376,314,417"/><area shape="rect" id="node15" href="../../d3/d69/tox_8c.html#aa921c439baad10c03f8d93fda753b0b8" title="tox_friend_add" alt="" coords="417,179,524,206"/><area shape="rect" id="node18" href="../../d3/d69/tox_8c.html#a62f9e53ec4d674d30a5f1be690f5623b" title="tox_friend_get_public_key" alt="" coords="160,442,333,468"/><area shape="rect" id="node21" href="../../d3/d69/tox_8c.html#ae13c8810890ae2d73b8c46e0c8033ab4" title="tox_get_savedata" alt="" coords="184,492,309,519"/><area shape="rect" id="node25" href="../../d3/d69/tox_8c.html#ac2b90c8597ff7afa2e9532e81b65d412" title="tox_get_savedata_size" alt="" coords="169,543,325,570"/><area shape="rect" id="node26" href="../../df/d1d/toxencryptsave_8c.html#ae2912763623a50bd548d7ce74431c7fe" title="tox_is_data_encrypted" alt="" coords="170,594,323,620"/><area shape="rect" id="node27" href="../../d6/dc0/toxav__many__test_8c.html#af2393a0da85871ba0cefc23497cb19fa" title="tox_kill" alt="" coords="215,644,278,671"/><area shape="rect" id="node28" href="../../d3/d69/tox_8c.html#aa0e6afccd06a766b84a0633e259f9165" title="Creates and initialises a new Tox instance with the options passed. " alt="" coords="211,712,282,739"/><area shape="rect" id="node39" href="../../d3/d69/tox_8c.html#ac9b57278d2ca390623624409303ea390" title="tox_options_default" alt="" coords="179,763,314,790"/><area shape="rect" id="node40" href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0" title="tox_pass_decrypt" alt="" coords="184,1034,309,1060"/><area shape="rect" id="node42" href="../../df/d1d/toxencryptsave_8c.html#ab45a9cfd04ff66792ddd250185b355c1" title="tox_pass_key_decrypt" alt="" coords="394,1034,547,1060"/><area shape="rect" id="node44" href="../../df/d1d/toxencryptsave_8c.html#ad912f1925318a0b7f6d034856d489162" title="tox_pass_encrypt" alt="" coords="184,1135,309,1162"/><area shape="rect" id="node46" href="../../df/d1d/toxencryptsave_8c.html#ae7dfa4a7d1660caff18a2384cfd7668f" title="tox_pass_key_encrypt" alt="" coords="394,1186,547,1212"/><area shape="rect" id="node49" href="../../d3/d69/tox_8c.html#ab52d4512e58c7ff8f62121beff5c0a49" title="tox_self_get_address" alt="" coords="173,274,320,300"/><area shape="rect" id="node3" href="../../d3/d69/tox_8c.html#ad499c853b628d04dd0f3c6ef5a14ebe4" title="tox_friend_add_norequest" alt="" coords="385,128,556,155"/><area shape="rect" id="node4" href="../../d8/d8d/_messenger_8c.html#a2f7aa06733a25e8c0edc8f31a22a78dc" title="m_addfriend_norequest" alt="" coords="614,78,771,104"/><area shape="rect" id="node10" href="../../d3/d69/tox_8c.html#ab7b39298b0dacf4941a99c29dc8bfaee" title="set_friend_error" alt="" coords="637,128,749,155"/><area shape="rect" id="node5" href="../../d8/d8d/_messenger_8c.html#a32203f86be17e650ef0f7e5b7eff66bc" title="getfriend_id" alt="" coords="848,27,937,54"/><area shape="rect" id="node6" href="../../de/df1/util_8c.html#ada3d44b4f530d3c8c9cb69b732be94b1" title="id_equal" alt="" coords="1008,27,1079,54"/><area shape="rect" id="node7" href="../../dc/d85/crypto__core_8c.html#ab4a996d3466879a493cc6496acb6cd7e" title="public_key_valid" alt="" coords="833,78,952,104"/><area shape="rect" id="node8" href="../../d8/d8d/_messenger_8c.html#aa3be5ad998d2b0ced07aceab765eaa2f" title="init_new_friend" alt="" coords="838,128,947,155"/><area shape="rect" id="node9" href="../../de/df1/util_8c.html#aa30049b8c1d82c280d6d872feea3353b" title="id_copy" alt="" coords="1010,230,1077,256"/><area shape="rect" id="node13" href="../../d8/d8d/_messenger_8c.html#ac913636e02281cae396b1b7494cd760a" title="m_callback_friendrequest" alt="" coords="385,324,556,351"/><area shape="rect" id="node14" href="../../d6/da4/friend__requests_8c.html#a86c8bb45c7dd4f0ef5e3be01cb646339" title="callback_friendrequest" alt="" coords="617,324,769,351"/><area shape="rect" id="node16" href="../../d8/d8d/_messenger_8c.html#ac77431b1ab0b12af003657e11057bd9c" title="m_addfriend" alt="" coords="646,179,739,206"/><area shape="rect" id="node17" href="../../d8/d8d/_messenger_8c.html#a31c1f385ae903fdf82773998b54009fc" title="address_checksum" alt="" coords="825,280,960,307"/><area shape="rect" id="node19" href="../../d8/d8d/_messenger_8c.html#a8348df936215ea10b7c3ca129100f5ce" title="get_real_pk" alt="" coords="426,375,515,402"/><area shape="rect" id="node20" href="../../d8/d8d/_messenger_8c.html#a36587bd583123730d702e5a4cb894e5f" title="friend_not_valid" alt="" coords="636,375,749,402"/><area shape="rect" id="node22" href="../../d8/d8d/_messenger_8c.html#af0dfac679b1b57a0036f6511e12fe777" title="messenger_save" alt="" coords="410,426,531,452"/><area shape="rect" id="node23" href="../../d8/d8d/_messenger_8c.html#a4ae119dad636f15f1a5d628a13b107d8" title="messenger_size" alt="" coords="634,476,751,503"/><area shape="rect" id="node24" href="../../de/df1/util_8c.html#aebd439a002cb183420a08996f7ffdbef" title="host_to_lendian32" alt="" coords="629,426,756,452"/><area shape="rect" id="node29" href="../../d1/d22/logger_8c.html#a4445a3fab2c47652b5b2a985bc8fbb77" title="logger_get_global" alt="" coords="409,679,532,706"/><area shape="rect" id="node30" href="../../d1/d22/logger_8c.html#a5ff7d6f8171fb0b26f99d46c94abb4c0" title="logger_set_global" alt="" coords="409,730,532,756"/><area shape="rect" id="node31" href="../../d1/d22/logger_8c.html#a015f81551929ba00687be8d9eea85663" title="logger_new" alt="" coords="427,780,515,807"/><area shape="rect" id="node32" href="../../d6/d6e/network_8c.html#a6aa0dce9c25e370af93bf4a14f79c709" title="ip_init" alt="" coords="665,856,721,883"/><area shape="rect" id="node33" href="../../d6/d6e/network_8c.html#a1c024648679209a12766fedc7e55d5e4" title="addr_resolve_or_parse_ip" alt="" coords="385,932,556,959"/><area shape="rect" id="node34" href="../../d8/d8d/_messenger_8c.html#af015ea2e74c58196e0564719a6c6a112" title="new_messenger" alt="" coords="412,831,529,858"/><area shape="rect" id="node35" href="../../df/de9/toxcore_2group_8c.html#a16ac0b94fed484d710f76d390b7a85d8" title="new_groupchats" alt="" coords="412,983,529,1010"/><area shape="rect" id="node36" href="../../d8/d8d/_messenger_8c.html#a771c65c3057d870b0653c2fdf0a12fb7" title="kill_messenger" alt="" coords="416,527,525,554"/><area shape="rect" id="node37" href="../../d8/d8d/_messenger_8c.html#a4871cd41d2a53b07ee4b2467a844e17e" title="messenger_load" alt="" coords="412,578,529,604"/><area shape="rect" id="node38" href="../../d8/dc6/net__crypto_8c.html#ac8131842eafef1819a6e6da5404e3234" title="load_secret_key" alt="" coords="412,628,529,655"/><area shape="rect" id="node41" href="../../df/d1d/toxencryptsave_8c.html#a25fdc5eb341470112adecd7120d95da7" title="tox_derive_key_with_salt" alt="" coords="608,1096,777,1123"/><area shape="rect" id="node43" href="../../dc/d85/crypto__core_8c.html#a824b257fcff74b9d17c5247223fbed29" title="decrypt_data_symmetric" alt="" coords="610,1034,775,1060"/><area shape="rect" id="node45" href="../../df/d1d/toxencryptsave_8c.html#a9feb3bbe493cc28467d39b6b94ecbe26" title="tox_derive_key_from_pass" alt="" coords="381,1135,560,1162"/><area shape="rect" id="node47" href="../../dc/d85/crypto__core_8c.html#a15ef255ab026d4881a16b99148b05dd7" title="random_nonce" alt="" coords="639,1160,746,1187"/><area shape="rect" id="node48" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="610,1211,775,1238"/><area shape="rect" id="node50" href="../../d8/d8d/_messenger_8c.html#a50d7f1102c25158f02b2943dcfe253c8" title="getaddress" alt="" coords="649,274,736,300"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab96cf00902264a0b414a9c7978117359"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">END_TEST START_TEST </td>
          <td>(</td>
          <td class="paramtype">test_keys&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00138">138</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>References <a class="el" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg()</a>, <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00023">salt</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00085">tox_derive_key_from_pass()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00096">tox_derive_key_with_salt()</a>, <a class="el" href="../../d8/d81/toxencryptsave_8h_source.html#l00129">TOX_ERR_DECRYPTION_FAILED</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00064">tox_get_salt()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00255">tox_pass_decrypt()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00183">tox_pass_encrypt()</a>, <a class="el" href="../../d8/d81/toxencryptsave_8h_source.html#l00043">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00209">tox_pass_key_decrypt()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00137">tox_pass_key_encrypt()</a>, and <a class="el" href="../../d8/d81/toxencryptsave_8h_source.html#l00041">TOX_PASS_SALT_LENGTH</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d8/d81/toxencryptsave_8h.html#ae960705edfa51ec826e3662ab664c95b">TOX_ERR_ENCRYPTION</a> encerr;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="../../d8/d81/toxencryptsave_8h.html#af9237d8431dc939559b2660b2ac6f80c">TOX_ERR_DECRYPTION</a> decerr;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../d8/d81/toxencryptsave_8h.html#ac6c399ec6d0bd5a9b6af9cba54739e4d">TOX_ERR_KEY_DERIVATION</a> keyerr;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html">TOX_PASS_KEY</a> key;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">bool</span> ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#a9feb3bbe493cc28467d39b6b94ecbe26">tox_derive_key_from_pass</a>(<span class="stringliteral">&quot;123qweasdzxc&quot;</span>, 12, &amp;key, &amp;keyerr);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;generic failure 1: %u&quot;</span>, keyerr);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    uint8_t *<span class="keywordtype">string</span> = <span class="stringliteral">&quot;No Patrick, mayonnaise is not an instrument.&quot;</span>; <span class="comment">// 44</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    uint8_t encrypted[44 + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#ae7dfa4a7d1660caff18a2384cfd7668f">tox_pass_key_encrypt</a>(<span class="keywordtype">string</span>, 44, &amp;key, encrypted, &amp;encerr);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;generic failure 2: %u&quot;</span>, encerr);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    uint8_t encrypted2[44 + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>];</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#ad912f1925318a0b7f6d034856d489162">tox_pass_encrypt</a>(<span class="keywordtype">string</span>, 44, <span class="stringliteral">&quot;123qweasdzxc&quot;</span>, 12, encrypted2, &amp;encerr);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;generic failure 3: %u&quot;</span>, encerr);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    uint8_t out1[44 + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>];</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    uint8_t out2[44 + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#ab45a9cfd04ff66792ddd250185b355c1">tox_pass_key_decrypt</a>(encrypted, 44 + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>, &amp;key, out1, &amp;decerr);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;generic failure 4: %u&quot;</span>, decerr);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(memcmp(out1, <span class="keywordtype">string</span>, 44) == 0, <span class="stringliteral">&quot;decryption 1 failed&quot;</span>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0">tox_pass_decrypt</a>(encrypted2, 44 + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>, <span class="stringliteral">&quot;123qweasdzxc&quot;</span>, 12, out2, &amp;decerr);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;generic failure 5: %u&quot;</span>, decerr);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(memcmp(out2, <span class="keywordtype">string</span>, 44) == 0, <span class="stringliteral">&quot;decryption 2 failed&quot;</span>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0">tox_pass_decrypt</a>(encrypted2, 44 + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>, NULL, 0, out2, &amp;decerr);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(!ret, <span class="stringliteral">&quot;Decrypt succeeded with wrong pass&quot;</span>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(decerr != <a class="code" href="../../d8/d81/toxencryptsave_8h.html#af9237d8431dc939559b2660b2ac6f80ca678e0501b028d0f8392bf867105b9a09">TOX_ERR_DECRYPTION_FAILED</a>, <span class="stringliteral">&quot;Bad error code %u&quot;</span>, decerr);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// test that pass_decrypt can decrypt things from pass_key_encrypt</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0">tox_pass_decrypt</a>(encrypted, 44 + <a class="code" href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a>, <span class="stringliteral">&quot;123qweasdzxc&quot;</span>, 12, out1, &amp;decerr);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;generic failure 6: %u&quot;</span>, decerr);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(memcmp(out1, <span class="keywordtype">string</span>, 44) == 0, <span class="stringliteral">&quot;decryption 3 failed&quot;</span>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    uint8_t <a class="code" href="../../d0/de9/encryptsave__test_8c.html#afe7c1b38a4076f26998228dd4a3d097c">salt</a>[<a class="code" href="../../d8/d81/toxencryptsave_8h.html#a0ff111eed3881653e1a92c4336f9a9be">TOX_PASS_SALT_LENGTH</a>];</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(<a class="code" href="../../df/d1d/toxencryptsave_8c.html#a40c4d2ac288ae7b88c93ca69ef79d623">tox_get_salt</a>(encrypted, salt), <span class="stringliteral">&quot;couldn&#39;t get salt&quot;</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html">TOX_PASS_KEY</a> key2;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    ret = <a class="code" href="../../df/d1d/toxencryptsave_8c.html#a25fdc5eb341470112adecd7120d95da7">tox_derive_key_with_salt</a>(<span class="stringliteral">&quot;123qweasdzxc&quot;</span>, 12, salt, &amp;key2, &amp;keyerr);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(ret, <span class="stringliteral">&quot;generic failure 7: %u&quot;</span>, keyerr);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a>(0 == memcmp(&amp;key, &amp;key2, <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html">TOX_PASS_KEY</a>)), <span class="stringliteral">&quot;salt comparison failed&quot;</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="ttc" id="toxencryptsave_8c_html_ad912f1925318a0b7f6d034856d489162"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#ad912f1925318a0b7f6d034856d489162">tox_pass_encrypt</a></div><div class="ttdeci">bool tox_pass_encrypt(const uint8_t *data, size_t data_len, const uint8_t *passphrase, size_t pplength, uint8_t *out, TOX_ERR_ENCRYPTION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00183">toxencryptsave.c:183</a></div></div>
<div class="ttc" id="encryptsave__test_8c_html_afe7c1b38a4076f26998228dd4a3d097c"><div class="ttname"><a href="../../d0/de9/encryptsave__test_8c.html#afe7c1b38a4076f26998228dd4a3d097c">salt</a></div><div class="ttdeci">unsigned char salt[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de9/encryptsave__test_8c_source.html#l00023">encryptsave_test.c:23</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_af9237d8431dc939559b2660b2ac6f80ca678e0501b028d0f8392bf867105b9a09"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#af9237d8431dc939559b2660b2ac6f80ca678e0501b028d0f8392bf867105b9a09">TOX_ERR_DECRYPTION_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00129">toxencryptsave.h:129</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_a9ff85072665d7a2804a88835ac09867d"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#a9ff85072665d7a2804a88835ac09867d">TOX_PASS_ENCRYPTION_EXTRA_LENGTH</a></div><div class="ttdeci">#define TOX_PASS_ENCRYPTION_EXTRA_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00043">toxencryptsave.h:43</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_adb8d2c287f3f1c405f4f880ceb5e41e0"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0">tox_pass_decrypt</a></div><div class="ttdeci">bool tox_pass_decrypt(const uint8_t *data, size_t length, const uint8_t *passphrase, size_t pplength, uint8_t *out, TOX_ERR_DECRYPTION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00255">toxencryptsave.c:255</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_ae7dfa4a7d1660caff18a2384cfd7668f"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#ae7dfa4a7d1660caff18a2384cfd7668f">tox_pass_key_encrypt</a></div><div class="ttdeci">bool tox_pass_key_encrypt(const uint8_t *data, size_t data_len, const TOX_PASS_KEY *key, uint8_t *out, TOX_ERR_ENCRYPTION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00137">toxencryptsave.c:137</a></div></div>
<div class="ttc" id="struct_t_o_x___p_a_s_s___k_e_y_html"><div class="ttname"><a href="../../d3/dbc/struct_t_o_x___p_a_s_s___k_e_y.html">TOX_PASS_KEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00170">toxencryptsave.h:170</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_af9237d8431dc939559b2660b2ac6f80c"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#af9237d8431dc939559b2660b2ac6f80c">TOX_ERR_DECRYPTION</a></div><div class="ttdeci">TOX_ERR_DECRYPTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00104">toxencryptsave.h:104</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_a0ff111eed3881653e1a92c4336f9a9be"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#a0ff111eed3881653e1a92c4336f9a9be">TOX_PASS_SALT_LENGTH</a></div><div class="ttdeci">#define TOX_PASS_SALT_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00041">toxencryptsave.h:41</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_a9feb3bbe493cc28467d39b6b94ecbe26"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#a9feb3bbe493cc28467d39b6b94ecbe26">tox_derive_key_from_pass</a></div><div class="ttdeci">bool tox_derive_key_from_pass(const uint8_t *passphrase, size_t pplength, TOX_PASS_KEY *out_key, TOX_ERR_KEY_DERIVATION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00085">toxencryptsave.c:85</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_ac6c399ec6d0bd5a9b6af9cba54739e4d"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#ac6c399ec6d0bd5a9b6af9cba54739e4d">TOX_ERR_KEY_DERIVATION</a></div><div class="ttdeci">TOX_ERR_KEY_DERIVATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00072">toxencryptsave.h:72</a></div></div>
<div class="ttc" id="toxav__many__test_8c_html_a4bd4b2294bdedc4af8c708ecc5c58516"><div class="ttname"><a href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516">ck_assert_msg</a></div><div class="ttdeci">ck_assert_msg(bootstrap_node!=NULL,&quot;Failed to create bootstrap node&quot;)</div></div>
<div class="ttc" id="toxencryptsave_8c_html_ab45a9cfd04ff66792ddd250185b355c1"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#ab45a9cfd04ff66792ddd250185b355c1">tox_pass_key_decrypt</a></div><div class="ttdeci">bool tox_pass_key_decrypt(const uint8_t *data, size_t length, const TOX_PASS_KEY *key, uint8_t *out, TOX_ERR_DECRYPTION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00209">toxencryptsave.c:209</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_a25fdc5eb341470112adecd7120d95da7"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#a25fdc5eb341470112adecd7120d95da7">tox_derive_key_with_salt</a></div><div class="ttdeci">bool tox_derive_key_with_salt(const uint8_t *passphrase, size_t pplength, const uint8_t *salt, TOX_PASS_KEY *out_key, TOX_ERR_KEY_DERIVATION *error)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00096">toxencryptsave.c:96</a></div></div>
<div class="ttc" id="toxencryptsave_8h_html_ae960705edfa51ec826e3662ab664c95b"><div class="ttname"><a href="../../d8/d81/toxencryptsave_8h.html#ae960705edfa51ec826e3662ab664c95b">TOX_ERR_ENCRYPTION</a></div><div class="ttdeci">TOX_ERR_ENCRYPTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d81/toxencryptsave_8h_source.html#l00086">toxencryptsave.h:86</a></div></div>
<div class="ttc" id="toxencryptsave_8c_html_a40c4d2ac288ae7b88c93ca69ef79d623"><div class="ttname"><a href="../../df/d1d/toxencryptsave_8c.html#a40c4d2ac288ae7b88c93ca69ef79d623">tox_get_salt</a></div><div class="ttdeci">bool tox_get_salt(const uint8_t *data, uint8_t *salt)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1d/toxencryptsave_8c_source.html#l00064">toxencryptsave.c:64</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/de9/encryptsave__test_8c_ab96cf00902264a0b414a9c7978117359_cgraph.png" border="0" usemap="#d0/de9/encryptsave__test_8c_ab96cf00902264a0b414a9c7978117359_cgraph" alt=""/></div>
<map name="d0/de9/encryptsave__test_8c_ab96cf00902264a0b414a9c7978117359_cgraph" id="d0/de9/encryptsave__test_8c_ab96cf00902264a0b414a9c7978117359_cgraph">
<area shape="rect" id="node2" href="../../d6/dc0/toxav__many__test_8c.html#a4bd4b2294bdedc4af8c708ecc5c58516" title="ck_assert_msg" alt="" coords="167,5,278,32"/><area shape="rect" id="node3" href="../../df/d1d/toxencryptsave_8c.html#a9feb3bbe493cc28467d39b6b94ecbe26" title="tox_derive_key_from_pass" alt="" coords="333,132,512,159"/><area shape="rect" id="node4" href="../../df/d1d/toxencryptsave_8c.html#a25fdc5eb341470112adecd7120d95da7" title="tox_derive_key_with_salt" alt="" coords="560,132,729,159"/><area shape="rect" id="node5" href="../../df/d1d/toxencryptsave_8c.html#a40c4d2ac288ae7b88c93ca69ef79d623" title="tox_get_salt" alt="" coords="176,360,269,387"/><area shape="rect" id="node6" href="../../df/d1d/toxencryptsave_8c.html#adb8d2c287f3f1c405f4f880ceb5e41e0" title="tox_pass_decrypt" alt="" coords="160,208,285,235"/><area shape="rect" id="node7" href="../../df/d1d/toxencryptsave_8c.html#ab45a9cfd04ff66792ddd250185b355c1" title="tox_pass_key_decrypt" alt="" coords="346,284,499,311"/><area shape="rect" id="node9" href="../../df/d1d/toxencryptsave_8c.html#ad912f1925318a0b7f6d034856d489162" title="tox_pass_encrypt" alt="" coords="160,157,285,184"/><area shape="rect" id="node10" href="../../df/d1d/toxencryptsave_8c.html#ae7dfa4a7d1660caff18a2384cfd7668f" title="tox_pass_key_encrypt" alt="" coords="346,233,499,260"/><area shape="rect" id="node8" href="../../dc/d85/crypto__core_8c.html#a824b257fcff74b9d17c5247223fbed29" title="decrypt_data_symmetric" alt="" coords="562,284,727,311"/><area shape="rect" id="node11" href="../../dc/d85/crypto__core_8c.html#a15ef255ab026d4881a16b99148b05dd7" title="random_nonce" alt="" coords="591,183,698,209"/><area shape="rect" id="node12" href="../../dc/d85/crypto__core_8c.html#a81efc0a4a6e0efe372651e26e342a6e5" title="encrypt_data_symmetric" alt="" coords="562,233,727,260"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a53eb5701a69d33a36094d0211d8f644c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char known_key[crypto_box_BEFORENMBYTES] = {0x29, 0x36, 0x1c, 0x9e, 0x65, 0xbb, 0x46, 0x8b, 0xde, 0xa1, 0xac, 0xf, 0xd5, 0x11, 0x81, 0xc8, 0x29, 0x28, 0x17, 0x23, 0xa6, 0xc3, 0x6b, 0x77, 0x2e, 0xd7, 0xd3, 0x10, 0xeb, 0xd2, 0xf7, 0xc8}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00024">24</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>Referenced by <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00042">START_TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="af7d528b88d5085849036050d28c4c601"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char known_key2[crypto_box_BEFORENMBYTES] = {0x7a, 0xfa, 0x95, 0x45, 0x36, 0x8a, 0xa2, 0x5c, 0x40, 0xfd, 0xc0, 0xe2, 0x35, 0x8, 0x7, 0x88, 0xfa, 0xf9, 0x37, 0x86, 0xeb, 0xff, 0x50, 0x4f, 0x3, 0xe2, 0xf6, 0xd9, 0xef, 0x9, 0x17, 0x1}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00028">28</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>Referenced by <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00056">START_TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a7de63ee82055dc8a1fa5770955e3e6ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* pw = &quot;hunter2&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00025">25</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>Referenced by <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00042">START_TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cccc1370102c2eb422643aaaa640e5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int pwlen = 7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00026">26</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>Referenced by <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00042">START_TEST()</a>.</p>

</div>
</div>
<a class="anchor" id="afe7c1b38a4076f26998228dd4a3d097c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char salt[32] = {0xB1, 0xC2, 0x09, 0xEE, 0x50, 0x6C, 0xF0, 0x20, 0xC4, 0xD6, 0xEB, 0xC0, 0x44, 0x51, 0x3B, 0x60, 0x4B, 0x39, 0x4A, 0xCF, 0x09, 0x53, 0x4F, 0xEA, 0x08, 0x41, 0xFA, 0xCA, 0x66, 0xD2, 0x68, 0x7F}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00023">23</a> of file <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html">encryptsave_test.c</a>.</p>

<p>Referenced by <a class="el" href="../../d0/de9/encryptsave__test_8c_source.html#l00042">START_TEST()</a>, <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00085">tox_derive_key_from_pass()</a>, and <a class="el" href="../../df/d1d/toxencryptsave_8c_source.html#l00255">tox_pass_decrypt()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 2 2015 23:41:15 for libtoxcore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
