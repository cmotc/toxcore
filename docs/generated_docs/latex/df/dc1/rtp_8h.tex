\hypertarget{rtp_8h}{\section{toxav/rtp.h File Reference}
\label{rtp_8h}\index{toxav/rtp.\+h@{toxav/rtp.\+h}}
}
{\ttfamily \#include $<$inttypes.\+h$>$}\\*
{\ttfamily \#include \char`\"{}../toxcore/\+Messenger.\+h\char`\"{}}\\*
Include dependency graph for rtp.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/dd3/rtp_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/dd3/rtp_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct___r_t_p_header}{\+\_\+\+R\+T\+P\+Header}
\item 
struct \hyperlink{struct___r_t_p_ext_header}{\+\_\+\+R\+T\+P\+Ext\+Header}
\item 
struct \hyperlink{struct___r_t_p_message}{\+\_\+\+R\+T\+P\+Message}
\item 
struct \hyperlink{struct___r_t_p_session}{\+\_\+\+R\+T\+P\+Session}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{rtp_8h_a45dc32aa4b3075cfa01349a743c52d54}{R\+T\+P\+\_\+\+V\+E\+R\+S\+I\+O\+N}~2
\item 
\#define \hyperlink{rtp_8h_a6589e5f4f8f3704233241df1982867a7}{M\+A\+X\+\_\+\+S\+E\+Q\+U\+\_\+\+N\+U\+M}~65535
\item 
\#define \hyperlink{rtp_8h_ac552c225344e6f60cbadb539fe35e6f5}{M\+A\+X\+\_\+\+R\+T\+P\+\_\+\+S\+I\+Z\+E}~65535
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{struct___r_t_p_header}{\+\_\+\+R\+T\+P\+Header} \hyperlink{rtp_8h_a75f2f434fb40aaadc6665cb0c9010e49}{R\+T\+P\+Header}
\item 
typedef struct \hyperlink{struct___r_t_p_ext_header}{\+\_\+\+R\+T\+P\+Ext\+Header} \hyperlink{rtp_8h_ab384df54f92f379aa578740b96a3aaaa}{R\+T\+P\+Ext\+Header}
\item 
typedef struct \hyperlink{struct___r_t_p_message}{\+\_\+\+R\+T\+P\+Message} \hyperlink{rtp_8h_ab98525fe7a493c34d9dc586aa5b029b6}{R\+T\+P\+Message}
\item 
typedef struct \hyperlink{struct___r_t_p_session}{\+\_\+\+R\+T\+P\+Session} \hyperlink{rtp_8h_aecafd8fd6e485ceb09747d50703bcd06}{R\+T\+P\+Session}
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{rtp_8h_a56286b35c8585dd1525c8efca234e6df}{R\+T\+P\+Error} \{ \hyperlink{rtp_8h_a56286b35c8585dd1525c8efca234e6dfa6db3c1377fbdf6fcedfeb8c1b2fc8b11}{rtp\+\_\+\+Error\+Sending} = -\/40
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{rtp_8h_aecafd8fd6e485ceb09747d50703bcd06}{R\+T\+P\+Session} $\ast$ \hyperlink{rtp_8h_acda914088783d9822cdafdedf8fadd65}{rtp\+\_\+new} (int payload\+\_\+type, \hyperlink{struct_messenger}{Messenger} $\ast$messenger, int friend\+\_\+num)
\item 
void \hyperlink{rtp_8h_a8e1f9ce4d45738658914f4ef7c3144bc}{rtp\+\_\+kill} (\hyperlink{rtp_8h_aecafd8fd6e485ceb09747d50703bcd06}{R\+T\+P\+Session} $\ast$session, \hyperlink{struct_messenger}{Messenger} $\ast$messenger)
\item 
int \hyperlink{rtp_8h_a061d9b8e8abbcfb87d365bf65297e3f3}{rtp\+\_\+send\+\_\+msg} (\hyperlink{rtp_8h_aecafd8fd6e485ceb09747d50703bcd06}{R\+T\+P\+Session} $\ast$session, \hyperlink{struct_messenger}{Messenger} $\ast$messenger, const uint8\+\_\+t $\ast$data, uint16\+\_\+t length)
\item 
void \hyperlink{rtp_8h_a19cbf4e4c2831f2e162e7580bb7d5c7b}{rtp\+\_\+free\+\_\+msg} (\hyperlink{rtp_8h_aecafd8fd6e485ceb09747d50703bcd06}{R\+T\+P\+Session} $\ast$session, \hyperlink{rtp_8h_ab98525fe7a493c34d9dc586aa5b029b6}{R\+T\+P\+Message} $\ast$msg)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{rtp_8h_ac552c225344e6f60cbadb539fe35e6f5}{\index{rtp.\+h@{rtp.\+h}!M\+A\+X\+\_\+\+R\+T\+P\+\_\+\+S\+I\+Z\+E@{M\+A\+X\+\_\+\+R\+T\+P\+\_\+\+S\+I\+Z\+E}}
\index{M\+A\+X\+\_\+\+R\+T\+P\+\_\+\+S\+I\+Z\+E@{M\+A\+X\+\_\+\+R\+T\+P\+\_\+\+S\+I\+Z\+E}!rtp.\+h@{rtp.\+h}}
\subsubsection[{M\+A\+X\+\_\+\+R\+T\+P\+\_\+\+S\+I\+Z\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+\_\+\+R\+T\+P\+\_\+\+S\+I\+Z\+E~65535}}\label{rtp_8h_ac552c225344e6f60cbadb539fe35e6f5}


Definition at line 32 of file rtp.\+h.



Referenced by msg\+\_\+parse().

\hypertarget{rtp_8h_a6589e5f4f8f3704233241df1982867a7}{\index{rtp.\+h@{rtp.\+h}!M\+A\+X\+\_\+\+S\+E\+Q\+U\+\_\+\+N\+U\+M@{M\+A\+X\+\_\+\+S\+E\+Q\+U\+\_\+\+N\+U\+M}}
\index{M\+A\+X\+\_\+\+S\+E\+Q\+U\+\_\+\+N\+U\+M@{M\+A\+X\+\_\+\+S\+E\+Q\+U\+\_\+\+N\+U\+M}!rtp.\+h@{rtp.\+h}}
\subsubsection[{M\+A\+X\+\_\+\+S\+E\+Q\+U\+\_\+\+N\+U\+M}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+\_\+\+S\+E\+Q\+U\+\_\+\+N\+U\+M~65535}}\label{rtp_8h_a6589e5f4f8f3704233241df1982867a7}


Definition at line 31 of file rtp.\+h.



Referenced by rtp\+\_\+send\+\_\+msg().

\hypertarget{rtp_8h_a45dc32aa4b3075cfa01349a743c52d54}{\index{rtp.\+h@{rtp.\+h}!R\+T\+P\+\_\+\+V\+E\+R\+S\+I\+O\+N@{R\+T\+P\+\_\+\+V\+E\+R\+S\+I\+O\+N}}
\index{R\+T\+P\+\_\+\+V\+E\+R\+S\+I\+O\+N@{R\+T\+P\+\_\+\+V\+E\+R\+S\+I\+O\+N}!rtp.\+h@{rtp.\+h}}
\subsubsection[{R\+T\+P\+\_\+\+V\+E\+R\+S\+I\+O\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+T\+P\+\_\+\+V\+E\+R\+S\+I\+O\+N~2}}\label{rtp_8h_a45dc32aa4b3075cfa01349a743c52d54}
\hyperlink{rtp_8h}{rtp.\+h}

Copyright (C) 2013 Tox project All Rights Reserved.

This file is part of Tox.

Tox is free software\+: you can redistribute it and/or modify it under the terms of the G\+N\+U General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

Tox is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+U\+T A\+N\+Y W\+A\+R\+R\+A\+N\+T\+Y; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+T\+Y or F\+I\+T\+N\+E\+S\+S F\+O\+R A P\+A\+R\+T\+I\+C\+U\+L\+A\+R P\+U\+R\+P\+O\+S\+E. See the G\+N\+U General Public License for more details.

You should have received a copy of the G\+N\+U General Public License along with Tox. If not, see \href{http://www.gnu.org/licenses/}{\tt http\+://www.\+gnu.\+org/licenses/}. 

Definition at line 25 of file rtp.\+h.



Referenced by extract\+\_\+header(), and rtp\+\_\+new().



\subsection{Typedef Documentation}
\hypertarget{rtp_8h_ab384df54f92f379aa578740b96a3aaaa}{\index{rtp.\+h@{rtp.\+h}!R\+T\+P\+Ext\+Header@{R\+T\+P\+Ext\+Header}}
\index{R\+T\+P\+Ext\+Header@{R\+T\+P\+Ext\+Header}!rtp.\+h@{rtp.\+h}}
\subsubsection[{R\+T\+P\+Ext\+Header}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf \+\_\+\+R\+T\+P\+Ext\+Header}  {\bf R\+T\+P\+Ext\+Header}}}\label{rtp_8h_ab384df54f92f379aa578740b96a3aaaa}
Standard rtp extension header. \hypertarget{rtp_8h_a75f2f434fb40aaadc6665cb0c9010e49}{\index{rtp.\+h@{rtp.\+h}!R\+T\+P\+Header@{R\+T\+P\+Header}}
\index{R\+T\+P\+Header@{R\+T\+P\+Header}!rtp.\+h@{rtp.\+h}}
\subsubsection[{R\+T\+P\+Header}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf \+\_\+\+R\+T\+P\+Header}  {\bf R\+T\+P\+Header}}}\label{rtp_8h_a75f2f434fb40aaadc6665cb0c9010e49}
Standard rtp header \hypertarget{rtp_8h_ab98525fe7a493c34d9dc586aa5b029b6}{\index{rtp.\+h@{rtp.\+h}!R\+T\+P\+Message@{R\+T\+P\+Message}}
\index{R\+T\+P\+Message@{R\+T\+P\+Message}!rtp.\+h@{rtp.\+h}}
\subsubsection[{R\+T\+P\+Message}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf \+\_\+\+R\+T\+P\+Message}  {\bf R\+T\+P\+Message}}}\label{rtp_8h_ab98525fe7a493c34d9dc586aa5b029b6}
Standard rtp message. \hypertarget{rtp_8h_aecafd8fd6e485ceb09747d50703bcd06}{\index{rtp.\+h@{rtp.\+h}!R\+T\+P\+Session@{R\+T\+P\+Session}}
\index{R\+T\+P\+Session@{R\+T\+P\+Session}!rtp.\+h@{rtp.\+h}}
\subsubsection[{R\+T\+P\+Session}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf \+\_\+\+R\+T\+P\+Session}  {\bf R\+T\+P\+Session}}}\label{rtp_8h_aecafd8fd6e485ceb09747d50703bcd06}
R\+T\+P control session. 

\subsection{Enumeration Type Documentation}
\hypertarget{rtp_8h_a56286b35c8585dd1525c8efca234e6df}{\index{rtp.\+h@{rtp.\+h}!R\+T\+P\+Error@{R\+T\+P\+Error}}
\index{R\+T\+P\+Error@{R\+T\+P\+Error}!rtp.\+h@{rtp.\+h}}
\subsubsection[{R\+T\+P\+Error}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf R\+T\+P\+Error}}}\label{rtp_8h_a56286b35c8585dd1525c8efca234e6df}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{rtp\+\_\+\+Error\+Sending@{rtp\+\_\+\+Error\+Sending}!rtp.\+h@{rtp.\+h}}\index{rtp.\+h@{rtp.\+h}!rtp\+\_\+\+Error\+Sending@{rtp\+\_\+\+Error\+Sending}}\item[{\em 
\hypertarget{rtp_8h_a56286b35c8585dd1525c8efca234e6dfa6db3c1377fbdf6fcedfeb8c1b2fc8b11}{rtp\+\_\+\+Error\+Sending}\label{rtp_8h_a56286b35c8585dd1525c8efca234e6dfa6db3c1377fbdf6fcedfeb8c1b2fc8b11}
}]\end{description}
\end{Desc}


Definition at line 34 of file rtp.\+h.


\begin{DoxyCode}
34              \{
35     \hyperlink{rtp_8h_a56286b35c8585dd1525c8efca234e6dfa6db3c1377fbdf6fcedfeb8c1b2fc8b11}{rtp\_ErrorSending} = -40
36 \} \hyperlink{rtp_8h_a56286b35c8585dd1525c8efca234e6df}{RTPError};
\end{DoxyCode}


\subsection{Function Documentation}
\hypertarget{rtp_8h_a19cbf4e4c2831f2e162e7580bb7d5c7b}{\index{rtp.\+h@{rtp.\+h}!rtp\+\_\+free\+\_\+msg@{rtp\+\_\+free\+\_\+msg}}
\index{rtp\+\_\+free\+\_\+msg@{rtp\+\_\+free\+\_\+msg}!rtp.\+h@{rtp.\+h}}
\subsubsection[{rtp\+\_\+free\+\_\+msg}]{\setlength{\rightskip}{0pt plus 5cm}void rtp\+\_\+free\+\_\+msg (
\begin{DoxyParamCaption}
\item[{{\bf R\+T\+P\+Session} $\ast$}]{session, }
\item[{{\bf R\+T\+P\+Message} $\ast$}]{msg}
\end{DoxyParamCaption}
)}}\label{rtp_8h_a19cbf4e4c2831f2e162e7580bb7d5c7b}
Dealloc msg. 

Definition at line 446 of file rtp.\+c.



References \+\_\+\+R\+T\+P\+Message\+::ext\+\_\+header, \+\_\+\+R\+T\+P\+Session\+::ext\+\_\+header, \+\_\+\+R\+T\+P\+Message\+::header, and \+\_\+\+R\+T\+P\+Ext\+Header\+::table.



Referenced by cs\+\_\+do(), jbuf\+\_\+clear(), msg\+\_\+parse(), queue\+\_\+message(), and rtp\+\_\+send\+\_\+msg().


\begin{DoxyCode}
447 \{
448     \textcolor{keywordflow}{if} ( !session ) \{
449         \textcolor{keywordflow}{if} ( msg->\hyperlink{struct___r_t_p_message_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header} ) \{
450             free ( msg->\hyperlink{struct___r_t_p_message_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header}->\hyperlink{struct___r_t_p_ext_header_a05be6af94bcc30c135e4b6089bf9cfd9}{table} );
451             free ( msg->\hyperlink{struct___r_t_p_message_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header} );
452         \}
453     \} \textcolor{keywordflow}{else} \{
454         \textcolor{keywordflow}{if} ( msg->\hyperlink{struct___r_t_p_message_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header} && session->\hyperlink{struct___r_t_p_session_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header} != msg->
      \hyperlink{struct___r_t_p_message_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header} ) \{
455             free ( msg->\hyperlink{struct___r_t_p_message_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header}->\hyperlink{struct___r_t_p_ext_header_a05be6af94bcc30c135e4b6089bf9cfd9}{table} );
456             free ( msg->\hyperlink{struct___r_t_p_message_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header} );
457         \}
458     \}
459 
460     free ( msg->\hyperlink{struct___r_t_p_message_afa0aee0d9eab5781c753943ec6a37584}{header} );
461     free ( msg );
462 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc1/rtp_8h_a19cbf4e4c2831f2e162e7580bb7d5c7b_icgraph}
\end{center}
\end{figure}


\hypertarget{rtp_8h_a8e1f9ce4d45738658914f4ef7c3144bc}{\index{rtp.\+h@{rtp.\+h}!rtp\+\_\+kill@{rtp\+\_\+kill}}
\index{rtp\+\_\+kill@{rtp\+\_\+kill}!rtp.\+h@{rtp.\+h}}
\subsubsection[{rtp\+\_\+kill}]{\setlength{\rightskip}{0pt plus 5cm}void rtp\+\_\+kill (
\begin{DoxyParamCaption}
\item[{{\bf R\+T\+P\+Session} $\ast$}]{session, }
\item[{{\bf Messenger} $\ast$}]{messenger}
\end{DoxyParamCaption}
)}}\label{rtp_8h_a8e1f9ce4d45738658914f4ef7c3144bc}
Terminate the session. 

Definition at line 514 of file rtp.\+c.



References \+\_\+\+R\+T\+P\+Session\+::csrc, \+\_\+\+R\+T\+P\+Session\+::dest, \+\_\+\+R\+T\+P\+Session\+::ext\+\_\+header, L\+O\+G\+G\+E\+R\+\_\+\+D\+E\+B\+U\+G, m\+\_\+callback\+\_\+rtp\+\_\+packet(), and \+\_\+\+R\+T\+P\+Session\+::prefix.



Referenced by toxav\+\_\+kill(), toxav\+\_\+kill\+\_\+transmission(), and toxav\+\_\+prepare\+\_\+transmission().


\begin{DoxyCode}
515 \{
516     \textcolor{keywordflow}{if} ( !session ) \textcolor{keywordflow}{return};
517 
518     \hyperlink{_messenger_8c_a536d47dbfa35fb02c78068e1d11a1d2a}{m\_callback\_rtp\_packet}(messenger, session->\hyperlink{struct___r_t_p_session_ae5163ff230abd4115d86194ad89467b5}{dest}, session->
      \hyperlink{struct___r_t_p_session_acf4a7a7457f3d922d7118075fc1a300b}{prefix}, NULL, NULL);
519 
520     free ( session->\hyperlink{struct___r_t_p_session_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header} );
521     free ( session->\hyperlink{struct___r_t_p_session_a8bbd14e68a057e6de8ba3fa4c6afd4fa}{csrc} );
522 
523     \hyperlink{logger_8h_a9885ca09ce5f94d936c91a5b0856a024}{LOGGER\_DEBUG}(\textcolor{stringliteral}{"Terminated RTP session: %p"}, session);
524 
525     \textcolor{comment}{/* And finally free session */}
526     free ( session );
527 
528 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc1/rtp_8h_a8e1f9ce4d45738658914f4ef7c3144bc_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc1/rtp_8h_a8e1f9ce4d45738658914f4ef7c3144bc_icgraph}
\end{center}
\end{figure}


\hypertarget{rtp_8h_acda914088783d9822cdafdedf8fadd65}{\index{rtp.\+h@{rtp.\+h}!rtp\+\_\+new@{rtp\+\_\+new}}
\index{rtp\+\_\+new@{rtp\+\_\+new}!rtp.\+h@{rtp.\+h}}
\subsubsection[{rtp\+\_\+new}]{\setlength{\rightskip}{0pt plus 5cm}{\bf R\+T\+P\+Session}$\ast$ rtp\+\_\+new (
\begin{DoxyParamCaption}
\item[{int}]{payload\+\_\+type, }
\item[{{\bf Messenger} $\ast$}]{messenger, }
\item[{int}]{friend\+\_\+num}
\end{DoxyParamCaption}
)}}\label{rtp_8h_acda914088783d9822cdafdedf8fadd65}
Must be called before calling any other rtp function. 

Definition at line 464 of file rtp.\+c.



References \+\_\+\+R\+T\+P\+Session\+::cc, \+\_\+\+R\+T\+P\+Session\+::csrc, \+\_\+\+R\+T\+P\+Session\+::dest, \+\_\+\+R\+T\+P\+Session\+::ext\+\_\+header, \+\_\+\+R\+T\+P\+Session\+::extension, L\+O\+G\+G\+E\+R\+\_\+\+D\+E\+B\+U\+G, L\+O\+G\+G\+E\+R\+\_\+\+E\+R\+R\+O\+R, L\+O\+G\+G\+E\+R\+\_\+\+W\+A\+R\+N\+I\+N\+G, m\+\_\+callback\+\_\+rtp\+\_\+packet(), \+\_\+\+R\+T\+P\+Session\+::marker, \+\_\+\+R\+T\+P\+Session\+::padding, \+\_\+\+R\+T\+P\+Session\+::payload\+\_\+type, \+\_\+\+R\+T\+P\+Session\+::prefix, random\+\_\+int(), \+\_\+\+R\+T\+P\+Session\+::rsequnum, rtp\+\_\+handle\+\_\+packet(), R\+T\+P\+\_\+\+V\+E\+R\+S\+I\+O\+N, \+\_\+\+R\+T\+P\+Session\+::sequnum, \+\_\+\+R\+T\+P\+Session\+::ssrc, and \+\_\+\+R\+T\+P\+Session\+::version.



Referenced by toxav\+\_\+prepare\+\_\+transmission().


\begin{DoxyCode}
465 \{
466     \hyperlink{struct___r_t_p_session}{RTPSession} *retu = calloc(1, \textcolor{keyword}{sizeof}(\hyperlink{struct___r_t_p_session}{RTPSession}));
467 
468     \textcolor{keywordflow}{if} ( !retu ) \{
469         \hyperlink{logger_8h_ab3e970f3c1ecb5b71f17eccee4ebb286}{LOGGER\_WARNING}(\textcolor{stringliteral}{"Alloc failed! Program might misbehave!"});
470         \textcolor{keywordflow}{return} NULL;
471     \}
472 
473     \textcolor{keywordflow}{if} ( -1 == \hyperlink{_messenger_8c_a536d47dbfa35fb02c78068e1d11a1d2a}{m\_callback\_rtp\_packet}(messenger, friend\_num, payload\_type, 
      \hyperlink{rtp_8c_af21bf57a274e3ff7de54f331ab03fbbc}{rtp\_handle\_packet}, retu)) \{
474         \hyperlink{logger_8h_aedad6a1e3ffe0d4cd0992b822ec0eeeb}{LOGGER\_ERROR}(\textcolor{stringliteral}{"Error setting custom register handler for rtp session"});
475         free(retu);
476         \textcolor{keywordflow}{return} NULL;
477     \}
478 
479     \hyperlink{logger_8h_a9885ca09ce5f94d936c91a5b0856a024}{LOGGER\_DEBUG}(\textcolor{stringliteral}{"Registered packet handler: pt: %d; fid: %d"}, payload\_type, friend\_num);
480 
481     retu->\hyperlink{struct___r_t_p_session_ab22abc2906422da61885ac6c8e6a1a59}{version}   = \hyperlink{rtp_8h_a45dc32aa4b3075cfa01349a743c52d54}{RTP\_VERSION};   \textcolor{comment}{/* It's always 2 */}
482     retu->\hyperlink{struct___r_t_p_session_a78a52d3de83ec4d91a7746456627089f}{padding}   = 0;             \textcolor{comment}{/* If some additional data is needed about the packet */}
483     retu->\hyperlink{struct___r_t_p_session_a91c592cf70c61ba0788394767185be4c}{extension} = 0;           \textcolor{comment}{/* If extension to header is needed */}
484     retu->\hyperlink{struct___r_t_p_session_a622e15900f3d90f1391cf9812d1a8078}{cc}        = 1;           \textcolor{comment}{/* Amount of contributors */}
485     retu->\hyperlink{struct___r_t_p_session_a8bbd14e68a057e6de8ba3fa4c6afd4fa}{csrc}      = NULL;        \textcolor{comment}{/* Container */}
486     retu->\hyperlink{struct___r_t_p_session_a7728cdfcf33cc14c0d7ba2dcdcbcdf2e}{ssrc}      = \hyperlink{crypto__core_8c_a5f13cbe4c46d8801e2c7467068f87306}{random\_int}();
487     retu->\hyperlink{struct___r_t_p_session_ae00c35797c92d6f67470b088dc2c1876}{marker}    = 0;
488     retu->\hyperlink{struct___r_t_p_session_a9cdef377149cce5efd90b1e60596573a}{payload\_type} = payload\_type % 128;
489 
490     retu->\hyperlink{struct___r_t_p_session_ae5163ff230abd4115d86194ad89467b5}{dest} = friend\_num;
491 
492     retu->\hyperlink{struct___r_t_p_session_a1bef56c38f8d3bc3ab5d381e11c29d0d}{rsequnum} = retu->\hyperlink{struct___r_t_p_session_afe208c7dec97b8f61e08094e61bf096e}{sequnum} = 0;
493 
494     retu->\hyperlink{struct___r_t_p_session_aa0a69d899b1bee283ae1490f53bcd073}{ext\_header} = NULL; \textcolor{comment}{/* When needed allocate */}
495 
496 
497     \textcolor{keywordflow}{if} ( !(retu->\hyperlink{struct___r_t_p_session_a8bbd14e68a057e6de8ba3fa4c6afd4fa}{csrc} = calloc(1, \textcolor{keyword}{sizeof} (uint32\_t))) ) \{
498         \hyperlink{logger_8h_ab3e970f3c1ecb5b71f17eccee4ebb286}{LOGGER\_WARNING}(\textcolor{stringliteral}{"Alloc failed! Program might misbehave!"});
499         free(retu);
500         \textcolor{keywordflow}{return} NULL;
501     \}
502 
503     retu->\hyperlink{struct___r_t_p_session_a8bbd14e68a057e6de8ba3fa4c6afd4fa}{csrc}[0] = retu->\hyperlink{struct___r_t_p_session_a7728cdfcf33cc14c0d7ba2dcdcbcdf2e}{ssrc}; \textcolor{comment}{/* Set my ssrc to the list receive */}
504 
505     \textcolor{comment}{/* Also set payload type as prefix */}
506     retu->\hyperlink{struct___r_t_p_session_acf4a7a7457f3d922d7118075fc1a300b}{prefix} = payload\_type;
507 
508     \textcolor{comment}{/*}
509 \textcolor{comment}{     *}
510 \textcolor{comment}{     */}
511     \textcolor{keywordflow}{return} retu;
512 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc1/rtp_8h_acda914088783d9822cdafdedf8fadd65_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc1/rtp_8h_acda914088783d9822cdafdedf8fadd65_icgraph}
\end{center}
\end{figure}


\hypertarget{rtp_8h_a061d9b8e8abbcfb87d365bf65297e3f3}{\index{rtp.\+h@{rtp.\+h}!rtp\+\_\+send\+\_\+msg@{rtp\+\_\+send\+\_\+msg}}
\index{rtp\+\_\+send\+\_\+msg@{rtp\+\_\+send\+\_\+msg}!rtp.\+h@{rtp.\+h}}
\subsubsection[{rtp\+\_\+send\+\_\+msg}]{\setlength{\rightskip}{0pt plus 5cm}int rtp\+\_\+send\+\_\+msg (
\begin{DoxyParamCaption}
\item[{{\bf R\+T\+P\+Session} $\ast$}]{session, }
\item[{{\bf Messenger} $\ast$}]{messenger, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{uint16\+\_\+t}]{length}
\end{DoxyParamCaption}
)}}\label{rtp_8h_a061d9b8e8abbcfb87d365bf65297e3f3}
Sends msg to \hyperlink{struct___r_t_p_session_ae5163ff230abd4115d86194ad89467b5}{\+\_\+\+R\+T\+P\+Session\+::dest} 

Definition at line 425 of file rtp.\+c.



References \+\_\+\+R\+T\+P\+Message\+::data, \+\_\+\+R\+T\+P\+Session\+::dest, \+\_\+\+R\+T\+P\+Message\+::length, L\+O\+G\+G\+E\+R\+\_\+\+W\+A\+R\+N\+I\+N\+G, M\+A\+X\+\_\+\+S\+E\+Q\+U\+\_\+\+N\+U\+M, rtp\+\_\+\+Error\+Sending, rtp\+\_\+free\+\_\+msg(), rtp\+\_\+new\+\_\+message(), send\+\_\+custom\+\_\+lossy\+\_\+packet(), and \+\_\+\+R\+T\+P\+Session\+::sequnum.



Referenced by toxav\+\_\+send\+\_\+rtp\+\_\+payload().


\begin{DoxyCode}
426 \{
427     \hyperlink{struct___r_t_p_message}{RTPMessage} *msg = \hyperlink{rtp_8c_a260a2df3b1d5071548a248619342c45c}{rtp\_new\_message} (session, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, length);
428 
429     \textcolor{keywordflow}{if} ( !msg ) \textcolor{keywordflow}{return} -1;
430 
431     \textcolor{keywordtype}{int} ret = \hyperlink{_messenger_8c_a2ebb5527b47fb87384093c4aa3c384c0}{send\_custom\_lossy\_packet}(messenger, session->
      \hyperlink{struct___r_t_p_session_ae5163ff230abd4115d86194ad89467b5}{dest}, msg->\hyperlink{struct___r_t_p_message_a89f8083b50c7cef74e96797bb74f8757}{data}, msg->\hyperlink{struct___r_t_p_message_aebb70c2aab3407a9f05334c47131a43b}{length});
432 
433     \textcolor{keywordflow}{if} ( 0 !=  ret) \{
434         \hyperlink{logger_8h_ab3e970f3c1ecb5b71f17eccee4ebb286}{LOGGER\_WARNING}(\textcolor{stringliteral}{"Failed to send full packet (len: %d)! error: %i"}, length, ret);
435         \hyperlink{rtp_8c_a19cbf4e4c2831f2e162e7580bb7d5c7b}{rtp\_free\_msg} ( session, msg );
436         \textcolor{keywordflow}{return} \hyperlink{rtp_8h_a56286b35c8585dd1525c8efca234e6dfa6db3c1377fbdf6fcedfeb8c1b2fc8b11}{rtp\_ErrorSending};
437     \}
438 
439     \textcolor{comment}{/* Set sequ number */}
440     session->\hyperlink{struct___r_t_p_session_afe208c7dec97b8f61e08094e61bf096e}{sequnum} = session->\hyperlink{struct___r_t_p_session_afe208c7dec97b8f61e08094e61bf096e}{sequnum} >= \hyperlink{rtp_8h_a6589e5f4f8f3704233241df1982867a7}{MAX\_SEQU\_NUM} ? 0 : session->
      \hyperlink{struct___r_t_p_session_afe208c7dec97b8f61e08094e61bf096e}{sequnum} + 1;
441     \hyperlink{rtp_8c_a19cbf4e4c2831f2e162e7580bb7d5c7b}{rtp\_free\_msg} ( session, msg );
442 
443     \textcolor{keywordflow}{return} 0;
444 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc1/rtp_8h_a061d9b8e8abbcfb87d365bf65297e3f3_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc1/rtp_8h_a061d9b8e8abbcfb87d365bf65297e3f3_icgraph}
\end{center}
\end{figure}


