\hypertarget{irc__syncbot_8c}{\section{testing/irc\+\_\+syncbot.c File Reference}
\label{irc__syncbot_8c}\index{testing/irc\+\_\+syncbot.\+c@{testing/irc\+\_\+syncbot.\+c}}
}
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdint.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$time.\+h$>$}\\*
{\ttfamily \#include $<$fcntl.\+h$>$}\\*
{\ttfamily \#include $<$sys/socket.\+h$>$}\\*
{\ttfamily \#include $<$netinet/in.\+h$>$}\\*
{\ttfamily \#include $<$arpa/inet.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include $<$sys/time.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include $<$netdb.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$sys/ioctl.\+h$>$}\\*
{\ttfamily \#include \char`\"{}../toxcore/tox.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}misc\+\_\+tools.\+c\char`\"{}}\\*
Include dependency graph for irc\+\_\+syncbot.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d94/irc__syncbot_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{irc__syncbot_8c_ab9e639c4228f7dd991003b0a7621d612}{I\+R\+C\+\_\+\+N\+A\+M\+E}~\char`\"{}Tox\+\_\+syncbot\char`\"{}
\item 
\#define \hyperlink{irc__syncbot_8c_a3b649ec09ef22e5f8be3a03613b85acc}{I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L}~\char`\"{}\#tox-\/real-\/ontopic\char`\"{}
\item 
\#define \hyperlink{irc__syncbot_8c_a3971be0455ed437a30b47dacf0f9a78c}{S\+I\+L\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+U\+T}~20
\item 
\#define \hyperlink{irc__syncbot_8c_a48e81c79f3062741c646c2677f32c8e2}{S\+E\+R\+V\+E\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T}~\char`\"{}N\+I\+C\+K \char`\"{}I\+R\+C\+\_\+\+N\+A\+M\+E\char`\"{}\textbackslash{}n\+U\+S\+E\+R \char`\"{}I\+R\+C\+\_\+\+N\+A\+M\+E\char`\"{} 8 $\ast$ \+:\char`\"{}\hyperlink{irc__syncbot_8c_ab9e639c4228f7dd991003b0a7621d612}{I\+R\+C\+\_\+\+N\+A\+M\+E}\char`\"{}\textbackslash{}n\char`\"{}
\item 
\#define \hyperlink{irc__syncbot_8c_a4bed8045c7e5072fd4aff07d7d0a3bad}{C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N}~\char`\"{}J\+O\+I\+N \char`\"{}I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L\char`\"{}\textbackslash{}n\char`\"{}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
uint64\+\_\+t \hyperlink{irc__syncbot_8c_ae8ecaef140b786a2720eadbb85918e81}{current\+\_\+time\+\_\+monotonic} (void)
\item 
uint64\+\_\+t \hyperlink{irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f}{get\+\_\+monotime\+\_\+sec} (void)
\item 
int \hyperlink{irc__syncbot_8c_afc593b19c9f082eca0a05ed1b7b67a30}{reconnect} (void)
\item 
static void \hyperlink{irc__syncbot_8c_acfc0f8259fbefbcb0ca1256c6842e7d4}{callback\+\_\+group\+\_\+invite} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, int fid, uint8\+\_\+t type, const uint8\+\_\+t $\ast$data, uint16\+\_\+t length, void $\ast$userdata)
\item 
void \hyperlink{irc__syncbot_8c_ae3a0e6382b8d202501525dc6315bec08}{callback\+\_\+friend\+\_\+message} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, uint32\+\_\+t fid, \hyperlink{tox_8h_a362037c83fd908cecc44cb58ddd57fe0}{T\+O\+X\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+T\+Y\+P\+E} type, const uint8\+\_\+t $\ast$message, size\+\_\+t length, void $\ast$userdata)
\item 
static void \hyperlink{irc__syncbot_8c_a1bfcbadb201fb6cdae5d2fe879bd8043}{copy\+\_\+groupmessage} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, int groupnumber, int friendgroupnumber, const uint8\+\_\+t $\ast$message, uint16\+\_\+t length, void $\ast$userdata)
\item 
void \hyperlink{irc__syncbot_8c_a3205228d26a78d3cf02d4d60edd1fe0e}{send\+\_\+irc\+\_\+group} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, uint8\+\_\+t $\ast$msg, uint16\+\_\+t len)
\item 
\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$ \hyperlink{irc__syncbot_8c_a7a3ec256dab5cbac9fc01ff328980da7}{init\+\_\+tox} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\item 
int \hyperlink{irc__syncbot_8c_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \hyperlink{irc__syncbot_8c_ae81515e082f9bc33e8968181945586da}{ip} \mbox{[}4\mbox{]} = \{127, 0, 0, 1\}
\item 
uint16\+\_\+t \hyperlink{irc__syncbot_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = 6667
\item 
int \hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}
\item 
int \hyperlink{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}{current\+\_\+group} = -\/1
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{irc__syncbot_8c_a4bed8045c7e5072fd4aff07d7d0a3bad}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N@{C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N}}
\index{C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N@{C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N~\char`\"{}J\+O\+I\+N \char`\"{}I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L\char`\"{}\textbackslash{}n\char`\"{}}}\label{irc__syncbot_8c_a4bed8045c7e5072fd4aff07d7d0a3bad}


Definition at line 38 of file irc\+\_\+syncbot.\+c.



Referenced by callback\+\_\+friend\+\_\+message(), and main().

\hypertarget{irc__syncbot_8c_a3b649ec09ef22e5f8be3a03613b85acc}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L@{I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L}}
\index{I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L@{I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L~\char`\"{}\#tox-\/real-\/ontopic\char`\"{}}}\label{irc__syncbot_8c_a3b649ec09ef22e5f8be3a03613b85acc}


Definition at line 27 of file irc\+\_\+syncbot.\+c.



Referenced by copy\+\_\+groupmessage().

\hypertarget{irc__syncbot_8c_ab9e639c4228f7dd991003b0a7621d612}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!I\+R\+C\+\_\+\+N\+A\+M\+E@{I\+R\+C\+\_\+\+N\+A\+M\+E}}
\index{I\+R\+C\+\_\+\+N\+A\+M\+E@{I\+R\+C\+\_\+\+N\+A\+M\+E}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{I\+R\+C\+\_\+\+N\+A\+M\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+R\+C\+\_\+\+N\+A\+M\+E~\char`\"{}Tox\+\_\+syncbot\char`\"{}}}\label{irc__syncbot_8c_ab9e639c4228f7dd991003b0a7621d612}


Definition at line 26 of file irc\+\_\+syncbot.\+c.



Referenced by init\+\_\+tox().

\hypertarget{irc__syncbot_8c_a48e81c79f3062741c646c2677f32c8e2}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!S\+E\+R\+V\+E\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T@{S\+E\+R\+V\+E\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T}}
\index{S\+E\+R\+V\+E\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T@{S\+E\+R\+V\+E\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{S\+E\+R\+V\+E\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+E\+R\+V\+E\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T~\char`\"{}N\+I\+C\+K \char`\"{}I\+R\+C\+\_\+\+N\+A\+M\+E\char`\"{}\textbackslash{}n\+U\+S\+E\+R \char`\"{}I\+R\+C\+\_\+\+N\+A\+M\+E\char`\"{} 8 $\ast$ \+:\char`\"{}{\bf I\+R\+C\+\_\+\+N\+A\+M\+E}\char`\"{}\textbackslash{}n\char`\"{}}}\label{irc__syncbot_8c_a48e81c79f3062741c646c2677f32c8e2}


Definition at line 37 of file irc\+\_\+syncbot.\+c.



Referenced by reconnect().

\hypertarget{irc__syncbot_8c_a3971be0455ed437a30b47dacf0f9a78c}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!S\+I\+L\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+U\+T@{S\+I\+L\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+U\+T}}
\index{S\+I\+L\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+U\+T@{S\+I\+L\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+U\+T}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{S\+I\+L\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+U\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+I\+L\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+U\+T~20}}\label{irc__syncbot_8c_a3971be0455ed437a30b47dacf0f9a78c}


Definition at line 33 of file irc\+\_\+syncbot.\+c.



Referenced by main().



\subsection{Function Documentation}
\hypertarget{irc__syncbot_8c_ae3a0e6382b8d202501525dc6315bec08}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!callback\+\_\+friend\+\_\+message@{callback\+\_\+friend\+\_\+message}}
\index{callback\+\_\+friend\+\_\+message@{callback\+\_\+friend\+\_\+message}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{callback\+\_\+friend\+\_\+message}]{\setlength{\rightskip}{0pt plus 5cm}void callback\+\_\+friend\+\_\+message (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{uint32\+\_\+t}]{fid, }
\item[{{\bf T\+O\+X\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+T\+Y\+P\+E}}]{type, }
\item[{const uint8\+\_\+t $\ast$}]{message, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{irc__syncbot_8c_ae3a0e6382b8d202501525dc6315bec08}


Definition at line 92 of file irc\+\_\+syncbot.\+c.



References C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N, current\+\_\+group, sock, tox\+\_\+del\+\_\+groupchat(), and tox\+\_\+invite\+\_\+friend().



Referenced by init\+\_\+tox().


\begin{DoxyCode}
94 \{
95     \textcolor{keywordflow}{if} (length == 1 && *message == \textcolor{charliteral}{'c'}) \{
96         \textcolor{keywordflow}{if} (\hyperlink{tox__old_8h_a2a5c2f4bc3730d20bc784e512bc116b5}{tox\_del\_groupchat}(tox, \hyperlink{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}{current\_group}) == 0)
97             \hyperlink{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}{current\_group} = -1;
98     \}
99 
100     \textcolor{keywordflow}{if} (length == 1 && *message == \textcolor{charliteral}{'i'}) \{
101         \hyperlink{tox__old_8h_a2bd67904ced5532a1f83b8c0edc05756}{tox\_invite\_friend}(tox, fid, \hyperlink{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}{current\_group});
102     \}
103 
104     \textcolor{keywordflow}{if} (length == 1 && *message == \textcolor{charliteral}{'j'} && \hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock} >= 0) \{
105         send(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}, \hyperlink{irc__syncbot_8c_a4bed8045c7e5072fd4aff07d7d0a3bad}{CHANNEL\_JOIN}, \textcolor{keyword}{sizeof}(\hyperlink{irc__syncbot_8c_a4bed8045c7e5072fd4aff07d7d0a3bad}{CHANNEL\_JOIN}) - 1, MSG\_NOSIGNAL);
106     \}
107 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d11/irc__syncbot_8c_ae3a0e6382b8d202501525dc6315bec08_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d11/irc__syncbot_8c_ae3a0e6382b8d202501525dc6315bec08_icgraph}
\end{center}
\end{figure}


\hypertarget{irc__syncbot_8c_acfc0f8259fbefbcb0ca1256c6842e7d4}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!callback\+\_\+group\+\_\+invite@{callback\+\_\+group\+\_\+invite}}
\index{callback\+\_\+group\+\_\+invite@{callback\+\_\+group\+\_\+invite}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{callback\+\_\+group\+\_\+invite}]{\setlength{\rightskip}{0pt plus 5cm}static void callback\+\_\+group\+\_\+invite (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{int}]{fid, }
\item[{uint8\+\_\+t}]{type, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{uint16\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{irc__syncbot_8c_acfc0f8259fbefbcb0ca1256c6842e7d4}


Definition at line 86 of file irc\+\_\+syncbot.\+c.



References current\+\_\+group, and tox\+\_\+join\+\_\+groupchat().



Referenced by init\+\_\+tox().


\begin{DoxyCode}
87 \{
88     \textcolor{keywordflow}{if} (\hyperlink{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}{current\_group} == -1)
89         \hyperlink{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}{current\_group} = \hyperlink{tox__old_8h_a26cf750df10de88c8e5024db883fff97}{tox\_join\_groupchat}(tox, fid, 
      \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, length);
90 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d11/irc__syncbot_8c_acfc0f8259fbefbcb0ca1256c6842e7d4_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{db/d11/irc__syncbot_8c_acfc0f8259fbefbcb0ca1256c6842e7d4_icgraph}
\end{center}
\end{figure}


\hypertarget{irc__syncbot_8c_a1bfcbadb201fb6cdae5d2fe879bd8043}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!copy\+\_\+groupmessage@{copy\+\_\+groupmessage}}
\index{copy\+\_\+groupmessage@{copy\+\_\+groupmessage}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{copy\+\_\+groupmessage}]{\setlength{\rightskip}{0pt plus 5cm}static void copy\+\_\+groupmessage (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{int}]{groupnumber, }
\item[{int}]{friendgroupnumber, }
\item[{const uint8\+\_\+t $\ast$}]{message, }
\item[{uint16\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{irc__syncbot_8c_a1bfcbadb201fb6cdae5d2fe879bd8043}


Definition at line 109 of file irc\+\_\+syncbot.\+c.



References i, I\+R\+C\+\_\+\+C\+H\+A\+N\+N\+E\+L, sock, tox\+\_\+group\+\_\+peername(), tox\+\_\+group\+\_\+peernumber\+\_\+is\+\_\+ours(), and T\+O\+X\+\_\+\+M\+A\+X\+\_\+\+N\+A\+M\+E\+\_\+\+L\+E\+N\+G\+T\+H.



Referenced by init\+\_\+tox().


\begin{DoxyCode}
111 \{
112     \textcolor{keywordflow}{if} (\hyperlink{tox__old_8h_a5b1f49a6eab7d8d082c9aa5e493590c7}{tox\_group\_peernumber\_is\_ours}(tox, groupnumber, friendgroupnumber))
113         \textcolor{keywordflow}{return};
114 
115     uint8\_t name[\hyperlink{tox_8h_a09073daf2dcb9e1daf380983ebc4f5b5}{TOX\_MAX\_NAME\_LENGTH}];
116     \textcolor{keywordtype}{int} namelen = \hyperlink{tox__old_8h_ac7824c28f01fcdd068fe26c6e8b06413}{tox\_group\_peername}(tox, groupnumber, friendgroupnumber, name);
117 
118     \textcolor{keywordflow}{if} (namelen == 0 || namelen == -1) \{
119         memcpy(name, \textcolor{stringliteral}{"<unknown>"}, 9);
120         namelen = 9;
121     \}
122 
123     uint8\_t sendbuf[2048];
124     uint16\_t send\_len = 0;
125 
126     memcpy(sendbuf, \textcolor{stringliteral}{"PRIVMSG "}\hyperlink{irc__syncbot_8c_a3b649ec09ef22e5f8be3a03613b85acc}{IRC\_CHANNEL}\textcolor{stringliteral}{" :"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"PRIVMSG "}
      \hyperlink{irc__syncbot_8c_a3b649ec09ef22e5f8be3a03613b85acc}{IRC\_CHANNEL}\textcolor{stringliteral}{" :"}));
127     send\_len += \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"PRIVMSG "}\hyperlink{irc__syncbot_8c_a3b649ec09ef22e5f8be3a03613b85acc}{IRC\_CHANNEL}\textcolor{stringliteral}{" :"}) - 1;
128     memcpy(sendbuf + send\_len, name, namelen);
129     send\_len += namelen;
130     sendbuf[send\_len] = \textcolor{charliteral}{':'};
131     send\_len += 1;
132     sendbuf[send\_len] = \textcolor{charliteral}{' '};
133     send\_len += 1;
134     memcpy(sendbuf + send\_len, message, length);
135     send\_len += length;
136     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i};
137 
138     \textcolor{keywordflow}{for} (i = 0; i < send\_len; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
139         \textcolor{keywordflow}{if} (sendbuf[i] == \textcolor{charliteral}{'\(\backslash\)n'})
140             sendbuf[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = \textcolor{charliteral}{'|'};
141 
142         \textcolor{keywordflow}{if} (sendbuf[i] == 0)
143             sendbuf[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = \textcolor{charliteral}{' '};
144     \}
145 
146     sendbuf[send\_len] = \textcolor{charliteral}{'\(\backslash\)n'};
147     send\_len += 1;
148 
149     \textcolor{keywordflow}{if} (\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock} >= 0)
150         send(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}, sendbuf, send\_len, MSG\_NOSIGNAL);
151 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d11/irc__syncbot_8c_a1bfcbadb201fb6cdae5d2fe879bd8043_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=345pt]{db/d11/irc__syncbot_8c_a1bfcbadb201fb6cdae5d2fe879bd8043_icgraph}
\end{center}
\end{figure}


\hypertarget{irc__syncbot_8c_ae8ecaef140b786a2720eadbb85918e81}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!current\+\_\+time\+\_\+monotonic@{current\+\_\+time\+\_\+monotonic}}
\index{current\+\_\+time\+\_\+monotonic@{current\+\_\+time\+\_\+monotonic}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{current\+\_\+time\+\_\+monotonic}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t current\+\_\+time\+\_\+monotonic (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{irc__syncbot_8c_ae8ecaef140b786a2720eadbb85918e81}


Definition at line 233 of file network.\+c.



Referenced by build\+\_\+header(), get\+\_\+monotime\+\_\+sec(), handle\+\_\+data\+\_\+packet\+\_\+helper(), handle\+\_\+request\+\_\+packet(), logger\+\_\+new(), msi\+\_\+do(), reset\+\_\+max\+\_\+speed\+\_\+reached(), send\+\_\+crypto\+\_\+packets(), send\+\_\+lossless\+\_\+packet(), send\+\_\+requested\+\_\+packets(), send\+\_\+temp\+\_\+packet(), timer\+\_\+alloc(), toxav\+\_\+do(), and unix\+\_\+time\+\_\+update().


\begin{DoxyCode}
234 \{
235     uint64\_t time;
236 \textcolor{preprocessor}{#if defined(\_WIN32) || defined(\_\_WIN32\_\_) || defined (WIN32)}
237     time = (uint64\_t)GetTickCount() + add\_monotime;
238 
239     \textcolor{keywordflow}{if} (time < last\_monotime) \{ \textcolor{comment}{/* Prevent time from ever decreasing because of 32 bit wrap. */}
240         uint32\_t add = ~0;
241         add\_monotime += add;
242         time += add;
243     \}
244 
245     last\_monotime = time;
246 \textcolor{preprocessor}{#else}
247     \textcolor{keyword}{struct }timespec monotime;
248 \textcolor{preprocessor}{#if defined(\_\_linux\_\_) && defined(CLOCK\_MONOTONIC\_RAW)}
249     clock\_gettime(CLOCK\_MONOTONIC\_RAW, &monotime);
250 \textcolor{preprocessor}{#elif defined(\_\_APPLE\_\_)}
251     clock\_serv\_t muhclock;
252     mach\_timespec\_t machtime;
253 
254     host\_get\_clock\_service(mach\_host\_self(), SYSTEM\_CLOCK, &muhclock);
255     clock\_get\_time(muhclock, &machtime);
256     mach\_port\_deallocate(mach\_task\_self(), muhclock);
257 
258     monotime.tv\_sec = machtime.tv\_sec;
259     monotime.tv\_nsec = machtime.tv\_nsec;
260 \textcolor{preprocessor}{#else}
261     clock\_gettime(CLOCK\_MONOTONIC, &monotime);
262 \textcolor{preprocessor}{#endif}
263     time = 1000ULL * monotime.tv\_sec + (monotime.tv\_nsec / 1000000ULL);
264 \textcolor{preprocessor}{#endif}
265     \textcolor{keywordflow}{return} time;
266 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d11/irc__syncbot_8c_ae8ecaef140b786a2720eadbb85918e81_icgraph}
\end{center}
\end{figure}


\hypertarget{irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!get\+\_\+monotime\+\_\+sec@{get\+\_\+monotime\+\_\+sec}}
\index{get\+\_\+monotime\+\_\+sec@{get\+\_\+monotime\+\_\+sec}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{get\+\_\+monotime\+\_\+sec}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t get\+\_\+monotime\+\_\+sec (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f}


Definition at line 43 of file irc\+\_\+syncbot.\+c.



References current\+\_\+time\+\_\+monotonic().



Referenced by main().


\begin{DoxyCode}
44 \{
45     \textcolor{keywordflow}{return} \hyperlink{irc__syncbot_8c_ae8ecaef140b786a2720eadbb85918e81}{current\_time\_monotonic}() / 1000;
46 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=336pt]{db/d11/irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=253pt]{db/d11/irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f_icgraph}
\end{center}
\end{figure}


\hypertarget{irc__syncbot_8c_a7a3ec256dab5cbac9fc01ff328980da7}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!init\+\_\+tox@{init\+\_\+tox}}
\index{init\+\_\+tox@{init\+\_\+tox}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{init\+\_\+tox}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tox}$\ast$ init\+\_\+tox (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{irc__syncbot_8c_a7a3ec256dab5cbac9fc01ff328980da7}


Definition at line 211 of file irc\+\_\+syncbot.\+c.



References callback\+\_\+friend\+\_\+message(), callback\+\_\+group\+\_\+invite(), cmdline\+\_\+parsefor\+\_\+ipv46(), copy\+\_\+groupmessage(), hex\+\_\+string\+\_\+to\+\_\+bin(), I\+R\+C\+\_\+\+N\+A\+M\+E, num, port, printf(), tox\+\_\+bootstrap(), tox\+\_\+callback\+\_\+friend\+\_\+message(), tox\+\_\+callback\+\_\+group\+\_\+action(), tox\+\_\+callback\+\_\+group\+\_\+invite(), tox\+\_\+callback\+\_\+group\+\_\+message(), tox\+\_\+friend\+\_\+add(), tox\+\_\+new(), and tox\+\_\+self\+\_\+set\+\_\+name().



Referenced by main().


\begin{DoxyCode}
212 \{
213     uint8\_t ipv6enabled = 1; \textcolor{comment}{/* x */}
214     \textcolor{keywordtype}{int} argvoffset = \hyperlink{misc__tools_8c_a71e9fc36ac2daca56b990437704bd35f}{cmdline\_parsefor\_ipv46}(argc, argv, &ipv6enabled);
215 
216     \textcolor{keywordflow}{if} (argvoffset < 0)
217         exit(1);
218 
219     \textcolor{comment}{/* with optional --ipvx, now it can be 1-4 arguments... */}
220     \textcolor{keywordflow}{if} ((argc != argvoffset + 2) && (argc != argvoffset + 4)) \{
221         \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"Usage: %s [--ipv4|--ipv6] ip port public\_key (of the DHT bootstrap node)\(\backslash\)n"}, argv[0])
      ;
222         exit(0);
223     \}
224 
225     \hyperlink{struct_messenger}{Tox} *tox = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(0, 0);
226 
227     \textcolor{keywordflow}{if} (!tox)
228         exit(1);
229 
230     \hyperlink{tox_8c_ac90dc0473971f738b2149ea4e0d9c967}{tox\_self\_set\_name}(tox, (uint8\_t *)\hyperlink{irc__syncbot_8c_ab9e639c4228f7dd991003b0a7621d612}{IRC\_NAME}, \textcolor{keyword}{sizeof}(
      \hyperlink{irc__syncbot_8c_ab9e639c4228f7dd991003b0a7621d612}{IRC\_NAME}) - 1, 0);
231     \hyperlink{tox_8c_a31635691f5ee3ee6ee061215d18087ae}{tox\_callback\_friend\_message}(tox, &
      \hyperlink{irc__syncbot_8c_ae3a0e6382b8d202501525dc6315bec08}{callback\_friend\_message}, 0);
232     \hyperlink{tox__old_8h_a0e91e29f594d1ec9f00b5867644fe6ff}{tox\_callback\_group\_invite}(tox, &
      \hyperlink{irc__syncbot_8c_acfc0f8259fbefbcb0ca1256c6842e7d4}{callback\_group\_invite}, 0);
233     \hyperlink{tox__old_8h_a7c375955120a76b90ffad9c0ecf09cae}{tox\_callback\_group\_message}(tox, &\hyperlink{irc__syncbot_8c_a1bfcbadb201fb6cdae5d2fe879bd8043}{copy\_groupmessage}, 0);
234     \hyperlink{tox__old_8h_a50a2d459b84a49ebb3b30ed0c7c177ab}{tox\_callback\_group\_action}(tox, &\hyperlink{irc__syncbot_8c_a1bfcbadb201fb6cdae5d2fe879bd8043}{copy\_groupmessage}, 0);
235 
236     \textcolor{keywordtype}{char} temp\_id[128];
237     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"\(\backslash\)nEnter the address of irc\_syncbots master (38 bytes HEX format):\(\backslash\)n"});
238 
239     \textcolor{keywordflow}{if} (scanf(\textcolor{stringliteral}{"%s"}, temp\_id) != 1) \{
240         exit (1);
241     \}
242 
243     uint16\_t \hyperlink{irc__syncbot_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} = atoi(argv[argvoffset + 2]);
244     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *binary\_string = \hyperlink{misc__tools_8c_aff7dee3cea854d8a56b5a29f77910f96}{hex\_string\_to\_bin}(argv[argvoffset + 3]);
245     \hyperlink{tox_8c_ae7e49c1e9e6c3a0f9e55bfcb78044c1e}{tox\_bootstrap}(tox, argv[argvoffset + 1], port, binary\_string, 0);
246     free(binary\_string);
247 
248     uint8\_t *bin\_id = \hyperlink{misc__tools_8c_aff7dee3cea854d8a56b5a29f77910f96}{hex\_string\_to\_bin}(temp\_id);
249     uint32\_t \hyperlink{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}{num} = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox, bin\_id, (uint8\_t *)\textcolor{stringliteral}{"Install Gentoo"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"
      Install Gentoo"}) - 1, 0);
250     free(bin\_id);
251 
252     \textcolor{keywordflow}{if} (num == UINT32\_MAX) \{
253         \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"\(\backslash\)nSomething went wrong when adding friend.\(\backslash\)n"});
254         exit(1);
255     \}
256 
257     \textcolor{keywordflow}{return} tox;
258 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d11/irc__syncbot_8c_a7a3ec256dab5cbac9fc01ff328980da7_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{db/d11/irc__syncbot_8c_a7a3ec256dab5cbac9fc01ff328980da7_icgraph}
\end{center}
\end{figure}


\hypertarget{irc__syncbot_8c_a0ddf1224851353fc92bfbff6f499fa97}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!main@{main}}
\index{main@{main}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{irc__syncbot_8c_a0ddf1224851353fc92bfbff6f499fa97}


Definition at line 260 of file irc\+\_\+syncbot.\+c.



References C\+H\+A\+N\+N\+E\+L\+\_\+\+J\+O\+I\+N, make-\/funny-\/savefile\+::data, error, get\+\_\+monotime\+\_\+sec(), i, init\+\_\+tox(), printf(), reconnect(), send\+\_\+irc\+\_\+group(), S\+I\+L\+E\+N\+T\+\_\+\+T\+I\+M\+E\+O\+U\+T, sock, and tox\+\_\+iterate().


\begin{DoxyCode}
261 \{
262     \hyperlink{struct_messenger}{Tox} *tox = \hyperlink{irc__syncbot_8c_a7a3ec256dab5cbac9fc01ff328980da7}{init\_tox}(argc, argv);
263 
264     \hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock} = \hyperlink{irc__syncbot_8c_afc593b19c9f082eca0a05ed1b7b67a30}{reconnect}();
265 
266     \textcolor{keywordflow}{if} (\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock} < 0)
267         \textcolor{keywordflow}{return} 1;
268 
269     uint64\_t last\_get = \hyperlink{irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f}{get\_monotime\_sec}();
270     \textcolor{keywordtype}{int} connected = 0, ping\_sent = 0;
271 
272     \textcolor{keywordflow}{while} (1) \{
273         \textcolor{keywordtype}{int} count = 0;
274         ioctl(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}, FIONREAD, &count);
275 
276         \textcolor{keywordflow}{if} (count > 0) \{
277             last\_get = \hyperlink{irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f}{get\_monotime\_sec}();
278             ping\_sent = 0;
279             uint8\_t \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}[count + 1];
280             data[count] = 0;
281             recv(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}, data, count, MSG\_NOSIGNAL);
282             \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"%s"}, data);
283 
284             \textcolor{keywordflow}{if} (!connected)
285                 connected = 1;
286 
287             \textcolor{keywordflow}{if} (count > 6 && data[0] == \textcolor{charliteral}{'P'} && data[1] == \textcolor{charliteral}{'I'} && data[2] == \textcolor{charliteral}{'N'} && data[3] == \textcolor{charliteral}{'G'}) \{
288                 data[1] = \textcolor{charliteral}{'O'};
289                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i};
290 
291                 \textcolor{keywordflow}{for} (i = 0; i < count; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
292                     \textcolor{keywordflow}{if} (data[i] == \textcolor{charliteral}{'\(\backslash\)n'}) \{
293                         ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i};
294                         \textcolor{keywordflow}{break};
295                     \}
296                 \}
297 
298                 send(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}, data, i, MSG\_NOSIGNAL);
299             \}
300 
301             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}, p\_i = 0;
302 
303             \textcolor{keywordflow}{for} (i = 1; data[0] == \textcolor{charliteral}{':'} && i < count; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
304                 \textcolor{keywordflow}{if} (data[i] == \textcolor{charliteral}{' '}) \{
305                     \textcolor{keywordflow}{if} (i + 5 < count && memcmp(data + i, \textcolor{stringliteral}{" 404 "}, 5) == 0) \{
306                         connected = 1;
307                     \}
308 
309                     \textcolor{keywordflow}{break};
310                 \}
311 
312                 \textcolor{keywordflow}{if} (data[i] == \textcolor{charliteral}{':'})
313                     \textcolor{keywordflow}{break};
314             \}
315 
316             \textcolor{keywordflow}{for} (i = 0; i < count; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
317                 \textcolor{keywordflow}{if} (data[i] == \textcolor{charliteral}{'\(\backslash\)n'} && i != 0) \{
318                     \hyperlink{irc__syncbot_8c_a3205228d26a78d3cf02d4d60edd1fe0e}{send\_irc\_group}(tox, data + p\_i, i - p\_i);
319                     p\_i = i + 1;
320                 \}
321             \}
322         \}
323 
324         \textcolor{keywordflow}{if} (connected == 1) \{
325             send(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}, \hyperlink{irc__syncbot_8c_a4bed8045c7e5072fd4aff07d7d0a3bad}{CHANNEL\_JOIN}, \textcolor{keyword}{sizeof}(\hyperlink{irc__syncbot_8c_a4bed8045c7e5072fd4aff07d7d0a3bad}{CHANNEL\_JOIN}) - 1, MSG\_NOSIGNAL);
326             connected = 2;
327         \}
328 
329         \textcolor{keywordflow}{if} (!ping\_sent && last\_get + (\hyperlink{irc__syncbot_8c_a3971be0455ed437a30b47dacf0f9a78c}{SILENT\_TIMEOUT} / 2) < 
      \hyperlink{irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f}{get\_monotime\_sec}()) \{
330             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} p\_s = \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"PING :test\(\backslash\)n"}) - 1;
331 
332             \textcolor{keywordflow}{if} (send(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}, \textcolor{stringliteral}{"PING :test\(\backslash\)n"}, p\_s, MSG\_NOSIGNAL) == p\_s)
333                 ping\_sent = 1;
334         \}
335 
336         \textcolor{keywordtype}{int} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error} = 0;
337         socklen\_t len = \textcolor{keyword}{sizeof} (\hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error});
338 
339         \textcolor{keywordflow}{if} (\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock} < 0 || last\_get + \hyperlink{irc__syncbot_8c_a3971be0455ed437a30b47dacf0f9a78c}{SILENT\_TIMEOUT} < 
      \hyperlink{irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f}{get\_monotime\_sec}()
340                 || getsockopt(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock}, SOL\_SOCKET, SO\_ERROR, &error, &len ) != 0) \{
341             close(\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock});
342             \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"reconnect\(\backslash\)n"});
343             \hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock} = \hyperlink{irc__syncbot_8c_afc593b19c9f082eca0a05ed1b7b67a30}{reconnect}();
344 
345             \textcolor{keywordflow}{if} (\hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock} >= 0) \{
346                 last\_get = \hyperlink{irc__syncbot_8c_a47cadb15bd0cc1802c53a0a7c773db6f}{get\_monotime\_sec}();
347                 connected = 0;
348                 ping\_sent = 0;
349             \}
350         \}
351 
352         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox);
353         usleep(1000 * 50);
354     \}
355 
356     \textcolor{keywordflow}{return} 0;
357 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d11/irc__syncbot_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph}
\end{center}
\end{figure}


\hypertarget{irc__syncbot_8c_afc593b19c9f082eca0a05ed1b7b67a30}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!reconnect@{reconnect}}
\index{reconnect@{reconnect}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{reconnect}]{\setlength{\rightskip}{0pt plus 5cm}int reconnect (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{irc__syncbot_8c_afc593b19c9f082eca0a05ed1b7b67a30}


Definition at line 48 of file irc\+\_\+syncbot.\+c.



References ip, port, printf(), S\+E\+R\+V\+E\+R\+\_\+\+C\+O\+N\+N\+E\+C\+T, and sock.



Referenced by main().


\begin{DoxyCode}
49 \{
50     \textcolor{keywordtype}{int} \hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock} = \hyperlink{namespacesocket}{socket}(AF\_INET, SOCK\_STREAM, IPPROTO\_TCP);
51 
52     \textcolor{keywordflow}{if} (sock < 0) \{
53         \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"error socket\(\backslash\)n"});
54         \textcolor{keywordflow}{return} -1;
55     \}
56 
57     \textcolor{keyword}{struct }sockaddr\_storage addr = \{0\};
58 
59     \textcolor{keywordtype}{size\_t} addrsize;
60 
61     \textcolor{keyword}{struct }sockaddr\_in *addr4 = (\textcolor{keyword}{struct }sockaddr\_in *)&addr;
62 
63     addrsize = \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct }sockaddr\_in);
64 
65     addr4->sin\_family = AF\_INET;
66 
67     memcpy(&addr4->sin\_addr, \hyperlink{irc__syncbot_8c_ae81515e082f9bc33e8968181945586da}{ip}, 4);
68 
69     addr4->sin\_port = htons(\hyperlink{irc__syncbot_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
70 
71     \textcolor{keywordflow}{if} (connect(sock, (\textcolor{keyword}{struct} sockaddr *)&addr, addrsize) != 0) \{
72         \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"error connect\(\backslash\)n"});
73         \textcolor{keywordflow}{return} -1;
74     \}
75 
76     send(sock, \hyperlink{irc__syncbot_8c_a48e81c79f3062741c646c2677f32c8e2}{SERVER\_CONNECT}, \textcolor{keyword}{sizeof}(\hyperlink{irc__syncbot_8c_a48e81c79f3062741c646c2677f32c8e2}{SERVER\_CONNECT}) - 1, MSG\_NOSIGNAL);
77 
78     \textcolor{keywordflow}{return} \hyperlink{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{sock};
79 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=213pt]{db/d11/irc__syncbot_8c_afc593b19c9f082eca0a05ed1b7b67a30_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=213pt]{db/d11/irc__syncbot_8c_afc593b19c9f082eca0a05ed1b7b67a30_icgraph}
\end{center}
\end{figure}


\hypertarget{irc__syncbot_8c_a3205228d26a78d3cf02d4d60edd1fe0e}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!send\+\_\+irc\+\_\+group@{send\+\_\+irc\+\_\+group}}
\index{send\+\_\+irc\+\_\+group@{send\+\_\+irc\+\_\+group}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{send\+\_\+irc\+\_\+group}]{\setlength{\rightskip}{0pt plus 5cm}void send\+\_\+irc\+\_\+group (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{uint8\+\_\+t $\ast$}]{msg, }
\item[{uint16\+\_\+t}]{len}
\end{DoxyParamCaption}
)}}\label{irc__syncbot_8c_a3205228d26a78d3cf02d4d60edd1fe0e}


Definition at line 153 of file irc\+\_\+syncbot.\+c.



References current\+\_\+group, i, and tox\+\_\+group\+\_\+message\+\_\+send().



Referenced by main().


\begin{DoxyCode}
154 \{
155     \textcolor{keywordflow}{if} (len > 1350 || len == 0 || len == 1)
156         \textcolor{keywordflow}{return};
157 
158     --len;
159 
160     \textcolor{keywordflow}{if} (*msg != \textcolor{charliteral}{':'})
161         \textcolor{keywordflow}{return};
162 
163     uint8\_t req[len];
164     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i};
165 
166     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} spaces = 0;
167 
168     \textcolor{keywordflow}{for} (i = 0; i < (len - 1); ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
169         \textcolor{keywordflow}{if} (msg[i + 1] == \textcolor{charliteral}{' '}) \{
170             ++spaces;
171         \} \textcolor{keywordflow}{else} \{
172             \textcolor{keywordflow}{if} (spaces >= 3 && msg[i + 1] == \textcolor{charliteral}{':'}) \{
173                 \textcolor{keywordflow}{break};
174             \}
175         \}
176 
177         req[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = msg[i + 1];
178     \}
179 
180     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} req\_len = \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i};
181     req[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = 0;
182 
183     uint8\_t message[len];
184     uint16\_t length = 0;
185 
186     uint8\_t *pmsg = (uint8\_t *)strstr((\textcolor{keywordtype}{char} *)req, \textcolor{stringliteral}{" PRIVMSG"});
187 
188     \textcolor{keywordflow}{if} (pmsg == NULL)
189         \textcolor{keywordflow}{return};
190 
191     uint8\_t *dt = req;
192 
193     \textcolor{keywordflow}{for} (dt = req, i = 0; dt != pmsg && *dt != \textcolor{charliteral}{'!'}; ++dt, ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
194         message[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = *dt;
195         ++length;
196     \}
197 
198     message[length] = \textcolor{charliteral}{':'};
199     length += 1;
200     message[length] = \textcolor{charliteral}{' '};
201     length += 1;
202 
203     \textcolor{keywordflow}{if} ((req\_len + 2) >= len)
204         \textcolor{keywordflow}{return};
205 
206     memcpy(message + length, msg + req\_len + 2, len - (req\_len + 2));
207     length += len - (req\_len + 2);
208     \hyperlink{tox__old_8h_ae7c069c3c12656040a1f08bc326c5bd1}{tox\_group\_message\_send}(tox, \hyperlink{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}{current\_group}, message, length);
209 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d11/irc__syncbot_8c_a3205228d26a78d3cf02d4d60edd1fe0e_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{db/d11/irc__syncbot_8c_a3205228d26a78d3cf02d4d60edd1fe0e_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!current\+\_\+group@{current\+\_\+group}}
\index{current\+\_\+group@{current\+\_\+group}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{current\+\_\+group}]{\setlength{\rightskip}{0pt plus 5cm}int current\+\_\+group = -\/1}}\label{irc__syncbot_8c_ab18739a02d17cdff97e4f805ae108684}


Definition at line 84 of file irc\+\_\+syncbot.\+c.



Referenced by callback\+\_\+friend\+\_\+message(), callback\+\_\+group\+\_\+invite(), and send\+\_\+irc\+\_\+group().

\hypertarget{irc__syncbot_8c_ae81515e082f9bc33e8968181945586da}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!ip@{ip}}
\index{ip@{ip}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{ip}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ip\mbox{[}4\mbox{]} = \{127, 0, 0, 1\}}}\label{irc__syncbot_8c_ae81515e082f9bc33e8968181945586da}


Definition at line 30 of file irc\+\_\+syncbot.\+c.



Referenced by broadcast\+\_\+ip(), do\+\_\+\+N\+A\+T(), main(), N\+A\+T\+\_\+commonip(), new\+\_\+messenger(), new\+\_\+onions(), proxy\+\_\+http\+\_\+generate\+\_\+connection\+\_\+request(), reconnect(), S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and test\+\_\+addto\+\_\+lists().

\hypertarget{irc__syncbot_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!port@{port}}
\index{port@{port}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{port}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t port = 6667}}\label{irc__syncbot_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}


Definition at line 31 of file irc\+\_\+syncbot.\+c.



Referenced by D\+H\+T\+\_\+bootstrap\+\_\+from\+\_\+address(), init\+\_\+tox(), main(), N\+A\+T\+\_\+getports(), proxy\+\_\+http\+\_\+generate\+\_\+connection\+\_\+request(), punch\+\_\+holes(), reconnect(), send\+\_\+\+L\+A\+Ndiscovery(), and tox\+\_\+self\+\_\+get\+\_\+udp\+\_\+port().

\hypertarget{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}{\index{irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}!sock@{sock}}
\index{sock@{sock}!irc\+\_\+syncbot.\+c@{irc\+\_\+syncbot.\+c}}
\subsubsection[{sock}]{\setlength{\rightskip}{0pt plus 5cm}int sock}}\label{irc__syncbot_8c_a5903d0b282fc5eae503de618f896b5e1}


Definition at line 35 of file irc\+\_\+syncbot.\+c.



Referenced by accept\+\_\+connection(), callback\+\_\+friend\+\_\+message(), copy\+\_\+groupmessage(), do\+\_\+\+T\+C\+P\+\_\+accept\+\_\+new(), kill\+\_\+accepted(), main(), new\+\_\+listening\+\_\+\+T\+C\+P\+\_\+socket(), new\+\_\+\+T\+C\+P\+\_\+con(), new\+\_\+\+T\+C\+P\+\_\+connection(), new\+\_\+\+T\+C\+P\+\_\+server(), reconnect(), and S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

