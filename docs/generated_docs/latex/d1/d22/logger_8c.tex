\hypertarget{logger_8c}{\section{toxcore/logger.c File Reference}
\label{logger_8c}\index{toxcore/logger.\+c@{toxcore/logger.\+c}}
}
{\ttfamily \#include \char`\"{}logger.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}crypto\+\_\+core.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$stdarg.\+h$>$}\\*
{\ttfamily \#include $<$inttypes.\+h$>$}\\*
{\ttfamily \#include $<$time.\+h$>$}\\*
{\ttfamily \#include $<$pthread.\+h$>$}\\*
Include dependency graph for logger.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{da/d30/logger_8c__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structlogger}{logger}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{logger_8c_af563015c0f4305971b76b9f4bf408090}{S\+F\+I\+L\+E}(F\+I\+L\+E\+\_\+\+\_\+\+M)~(strrchr(F\+I\+L\+E\+\_\+\+\_\+\+M, '/') ? strrchr(F\+I\+L\+E\+\_\+\+\_\+\+M, '/') + 1 \+: F\+I\+L\+E\+\_\+\+\_\+\+M)
\item 
\#define \hyperlink{logger_8c_aeabd5113ca3f5025156f47e92cb64330}{W\+I\+N\+\_\+\+C\+R}~\char`\"{}\char`\"{}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
char $\ast$ \hyperlink{logger_8c_ac97a1181b8d8a2f1b65ff64a88f0973a}{strtime} (char $\ast$dest, size\+\_\+t max\+\_\+len)
\item 
\hyperlink{logger_8h_a20c57b21c053cb784d5ba0cc9b6be1d3}{Logger} $\ast$ \hyperlink{logger_8c_a015f81551929ba00687be8d9eea85663}{logger\+\_\+new} (const char $\ast$file\+\_\+name, \hyperlink{logger_8h_aa5a9053636a30269210c54e734e0d583}{L\+O\+G\+\_\+\+L\+E\+V\+E\+L} level, const char $\ast$id)
\item 
void \hyperlink{logger_8c_a335e2b9485efc94df67418b707ab9660}{logger\+\_\+kill} (\hyperlink{logger_8h_a20c57b21c053cb784d5ba0cc9b6be1d3}{Logger} $\ast$log)
\item 
void \hyperlink{logger_8c_a37ca5b1b1ad97cf2d5eaaca776a07ac3}{logger\+\_\+kill\+\_\+global} (void)
\item 
void \hyperlink{logger_8c_a5ff7d6f8171fb0b26f99d46c94abb4c0}{logger\+\_\+set\+\_\+global} (\hyperlink{logger_8h_a20c57b21c053cb784d5ba0cc9b6be1d3}{Logger} $\ast$log)
\item 
\hyperlink{logger_8h_a20c57b21c053cb784d5ba0cc9b6be1d3}{Logger} $\ast$ \hyperlink{logger_8c_a4445a3fab2c47652b5b2a985bc8fbb77}{logger\+\_\+get\+\_\+global} (void)
\item 
void \hyperlink{logger_8c_a839c50835c3d7f85c152efe1d857966a}{logger\+\_\+write} (\hyperlink{logger_8h_a20c57b21c053cb784d5ba0cc9b6be1d3}{Logger} $\ast$log, \hyperlink{logger_8h_aa5a9053636a30269210c54e734e0d583}{L\+O\+G\+\_\+\+L\+E\+V\+E\+L} level, const char $\ast$file, int line, const char $\ast$format,...)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{logger_8h_a20c57b21c053cb784d5ba0cc9b6be1d3}{Logger} $\ast$ \hyperlink{logger_8c_a4ee06268f9ba614dbb2a53e2ec373c66}{global} = N\+U\+L\+L
\item 
const char $\ast$ \hyperlink{logger_8c_a64a47fd6c1707df302397ccf01ad667a}{L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+S\+T\+R} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{logger_8c_af563015c0f4305971b76b9f4bf408090}{\index{logger.\+c@{logger.\+c}!S\+F\+I\+L\+E@{S\+F\+I\+L\+E}}
\index{S\+F\+I\+L\+E@{S\+F\+I\+L\+E}!logger.\+c@{logger.\+c}}
\subsubsection[{S\+F\+I\+L\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+F\+I\+L\+E(
\begin{DoxyParamCaption}
\item[{}]{F\+I\+L\+E\+\_\+\+\_\+\+M}
\end{DoxyParamCaption}
)~(strrchr(F\+I\+L\+E\+\_\+\+\_\+\+M, '/') ? strrchr(F\+I\+L\+E\+\_\+\+\_\+\+M, '/') + 1 \+: F\+I\+L\+E\+\_\+\+\_\+\+M)}}\label{logger_8c_af563015c0f4305971b76b9f4bf408090}


Definition at line 42 of file logger.\+c.



Referenced by logger\+\_\+write().

\hypertarget{logger_8c_aeabd5113ca3f5025156f47e92cb64330}{\index{logger.\+c@{logger.\+c}!W\+I\+N\+\_\+\+C\+R@{W\+I\+N\+\_\+\+C\+R}}
\index{W\+I\+N\+\_\+\+C\+R@{W\+I\+N\+\_\+\+C\+R}!logger.\+c@{logger.\+c}}
\subsubsection[{W\+I\+N\+\_\+\+C\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define W\+I\+N\+\_\+\+C\+R~\char`\"{}\char`\"{}}}\label{logger_8c_aeabd5113ca3f5025156f47e92cb64330}


Definition at line 43 of file logger.\+c.



Referenced by logger\+\_\+new(), and logger\+\_\+write().



\subsection{Function Documentation}
\hypertarget{logger_8c_a4445a3fab2c47652b5b2a985bc8fbb77}{\index{logger.\+c@{logger.\+c}!logger\+\_\+get\+\_\+global@{logger\+\_\+get\+\_\+global}}
\index{logger\+\_\+get\+\_\+global@{logger\+\_\+get\+\_\+global}!logger.\+c@{logger.\+c}}
\subsubsection[{logger\+\_\+get\+\_\+global}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Logger}$\ast$ logger\+\_\+get\+\_\+global (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{logger_8c_a4445a3fab2c47652b5b2a985bc8fbb77}


Definition at line 187 of file logger.\+c.



References global.



Referenced by tox\+\_\+new().


\begin{DoxyCode}
188 \{
189 \textcolor{preprocessor}{#ifndef LOGGING }\textcolor{comment}{/* Disabled */}\textcolor{preprocessor}{}
190     \textcolor{keywordflow}{return} NULL;
191 \textcolor{preprocessor}{#endif}
192 
193     \textcolor{keywordflow}{return} \hyperlink{logger_8c_a4ee06268f9ba614dbb2a53e2ec373c66}{global};
194 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d22/logger_8c_a4445a3fab2c47652b5b2a985bc8fbb77_icgraph}
\end{center}
\end{figure}


\hypertarget{logger_8c_a335e2b9485efc94df67418b707ab9660}{\index{logger.\+c@{logger.\+c}!logger\+\_\+kill@{logger\+\_\+kill}}
\index{logger\+\_\+kill@{logger\+\_\+kill}!logger.\+c@{logger.\+c}}
\subsubsection[{logger\+\_\+kill}]{\setlength{\rightskip}{0pt plus 5cm}void logger\+\_\+kill (
\begin{DoxyParamCaption}
\item[{{\bf Logger} $\ast$}]{log}
\end{DoxyParamCaption}
)}}\label{logger_8c_a335e2b9485efc94df67418b707ab9660}


Definition at line 148 of file logger.\+c.



References logger\+::id, logger\+::log\+\_\+file, logger\+::msg, logger\+::mutex, logger\+::posstr, and logger\+::tstr.



Referenced by logger\+\_\+kill\+\_\+global().


\begin{DoxyCode}
149 \{
150 \textcolor{preprocessor}{#ifndef LOGGING }\textcolor{comment}{/* Disabled */}\textcolor{preprocessor}{}
151     \textcolor{keywordflow}{return};
152 \textcolor{preprocessor}{#endif}
153 
154     \textcolor{keywordflow}{if} (!log)
155         \textcolor{keywordflow}{return};
156 
157     pthread\_mutex\_lock(log->\hyperlink{structlogger_ab4293016252c4d4e63549b0773fa0f33}{mutex});
158     free(log->\hyperlink{structlogger_aecb3b0d045ada529257a2fbf8f829599}{id});
159     free(log->\hyperlink{structlogger_a756188d61db4922010ba1bf67c2f381e}{tstr});
160     free(log->\hyperlink{structlogger_a56126aabcbc86b3b9b826e08036685eb}{posstr});
161     free(log->\hyperlink{structlogger_a32d2f5216cddb59c7cc8fb2806a7e727}{msg});
162 
163     \textcolor{keywordflow}{if} (fclose(log->\hyperlink{structlogger_ab936051f5aaca44c6c3c41dee0d19c36}{log\_file}) != 0 )
164         perror(\textcolor{stringliteral}{"Could not close log file"});
165 
166     pthread\_mutex\_unlock(log->\hyperlink{structlogger_ab4293016252c4d4e63549b0773fa0f33}{mutex});
167     pthread\_mutex\_destroy(log->\hyperlink{structlogger_ab4293016252c4d4e63549b0773fa0f33}{mutex});
168 
169     free(log);
170 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d22/logger_8c_a335e2b9485efc94df67418b707ab9660_icgraph}
\end{center}
\end{figure}


\hypertarget{logger_8c_a37ca5b1b1ad97cf2d5eaaca776a07ac3}{\index{logger.\+c@{logger.\+c}!logger\+\_\+kill\+\_\+global@{logger\+\_\+kill\+\_\+global}}
\index{logger\+\_\+kill\+\_\+global@{logger\+\_\+kill\+\_\+global}!logger.\+c@{logger.\+c}}
\subsubsection[{logger\+\_\+kill\+\_\+global}]{\setlength{\rightskip}{0pt plus 5cm}void logger\+\_\+kill\+\_\+global (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{logger_8c_a37ca5b1b1ad97cf2d5eaaca776a07ac3}


Definition at line 172 of file logger.\+c.



References logger\+\_\+kill().



Referenced by tox\+\_\+kill().


\begin{DoxyCode}
173 \{
174     \hyperlink{logger_8c_a335e2b9485efc94df67418b707ab9660}{logger\_kill}(\hyperlink{logger_8c_a4ee06268f9ba614dbb2a53e2ec373c66}{global});
175     \hyperlink{logger_8c_a4ee06268f9ba614dbb2a53e2ec373c66}{global} = NULL;
176 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{d1/d22/logger_8c_a37ca5b1b1ad97cf2d5eaaca776a07ac3_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{d1/d22/logger_8c_a37ca5b1b1ad97cf2d5eaaca776a07ac3_icgraph}
\end{center}
\end{figure}


\hypertarget{logger_8c_a015f81551929ba00687be8d9eea85663}{\index{logger.\+c@{logger.\+c}!logger\+\_\+new@{logger\+\_\+new}}
\index{logger\+\_\+new@{logger\+\_\+new}!logger.\+c@{logger.\+c}}
\subsubsection[{logger\+\_\+new}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Logger}$\ast$ logger\+\_\+new (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\+\_\+name, }
\item[{{\bf L\+O\+G\+\_\+\+L\+E\+V\+E\+L}}]{level, }
\item[{const char $\ast$}]{id}
\end{DoxyParamCaption}
)}}\label{logger_8c_a015f81551929ba00687be8d9eea85663}
Public Functions 

Definition at line 88 of file logger.\+c.



References current\+\_\+time\+\_\+monotonic(), logger\+::id, logger\+::level, logger\+::log\+\_\+file, logger\+::msg, logger\+::mutex, logger\+::posstr, random\+\_\+int(), logger\+::start\+\_\+time, strtime(), logger\+::tstr, and W\+I\+N\+\_\+\+C\+R.



Referenced by tox\+\_\+new().


\begin{DoxyCode}
89 \{
90 \textcolor{preprocessor}{#ifndef LOGGING }\textcolor{comment}{/* Disabled */}\textcolor{preprocessor}{}
91     \textcolor{keywordflow}{return} NULL;
92 \textcolor{preprocessor}{#endif}
93 
94     \hyperlink{structlogger}{Logger} *retu = calloc(1, \textcolor{keyword}{sizeof}(\hyperlink{structlogger}{Logger}));
95 
96     \textcolor{keywordflow}{if} (!retu)
97         \textcolor{keywordflow}{return} NULL;
98 
99     \textcolor{keywordflow}{if} ( pthread\_mutex\_init(retu->\hyperlink{structlogger_ab4293016252c4d4e63549b0773fa0f33}{mutex}, NULL) != 0 ) \{
100         free(retu);
101         \textcolor{keywordflow}{return} NULL;
102     \}
103 
104     \textcolor{keywordflow}{if} (!(retu->\hyperlink{structlogger_ab936051f5aaca44c6c3c41dee0d19c36}{log\_file} = fopen(file\_name, \textcolor{stringliteral}{"ab"}))) \{
105         fprintf(stderr, \textcolor{stringliteral}{"Error opening logger file: %s; info: %s"} \hyperlink{logger_8c_aeabd5113ca3f5025156f47e92cb64330}{WIN\_CR} \textcolor{stringliteral}{"\(\backslash\)n"}, file\_name, strerror(
      errno));
106         free(retu);
107         pthread\_mutex\_destroy(retu->\hyperlink{structlogger_ab4293016252c4d4e63549b0773fa0f33}{mutex});
108         \textcolor{keywordflow}{return} NULL;
109     \}
110 
111     \textcolor{keywordflow}{if} (!(retu->\hyperlink{structlogger_a756188d61db4922010ba1bf67c2f381e}{tstr} = calloc(16, \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{char}))) ||
112             !(retu->\hyperlink{structlogger_a56126aabcbc86b3b9b826e08036685eb}{posstr} = calloc(300, \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{char}))) ||
113             !(retu->\hyperlink{structlogger_a32d2f5216cddb59c7cc8fb2806a7e727}{msg} = calloc(4096, \textcolor{keyword}{sizeof} (\textcolor{keywordtype}{char}))) )
114         \textcolor{keywordflow}{goto} FAILURE;
115 
116     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id}) \{
117         \textcolor{keywordflow}{if} (!(retu->\hyperlink{structlogger_aecb3b0d045ada529257a2fbf8f829599}{id} = calloc(strlen(\textcolor{keywordtype}{id}) + 1, 1)))
118             \textcolor{keywordflow}{goto} FAILURE;
119 
120         strcpy(retu->\hyperlink{structlogger_aecb3b0d045ada529257a2fbf8f829599}{id}, \textcolor{keywordtype}{id});
121     \} \textcolor{keywordflow}{else} \{
122         \textcolor{keywordflow}{if} (!(retu->\hyperlink{structlogger_aecb3b0d045ada529257a2fbf8f829599}{id} = malloc(8)))
123             \textcolor{keywordflow}{goto} FAILURE;
124 
125         snprintf(retu->\hyperlink{structlogger_aecb3b0d045ada529257a2fbf8f829599}{id}, 8, \textcolor{stringliteral}{"%u"}, \hyperlink{crypto__core_8c_a5f13cbe4c46d8801e2c7467068f87306}{random\_int}());
126     \}
127 
128     retu->\hyperlink{structlogger_a77f7159081bd39a76d8b86af56256201}{level} = level;
129     retu->\hyperlink{structlogger_a5b11efea935978e9f1913e964a5e5396}{start\_time} = \hyperlink{irc__syncbot_8c_ae8ecaef140b786a2720eadbb85918e81}{current\_time\_monotonic}();
130 
131     fprintf(retu->\hyperlink{structlogger_ab936051f5aaca44c6c3c41dee0d19c36}{log\_file}, \textcolor{stringliteral}{"Successfully created and running logger id: %s; time: %s"} 
      \hyperlink{logger_8c_aeabd5113ca3f5025156f47e92cb64330}{WIN\_CR} \textcolor{stringliteral}{"\(\backslash\)n"},
132             retu->\hyperlink{structlogger_aecb3b0d045ada529257a2fbf8f829599}{id}, \hyperlink{logger_8c_ac97a1181b8d8a2f1b65ff64a88f0973a}{strtime}(retu->\hyperlink{structlogger_a756188d61db4922010ba1bf67c2f381e}{tstr}, 16));
133 
134     \textcolor{keywordflow}{return} retu;
135 
136 FAILURE:
137     fprintf(stderr, \textcolor{stringliteral}{"Failed to create logger!"} \hyperlink{logger_8c_aeabd5113ca3f5025156f47e92cb64330}{WIN\_CR} \textcolor{stringliteral}{"\(\backslash\)n"});
138     pthread\_mutex\_destroy(retu->\hyperlink{structlogger_ab4293016252c4d4e63549b0773fa0f33}{mutex});
139     fclose(retu->\hyperlink{structlogger_ab936051f5aaca44c6c3c41dee0d19c36}{log\_file});
140     free(retu->\hyperlink{structlogger_a756188d61db4922010ba1bf67c2f381e}{tstr});
141     free(retu->\hyperlink{structlogger_a56126aabcbc86b3b9b826e08036685eb}{posstr});
142     free(retu->\hyperlink{structlogger_a32d2f5216cddb59c7cc8fb2806a7e727}{msg});
143     free(retu->\hyperlink{structlogger_aecb3b0d045ada529257a2fbf8f829599}{id});
144     free(retu);
145     \textcolor{keywordflow}{return} NULL;
146 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{d1/d22/logger_8c_a015f81551929ba00687be8d9eea85663_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d22/logger_8c_a015f81551929ba00687be8d9eea85663_icgraph}
\end{center}
\end{figure}


\hypertarget{logger_8c_a5ff7d6f8171fb0b26f99d46c94abb4c0}{\index{logger.\+c@{logger.\+c}!logger\+\_\+set\+\_\+global@{logger\+\_\+set\+\_\+global}}
\index{logger\+\_\+set\+\_\+global@{logger\+\_\+set\+\_\+global}!logger.\+c@{logger.\+c}}
\subsubsection[{logger\+\_\+set\+\_\+global}]{\setlength{\rightskip}{0pt plus 5cm}void logger\+\_\+set\+\_\+global (
\begin{DoxyParamCaption}
\item[{{\bf Logger} $\ast$}]{log}
\end{DoxyParamCaption}
)}}\label{logger_8c_a5ff7d6f8171fb0b26f99d46c94abb4c0}
Global logger setter and getter. 

Definition at line 178 of file logger.\+c.



Referenced by tox\+\_\+new().


\begin{DoxyCode}
179 \{
180 \textcolor{preprocessor}{#ifndef LOGGING }\textcolor{comment}{/* Disabled */}\textcolor{preprocessor}{}
181     \textcolor{keywordflow}{return};
182 \textcolor{preprocessor}{#endif}
183 
184     \hyperlink{logger_8c_a4ee06268f9ba614dbb2a53e2ec373c66}{global} = log;
185 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d22/logger_8c_a5ff7d6f8171fb0b26f99d46c94abb4c0_icgraph}
\end{center}
\end{figure}


\hypertarget{logger_8c_a839c50835c3d7f85c152efe1d857966a}{\index{logger.\+c@{logger.\+c}!logger\+\_\+write@{logger\+\_\+write}}
\index{logger\+\_\+write@{logger\+\_\+write}!logger.\+c@{logger.\+c}}
\subsubsection[{logger\+\_\+write}]{\setlength{\rightskip}{0pt plus 5cm}void logger\+\_\+write (
\begin{DoxyParamCaption}
\item[{{\bf Logger} $\ast$}]{log, }
\item[{{\bf L\+O\+G\+\_\+\+L\+E\+V\+E\+L}}]{level, }
\item[{const char $\ast$}]{file, }
\item[{int}]{line, }
\item[{const char $\ast$}]{format, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{logger_8c_a839c50835c3d7f85c152efe1d857966a}
Main write function. If logging disabled does nothing. If log == N\+U\+L\+L uses global logger. 

Definition at line 196 of file logger.\+c.



References global, logger\+::id, logger\+::level, logger\+::log\+\_\+file, L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+S\+T\+R, logger\+::msg, logger\+::mutex, logger\+::posstr, S\+F\+I\+L\+E, strtime(), logger\+::tstr, and W\+I\+N\+\_\+\+C\+R.


\begin{DoxyCode}
197 \{
198 \textcolor{preprocessor}{#ifndef LOGGING }\textcolor{comment}{/* Disabled */}\textcolor{preprocessor}{}
199     \textcolor{keywordflow}{return};
200 \textcolor{preprocessor}{#endif}
201 
202     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *logger\_format =
203         \textcolor{stringliteral}{"%s  "}   \textcolor{comment}{/* Logger id string */}
204         \textcolor{stringliteral}{"%-16s"}  \textcolor{comment}{/* Time string of format: %m:%d %H:%M:%S */}
205         \textcolor{stringliteral}{"%u  "}   \textcolor{comment}{/* Thread id */}
206         \textcolor{stringliteral}{"%-5s  "} \textcolor{comment}{/* Logger lever string */}
207         \textcolor{stringliteral}{"%-20s "} \textcolor{comment}{/* File:line string */}
208         \textcolor{stringliteral}{"- %s"}   \textcolor{comment}{/* Output message */}
209         \hyperlink{logger_8c_aeabd5113ca3f5025156f47e92cb64330}{WIN\_CR} \textcolor{stringliteral}{"\(\backslash\)n"};    \textcolor{comment}{/* Every new print new line */}
210 
211 
212     \hyperlink{structlogger}{Logger} *this\_log = log ? log : \hyperlink{logger_8c_a4ee06268f9ba614dbb2a53e2ec373c66}{global};
213 
214     \textcolor{keywordflow}{if} (!this\_log)
215         \textcolor{keywordflow}{return};
216 
217     \textcolor{comment}{/* Don't print levels lesser than set one */}
218     \textcolor{keywordflow}{if} (this\_log->\hyperlink{structlogger_a77f7159081bd39a76d8b86af56256201}{level} > level)
219         \textcolor{keywordflow}{return};
220 
221     pthread\_mutex\_lock(this\_log->\hyperlink{structlogger_ab4293016252c4d4e63549b0773fa0f33}{mutex});
222 
223     \textcolor{comment}{/* Set position str */}
224     snprintf(this\_log->\hyperlink{structlogger_a56126aabcbc86b3b9b826e08036685eb}{posstr}, 300, \textcolor{stringliteral}{"%s:%d"}, \hyperlink{logger_8c_af563015c0f4305971b76b9f4bf408090}{SFILE}(file), line);
225 
226     \textcolor{comment}{/* Set message */}
227     va\_list args;
228     va\_start (args, format);
229     vsnprintf(this\_log->\hyperlink{structlogger_a32d2f5216cddb59c7cc8fb2806a7e727}{msg}, 4096, format, args);
230     va\_end (args);
231 
232     fprintf(this\_log->\hyperlink{structlogger_ab936051f5aaca44c6c3c41dee0d19c36}{log\_file}, logger\_format, this\_log->\hyperlink{structlogger_aecb3b0d045ada529257a2fbf8f829599}{id}, \hyperlink{logger_8c_ac97a1181b8d8a2f1b65ff64a88f0973a}{strtime}(this\_log->
      \hyperlink{structlogger_a756188d61db4922010ba1bf67c2f381e}{tstr}, 16), pthread\_self(),
233             \hyperlink{logger_8c_a64a47fd6c1707df302397ccf01ad667a}{LOG\_LEVEL\_STR}[level], this\_log->\hyperlink{structlogger_a56126aabcbc86b3b9b826e08036685eb}{posstr}, this\_log->
      \hyperlink{structlogger_a32d2f5216cddb59c7cc8fb2806a7e727}{msg});
234     fflush(this\_log->\hyperlink{structlogger_ab936051f5aaca44c6c3c41dee0d19c36}{log\_file});
235 
236     pthread\_mutex\_unlock(this\_log->\hyperlink{structlogger_ab4293016252c4d4e63549b0773fa0f33}{mutex});
237 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{d1/d22/logger_8c_a839c50835c3d7f85c152efe1d857966a_cgraph}
\end{center}
\end{figure}


\hypertarget{logger_8c_ac97a1181b8d8a2f1b65ff64a88f0973a}{\index{logger.\+c@{logger.\+c}!strtime@{strtime}}
\index{strtime@{strtime}!logger.\+c@{logger.\+c}}
\subsubsection[{strtime}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ strtime (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{dest, }
\item[{size\+\_\+t}]{max\+\_\+len}
\end{DoxyParamCaption}
)}}\label{logger_8c_ac97a1181b8d8a2f1b65ff64a88f0973a}


Definition at line 72 of file logger.\+c.



Referenced by logger\+\_\+new(), and logger\+\_\+write().


\begin{DoxyCode}
73 \{
74     time\_t timer;
75     \textcolor{keyword}{struct }tm *tm\_info;
76 
77     time(&timer);
78     tm\_info = localtime(&timer);
79 
80     strftime(dest, max\_len, \textcolor{stringliteral}{"%m:%d %H:%M:%S"}, tm\_info);
81     \textcolor{keywordflow}{return} dest;
82 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d22/logger_8c_ac97a1181b8d8a2f1b65ff64a88f0973a_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{logger_8c_a4ee06268f9ba614dbb2a53e2ec373c66}{\index{logger.\+c@{logger.\+c}!global@{global}}
\index{global@{global}!logger.\+c@{logger.\+c}}
\subsubsection[{global}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Logger}$\ast$ global = N\+U\+L\+L}}\label{logger_8c_a4ee06268f9ba614dbb2a53e2ec373c66}


Definition at line 62 of file logger.\+c.



Referenced by logger\+\_\+get\+\_\+global(), and logger\+\_\+write().

\hypertarget{logger_8c_a64a47fd6c1707df302397ccf01ad667a}{\index{logger.\+c@{logger.\+c}!L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+S\+T\+R@{L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+S\+T\+R}}
\index{L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+S\+T\+R@{L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+S\+T\+R}!logger.\+c@{logger.\+c}}
\subsubsection[{L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+S\+T\+R}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ L\+O\+G\+\_\+\+L\+E\+V\+E\+L\+\_\+\+S\+T\+R\mbox{[}$\,$\mbox{]}}}\label{logger_8c_a64a47fd6c1707df302397ccf01ad667a}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    [\hyperlink{logger_8h_aa5a9053636a30269210c54e734e0d583a5b76dd51db62558b1952158ba38b723f}{LOG\_TRACE}]   = \textcolor{stringliteral}{"TRACE"},
    [\hyperlink{logger_8h_aa5a9053636a30269210c54e734e0d583ab9f002c6ffbfd511da8090213227454e}{LOG\_DEBUG}]   = \textcolor{stringliteral}{"DEBUG"},
    [\hyperlink{logger_8h_aa5a9053636a30269210c54e734e0d583a6e98ff471e3ce6c4ef2d75c37ee51837}{LOG\_INFO}]    = \textcolor{stringliteral}{"INFO"} ,
    [\hyperlink{logger_8h_aa5a9053636a30269210c54e734e0d583a8f6fe15bfe15104da6d1b360194a5400}{LOG\_WARNING}] = \textcolor{stringliteral}{"WARN"} ,
    [\hyperlink{logger_8h_aa5a9053636a30269210c54e734e0d583a230506cce5c68c3bac5a821c42ed3473}{LOG\_ERROR}]   = \textcolor{stringliteral}{"ERROR"},
\}
\end{DoxyCode}


Definition at line 64 of file logger.\+c.



Referenced by logger\+\_\+write().

