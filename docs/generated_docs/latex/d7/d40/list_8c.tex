\hypertarget{list_8c}{\section{toxcore/list.c File Reference}
\label{list_8c}\index{toxcore/list.\+c@{toxcore/list.\+c}}
}
{\ttfamily \#include \char`\"{}list.\+h\char`\"{}}\\*
Include dependency graph for list.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=263pt]{da/dfe/list_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{list_8c_aa5fad23b2a5eed790e6661e896a506b7}{I\+N\+D\+E\+X}(\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i})~($\sim$\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i})
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{list_8c_ae2aaa4149a770ed6e47a58af78fc6600}{find} (const \hyperlink{struct_b_s___l_i_s_t}{B\+S\+\_\+\+L\+I\+S\+T} $\ast$list, const uint8\+\_\+t $\ast$data)
\item 
static int \hyperlink{list_8c_a7c246868ee5a3542509cdf90379c5bb2}{resize} (\hyperlink{struct_b_s___l_i_s_t}{B\+S\+\_\+\+L\+I\+S\+T} $\ast$list, uint32\+\_\+t new\+\_\+size)
\item 
int \hyperlink{list_8c_a7b07772cffb6af34e279f424dca08895}{bs\+\_\+list\+\_\+init} (\hyperlink{struct_b_s___l_i_s_t}{B\+S\+\_\+\+L\+I\+S\+T} $\ast$list, uint32\+\_\+t element\+\_\+size, uint32\+\_\+t initial\+\_\+capacity)
\item 
void \hyperlink{list_8c_a20f4503183113923cd946fc04bf8f2b4}{bs\+\_\+list\+\_\+free} (\hyperlink{struct_b_s___l_i_s_t}{B\+S\+\_\+\+L\+I\+S\+T} $\ast$list)
\item 
int \hyperlink{list_8c_aa2ee2cbbc130c7c976f2c69bda129bd1}{bs\+\_\+list\+\_\+find} (const \hyperlink{struct_b_s___l_i_s_t}{B\+S\+\_\+\+L\+I\+S\+T} $\ast$list, const uint8\+\_\+t $\ast$data)
\item 
int \hyperlink{list_8c_ace05755dd126bff18700a17d6f8edd28}{bs\+\_\+list\+\_\+add} (\hyperlink{struct_b_s___l_i_s_t}{B\+S\+\_\+\+L\+I\+S\+T} $\ast$list, const uint8\+\_\+t $\ast$data, int id)
\item 
int \hyperlink{list_8c_a365995457101cc16f8c6b25ead07fb6f}{bs\+\_\+list\+\_\+remove} (\hyperlink{struct_b_s___l_i_s_t}{B\+S\+\_\+\+L\+I\+S\+T} $\ast$list, const uint8\+\_\+t $\ast$data, int id)
\item 
int \hyperlink{list_8c_afeda2a6221e746f07877dbdf854831dc}{bs\+\_\+list\+\_\+trim} (\hyperlink{struct_b_s___l_i_s_t}{B\+S\+\_\+\+L\+I\+S\+T} $\ast$list)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{list_8c_aa5fad23b2a5eed790e6661e896a506b7}{\index{list.\+c@{list.\+c}!I\+N\+D\+E\+X@{I\+N\+D\+E\+X}}
\index{I\+N\+D\+E\+X@{I\+N\+D\+E\+X}!list.\+c@{list.\+c}}
\subsubsection[{I\+N\+D\+E\+X}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+N\+D\+E\+X(
\begin{DoxyParamCaption}
\item[{}]{{\bf i}}
\end{DoxyParamCaption}
)~($\sim${\bf i})}}\label{list_8c_aa5fad23b2a5eed790e6661e896a506b7}


Definition at line 39 of file list.\+c.



Referenced by find().



\subsection{Function Documentation}
\hypertarget{list_8c_ace05755dd126bff18700a17d6f8edd28}{\index{list.\+c@{list.\+c}!bs\+\_\+list\+\_\+add@{bs\+\_\+list\+\_\+add}}
\index{bs\+\_\+list\+\_\+add@{bs\+\_\+list\+\_\+add}!list.\+c@{list.\+c}}
\subsubsection[{bs\+\_\+list\+\_\+add}]{\setlength{\rightskip}{0pt plus 5cm}int bs\+\_\+list\+\_\+add (
\begin{DoxyParamCaption}
\item[{{\bf B\+S\+\_\+\+L\+I\+S\+T} $\ast$}]{list, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{int}]{id}
\end{DoxyParamCaption}
)}}\label{list_8c_ace05755dd126bff18700a17d6f8edd28}


Definition at line 177 of file list.\+c.



References B\+S\+\_\+\+L\+I\+S\+T\+::capacity, B\+S\+\_\+\+L\+I\+S\+T\+::data, B\+S\+\_\+\+L\+I\+S\+T\+::element\+\_\+size, find(), i, B\+S\+\_\+\+L\+I\+S\+T\+::ids, B\+S\+\_\+\+L\+I\+S\+T\+::n, and resize().



Referenced by add\+\_\+accepted(), crypto\+\_\+connection\+\_\+add\+\_\+source(), and set\+\_\+direct\+\_\+ip\+\_\+port().


\begin{DoxyCode}
178 \{
179     \textcolor{comment}{//find where the new element should be inserted}
180     \textcolor{comment}{//see: return value of find()}
181     \textcolor{keywordtype}{int} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i} = \hyperlink{list_8c_ae2aaa4149a770ed6e47a58af78fc6600}{find}(list, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data});
182 
183     \textcolor{keywordflow}{if} (i >= 0) \{
184         \textcolor{comment}{//already in list}
185         \textcolor{keywordflow}{return} 0;
186     \}
187 
188     i = ~i;
189 
190     \textcolor{comment}{//increase the size of the arrays if needed}
191     \textcolor{keywordflow}{if} (list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} == list->\hyperlink{struct_b_s___l_i_s_t_a391c992c66c3e5540265a85ec2b9216a}{capacity}) \{
192         \textcolor{comment}{// 1.5 * n + 1}
193         \textcolor{keyword}{const} uint32\_t new\_capacity = list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} + list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} / 2 + 1;
194 
195         \textcolor{keywordflow}{if} (!\hyperlink{list_8c_a7c246868ee5a3542509cdf90379c5bb2}{resize}(list, new\_capacity)) \{
196             \textcolor{keywordflow}{return} 0;
197         \}
198 
199         list->\hyperlink{struct_b_s___l_i_s_t_a391c992c66c3e5540265a85ec2b9216a}{capacity} = new\_capacity;
200     \}
201 
202     \textcolor{comment}{//insert data to element array}
203     memmove(list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data} + (i + 1) * list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size}, list->
      \hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data} + i * list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size},
204             (list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} - i) * list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size});
205     memcpy(list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data} + i * list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size}, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, list->
      \hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size});
206 
207     \textcolor{comment}{//insert id to id array}
208     memmove(&list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids}[i + 1], &list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids}[i], (list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} - i) * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
209     list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids}[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = id;
210 
211     \textcolor{comment}{//increase n}
212     list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n}++;
213 
214     \textcolor{keywordflow}{return} 1;
215 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=225pt]{d7/d40/list_8c_ace05755dd126bff18700a17d6f8edd28_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/d40/list_8c_ace05755dd126bff18700a17d6f8edd28_icgraph}
\end{center}
\end{figure}


\hypertarget{list_8c_aa2ee2cbbc130c7c976f2c69bda129bd1}{\index{list.\+c@{list.\+c}!bs\+\_\+list\+\_\+find@{bs\+\_\+list\+\_\+find}}
\index{bs\+\_\+list\+\_\+find@{bs\+\_\+list\+\_\+find}!list.\+c@{list.\+c}}
\subsubsection[{bs\+\_\+list\+\_\+find}]{\setlength{\rightskip}{0pt plus 5cm}int bs\+\_\+list\+\_\+find (
\begin{DoxyParamCaption}
\item[{const {\bf B\+S\+\_\+\+L\+I\+S\+T} $\ast$}]{list, }
\item[{const uint8\+\_\+t $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{list_8c_aa2ee2cbbc130c7c976f2c69bda129bd1}


Definition at line 165 of file list.\+c.



References find(), and B\+S\+\_\+\+L\+I\+S\+T\+::ids.



Referenced by crypto\+\_\+id\+\_\+ip\+\_\+port(), and get\+\_\+\+T\+C\+P\+\_\+connection\+\_\+index().


\begin{DoxyCode}
166 \{
167     \textcolor{keywordtype}{int} r = \hyperlink{list_8c_ae2aaa4149a770ed6e47a58af78fc6600}{find}(list, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data});
168 
169     \textcolor{comment}{//return only -1 and positive values}
170     \textcolor{keywordflow}{if} (r < 0) \{
171         \textcolor{keywordflow}{return} -1;
172     \}
173 
174     \textcolor{keywordflow}{return} list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids}[r];
175 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{d7/d40/list_8c_aa2ee2cbbc130c7c976f2c69bda129bd1_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/d40/list_8c_aa2ee2cbbc130c7c976f2c69bda129bd1_icgraph}
\end{center}
\end{figure}


\hypertarget{list_8c_a20f4503183113923cd946fc04bf8f2b4}{\index{list.\+c@{list.\+c}!bs\+\_\+list\+\_\+free@{bs\+\_\+list\+\_\+free}}
\index{bs\+\_\+list\+\_\+free@{bs\+\_\+list\+\_\+free}!list.\+c@{list.\+c}}
\subsubsection[{bs\+\_\+list\+\_\+free}]{\setlength{\rightskip}{0pt plus 5cm}void bs\+\_\+list\+\_\+free (
\begin{DoxyParamCaption}
\item[{{\bf B\+S\+\_\+\+L\+I\+S\+T} $\ast$}]{list}
\end{DoxyParamCaption}
)}}\label{list_8c_a20f4503183113923cd946fc04bf8f2b4}


Definition at line 158 of file list.\+c.



References B\+S\+\_\+\+L\+I\+S\+T\+::data, and B\+S\+\_\+\+L\+I\+S\+T\+::ids.



Referenced by kill\+\_\+net\+\_\+crypto(), and kill\+\_\+\+T\+C\+P\+\_\+server().


\begin{DoxyCode}
159 \{
160     \textcolor{comment}{//free both arrays}
161     free(list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data});
162     free(list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids});
163 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/d40/list_8c_a20f4503183113923cd946fc04bf8f2b4_icgraph}
\end{center}
\end{figure}


\hypertarget{list_8c_a7b07772cffb6af34e279f424dca08895}{\index{list.\+c@{list.\+c}!bs\+\_\+list\+\_\+init@{bs\+\_\+list\+\_\+init}}
\index{bs\+\_\+list\+\_\+init@{bs\+\_\+list\+\_\+init}!list.\+c@{list.\+c}}
\subsubsection[{bs\+\_\+list\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}int bs\+\_\+list\+\_\+init (
\begin{DoxyParamCaption}
\item[{{\bf B\+S\+\_\+\+L\+I\+S\+T} $\ast$}]{list, }
\item[{uint32\+\_\+t}]{element\+\_\+size, }
\item[{uint32\+\_\+t}]{initial\+\_\+capacity}
\end{DoxyParamCaption}
)}}\label{list_8c_a7b07772cffb6af34e279f424dca08895}


Definition at line 138 of file list.\+c.



References B\+S\+\_\+\+L\+I\+S\+T\+::capacity, B\+S\+\_\+\+L\+I\+S\+T\+::data, B\+S\+\_\+\+L\+I\+S\+T\+::element\+\_\+size, B\+S\+\_\+\+L\+I\+S\+T\+::ids, B\+S\+\_\+\+L\+I\+S\+T\+::n, and resize().



Referenced by new\+\_\+net\+\_\+crypto(), and new\+\_\+\+T\+C\+P\+\_\+server().


\begin{DoxyCode}
139 \{
140     \textcolor{comment}{//set initial values}
141     list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} = 0;
142     list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size} = element\_size;
143     list->\hyperlink{struct_b_s___l_i_s_t_a391c992c66c3e5540265a85ec2b9216a}{capacity} = 0;
144     list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data} = NULL;
145     list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids} = NULL;
146 
147     \textcolor{keywordflow}{if} (initial\_capacity != 0) \{
148         \textcolor{keywordflow}{if} (!\hyperlink{list_8c_a7c246868ee5a3542509cdf90379c5bb2}{resize}(list, initial\_capacity)) \{
149             \textcolor{keywordflow}{return} 0;
150         \}
151     \}
152 
153     list->\hyperlink{struct_b_s___l_i_s_t_a391c992c66c3e5540265a85ec2b9216a}{capacity} = initial\_capacity;
154 
155     \textcolor{keywordflow}{return} 1;
156 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=222pt]{d7/d40/list_8c_a7b07772cffb6af34e279f424dca08895_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/d40/list_8c_a7b07772cffb6af34e279f424dca08895_icgraph}
\end{center}
\end{figure}


\hypertarget{list_8c_a365995457101cc16f8c6b25ead07fb6f}{\index{list.\+c@{list.\+c}!bs\+\_\+list\+\_\+remove@{bs\+\_\+list\+\_\+remove}}
\index{bs\+\_\+list\+\_\+remove@{bs\+\_\+list\+\_\+remove}!list.\+c@{list.\+c}}
\subsubsection[{bs\+\_\+list\+\_\+remove}]{\setlength{\rightskip}{0pt plus 5cm}int bs\+\_\+list\+\_\+remove (
\begin{DoxyParamCaption}
\item[{{\bf B\+S\+\_\+\+L\+I\+S\+T} $\ast$}]{list, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{int}]{id}
\end{DoxyParamCaption}
)}}\label{list_8c_a365995457101cc16f8c6b25ead07fb6f}


Definition at line 217 of file list.\+c.



References B\+S\+\_\+\+L\+I\+S\+T\+::capacity, B\+S\+\_\+\+L\+I\+S\+T\+::data, B\+S\+\_\+\+L\+I\+S\+T\+::element\+\_\+size, find(), i, B\+S\+\_\+\+L\+I\+S\+T\+::ids, B\+S\+\_\+\+L\+I\+S\+T\+::n, and resize().



Referenced by crypto\+\_\+connection\+\_\+add\+\_\+source(), crypto\+\_\+kill(), del\+\_\+accepted(), and set\+\_\+direct\+\_\+ip\+\_\+port().


\begin{DoxyCode}
218 \{
219     \textcolor{keywordtype}{int} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i} = \hyperlink{list_8c_ae2aaa4149a770ed6e47a58af78fc6600}{find}(list, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data});
220 
221     \textcolor{keywordflow}{if} (i < 0) \{
222         \textcolor{keywordflow}{return} 0;
223     \}
224 
225     \textcolor{keywordflow}{if} (list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids}[i] != \textcolor{keywordtype}{id}) \{
226         \textcolor{comment}{//this should never happen}
227         \textcolor{keywordflow}{return} 0;
228     \}
229 
230     \textcolor{comment}{//decrease the size of the arrays if needed}
231     \textcolor{keywordflow}{if} (list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} < list->\hyperlink{struct_b_s___l_i_s_t_a391c992c66c3e5540265a85ec2b9216a}{capacity} / 2) \{
232         \textcolor{keyword}{const} uint32\_t new\_capacity = list->\hyperlink{struct_b_s___l_i_s_t_a391c992c66c3e5540265a85ec2b9216a}{capacity} / 2;
233 
234         \textcolor{keywordflow}{if} (\hyperlink{list_8c_a7c246868ee5a3542509cdf90379c5bb2}{resize}(list, new\_capacity)) \{
235             list->\hyperlink{struct_b_s___l_i_s_t_a391c992c66c3e5540265a85ec2b9216a}{capacity} = new\_capacity;
236         \}
237     \}
238 
239     list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n}--;
240 
241     memmove(list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data} + i * list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size}, list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data} + (i + 1) * list->
      \hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size},
242             (list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} - i) * list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size});
243     memmove(&list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids}[i], &list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids}[i + 1], (list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} - i) * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
244 
245     \textcolor{keywordflow}{return} 1;
246 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=242pt]{d7/d40/list_8c_a365995457101cc16f8c6b25ead07fb6f_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/d40/list_8c_a365995457101cc16f8c6b25ead07fb6f_icgraph}
\end{center}
\end{figure}


\hypertarget{list_8c_afeda2a6221e746f07877dbdf854831dc}{\index{list.\+c@{list.\+c}!bs\+\_\+list\+\_\+trim@{bs\+\_\+list\+\_\+trim}}
\index{bs\+\_\+list\+\_\+trim@{bs\+\_\+list\+\_\+trim}!list.\+c@{list.\+c}}
\subsubsection[{bs\+\_\+list\+\_\+trim}]{\setlength{\rightskip}{0pt plus 5cm}int bs\+\_\+list\+\_\+trim (
\begin{DoxyParamCaption}
\item[{{\bf B\+S\+\_\+\+L\+I\+S\+T} $\ast$}]{list}
\end{DoxyParamCaption}
)}}\label{list_8c_afeda2a6221e746f07877dbdf854831dc}


Definition at line 248 of file list.\+c.



References B\+S\+\_\+\+L\+I\+S\+T\+::capacity, B\+S\+\_\+\+L\+I\+S\+T\+::n, and resize().


\begin{DoxyCode}
249 \{
250     \textcolor{keywordflow}{if} (!\hyperlink{list_8c_a7c246868ee5a3542509cdf90379c5bb2}{resize}(list, list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n})) \{
251         \textcolor{keywordflow}{return} 0;
252     \}
253 
254     list->\hyperlink{struct_b_s___l_i_s_t_a391c992c66c3e5540265a85ec2b9216a}{capacity} = list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n};
255     \textcolor{keywordflow}{return} 1;
256 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{d7/d40/list_8c_afeda2a6221e746f07877dbdf854831dc_cgraph}
\end{center}
\end{figure}


\hypertarget{list_8c_ae2aaa4149a770ed6e47a58af78fc6600}{\index{list.\+c@{list.\+c}!find@{find}}
\index{find@{find}!list.\+c@{list.\+c}}
\subsubsection[{find}]{\setlength{\rightskip}{0pt plus 5cm}static int find (
\begin{DoxyParamCaption}
\item[{const {\bf B\+S\+\_\+\+L\+I\+S\+T} $\ast$}]{list, }
\item[{const uint8\+\_\+t $\ast$}]{data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{list_8c_ae2aaa4149a770ed6e47a58af78fc6600}


Definition at line 48 of file list.\+c.



References B\+S\+\_\+\+L\+I\+S\+T\+::data, B\+S\+\_\+\+L\+I\+S\+T\+::element\+\_\+size, i, I\+N\+D\+E\+X, and B\+S\+\_\+\+L\+I\+S\+T\+::n.



Referenced by bs\+\_\+list\+\_\+add(), bs\+\_\+list\+\_\+find(), and bs\+\_\+list\+\_\+remove().


\begin{DoxyCode}
49 \{
50     \textcolor{comment}{//should work well, but could be improved}
51     \textcolor{keywordflow}{if} (list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} == 0) \{
52         \textcolor{keywordflow}{return} \hyperlink{list_8c_aa5fad23b2a5eed790e6661e896a506b7}{INDEX}(0);
53     \}
54 
55     uint32\_t \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i} = list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n} / 2; \textcolor{comment}{//current position in the array}
56     uint32\_t delta = i / 2;   \textcolor{comment}{//how much we move in the array}
57 
58     \textcolor{keywordflow}{if} (!delta) \{
59         delta = 1;
60     \}
61 
62     \textcolor{keywordtype}{int} d = -1; \textcolor{comment}{//used to determine if closest match is found}
63     \textcolor{comment}{//closest match is found if we move back to where we have already been}
64 
65     \textcolor{keywordflow}{while} (1) \{
66         \textcolor{keywordtype}{int} r = memcmp(\hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data} + list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size} * i, list->
      \hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size});
67 
68         \textcolor{keywordflow}{if} (r == 0) \{
69             \textcolor{keywordflow}{return} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i};
70         \}
71 
72         \textcolor{keywordflow}{if} (r > 0) \{
73             \textcolor{comment}{//data is greater}
74             \textcolor{comment}{//move down}
75             i += delta;
76 
77             \textcolor{keywordflow}{if} (d == 0 || i == list->\hyperlink{struct_b_s___l_i_s_t_a3d8a9527a2ee4a7ebf59175650142e75}{n}) \{
78                 \textcolor{comment}{//reached bottom of list, or closest match}
79                 \textcolor{keywordflow}{return} \hyperlink{list_8c_aa5fad23b2a5eed790e6661e896a506b7}{INDEX}(i);
80             \}
81 
82             delta = (delta) / 2;
83 
84             \textcolor{keywordflow}{if} (delta == 0) \{
85                 delta = 1;
86                 d = 1;
87             \}
88         \} \textcolor{keywordflow}{else} \{
89             \textcolor{comment}{//data is smaller}
90             \textcolor{keywordflow}{if} (d == 1 || i == 0) \{
91                 \textcolor{comment}{//reached top or list or closest match}
92                 \textcolor{keywordflow}{return} \hyperlink{list_8c_aa5fad23b2a5eed790e6661e896a506b7}{INDEX}(i);
93             \}
94 
95             \textcolor{comment}{//move up}
96             i -= delta;
97 
98             delta = (delta) / 2;
99 
100             \textcolor{keywordflow}{if} (delta == 0) \{
101                 delta = 1;
102                 d = 0;
103             \}
104         \}
105     \}
106 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/d40/list_8c_ae2aaa4149a770ed6e47a58af78fc6600_icgraph}
\end{center}
\end{figure}


\hypertarget{list_8c_a7c246868ee5a3542509cdf90379c5bb2}{\index{list.\+c@{list.\+c}!resize@{resize}}
\index{resize@{resize}!list.\+c@{list.\+c}}
\subsubsection[{resize}]{\setlength{\rightskip}{0pt plus 5cm}static int resize (
\begin{DoxyParamCaption}
\item[{{\bf B\+S\+\_\+\+L\+I\+S\+T} $\ast$}]{list, }
\item[{uint32\+\_\+t}]{new\+\_\+size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{list_8c_a7c246868ee5a3542509cdf90379c5bb2}


Definition at line 114 of file list.\+c.



References B\+S\+\_\+\+L\+I\+S\+T\+::data, B\+S\+\_\+\+L\+I\+S\+T\+::element\+\_\+size, and B\+S\+\_\+\+L\+I\+S\+T\+::ids.



Referenced by bs\+\_\+list\+\_\+add(), bs\+\_\+list\+\_\+init(), bs\+\_\+list\+\_\+remove(), and bs\+\_\+list\+\_\+trim().


\begin{DoxyCode}
115 \{
116     \textcolor{keywordtype}{void} *p;
117 
118     p = realloc(list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data}, list->\hyperlink{struct_b_s___l_i_s_t_a4ff545e181548785b8e257d2a8ac857a}{element\_size} * new\_size);
119 
120     \textcolor{keywordflow}{if} (!p) \{
121         \textcolor{keywordflow}{return} 0;
122     \} \textcolor{keywordflow}{else} \{
123         list->\hyperlink{struct_b_s___l_i_s_t_abe222f6d3581e7920dcad5306cc906a8}{data} = p;
124     \}
125 
126     p = realloc(list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}) * new\_size);
127 
128     \textcolor{keywordflow}{if} (!p) \{
129         \textcolor{keywordflow}{return} 0;
130     \} \textcolor{keywordflow}{else} \{
131         list->\hyperlink{struct_b_s___l_i_s_t_a6081d5fc46a8899b4beb60b0df7dd190}{ids} = p;
132     \}
133 
134     \textcolor{keywordflow}{return} 1;
135 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/d40/list_8c_a7c246868ee5a3542509cdf90379c5bb2_icgraph}
\end{center}
\end{figure}


