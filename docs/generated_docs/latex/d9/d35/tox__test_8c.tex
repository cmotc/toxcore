\hypertarget{tox__test_8c}{\section{auto\+\_\+tests/tox\+\_\+test.c File Reference}
\label{tox__test_8c}\index{auto\+\_\+tests/tox\+\_\+test.\+c@{auto\+\_\+tests/tox\+\_\+test.\+c}}
}
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include $<$stdint.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$check.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$time.\+h$>$}\\*
{\ttfamily \#include \char`\"{}../toxcore/tox.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}helpers.\+h\char`\"{}}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
Include dependency graph for tox\+\_\+test.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{da/d7b/tox__test_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\+\_\+sleep}(\hyperlink{n_tox_8c_a6150e0515f7202e2fb518f7206ed97dc}{x})~usleep(1000$\ast$\hyperlink{n_tox_8c_a6150e0515f7202e2fb518f7206ed97dc}{x})
\item 
\#define \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{N\+U\+M\+\_\+\+T\+O\+X\+E\+S}~66
\item 
\#define \hyperlink{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}{N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S}~50
\item 
\#define \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T}~33448
\item 
\#define \hyperlink{tox__test_8c_a1eccd4f084c3a68e8eeb59e8202ea805}{N\+U\+M\+\_\+\+T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+S}~3
\item 
\#define \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{N\+U\+M\+\_\+\+G\+R\+O\+U\+P\+\_\+\+T\+O\+X}~32
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{tox__test_8c_a23435c36683784fe0b913e77c8445c32}{accept\+\_\+friend\+\_\+request} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$\hyperlink{_messenger__test_8c_aea6eb6c7c30a659f1b0dee83eaf03ea2}{m}, const uint8\+\_\+t $\ast$public\+\_\+key, const uint8\+\_\+t $\ast$data, size\+\_\+t length, void $\ast$userdata)
\item 
void \hyperlink{tox__test_8c_ae2328c9f40aa212fc7e83381fc8f664f}{print\+\_\+message} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$\hyperlink{_messenger__test_8c_aea6eb6c7c30a659f1b0dee83eaf03ea2}{m}, uint32\+\_\+t friendnumber, \hyperlink{tox_8h_a362037c83fd908cecc44cb58ddd57fe0}{T\+O\+X\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+T\+Y\+P\+E} type, const uint8\+\_\+t $\ast$string, size\+\_\+t length, void $\ast$userdata)
\item 
void \hyperlink{tox__test_8c_a89c9c8906f86908f757554904956c646}{print\+\_\+nickchange} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$\hyperlink{_messenger__test_8c_aea6eb6c7c30a659f1b0dee83eaf03ea2}{m}, uint32\+\_\+t friendnumber, const uint8\+\_\+t $\ast$string, size\+\_\+t length, void $\ast$userdata)
\item 
void \hyperlink{tox__test_8c_aafd4e5577a5f8907ac641c1dd20e3e0d}{print\+\_\+status\+\_\+m\+\_\+change} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, uint32\+\_\+t \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\+\_\+number}, const uint8\+\_\+t $\ast$message, size\+\_\+t length, void $\ast$user\+\_\+data)
\item 
void \hyperlink{tox__test_8c_a49f7f9d4d6eebf58f05af4f35796f7d9}{print\+\_\+typingchange} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$\hyperlink{_messenger__test_8c_aea6eb6c7c30a659f1b0dee83eaf03ea2}{m}, uint32\+\_\+t friendnumber, bool typing, void $\ast$userdata)
\item 
void \hyperlink{tox__test_8c_a346c0ee0f98c8302ef6495b7310782d6}{handle\+\_\+custom\+\_\+packet} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$\hyperlink{_messenger__test_8c_aea6eb6c7c30a659f1b0dee83eaf03ea2}{m}, uint32\+\_\+t friend\+\_\+num, const uint8\+\_\+t $\ast$data, size\+\_\+t len, void $\ast$object)
\item 
void \hyperlink{tox__test_8c_a26511de8b96c24fd18e8255e13822b5f}{tox\+\_\+file\+\_\+receive} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, uint32\+\_\+t \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\+\_\+number}, uint32\+\_\+t file\+\_\+number, uint32\+\_\+t kind, uint64\+\_\+t filesize, const uint8\+\_\+t $\ast$filename, size\+\_\+t filename\+\_\+length, void $\ast$userdata)
\item 
void \hyperlink{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}{file\+\_\+print\+\_\+control} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, uint32\+\_\+t \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\+\_\+number}, uint32\+\_\+t file\+\_\+number, \hyperlink{tox_8h_a18a7808bc88ad8a040b4ee0c4e1461f9}{T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+C\+O\+N\+T\+R\+O\+L} control, void $\ast$userdata)
\item 
void \hyperlink{tox__test_8c_a7209b965126c3b606c3f0030a088ed27}{tox\+\_\+file\+\_\+chunk\+\_\+request} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, uint32\+\_\+t \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\+\_\+number}, uint32\+\_\+t file\+\_\+number, uint64\+\_\+t position, size\+\_\+t length, void $\ast$user\+\_\+data)
\item 
void \hyperlink{tox__test_8c_a2d81671277a08fc6e90ef2dae0f3ea4e}{write\+\_\+file} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, uint32\+\_\+t friendnumber, uint32\+\_\+t filenumber, uint64\+\_\+t position, const uint8\+\_\+t $\ast$data, size\+\_\+t length, void $\ast$user\+\_\+data)
\item 
void \hyperlink{tox__test_8c_a622eddd7d635d4389b1ea0cb9914dca2}{tox\+\_\+connection\+\_\+status} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbb}{T\+O\+X\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N} connection\+\_\+status, void $\ast$user\+\_\+data)
\item 
\hyperlink{tox__test_8c_a613a81335be756546ddb9d387344f7d5}{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T} (test\+\_\+one)
\item 
E\+N\+D\+\_\+\+T\+E\+S\+T \hyperlink{tox__test_8c_a4c612d3a3f15c8fbf2e4bde8002bc33b}{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T} (test\+\_\+few\+\_\+clients)
\item 
\hyperlink{tox__test_8c_a4bc0f448861114ed3092905b809f553e}{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T} (test\+\_\+many\+\_\+clients)
\item 
\hyperlink{tox__test_8c_a7d4f70e1580986cb8b3ba57d085ccc13}{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T} (test\+\_\+many\+\_\+clients\+\_\+tcp)
\item 
\hyperlink{tox__test_8c_acd0229746cbc8d1bc591d7409fef263d}{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T} (test\+\_\+many\+\_\+clients\+\_\+tcp\+\_\+b)
\item 
void \hyperlink{tox__test_8c_adb48712ca97fe3bd1c837671708d7915}{g\+\_\+accept\+\_\+friend\+\_\+request} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$\hyperlink{_messenger__test_8c_aea6eb6c7c30a659f1b0dee83eaf03ea2}{m}, const uint8\+\_\+t $\ast$public\+\_\+key, const uint8\+\_\+t $\ast$data, size\+\_\+t length, void $\ast$userdata)
\item 
void \hyperlink{tox__test_8c_ad249c87d6056da5531b1e4265c03001a}{print\+\_\+group\+\_\+invite\+\_\+callback} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, int32\+\_\+t friendnumber, uint8\+\_\+t type, const uint8\+\_\+t $\ast$data, uint16\+\_\+t length, void $\ast$userdata)
\item 
void \hyperlink{tox__test_8c_a966736e6f321099a5912d4a37e7f5dcc}{print\+\_\+group\+\_\+message} (\hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$tox, int groupnumber, int peernumber, const uint8\+\_\+t $\ast$message, uint16\+\_\+t length, void $\ast$userdata)
\item 
\hyperlink{tox__test_8c_a999b8d0cb6f7a7ea6f983f4f32e18f25}{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T} (test\+\_\+many\+\_\+group)
\item 
E\+N\+D\+\_\+\+T\+E\+S\+T Suite $\ast$ \hyperlink{tox__test_8c_ad7ac55b5ffe8ce8db9d56bb6eeadd9ad}{tox\+\_\+suite} (void)
\item 
int \hyperlink{tox__test_8c_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \hyperlink{tox__test_8c_ab1d5fca465944ffe2e747bdae3909bdd}{messages\+\_\+received}
\item 
uint32\+\_\+t \hyperlink{tox__test_8c_a1777e10a94056e038f7b143f48308a97}{name\+\_\+changes}
\item 
uint32\+\_\+t \hyperlink{tox__test_8c_a16125880dc91d99e418dde79c160fcb0}{status\+\_\+m\+\_\+changes}
\item 
uint32\+\_\+t \hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\+\_\+changes}
\item 
uint32\+\_\+t \hyperlink{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{custom\+\_\+packet}
\item 
uint64\+\_\+t \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\+\_\+recv}
\item 
uint64\+\_\+t \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\+\_\+pos}
\item 
uint8\+\_\+t \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\+\_\+cmp\+\_\+id} \mbox{[}\hyperlink{tox_8h_a4d73579fc56838f35741697c7f684884}{T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+I\+D\+\_\+\+L\+E\+N\+G\+T\+H}\mbox{]}
\item 
uint8\+\_\+t \hyperlink{tox__test_8c_aed845bec91f99896ce34a65a6f248ea5}{filenum}
\item 
uint32\+\_\+t \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\+\_\+accepted}
\item 
uint64\+\_\+t \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\+\_\+size}
\item 
uint32\+\_\+t \hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\+\_\+ok}
\item 
uint64\+\_\+t \hyperlink{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}{max\+\_\+sending}
\item 
\+\_\+\+Bool \hyperlink{tox__test_8c_ad1e4f41f9bf2ebc5020cd25b2fc6b731}{m\+\_\+send\+\_\+reached}
\item 
uint8\+\_\+t \hyperlink{tox__test_8c_a7381c2701d5667ad35e0a7290b3dd69f}{sending\+\_\+num}
\item 
\+\_\+\+Bool \hyperlink{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{file\+\_\+sending\+\_\+done}
\item 
uint8\+\_\+t \hyperlink{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}{num}
\item 
\+\_\+\+Bool \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\+\_\+recv}
\item 
unsigned int \hyperlink{tox__test_8c_a2a7cf11edabb09529dd4b6da3ba04f5c}{connected\+\_\+t1}
\item 
static \hyperlink{toxav_8c_a9e678c08e286eb1f36ebc7f770354e82}{Tox} $\ast$ \hyperlink{tox__test_8c_a53b737b92d6c426184603fa2bbf06618}{invite\+\_\+tox}
\item 
static unsigned int \hyperlink{tox__test_8c_a2c670bbc18645e6c2fdd3af82e8d35fb}{invite\+\_\+counter}
\item 
static unsigned int \hyperlink{tox__test_8c_a45c4074ed51957a25c8eee95084fb8c2}{num\+\_\+recv}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!c\+\_\+sleep@{c\+\_\+sleep}}
\index{c\+\_\+sleep@{c\+\_\+sleep}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{c\+\_\+sleep}]{\setlength{\rightskip}{0pt plus 5cm}\#define c\+\_\+sleep(
\begin{DoxyParamCaption}
\item[{}]{{\bf x}}
\end{DoxyParamCaption}
)~usleep(1000$\ast${\bf x})}}\label{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}


Definition at line 21 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S@{N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S}}
\index{N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S@{N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S~50}}\label{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}


Definition at line 810 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!N\+U\+M\+\_\+\+G\+R\+O\+U\+P\+\_\+\+T\+O\+X@{N\+U\+M\+\_\+\+G\+R\+O\+U\+P\+\_\+\+T\+O\+X}}
\index{N\+U\+M\+\_\+\+G\+R\+O\+U\+P\+\_\+\+T\+O\+X@{N\+U\+M\+\_\+\+G\+R\+O\+U\+P\+\_\+\+T\+O\+X}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{N\+U\+M\+\_\+\+G\+R\+O\+U\+P\+\_\+\+T\+O\+X}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+U\+M\+\_\+\+G\+R\+O\+U\+P\+\_\+\+T\+O\+X~32}}\label{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}


Definition at line 1092 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_a1eccd4f084c3a68e8eeb59e8202ea805}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!N\+U\+M\+\_\+\+T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+S@{N\+U\+M\+\_\+\+T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+S}}
\index{N\+U\+M\+\_\+\+T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+S@{N\+U\+M\+\_\+\+T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+S}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{N\+U\+M\+\_\+\+T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+U\+M\+\_\+\+T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+S~3}}\label{tox__test_8c_a1eccd4f084c3a68e8eeb59e8202ea805}


Definition at line 996 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!N\+U\+M\+\_\+\+T\+O\+X\+E\+S@{N\+U\+M\+\_\+\+T\+O\+X\+E\+S}}
\index{N\+U\+M\+\_\+\+T\+O\+X\+E\+S@{N\+U\+M\+\_\+\+T\+O\+X\+E\+S}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{N\+U\+M\+\_\+\+T\+O\+X\+E\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+U\+M\+\_\+\+T\+O\+X\+E\+S~66}}\label{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}


Definition at line 809 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T@{T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T}}
\index{T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T@{T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T~33448}}\label{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}


Definition at line 902 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().



\subsection{Function Documentation}
\hypertarget{tox__test_8c_a23435c36683784fe0b913e77c8445c32}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!accept\+\_\+friend\+\_\+request@{accept\+\_\+friend\+\_\+request}}
\index{accept\+\_\+friend\+\_\+request@{accept\+\_\+friend\+\_\+request}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{accept\+\_\+friend\+\_\+request}]{\setlength{\rightskip}{0pt plus 5cm}void accept\+\_\+friend\+\_\+request (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{m, }
\item[{const uint8\+\_\+t $\ast$}]{public\+\_\+key, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a23435c36683784fe0b913e77c8445c32}


Definition at line 25 of file tox\+\_\+test.\+c.



References tox\+\_\+friend\+\_\+add\+\_\+norequest().



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
26 \{
27     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 974536)
28         \textcolor{keywordflow}{return};
29 
30     \textcolor{keywordflow}{if} (length == 7 && memcmp(\textcolor{stringliteral}{"Gentoo"}, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, 7) == 0) \{
31         \hyperlink{tox_8c_ad499c853b628d04dd0f3c6ef5a14ebe4}{tox\_friend\_add\_norequest}(m, \hyperlink{namespacemake-funny-savefile_a6734667aeff5c30ad9e5624ccb556a87}{public\_key}, 0);
32     \}
33 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_a23435c36683784fe0b913e77c8445c32_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{d9/d35/tox__test_8c_a23435c36683784fe0b913e77c8445c32_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!file\+\_\+print\+\_\+control@{file\+\_\+print\+\_\+control}}
\index{file\+\_\+print\+\_\+control@{file\+\_\+print\+\_\+control}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{file\+\_\+print\+\_\+control}]{\setlength{\rightskip}{0pt plus 5cm}void file\+\_\+print\+\_\+control (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{uint32\+\_\+t}]{friend\+\_\+number, }
\item[{uint32\+\_\+t}]{file\+\_\+number, }
\item[{{\bf T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+C\+O\+N\+T\+R\+O\+L}}]{control, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}


Definition at line 181 of file tox\+\_\+test.\+c.



References sendf\+\_\+ok, and T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+R\+E\+S\+U\+M\+E.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
183 \{
184     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 974536)
185         \textcolor{keywordflow}{return};
186 
187     \textcolor{comment}{/* First send file num is 0.*/}
188     \textcolor{keywordflow}{if} (file\_number == 0 && control == \hyperlink{tox_8h_a18a7808bc88ad8a040b4ee0c4e1461f9aa5df194635dbb35c0519a811b57c524c}{TOX\_FILE\_CONTROL\_RESUME})
189         \hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok} = 1;
190 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=284pt]{d9/d35/tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_adb48712ca97fe3bd1c837671708d7915}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!g\+\_\+accept\+\_\+friend\+\_\+request@{g\+\_\+accept\+\_\+friend\+\_\+request}}
\index{g\+\_\+accept\+\_\+friend\+\_\+request@{g\+\_\+accept\+\_\+friend\+\_\+request}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{g\+\_\+accept\+\_\+friend\+\_\+request}]{\setlength{\rightskip}{0pt plus 5cm}void g\+\_\+accept\+\_\+friend\+\_\+request (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{m, }
\item[{const uint8\+\_\+t $\ast$}]{public\+\_\+key, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_adb48712ca97fe3bd1c837671708d7915}


Definition at line 1094 of file tox\+\_\+test.\+c.



References tox\+\_\+friend\+\_\+add\+\_\+norequest().



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
1095 \{
1096     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 234212)
1097         \textcolor{keywordflow}{return};
1098 
1099     \textcolor{keywordflow}{if} (length == 7 && memcmp(\textcolor{stringliteral}{"Gentoo"}, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, 7) == 0) \{
1100         \hyperlink{tox_8c_ad499c853b628d04dd0f3c6ef5a14ebe4}{tox\_friend\_add\_norequest}(m, \hyperlink{namespacemake-funny-savefile_a6734667aeff5c30ad9e5624ccb556a87}{public\_key}, 0);
1101     \}
1102 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_adb48712ca97fe3bd1c837671708d7915_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{d9/d35/tox__test_8c_adb48712ca97fe3bd1c837671708d7915_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a346c0ee0f98c8302ef6495b7310782d6}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!handle\+\_\+custom\+\_\+packet@{handle\+\_\+custom\+\_\+packet}}
\index{handle\+\_\+custom\+\_\+packet@{handle\+\_\+custom\+\_\+packet}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{handle\+\_\+custom\+\_\+packet}]{\setlength{\rightskip}{0pt plus 5cm}void handle\+\_\+custom\+\_\+packet (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{m, }
\item[{uint32\+\_\+t}]{friend\+\_\+num, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{size\+\_\+t}]{len, }
\item[{void $\ast$}]{object}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a346c0ee0f98c8302ef6495b7310782d6}


Definition at line 89 of file tox\+\_\+test.\+c.



References custom\+\_\+packet, and T\+O\+X\+\_\+\+M\+A\+X\+\_\+\+C\+U\+S\+T\+O\+M\+\_\+\+P\+A\+C\+K\+E\+T\+\_\+\+S\+I\+Z\+E.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
90 \{
91     uint8\_t number = *((uint32\_t *)\textcolor{keywordtype}{object});
92 
93     \textcolor{keywordflow}{if} (len != \hyperlink{tox_8h_addcda08073f4bad8c7eb351c55c6393e}{TOX\_MAX\_CUSTOM\_PACKET\_SIZE})
94         \textcolor{keywordflow}{return};
95 
96     uint8\_t f\_data[len];
97     memset(f\_data, number, len);
98 
99     \textcolor{keywordflow}{if} (memcmp(f\_data, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, len) == 0) \{
100         ++\hyperlink{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{custom\_packet};
101     \} \textcolor{keywordflow}{else} \{
102         ck\_abort\_msg(\textcolor{stringliteral}{"Custom packet fail. %u"}, number);
103     \}
104 
105     \textcolor{keywordflow}{return};
106 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{d9/d35/tox__test_8c_a346c0ee0f98c8302ef6495b7310782d6_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a0ddf1224851353fc92bfbff6f499fa97}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!main@{main}}
\index{main@{main}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a0ddf1224851353fc92bfbff6f499fa97}


Definition at line 1285 of file tox\+\_\+test.\+c.



References tox\+\_\+suite().


\begin{DoxyCode}
1286 \{
1287     srand((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) time(NULL));
1288 
1289     Suite *tox = \hyperlink{tox__test_8c_ad7ac55b5ffe8ce8db9d56bb6eeadd9ad}{tox\_suite}();
1290     SRunner *test\_runner = srunner\_create(tox);
1291 
1292     \textcolor{keywordtype}{int} number\_failed = 0;
1293     srunner\_run\_all(test\_runner, CK\_NORMAL);
1294     number\_failed = srunner\_ntests\_failed(test\_runner);
1295 
1296     srunner\_free(test\_runner);
1297 
1298     \textcolor{keywordflow}{return} number\_failed;
1299 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=210pt]{d9/d35/tox__test_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_ad249c87d6056da5531b1e4265c03001a}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!print\+\_\+group\+\_\+invite\+\_\+callback@{print\+\_\+group\+\_\+invite\+\_\+callback}}
\index{print\+\_\+group\+\_\+invite\+\_\+callback@{print\+\_\+group\+\_\+invite\+\_\+callback}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{print\+\_\+group\+\_\+invite\+\_\+callback}]{\setlength{\rightskip}{0pt plus 5cm}void print\+\_\+group\+\_\+invite\+\_\+callback (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{int32\+\_\+t}]{friendnumber, }
\item[{uint8\+\_\+t}]{type, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{uint16\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_ad249c87d6056da5531b1e4265c03001a}


Definition at line 1107 of file tox\+\_\+test.\+c.



References ck\+\_\+assert\+\_\+msg(), invite\+\_\+counter, T\+O\+X\+\_\+\+G\+R\+O\+U\+P\+C\+H\+A\+T\+\_\+\+T\+Y\+P\+E\+\_\+\+T\+E\+X\+T, and tox\+\_\+join\+\_\+groupchat().



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
1109 \{
1110     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 234212)
1111         \textcolor{keywordflow}{return};
1112 
1113     \textcolor{keywordflow}{if} (type != \hyperlink{tox__old_8h_a0ed680fdb405e7195d9f14032851eebba94fafa003c74083811f6b8c8ad57c9ec}{TOX\_GROUPCHAT\_TYPE\_TEXT})
1114         \textcolor{keywordflow}{return};
1115 
1116     \textcolor{keywordtype}{int} g\_num;
1117 
1118     \textcolor{keywordflow}{if} ((g\_num = \hyperlink{tox__old_8h_a26cf750df10de88c8e5024db883fff97}{tox\_join\_groupchat}(tox, friendnumber, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, length)) == -1)
1119         \textcolor{keywordflow}{return};
1120 
1121     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(g\_num == 0, \textcolor{stringliteral}{"Group number was not 0"});
1122     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__old_8h_a26cf750df10de88c8e5024db883fff97}{tox\_join\_groupchat}(tox, friendnumber, 
      \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, length) == -1,
1123                   \textcolor{stringliteral}{"Joining groupchat twice should be impossible."});
1124 
1125     \hyperlink{tox__test_8c_a53b737b92d6c426184603fa2bbf06618}{invite\_tox} = tox;
1126     \hyperlink{tox__test_8c_a2c670bbc18645e6c2fdd3af82e8d35fb}{invite\_counter} = 4;
1127 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_ad249c87d6056da5531b1e4265c03001a_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{d9/d35/tox__test_8c_ad249c87d6056da5531b1e4265c03001a_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a966736e6f321099a5912d4a37e7f5dcc}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!print\+\_\+group\+\_\+message@{print\+\_\+group\+\_\+message}}
\index{print\+\_\+group\+\_\+message@{print\+\_\+group\+\_\+message}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{print\+\_\+group\+\_\+message}]{\setlength{\rightskip}{0pt plus 5cm}void print\+\_\+group\+\_\+message (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{int}]{groupnumber, }
\item[{int}]{peernumber, }
\item[{const uint8\+\_\+t $\ast$}]{message, }
\item[{uint16\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a966736e6f321099a5912d4a37e7f5dcc}


Definition at line 1131 of file tox\+\_\+test.\+c.



References num\+\_\+recv.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
1133 \{
1134     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 234212)
1135         \textcolor{keywordflow}{return};
1136 
1137     \textcolor{keywordflow}{if} (length == (\textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Install Gentoo"}) - 1) && memcmp(message, \textcolor{stringliteral}{"Install Gentoo"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Install
       Gentoo"}) - 1) == 0) \{
1138         ++\hyperlink{tox__test_8c_a45c4074ed51957a25c8eee95084fb8c2}{num\_recv};
1139     \}
1140 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{d9/d35/tox__test_8c_a966736e6f321099a5912d4a37e7f5dcc_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_ae2328c9f40aa212fc7e83381fc8f664f}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!print\+\_\+message@{print\+\_\+message}}
\index{print\+\_\+message@{print\+\_\+message}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{print\+\_\+message}]{\setlength{\rightskip}{0pt plus 5cm}void print\+\_\+message (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{m, }
\item[{uint32\+\_\+t}]{friendnumber, }
\item[{{\bf T\+O\+X\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+T\+Y\+P\+E}}]{type, }
\item[{const uint8\+\_\+t $\ast$}]{string, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_ae2328c9f40aa212fc7e83381fc8f664f}


Definition at line 36 of file tox\+\_\+test.\+c.



References messages\+\_\+received, T\+O\+X\+\_\+\+M\+A\+X\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+T\+H, and T\+O\+X\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+T\+Y\+P\+E\+\_\+\+N\+O\+R\+M\+A\+L.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
38 \{
39     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 974536)
40         \textcolor{keywordflow}{return};
41 
42     \textcolor{keywordflow}{if} (type != \hyperlink{tox_8h_a362037c83fd908cecc44cb58ddd57fe0ae777df37c1fda74ab34a3559f7a9bb4f}{TOX\_MESSAGE\_TYPE\_NORMAL}) \{
43         ck\_abort\_msg(\textcolor{stringliteral}{"Bad type"});
44     \}
45 
46     uint8\_t cmp\_msg[\hyperlink{tox_8h_afb512af96e7d1ae1dddee985119cb80c}{TOX\_MAX\_MESSAGE\_LENGTH}];
47     memset(cmp\_msg, \textcolor{charliteral}{'G'}, \textcolor{keyword}{sizeof}(cmp\_msg));
48 
49     \textcolor{keywordflow}{if} (length == \hyperlink{tox_8h_afb512af96e7d1ae1dddee985119cb80c}{TOX\_MAX\_MESSAGE\_LENGTH} && memcmp(\textcolor{keywordtype}{string}, cmp\_msg, \textcolor{keyword}{sizeof}(cmp\_msg)) 
      == 0)
50         ++\hyperlink{tox__test_8c_ab1d5fca465944ffe2e747bdae3909bdd}{messages\_received};
51 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{d9/d35/tox__test_8c_ae2328c9f40aa212fc7e83381fc8f664f_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a89c9c8906f86908f757554904956c646}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!print\+\_\+nickchange@{print\+\_\+nickchange}}
\index{print\+\_\+nickchange@{print\+\_\+nickchange}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{print\+\_\+nickchange}]{\setlength{\rightskip}{0pt plus 5cm}void print\+\_\+nickchange (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{m, }
\item[{uint32\+\_\+t}]{friendnumber, }
\item[{const uint8\+\_\+t $\ast$}]{string, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a89c9c8906f86908f757554904956c646}


Definition at line 55 of file tox\+\_\+test.\+c.



References name\+\_\+changes.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
56 \{
57     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 974536)
58         \textcolor{keywordflow}{return};
59 
60     \textcolor{keywordflow}{if} (length == \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo"}) && memcmp(\textcolor{keywordtype}{string}, \textcolor{stringliteral}{"Gentoo"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo"})) == 0)
61         ++\hyperlink{tox__test_8c_a1777e10a94056e038f7b143f48308a97}{name\_changes};
62 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=286pt]{d9/d35/tox__test_8c_a89c9c8906f86908f757554904956c646_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_aafd4e5577a5f8907ac641c1dd20e3e0d}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!print\+\_\+status\+\_\+m\+\_\+change@{print\+\_\+status\+\_\+m\+\_\+change}}
\index{print\+\_\+status\+\_\+m\+\_\+change@{print\+\_\+status\+\_\+m\+\_\+change}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{print\+\_\+status\+\_\+m\+\_\+change}]{\setlength{\rightskip}{0pt plus 5cm}void print\+\_\+status\+\_\+m\+\_\+change (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{uint32\+\_\+t}]{friend\+\_\+number, }
\item[{const uint8\+\_\+t $\ast$}]{message, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{user\+\_\+data}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_aafd4e5577a5f8907ac641c1dd20e3e0d}


Definition at line 65 of file tox\+\_\+test.\+c.



References status\+\_\+m\+\_\+changes.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
66 \{
67     \textcolor{keywordflow}{if} (*((uint32\_t *)user\_data) != 974536)
68         \textcolor{keywordflow}{return};
69 
70     \textcolor{keywordflow}{if} (length == \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Installing Gentoo"}) && memcmp(message, \textcolor{stringliteral}{"Installing Gentoo"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Installing
       Gentoo"})) == 0)
71         ++\hyperlink{tox__test_8c_a16125880dc91d99e418dde79c160fcb0}{status\_m\_changes};
72 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{d9/d35/tox__test_8c_aafd4e5577a5f8907ac641c1dd20e3e0d_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a49f7f9d4d6eebf58f05af4f35796f7d9}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!print\+\_\+typingchange@{print\+\_\+typingchange}}
\index{print\+\_\+typingchange@{print\+\_\+typingchange}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{print\+\_\+typingchange}]{\setlength{\rightskip}{0pt plus 5cm}void print\+\_\+typingchange (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{m, }
\item[{uint32\+\_\+t}]{friendnumber, }
\item[{bool}]{typing, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a49f7f9d4d6eebf58f05af4f35796f7d9}


Definition at line 76 of file tox\+\_\+test.\+c.



References typing\+\_\+changes.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
77 \{
78     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 974536)
79         \textcolor{keywordflow}{return};
80 
81     \textcolor{keywordflow}{if} (!typing)
82         \hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\_changes} = 1;
83     \textcolor{keywordflow}{else}
84         \hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\_changes} = 2;
85 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{d9/d35/tox__test_8c_a49f7f9d4d6eebf58f05af4f35796f7d9_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a613a81335be756546ddb9d387344f7d5}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}}
\index{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}]{\setlength{\rightskip}{0pt plus 5cm}S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T (
\begin{DoxyParamCaption}
\item[{test\+\_\+one}]{}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a613a81335be756546ddb9d387344f7d5}


Definition at line 289 of file tox\+\_\+test.\+c.



References ck\+\_\+assert\+\_\+msg(), make-\/funny-\/savefile\+::data, error, i, Tox\+\_\+\+Options\+::savedata\+\_\+data, Tox\+\_\+\+Options\+::savedata\+\_\+length, Tox\+\_\+\+Options\+::savedata\+\_\+type, T\+O\+X\+\_\+\+A\+D\+D\+R\+E\+S\+S\+\_\+\+S\+I\+Z\+E, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+A\+L\+R\+E\+A\+D\+Y\+\_\+\+S\+E\+N\+T, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+B\+A\+D\+\_\+\+C\+H\+E\+C\+K\+S\+U\+M, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+N\+O\+\_\+\+M\+E\+S\+S\+A\+G\+E, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+N\+U\+L\+L, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+O\+W\+N\+\_\+\+K\+E\+Y, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+T\+O\+O\+\_\+\+L\+O\+N\+G, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+G\+E\+T\+\_\+\+P\+O\+R\+T\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+N\+E\+W\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+O\+P\+T\+I\+O\+N\+S\+\_\+\+N\+E\+W\+\_\+\+O\+K, tox\+\_\+friend\+\_\+add(), tox\+\_\+get\+\_\+savedata(), tox\+\_\+get\+\_\+savedata\+\_\+size(), tox\+\_\+kill(), T\+O\+X\+\_\+\+M\+A\+X\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+R\+E\+Q\+U\+E\+S\+T\+\_\+\+L\+E\+N\+G\+T\+H, T\+O\+X\+\_\+\+M\+A\+X\+\_\+\+N\+A\+M\+E\+\_\+\+L\+E\+N\+G\+T\+H, tox\+\_\+new(), tox\+\_\+options\+\_\+default(), tox\+\_\+options\+\_\+free(), tox\+\_\+options\+\_\+new(), T\+O\+X\+\_\+\+P\+U\+B\+L\+I\+C\+\_\+\+K\+E\+Y\+\_\+\+S\+I\+Z\+E, T\+O\+X\+\_\+\+S\+A\+V\+E\+D\+A\+T\+A\+\_\+\+T\+Y\+P\+E\+\_\+\+S\+E\+C\+R\+E\+T\+\_\+\+K\+E\+Y, T\+O\+X\+\_\+\+S\+A\+V\+E\+D\+A\+T\+A\+\_\+\+T\+Y\+P\+E\+\_\+\+T\+O\+X\+\_\+\+S\+A\+V\+E, T\+O\+X\+\_\+\+S\+E\+C\+R\+E\+T\+\_\+\+K\+E\+Y\+\_\+\+S\+I\+Z\+E, tox\+\_\+self\+\_\+get\+\_\+address(), tox\+\_\+self\+\_\+get\+\_\+name(), tox\+\_\+self\+\_\+get\+\_\+name\+\_\+size(), tox\+\_\+self\+\_\+get\+\_\+public\+\_\+key(), tox\+\_\+self\+\_\+get\+\_\+secret\+\_\+key(), tox\+\_\+self\+\_\+get\+\_\+udp\+\_\+port(), and tox\+\_\+self\+\_\+set\+\_\+name().


\begin{DoxyCode}
290 \{
291     \{
292         \hyperlink{tox_8h_a9ccf8419007f1c9822097153d73bec6b}{TOX\_ERR\_OPTIONS\_NEW} o\_err;
293         \textcolor{keyword}{struct }\hyperlink{struct_tox___options}{Tox\_Options} *o1 = \hyperlink{tox_8c_a5736fd01eb6129d6f817b780cd4262bb}{tox\_options\_new}(&o\_err);
294         \textcolor{keyword}{struct }\hyperlink{struct_tox___options}{Tox\_Options} o2;
295         \hyperlink{tox_8c_ac9b57278d2ca390623624409303ea390}{tox\_options\_default}(&o2);
296         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(o\_err == \hyperlink{tox_8h_a9ccf8419007f1c9822097153d73bec6ba178cababf66c0468877643927b620842}{TOX\_ERR\_OPTIONS\_NEW\_OK}, \textcolor{stringliteral}{"tox\_options\_new
       wrong error"});
297         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(memcmp(o1, &o2, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{struct_tox___options}{Tox\_Options})) == 0, \textcolor{stringliteral}{"
      tox\_options\_new error"});
298         \hyperlink{tox_8c_aa23b514f2f1f9518f07a03b547a3585f}{tox\_options\_free}(o1);
299     \}
300 
301     \hyperlink{struct_messenger}{Tox} *tox1 = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(0, 0);
302     \hyperlink{struct_messenger}{Tox} *tox2 = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(0, 0);
303 
304     \{
305         \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422}{TOX\_ERR\_GET\_PORT} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
306         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a7f537fd786bb626d2d22bc16dbddc8a1}{tox\_self\_get\_udp\_port}(tox1, &error) == 33445, \textcolor{stringliteral}{"
      First Tox instance did not bind to udp port 33445.\(\backslash\)n"});
307         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
308     \}
309 
310     uint8\_t address[\hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}];
311     \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(tox1, address);
312     \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152db}{TOX\_ERR\_FRIEND\_ADD} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
313     uint32\_t ret = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox1, address, (uint8\_t *)\textcolor{stringliteral}{"m"}, 1, &error);
314     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == UINT32\_MAX && error == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba1a1e144718919433bf10ff67e202a86b}{TOX\_ERR\_FRIEND\_ADD\_OWN\_KEY}, \textcolor{stringliteral}{"Adding own address worked."});
315 
316     \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(tox2, address);
317     uint8\_t message[\hyperlink{tox_8h_a53d822c2bb65e0a238c11495fea8d48e}{TOX\_MAX\_FRIEND\_REQUEST\_LENGTH} + 1];
318     ret = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox1, address, NULL, 0, &error);
319     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == UINT32\_MAX && error == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba508541d558e3cb27c824ce9f9496c8c2}{TOX\_ERR\_FRIEND\_ADD\_NULL}, \textcolor{stringliteral}{"Sending request with no message worked."});
320     ret = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox1, address, message, 0, &error);
321     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == UINT32\_MAX && error == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba62737bba050bceeec31bc9f96fee69e7}{TOX\_ERR\_FRIEND\_ADD\_NO\_MESSAGE}, \textcolor{stringliteral}{"Sending request with no message worked."});
322     ret = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox1, address, message, \textcolor{keyword}{sizeof}(message), &error);
323     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == UINT32\_MAX && error == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba70d0ec34b873ad88ac623efff1d87cb1}{TOX\_ERR\_FRIEND\_ADD\_TOO\_LONG},
324                   \textcolor{stringliteral}{"TOX\_MAX\_FRIEND\_REQUEST\_LENGTH is too big."});
325 
326     address[0]++;
327     ret = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox1, address, (uint8\_t *)\textcolor{stringliteral}{"m"}, 1, &error);
328     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == UINT32\_MAX && error == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba2df084c5a14cb2ff9992eea99b89096f}{TOX\_ERR\_FRIEND\_ADD\_BAD\_CHECKSUM},
329                   \textcolor{stringliteral}{"Adding address with bad checksum worked."});
330 
331     \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(tox2, address);
332     ret = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox1, address, message, 
      \hyperlink{tox_8h_a53d822c2bb65e0a238c11495fea8d48e}{TOX\_MAX\_FRIEND\_REQUEST\_LENGTH}, &error);
333     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == 0 && error == \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dbab27c52d344fc2f36a857059782a4b234}{TOX\_ERR\_FRIEND\_ADD\_OK}, \textcolor{stringliteral}{"Failed to
       add friend."});
334     ret = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox1, address, message, 
      \hyperlink{tox_8h_a53d822c2bb65e0a238c11495fea8d48e}{TOX\_MAX\_FRIEND\_REQUEST\_LENGTH}, &error);
335     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == UINT32\_MAX && error == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba82538639308d756617366376128c7edd}{TOX\_ERR\_FRIEND\_ADD\_ALREADY\_SENT}, \textcolor{stringliteral}{"Adding friend twice worked."});
336 
337     uint8\_t name[\hyperlink{tox_8h_a09073daf2dcb9e1daf380983ebc4f5b5}{TOX\_MAX\_NAME\_LENGTH}];
338     \textcolor{keywordtype}{int} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i};
339 
340     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox_8h_a09073daf2dcb9e1daf380983ebc4f5b5}{TOX\_MAX\_NAME\_LENGTH}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
341         name[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = rand();
342     \}
343 
344     \hyperlink{tox_8c_ac90dc0473971f738b2149ea4e0d9c967}{tox\_self\_set\_name}(tox1, name, \textcolor{keyword}{sizeof}(name), 0);
345     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a8cca8e665b194947b159c07d2ffd08b0}{tox\_self\_get\_name\_size}(tox1) == \textcolor{keyword}{sizeof}(name), \textcolor{stringliteral}{"Can't
       set name of TOX\_MAX\_NAME\_LENGTH"});
346 
347     \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(tox1, address);
348     \textcolor{keywordtype}{size\_t} save\_size = \hyperlink{tox_8c_ac2b90c8597ff7afa2e9532e81b65d412}{tox\_get\_savedata\_size}(tox1);
349     uint8\_t \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}[save\_size];
350     \hyperlink{tox_8c_ae13c8810890ae2d73b8c46e0c8033ab4}{tox\_get\_savedata}(tox1, data);
351 
352     \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(tox2);
353     \hyperlink{tox_8h_a035d2fc729a3389019d9e75b1779ee5f}{TOX\_ERR\_NEW} err\_n;
354 
355     \textcolor{keyword}{struct }\hyperlink{struct_tox___options}{Tox\_Options} options;
356     \hyperlink{tox_8c_ac9b57278d2ca390623624409303ea390}{tox\_options\_default}(&options);
357     options.savedata\_type = \hyperlink{tox_8h_a01a36d032dee4dd9e79be31a13128913aa48a8bb179a2f3539de506941d5b0c8c}{TOX\_SAVEDATA\_TYPE\_TOX\_SAVE};
358     options.savedata\_data = \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data};
359     options.savedata\_length = save\_size;
360     tox2 = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(&options, &err\_n);
361     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(err\_n == \hyperlink{tox_8h_a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4}{TOX\_ERR\_NEW\_OK}, \textcolor{stringliteral}{"Load failed"});
362 
363     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a8cca8e665b194947b159c07d2ffd08b0}{tox\_self\_get\_name\_size}(tox2) == \textcolor{keyword}{sizeof} name, \textcolor{stringliteral}{"Wrong
       name size."});
364 
365     uint8\_t address2[\hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}];
366     \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(tox2, address2);
367     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(memcmp(address2, address, \hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}) == 0, \textcolor{stringliteral}{"Wrong
       address."});
368     uint8\_t new\_name[\hyperlink{tox_8h_a09073daf2dcb9e1daf380983ebc4f5b5}{TOX\_MAX\_NAME\_LENGTH}] = \{ 0 \};
369     \hyperlink{tox_8c_aa045c3a00831568c55c164087ea618e2}{tox\_self\_get\_name}(tox2, new\_name);
370     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(memcmp(name, new\_name, TOX\_MAX\_NAME\_LENGTH) == 0, \textcolor{stringliteral}{"Wrong name"});
371 
372     uint8\_t sk[\hyperlink{tox_8h_af5f15fc43710f4236d0c8f0feb95c95d}{TOX\_SECRET\_KEY\_SIZE}];
373     \hyperlink{tox_8c_ace97dc278890c64f651a3482d14ab67d}{tox\_self\_get\_secret\_key}(tox2, sk);
374     \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(tox2);
375 
376     \hyperlink{tox_8c_ac9b57278d2ca390623624409303ea390}{tox\_options\_default}(&options);
377     options.savedata\_type = \hyperlink{tox_8h_a01a36d032dee4dd9e79be31a13128913af5175e8fd73f8ee448c66a5c329304dc}{TOX\_SAVEDATA\_TYPE\_SECRET\_KEY};
378     options.savedata\_data = sk;
379     options.savedata\_length = \textcolor{keyword}{sizeof}(sk);
380     tox2 = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(&options, &err\_n);
381     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(err\_n == \hyperlink{tox_8h_a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4}{TOX\_ERR\_NEW\_OK}, \textcolor{stringliteral}{"Load failed"});
382     uint8\_t address3[\hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}];
383     \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(tox2, address3);
384     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(memcmp(address3, address, \hyperlink{tox_8h_a6a25b8b522f6d65bacd1d84981b8c75c}{TOX\_PUBLIC\_KEY\_SIZE}) == 0, \textcolor{stringliteral}{"
      Wrong public key."});
385     uint8\_t pk[\hyperlink{tox_8h_a6a25b8b522f6d65bacd1d84981b8c75c}{TOX\_PUBLIC\_KEY\_SIZE}];
386     \hyperlink{tox_8c_a006dc38c9744b2723a50dddb198da44c}{tox\_self\_get\_public\_key}(tox2, pk);
387     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(memcmp(pk, address, \hyperlink{tox_8h_a6a25b8b522f6d65bacd1d84981b8c75c}{TOX\_PUBLIC\_KEY\_SIZE}) == 0, \textcolor{stringliteral}{"Wrong
       public key."});
388 
389     \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(tox1);
390     \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(tox2);
391 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_a613a81335be756546ddb9d387344f7d5_cgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a4c612d3a3f15c8fbf2e4bde8002bc33b}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}}
\index{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}]{\setlength{\rightskip}{0pt plus 5cm}E\+N\+D\+\_\+\+T\+E\+S\+T S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T (
\begin{DoxyParamCaption}
\item[{test\+\_\+few\+\_\+clients}]{}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a4c612d3a3f15c8fbf2e4bde8002bc33b}


Definition at line 394 of file tox\+\_\+test.\+c.



References accept\+\_\+friend\+\_\+request(), c\+\_\+sleep, ck\+\_\+assert\+\_\+msg(), connected\+\_\+t1, custom\+\_\+packet, error, file\+\_\+accepted, file\+\_\+cmp\+\_\+id, file\+\_\+print\+\_\+control(), file\+\_\+recv, file\+\_\+sending\+\_\+done, file\+\_\+size, handle\+\_\+custom\+\_\+packet(), m\+\_\+send\+\_\+reached, max\+\_\+sending, messages\+\_\+received, name\+\_\+changes, off, print\+\_\+message(), print\+\_\+nickchange(), print\+\_\+status\+\_\+m\+\_\+change(), print\+\_\+typingchange(), printf(), Tox\+\_\+\+Options\+::savedata\+\_\+data, Tox\+\_\+\+Options\+::savedata\+\_\+length, Tox\+\_\+\+Options\+::savedata\+\_\+type, sendf\+\_\+ok, sending\+\_\+pos, size\+\_\+recv, status\+\_\+m\+\_\+changes, T\+O\+X\+\_\+\+A\+D\+D\+R\+E\+S\+S\+\_\+\+S\+I\+Z\+E, tox\+\_\+callback\+\_\+file\+\_\+chunk\+\_\+request(), tox\+\_\+callback\+\_\+file\+\_\+recv(), tox\+\_\+callback\+\_\+file\+\_\+recv\+\_\+chunk(), tox\+\_\+callback\+\_\+file\+\_\+recv\+\_\+control(), tox\+\_\+callback\+\_\+friend\+\_\+lossless\+\_\+packet(), tox\+\_\+callback\+\_\+friend\+\_\+lossy\+\_\+packet(), tox\+\_\+callback\+\_\+friend\+\_\+message(), tox\+\_\+callback\+\_\+friend\+\_\+name(), tox\+\_\+callback\+\_\+friend\+\_\+request(), tox\+\_\+callback\+\_\+friend\+\_\+status\+\_\+message(), tox\+\_\+callback\+\_\+friend\+\_\+typing(), tox\+\_\+callback\+\_\+self\+\_\+connection\+\_\+status(), tox\+\_\+connection\+\_\+status(), T\+O\+X\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+U\+D\+P, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+I\+L\+E\+\_\+\+G\+E\+T\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+N\+D, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+I\+L\+E\+\_\+\+G\+E\+T\+\_\+\+N\+O\+T\+\_\+\+F\+O\+U\+N\+D, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+I\+L\+E\+\_\+\+G\+E\+T\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+Q\+U\+E\+R\+Y\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+S\+E\+N\+D\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+S\+E\+N\+D\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+T\+O\+O\+\_\+\+L\+O\+N\+G, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+G\+E\+T\+\_\+\+P\+O\+R\+T\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+N\+E\+W\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+S\+E\+T\+\_\+\+I\+N\+F\+O\+\_\+\+O\+K, tox\+\_\+file\+\_\+chunk\+\_\+request(), tox\+\_\+file\+\_\+get\+\_\+file\+\_\+id(), T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+K\+I\+N\+D\+\_\+\+D\+A\+T\+A, tox\+\_\+file\+\_\+receive(), tox\+\_\+file\+\_\+send(), tox\+\_\+friend\+\_\+add(), tox\+\_\+friend\+\_\+get\+\_\+connection\+\_\+status(), tox\+\_\+friend\+\_\+get\+\_\+name(), tox\+\_\+friend\+\_\+get\+\_\+name\+\_\+size(), tox\+\_\+friend\+\_\+get\+\_\+status\+\_\+message(), tox\+\_\+friend\+\_\+get\+\_\+status\+\_\+message\+\_\+size(), tox\+\_\+friend\+\_\+get\+\_\+typing(), tox\+\_\+friend\+\_\+send\+\_\+lossless\+\_\+packet(), tox\+\_\+friend\+\_\+send\+\_\+lossy\+\_\+packet(), tox\+\_\+friend\+\_\+send\+\_\+message(), tox\+\_\+get\+\_\+savedata(), tox\+\_\+get\+\_\+savedata\+\_\+size(), tox\+\_\+iterate(), tox\+\_\+iteration\+\_\+interval(), tox\+\_\+kill(), T\+O\+X\+\_\+\+M\+A\+X\+\_\+\+C\+U\+S\+T\+O\+M\+\_\+\+P\+A\+C\+K\+E\+T\+\_\+\+S\+I\+Z\+E, T\+O\+X\+\_\+\+M\+A\+X\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+T\+H, T\+O\+X\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+T\+Y\+P\+E\+\_\+\+N\+O\+R\+M\+A\+L, tox\+\_\+new(), tox\+\_\+options\+\_\+default(), T\+O\+X\+\_\+\+S\+A\+V\+E\+D\+A\+T\+A\+\_\+\+T\+Y\+P\+E\+\_\+\+T\+O\+X\+\_\+\+S\+A\+V\+E, tox\+\_\+self\+\_\+get\+\_\+address(), tox\+\_\+self\+\_\+get\+\_\+connection\+\_\+status(), tox\+\_\+self\+\_\+get\+\_\+udp\+\_\+port(), tox\+\_\+self\+\_\+set\+\_\+name(), tox\+\_\+self\+\_\+set\+\_\+status\+\_\+message(), tox\+\_\+self\+\_\+set\+\_\+typing(), typing\+\_\+changes, and write\+\_\+file().


\begin{DoxyCode}
395 \{
396     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} con\_time, cur\_time = time(NULL);
397     \hyperlink{tox_8h_a035d2fc729a3389019d9e75b1779ee5f}{TOX\_ERR\_NEW} t\_n\_error;
398     \hyperlink{struct_messenger}{Tox} *tox1 = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(0, &t\_n\_error);
399     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(t\_n\_error == \hyperlink{tox_8h_a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4}{TOX\_ERR\_NEW\_OK}, \textcolor{stringliteral}{"wrong error"});
400     \hyperlink{struct_messenger}{Tox} *tox2 = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(0, &t\_n\_error);
401     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(t\_n\_error == \hyperlink{tox_8h_a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4}{TOX\_ERR\_NEW\_OK}, \textcolor{stringliteral}{"wrong error"});
402     \hyperlink{struct_messenger}{Tox} *tox3 = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(0, &t\_n\_error);
403     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(t\_n\_error == \hyperlink{tox_8h_a035d2fc729a3389019d9e75b1779ee5facdcb315faf1496dba433c7b5443606b4}{TOX\_ERR\_NEW\_OK}, \textcolor{stringliteral}{"wrong error"});
404 
405     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(tox1 || tox2 || tox3, \textcolor{stringliteral}{"Failed to create 3 tox instances"});
406 
407     \{
408         \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422}{TOX\_ERR\_GET\_PORT} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
409         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a7f537fd786bb626d2d22bc16dbddc8a1}{tox\_self\_get\_udp\_port}(tox1, &error) == 33445, \textcolor{stringliteral}{"
      First Tox instance did not bind to udp port 33445.\(\backslash\)n"});
410         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
411     \}
412 
413     \{
414         \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422}{TOX\_ERR\_GET\_PORT} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
415         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a7f537fd786bb626d2d22bc16dbddc8a1}{tox\_self\_get\_udp\_port}(tox2, &error) == 33446, \textcolor{stringliteral}{"
      Second Tox instance did not bind to udp port 33446.\(\backslash\)n"});
416         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
417     \}
418 
419     \{
420         \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422}{TOX\_ERR\_GET\_PORT} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
421         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a7f537fd786bb626d2d22bc16dbddc8a1}{tox\_self\_get\_udp\_port}(tox3, &error) == 33447, \textcolor{stringliteral}{"
      Third Tox instance did not bind to udp port 33447.\(\backslash\)n"});
422         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
423     \}
424 
425     uint32\_t to\_compare = 974536;
426     \hyperlink{tox__test_8c_a2a7cf11edabb09529dd4b6da3ba04f5c}{connected\_t1} = 0;
427     \hyperlink{tox_8c_ab38a7512be865980d45819a3ab7e5e5a}{tox\_callback\_self\_connection\_status}(tox1, 
      \hyperlink{tox__test_8c_a622eddd7d635d4389b1ea0cb9914dca2}{tox\_connection\_status}, &to\_compare);
428     \hyperlink{tox_8c_a2cf9a901fd5db3b6635a3ece389cc349}{tox\_callback\_friend\_request}(tox2, 
      \hyperlink{tox__test_8c_a23435c36683784fe0b913e77c8445c32}{accept\_friend\_request}, &to\_compare);
429     uint8\_t address[\hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}];
430     \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(tox2, address);
431     uint32\_t test = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(tox3, address, (uint8\_t *)\textcolor{stringliteral}{"Gentoo"}, 7, 0);
432     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(test == 0, \textcolor{stringliteral}{"Failed to add friend error code: %i"}, test);
433 
434     uint8\_t \hyperlink{toxav__many__test_8c_a2765e58b2af2f95eff3a9cc58d3457cd}{off} = 1;
435 
436     \textcolor{keywordflow}{while} (1) \{
437         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
438         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
439         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
440 
441         \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a737d5d61ce41d26205b7e4a6edd7bc94}{tox\_self\_get\_connection\_status}(tox1) && 
      \hyperlink{tox_8c_a737d5d61ce41d26205b7e4a6edd7bc94}{tox\_self\_get\_connection\_status}(tox2)
442                 && \hyperlink{tox_8c_a737d5d61ce41d26205b7e4a6edd7bc94}{tox\_self\_get\_connection\_status}(tox3)) \{
443             \textcolor{keywordflow}{if} (off) \{
444                 \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"Toxes are online, took %llu seconds\(\backslash\)n"}, time(NULL) - cur\_time);
445                 con\_time = time(NULL);
446                 off = 0;
447             \}
448 
449             \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a21c61f8efb52a75bac6cb7858071d00a}{tox\_friend\_get\_connection\_status}(tox2, 0, 0) == 
      \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbbada9f846526e530d24f74ca997270d11a}{TOX\_CONNECTION\_UDP}
450                     && \hyperlink{tox_8c_a21c61f8efb52a75bac6cb7858071d00a}{tox\_friend\_get\_connection\_status}(tox3, 0, 0) == 
      \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbbada9f846526e530d24f74ca997270d11a}{TOX\_CONNECTION\_UDP})
451                 \textcolor{keywordflow}{break};
452         \}
453 
454         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
455     \}
456 
457     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__test_8c_a2a7cf11edabb09529dd4b6da3ba04f5c}{connected\_t1}, \textcolor{stringliteral}{"Tox1 isn't connected. %u"}, 
      \hyperlink{tox__test_8c_a2a7cf11edabb09529dd4b6da3ba04f5c}{connected\_t1});
458     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"tox clients connected took %llu seconds\(\backslash\)n"}, time(NULL) - con\_time);
459     to\_compare = 974536;
460     \hyperlink{tox_8c_a31635691f5ee3ee6ee061215d18087ae}{tox\_callback\_friend\_message}(tox3, \hyperlink{tox__test_8c_ae2328c9f40aa212fc7e83381fc8f664f}{print\_message}, &to\_compare);
461     uint8\_t msgs[\hyperlink{tox_8h_afb512af96e7d1ae1dddee985119cb80c}{TOX\_MAX\_MESSAGE\_LENGTH} + 1];
462     memset(msgs, \textcolor{charliteral}{'G'}, \textcolor{keyword}{sizeof}(msgs));
463     \hyperlink{tox_8h_a6f40c6f30ae01d7f9f2a03989a6b79ed}{TOX\_ERR\_FRIEND\_SEND\_MESSAGE} errm;
464     \hyperlink{tox_8c_a89cd6aedba9fca87bd66a9713dc6b503}{tox\_friend\_send\_message}(tox2, 0, 
      \hyperlink{tox_8h_a362037c83fd908cecc44cb58ddd57fe0ae777df37c1fda74ab34a3559f7a9bb4f}{TOX\_MESSAGE\_TYPE\_NORMAL}, msgs, \hyperlink{tox_8h_afb512af96e7d1ae1dddee985119cb80c}{TOX\_MAX\_MESSAGE\_LENGTH} + 1, &
      errm);
465     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(errm == \hyperlink{tox_8h_a6f40c6f30ae01d7f9f2a03989a6b79edaf81f59baedd337b49016e0c291352d81}{TOX\_ERR\_FRIEND\_SEND\_MESSAGE\_TOO\_LONG}
      , \textcolor{stringliteral}{"TOX\_MAX\_MESSAGE\_LENGTH is too small\(\backslash\)n"});
466     \hyperlink{tox_8c_a89cd6aedba9fca87bd66a9713dc6b503}{tox\_friend\_send\_message}(tox2, 0, 
      \hyperlink{tox_8h_a362037c83fd908cecc44cb58ddd57fe0ae777df37c1fda74ab34a3559f7a9bb4f}{TOX\_MESSAGE\_TYPE\_NORMAL}, msgs, \hyperlink{tox_8h_afb512af96e7d1ae1dddee985119cb80c}{TOX\_MAX\_MESSAGE\_LENGTH}, &errm);
467     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(errm == \hyperlink{tox_8h_a6f40c6f30ae01d7f9f2a03989a6b79eda331694fc00c23272eeb1020567340148}{TOX\_ERR\_FRIEND\_SEND\_MESSAGE\_OK}, \textcolor{stringliteral}{"
      TOX\_MAX\_MESSAGE\_LENGTH is too big\(\backslash\)n"});
468 
469     \textcolor{keywordflow}{while} (1) \{
470         \hyperlink{tox__test_8c_ab1d5fca465944ffe2e747bdae3909bdd}{messages\_received} = 0;
471         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
472         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
473         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
474 
475         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_ab1d5fca465944ffe2e747bdae3909bdd}{messages\_received})
476             \textcolor{keywordflow}{break};
477 
478         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
479     \}
480 
481     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"tox clients messaging succeeded\(\backslash\)n"});
482 
483     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} save\_size1 = \hyperlink{tox_8c_ac2b90c8597ff7afa2e9532e81b65d412}{tox\_get\_savedata\_size}(tox2);
484     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(save\_size1 != 0 && save\_size1 < 4096, \textcolor{stringliteral}{"save is invalid size %u"}, save\_size1)
      ;
485     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"%u\(\backslash\)n"}, save\_size1);
486     uint8\_t save1[save\_size1];
487     \hyperlink{tox_8c_ae13c8810890ae2d73b8c46e0c8033ab4}{tox\_get\_savedata}(tox2, save1);
488     \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(tox2);
489 
490     \textcolor{keyword}{struct }\hyperlink{struct_tox___options}{Tox\_Options} options;
491     \hyperlink{tox_8c_ac9b57278d2ca390623624409303ea390}{tox\_options\_default}(&options);
492     options.savedata\_type = \hyperlink{tox_8h_a01a36d032dee4dd9e79be31a13128913aa48a8bb179a2f3539de506941d5b0c8c}{TOX\_SAVEDATA\_TYPE\_TOX\_SAVE};
493     options.savedata\_data = save1;
494     options.savedata\_length = save\_size1;
495     tox2 = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(&options, NULL);
496     cur\_time = time(NULL);
497     off = 1;
498 
499     \textcolor{keywordflow}{while} (1) \{
500         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
501         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
502         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
503 
504         \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a737d5d61ce41d26205b7e4a6edd7bc94}{tox\_self\_get\_connection\_status}(tox1) && 
      \hyperlink{tox_8c_a737d5d61ce41d26205b7e4a6edd7bc94}{tox\_self\_get\_connection\_status}(tox2)
505                 && \hyperlink{tox_8c_a737d5d61ce41d26205b7e4a6edd7bc94}{tox\_self\_get\_connection\_status}(tox3)) \{
506             \textcolor{keywordflow}{if} (off) \{
507                 \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"Toxes are online again after reloading, took %llu seconds\(\backslash\)n"}, time(NULL) - 
      cur\_time);
508                 con\_time = time(NULL);
509                 off = 0;
510             \}
511 
512             \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a21c61f8efb52a75bac6cb7858071d00a}{tox\_friend\_get\_connection\_status}(tox2, 0, 0) == 
      \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbbada9f846526e530d24f74ca997270d11a}{TOX\_CONNECTION\_UDP}
513                     && \hyperlink{tox_8c_a21c61f8efb52a75bac6cb7858071d00a}{tox\_friend\_get\_connection\_status}(tox3, 0, 0) == 
      \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbbada9f846526e530d24f74ca997270d11a}{TOX\_CONNECTION\_UDP})
514                 \textcolor{keywordflow}{break};
515         \}
516 
517         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
518     \}
519 
520     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"tox clients connected took %llu seconds\(\backslash\)n"}, time(NULL) - con\_time);
521     \hyperlink{tox_8c_a09d71ba40072133d03da17422dd06bf0}{tox\_callback\_friend\_name}(tox3, \hyperlink{tox__test_8c_a89c9c8906f86908f757554904956c646}{print\_nickchange}, &to\_compare);
522     \hyperlink{tox_8h_aa7019b0d208af3ed82b57af6dbf45b18}{TOX\_ERR\_SET\_INFO} err\_n;
523     \textcolor{keywordtype}{bool} succ = \hyperlink{tox_8c_ac90dc0473971f738b2149ea4e0d9c967}{tox\_self\_set\_name}(tox2, (uint8\_t *)\textcolor{stringliteral}{"Gentoo"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo"}), &err\_n);
524     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(succ && err\_n == \hyperlink{tox_8h_aa7019b0d208af3ed82b57af6dbf45b18a015f215a29f420f6e700d0115f5b5b7b}{TOX\_ERR\_SET\_INFO\_OK}, \textcolor{stringliteral}{"tox\_self\_set\_name
       failed because %u\(\backslash\)n"}, err\_n);
525 
526     \textcolor{keywordflow}{while} (1) \{
527         \hyperlink{tox__test_8c_a1777e10a94056e038f7b143f48308a97}{name\_changes} = 0;
528         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
529         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
530         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
531 
532         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a1777e10a94056e038f7b143f48308a97}{name\_changes})
533             \textcolor{keywordflow}{break};
534 
535         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
536     \}
537 
538     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a577e882cf9b80f620ca6bd8a6991cf6d}{tox\_friend\_get\_name\_size}(tox3, 0, 0) == \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"
      Gentoo"}), \textcolor{stringliteral}{"Name length not correct"});
539     uint8\_t temp\_name[\textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo"})];
540     \hyperlink{tox_8c_a7096298c91c86a9e815beb1f3bde6b42}{tox\_friend\_get\_name}(tox3, 0, temp\_name, 0);
541     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(memcmp(temp\_name, \textcolor{stringliteral}{"Gentoo"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo"})) == 0, \textcolor{stringliteral}{"Name not correct"});
542 
543     \hyperlink{tox_8c_aac5e8d3bef2a458e0e287a2de7cf9604}{tox\_callback\_friend\_status\_message}(tox3, 
      \hyperlink{tox__test_8c_aafd4e5577a5f8907ac641c1dd20e3e0d}{print\_status\_m\_change}, &to\_compare);
544     succ = \hyperlink{tox_8c_a71ee5c2f477a6391034d773266630cf8}{tox\_self\_set\_status\_message}(tox2, (uint8\_t *)\textcolor{stringliteral}{"Installing Gentoo"}, \textcolor{keyword}{
      sizeof}(\textcolor{stringliteral}{"Installing Gentoo"}), &err\_n);
545     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(succ && err\_n == \hyperlink{tox_8h_aa7019b0d208af3ed82b57af6dbf45b18a015f215a29f420f6e700d0115f5b5b7b}{TOX\_ERR\_SET\_INFO\_OK}, \textcolor{stringliteral}{"
      tox\_self\_set\_status\_message failed because %u\(\backslash\)n"}, err\_n);
546 
547     \textcolor{keywordflow}{while} (1) \{
548         \hyperlink{tox__test_8c_a16125880dc91d99e418dde79c160fcb0}{status\_m\_changes} = 0;
549         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
550         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
551         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
552 
553         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a16125880dc91d99e418dde79c160fcb0}{status\_m\_changes})
554             \textcolor{keywordflow}{break};
555 
556         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
557     \}
558 
559     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a2368eae7c26fb90d8ec81a14848ecc41}{tox\_friend\_get\_status\_message\_size}(tox3, 0
      , 0) == \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Installing Gentoo"}),
560                   \textcolor{stringliteral}{"status message length not correct"});
561     uint8\_t temp\_status\_m[\textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Installing Gentoo"})];
562     \hyperlink{tox_8c_aa86fb347f1fc6177bc88fd8cd4505f18}{tox\_friend\_get\_status\_message}(tox3, 0, temp\_status\_m, 0);
563     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(memcmp(temp\_status\_m, \textcolor{stringliteral}{"Installing Gentoo"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Installing Gentoo"})) == 0
      ,
564                   \textcolor{stringliteral}{"status message not correct"});
565 
566     \hyperlink{tox_8c_acca76b201e0c38c871f3913f1ae99a07}{tox\_callback\_friend\_typing}(tox2, &
      \hyperlink{tox__test_8c_a49f7f9d4d6eebf58f05af4f35796f7d9}{print\_typingchange}, &to\_compare);
567     \hyperlink{tox_8c_afd9b632367667fe26097e34cf9c1a7f3}{tox\_self\_set\_typing}(tox3, 0, 1, 0);
568 
569     \textcolor{keywordflow}{while} (1) \{
570         \hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\_changes} = 0;
571         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
572         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
573         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
574 
575 
576         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\_changes} == 2)
577             \textcolor{keywordflow}{break};
578         \textcolor{keywordflow}{else}
579             \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\_changes} == 0, \textcolor{stringliteral}{"Typing fail"});
580 
581         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
582     \}
583 
584     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_aec9653ffc870f258ed186679e20d0db5}{tox\_friend\_get\_typing}(tox2, 0, 0) == 1, \textcolor{stringliteral}{"Typing fail"});
585     \hyperlink{tox_8c_afd9b632367667fe26097e34cf9c1a7f3}{tox\_self\_set\_typing}(tox3, 0, 0, 0);
586 
587     \textcolor{keywordflow}{while} (1) \{
588         \hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\_changes} = 0;
589         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
590         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
591         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
592 
593         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\_changes} == 1)
594             \textcolor{keywordflow}{break};
595         \textcolor{keywordflow}{else}
596             \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{typing\_changes} == 0, \textcolor{stringliteral}{"Typing fail"});
597 
598         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
599     \}
600 
601     \hyperlink{tox_8h_a39a1567a005a6dad214bc176d969c82d}{TOX\_ERR\_FRIEND\_QUERY} err\_t;
602     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_aec9653ffc870f258ed186679e20d0db5}{tox\_friend\_get\_typing}(tox2, 0, &err\_t) == 0, \textcolor{stringliteral}{"Typing
       fail"});
603     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(err\_t == \hyperlink{tox_8h_a39a1567a005a6dad214bc176d969c82da3a47e1701c1fa1a1feec37071fb07915}{TOX\_ERR\_FRIEND\_QUERY\_OK}, \textcolor{stringliteral}{"Typing fail"});
604 
605     uint32\_t packet\_number = 160;
606     \hyperlink{tox_8c_a4394a6985e8d6d652894b89211a8062e}{tox\_callback\_friend\_lossless\_packet}(tox3, &
      \hyperlink{tox__test_8c_a346c0ee0f98c8302ef6495b7310782d6}{handle\_custom\_packet}, &packet\_number);
607     uint8\_t data\_c[\hyperlink{tox_8h_addcda08073f4bad8c7eb351c55c6393e}{TOX\_MAX\_CUSTOM\_PACKET\_SIZE} + 1];
608     memset(data\_c, ((uint8\_t)packet\_number), \textcolor{keyword}{sizeof}(data\_c));
609     \textcolor{keywordtype}{int} ret = \hyperlink{tox_8c_ac162368b375a58b5d7d4b29584449bdd}{tox\_friend\_send\_lossless\_packet}(tox2, 0, data\_c, \textcolor{keyword}{sizeof}(data\_c
      ), 0);
610     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == 0, \textcolor{stringliteral}{"tox\_friend\_send\_lossless\_packet bigger fail %i"}, ret);
611     ret = \hyperlink{tox_8c_ac162368b375a58b5d7d4b29584449bdd}{tox\_friend\_send\_lossless\_packet}(tox2, 0, data\_c, 
      \hyperlink{tox_8h_addcda08073f4bad8c7eb351c55c6393e}{TOX\_MAX\_CUSTOM\_PACKET\_SIZE}, 0);
612     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == 1, \textcolor{stringliteral}{"tox\_friend\_send\_lossless\_packet fail %i"}, ret);
613 
614     \textcolor{keywordflow}{while} (1) \{
615         \hyperlink{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{custom\_packet} = 0;
616         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
617         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
618         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
619 
620         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{custom\_packet} == 1)
621             \textcolor{keywordflow}{break};
622         \textcolor{keywordflow}{else}
623             \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{custom\_packet} == 0, \textcolor{stringliteral}{"Lossless packet fail"});
624 
625         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
626     \}
627 
628     packet\_number = 200;
629     \hyperlink{tox_8c_a17c90611298a86c1d132fdfb5aa52e00}{tox\_callback\_friend\_lossy\_packet}(tox3, &
      \hyperlink{tox__test_8c_a346c0ee0f98c8302ef6495b7310782d6}{handle\_custom\_packet}, &packet\_number);
630     memset(data\_c, ((uint8\_t)packet\_number), \textcolor{keyword}{sizeof}(data\_c));
631     ret = \hyperlink{tox_8c_a83a51aeda057c82ed1e844962a84fe46}{tox\_friend\_send\_lossy\_packet}(tox2, 0, data\_c, \textcolor{keyword}{sizeof}(data\_c), 0);
632     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == 0, \textcolor{stringliteral}{"tox\_friend\_send\_lossy\_packet bigger fail %i"}, ret);
633     ret = \hyperlink{tox_8c_a83a51aeda057c82ed1e844962a84fe46}{tox\_friend\_send\_lossy\_packet}(tox2, 0, data\_c, 
      \hyperlink{tox_8h_addcda08073f4bad8c7eb351c55c6393e}{TOX\_MAX\_CUSTOM\_PACKET\_SIZE}, 0);
634     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == 1, \textcolor{stringliteral}{"tox\_friend\_send\_lossy\_packet fail %i"}, ret);
635 
636     \textcolor{keywordflow}{while} (1) \{
637         \hyperlink{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{custom\_packet} = 0;
638         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
639         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
640         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
641 
642         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{custom\_packet} == 1)
643             \textcolor{keywordflow}{break};
644         \textcolor{keywordflow}{else}
645             \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{custom\_packet} == 0, \textcolor{stringliteral}{"lossy packet fail"});
646 
647         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
648     \}
649 
650     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"Starting file transfer test.\(\backslash\)n"});
651 
652     \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} = \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} = \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv} = 
      \hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok} = \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} = 0;
653     \hyperlink{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}{max\_sending} = UINT64\_MAX;
654     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} f\_time = time(NULL);
655     \hyperlink{tox_8c_ad828f18b7b4901f258fe7132b1bec4f6}{tox\_callback\_file\_recv\_chunk}(tox3, \hyperlink{tox__test_8c_a2d81671277a08fc6e90ef2dae0f3ea4e}{write\_file}, &to\_compare);
656     \hyperlink{tox_8c_abb0eca9253a594357dfa0da0c9c64a0d}{tox\_callback\_file\_recv\_control}(tox2, 
      \hyperlink{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}{file\_print\_control}, &to\_compare);
657     \hyperlink{tox_8c_ade12d3a935a20a1e2a87afa1799343a9}{tox\_callback\_file\_chunk\_request}(tox2, 
      \hyperlink{tox__test_8c_a7209b965126c3b606c3f0030a088ed27}{tox\_file\_chunk\_request}, &to\_compare);
658     \hyperlink{tox_8c_abb0eca9253a594357dfa0da0c9c64a0d}{tox\_callback\_file\_recv\_control}(tox3, 
      \hyperlink{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}{file\_print\_control}, &to\_compare);
659     \hyperlink{tox_8c_a2838aa05de2c47f58a45645248303b60}{tox\_callback\_file\_recv}(tox3, \hyperlink{tox__test_8c_a26511de8b96c24fd18e8255e13822b5f}{tox\_file\_receive}, &to\_compare);
660     uint64\_t totalf\_size = 100 * 1024 * 1024;
661     uint32\_t fnum = \hyperlink{tox_8c_a57990fd242dca24aa7e1f29f5fa56be7}{tox\_file\_send}(tox2, 0, \hyperlink{tox_8h_a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0}{TOX\_FILE\_KIND\_DATA}, totalf\_size, 
      0, (uint8\_t *)\textcolor{stringliteral}{"Gentoo.exe"},
662                                   \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo.exe"}), 0);
663     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(fnum != UINT32\_MAX, \textcolor{stringliteral}{"tox\_new\_file\_sender fail"});
664 
665     \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435}{TOX\_ERR\_FILE\_GET} gfierr;
666     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(!\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 1, fnum, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id didn't fail"});
667     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435a3bafc6df163014dd1208c0a1d2202b61}{TOX\_ERR\_FILE\_GET\_FRIEND\_NOT\_FOUND}
      , \textcolor{stringliteral}{"wrong error"});
668     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(!\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 0, fnum + 1, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id didn't fail"});
669     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435aea0a3c511cbd38ccfef4280c4c024eab}{TOX\_ERR\_FILE\_GET\_NOT\_FOUND}, \textcolor{stringliteral}{"wrong error
      "});
670     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 0, fnum, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id failed"});
671     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435a6909fb8b4396e89657c3bc89547d4d70}{TOX\_ERR\_FILE\_GET\_OK}, \textcolor{stringliteral}{"wrong error"});
672 
673     \textcolor{keywordflow}{while} (1) \{
674         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
675         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
676         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
677 
678         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{file\_sending\_done}) \{
679             \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok} && \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv} && totalf\_size == 
      \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} && \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} == \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} && \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} == 
      \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv}
680                     && \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} == 1) \{
681                 \textcolor{keywordflow}{break};
682             \} \textcolor{keywordflow}{else} \{
683                 ck\_abort\_msg(\textcolor{stringliteral}{"Something went wrong in file transfer %u %u %u %u %u %u %llu %llu %llu"}, 
      \hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok}, \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv},
684                              totalf\_size == \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size}, \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} == 
      \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size}, \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} == \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv}, \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} == 1, 
      totalf\_size, \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv},
685                              \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos});
686             \}
687         \}
688 
689         uint32\_t tox1\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox1);
690         uint32\_t tox2\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox2);
691         uint32\_t tox3\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox3);
692 
693         \textcolor{keywordflow}{if} (tox2\_interval > tox3\_interval) \{
694             \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(tox3\_interval);
695         \} \textcolor{keywordflow}{else} \{
696             \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(tox2\_interval);
697         \}
698     \}
699 
700     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"100MB file sent in %llu seconds\(\backslash\)n"}, time(NULL) - f\_time);
701 
702     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"Starting file streaming transfer test.\(\backslash\)n"});
703 
704     \hyperlink{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{file\_sending\_done} = \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} = \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} = 
      \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv} = \hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok} = \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} = 0;
705     f\_time = time(NULL);
706     \hyperlink{tox_8c_ad828f18b7b4901f258fe7132b1bec4f6}{tox\_callback\_file\_recv\_chunk}(tox3, \hyperlink{tox__test_8c_a2d81671277a08fc6e90ef2dae0f3ea4e}{write\_file}, &to\_compare);
707     \hyperlink{tox_8c_abb0eca9253a594357dfa0da0c9c64a0d}{tox\_callback\_file\_recv\_control}(tox2, 
      \hyperlink{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}{file\_print\_control}, &to\_compare);
708     \hyperlink{tox_8c_ade12d3a935a20a1e2a87afa1799343a9}{tox\_callback\_file\_chunk\_request}(tox2, 
      \hyperlink{tox__test_8c_a7209b965126c3b606c3f0030a088ed27}{tox\_file\_chunk\_request}, &to\_compare);
709     \hyperlink{tox_8c_abb0eca9253a594357dfa0da0c9c64a0d}{tox\_callback\_file\_recv\_control}(tox3, 
      \hyperlink{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}{file\_print\_control}, &to\_compare);
710     \hyperlink{tox_8c_a2838aa05de2c47f58a45645248303b60}{tox\_callback\_file\_recv}(tox3, \hyperlink{tox__test_8c_a26511de8b96c24fd18e8255e13822b5f}{tox\_file\_receive}, &to\_compare);
711     totalf\_size = UINT64\_MAX;
712     fnum = \hyperlink{tox_8c_a57990fd242dca24aa7e1f29f5fa56be7}{tox\_file\_send}(tox2, 0, \hyperlink{tox_8h_a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0}{TOX\_FILE\_KIND\_DATA}, totalf\_size, 0, (
      uint8\_t *)\textcolor{stringliteral}{"Gentoo.exe"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo.exe"}), 0);
713     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(fnum != UINT32\_MAX, \textcolor{stringliteral}{"tox\_new\_file\_sender fail"});
714 
715     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(!\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 1, fnum, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id didn't fail"});
716     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435a3bafc6df163014dd1208c0a1d2202b61}{TOX\_ERR\_FILE\_GET\_FRIEND\_NOT\_FOUND}
      , \textcolor{stringliteral}{"wrong error"});
717     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(!\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 0, fnum + 1, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id didn't fail"});
718     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435aea0a3c511cbd38ccfef4280c4c024eab}{TOX\_ERR\_FILE\_GET\_NOT\_FOUND}, \textcolor{stringliteral}{"wrong error
      "});
719     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 0, fnum, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id failed"});
720     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435a6909fb8b4396e89657c3bc89547d4d70}{TOX\_ERR\_FILE\_GET\_OK}, \textcolor{stringliteral}{"wrong error"});
721 
722     \hyperlink{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}{max\_sending} = 100 * 1024;
723     \hyperlink{tox__test_8c_ad1e4f41f9bf2ebc5020cd25b2fc6b731}{m\_send\_reached} = 0;
724 
725     \textcolor{keywordflow}{while} (1) \{
726         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
727         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
728         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
729 
730         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{file\_sending\_done}) \{
731             \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok} && \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv} && \hyperlink{tox__test_8c_ad1e4f41f9bf2ebc5020cd25b2fc6b731}{m\_send\_reached} && totalf\_size == 
      \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} && \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} == \hyperlink{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}{max\_sending}
732                     && \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} == \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} && 
      \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} == 1) \{
733                 \textcolor{keywordflow}{break};
734             \} \textcolor{keywordflow}{else} \{
735                 ck\_abort\_msg(\textcolor{stringliteral}{"Something went wrong in file transfer %u %u %u %u %u %u %u %llu %llu %llu
       %llu"}, \hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok}, \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv},
736                              \hyperlink{tox__test_8c_ad1e4f41f9bf2ebc5020cd25b2fc6b731}{m\_send\_reached}, totalf\_size == 
      \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size}, \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} == \hyperlink{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}{max\_sending}, \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} == 
      \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv}, \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} == 1,
737                              totalf\_size, \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size},
738                              \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv}, \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos});
739             \}
740         \}
741 
742         uint32\_t tox1\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox1);
743         uint32\_t tox2\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox2);
744         uint32\_t tox3\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox3);
745 
746         \textcolor{keywordflow}{if} (tox2\_interval > tox3\_interval) \{
747             \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(tox3\_interval);
748         \} \textcolor{keywordflow}{else} \{
749             \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(tox2\_interval);
750         \}
751     \}
752 
753     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"Starting file 0 transfer test.\(\backslash\)n"});
754 
755     \hyperlink{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{file\_sending\_done} = \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} = \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} = 
      \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv} = \hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok} = \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} = 0;
756     f\_time = time(NULL);
757     \hyperlink{tox_8c_ad828f18b7b4901f258fe7132b1bec4f6}{tox\_callback\_file\_recv\_chunk}(tox3, \hyperlink{tox__test_8c_a2d81671277a08fc6e90ef2dae0f3ea4e}{write\_file}, &to\_compare);
758     \hyperlink{tox_8c_abb0eca9253a594357dfa0da0c9c64a0d}{tox\_callback\_file\_recv\_control}(tox2, 
      \hyperlink{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}{file\_print\_control}, &to\_compare);
759     \hyperlink{tox_8c_ade12d3a935a20a1e2a87afa1799343a9}{tox\_callback\_file\_chunk\_request}(tox2, 
      \hyperlink{tox__test_8c_a7209b965126c3b606c3f0030a088ed27}{tox\_file\_chunk\_request}, &to\_compare);
760     \hyperlink{tox_8c_abb0eca9253a594357dfa0da0c9c64a0d}{tox\_callback\_file\_recv\_control}(tox3, 
      \hyperlink{tox__test_8c_a9ebcf21a3ab3aff940271cbddf90d7cc}{file\_print\_control}, &to\_compare);
761     \hyperlink{tox_8c_a2838aa05de2c47f58a45645248303b60}{tox\_callback\_file\_recv}(tox3, \hyperlink{tox__test_8c_a26511de8b96c24fd18e8255e13822b5f}{tox\_file\_receive}, &to\_compare);
762     totalf\_size = 0;
763     fnum = \hyperlink{tox_8c_a57990fd242dca24aa7e1f29f5fa56be7}{tox\_file\_send}(tox2, 0, \hyperlink{tox_8h_a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0}{TOX\_FILE\_KIND\_DATA}, totalf\_size, 0, (
      uint8\_t *)\textcolor{stringliteral}{"Gentoo.exe"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo.exe"}), 0);
764     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(fnum != UINT32\_MAX, \textcolor{stringliteral}{"tox\_new\_file\_sender fail"});
765 
766     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(!\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 1, fnum, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id didn't fail"});
767     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435a3bafc6df163014dd1208c0a1d2202b61}{TOX\_ERR\_FILE\_GET\_FRIEND\_NOT\_FOUND}
      , \textcolor{stringliteral}{"wrong error"});
768     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(!\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 0, fnum + 1, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id didn't fail"});
769     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435aea0a3c511cbd38ccfef4280c4c024eab}{TOX\_ERR\_FILE\_GET\_NOT\_FOUND}, \textcolor{stringliteral}{"wrong error
      "});
770     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox2, 0, fnum, 
      \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, &gfierr), \textcolor{stringliteral}{"tox\_file\_get\_file\_id failed"});
771     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(gfierr == \hyperlink{tox_8h_aad264ee53e834eb7d20ac4a73c98a435a6909fb8b4396e89657c3bc89547d4d70}{TOX\_ERR\_FILE\_GET\_OK}, \textcolor{stringliteral}{"wrong error"});
772 
773 
774     \textcolor{keywordflow}{while} (1) \{
775         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox1);
776         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox2);
777         \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(tox3);
778 
779         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{file\_sending\_done}) \{
780             \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok} && \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv} && totalf\_size == 
      \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} && \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} == \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} && \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} == 
      \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv}
781                     && \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} == 1) \{
782                 \textcolor{keywordflow}{break};
783             \} \textcolor{keywordflow}{else} \{
784                 ck\_abort\_msg(\textcolor{stringliteral}{"Something went wrong in file transfer %u %u %u %u %u %u %llu %llu %llu"}, 
      \hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok}, \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv},
785                              totalf\_size == \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size}, \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} == 
      \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size}, \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} == \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv}, \hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted} == 1, 
      totalf\_size, \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv},
786                              \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos});
787             \}
788         \}
789 
790         uint32\_t tox1\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox1);
791         uint32\_t tox2\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox2);
792         uint32\_t tox3\_interval = \hyperlink{tox_8c_ad32da51807cfe5023d63d2e9de5759c1}{tox\_iteration\_interval}(tox3);
793 
794         \textcolor{keywordflow}{if} (tox2\_interval > tox3\_interval) \{
795             \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(tox3\_interval);
796         \} \textcolor{keywordflow}{else} \{
797             \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(tox2\_interval);
798         \}
799     \}
800 
801     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"test\_few\_clients succeeded, took %llu seconds\(\backslash\)n"}, time(NULL) - cur\_time);
802 
803     \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(tox1);
804     \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(tox2);
805     \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(tox3);
806 \}
\end{DoxyCode}
\hypertarget{tox__test_8c_a4bc0f448861114ed3092905b809f553e}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}}
\index{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}]{\setlength{\rightskip}{0pt plus 5cm}S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T (
\begin{DoxyParamCaption}
\item[{test\+\_\+many\+\_\+clients}]{}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a4bc0f448861114ed3092905b809f553e}


Definition at line 812 of file tox\+\_\+test.\+c.



References accept\+\_\+friend\+\_\+request(), c\+\_\+sleep, ck\+\_\+assert\+\_\+msg(), error, i, num, N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S, N\+U\+M\+\_\+\+T\+O\+X\+E\+S, printf(), T\+O\+X\+\_\+\+A\+D\+D\+R\+E\+S\+S\+\_\+\+S\+I\+Z\+E, tox\+\_\+callback\+\_\+friend\+\_\+request(), T\+O\+X\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+U\+D\+P, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+A\+L\+R\+E\+A\+D\+Y\+\_\+\+S\+E\+N\+T, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+G\+E\+T\+\_\+\+P\+O\+R\+T\+\_\+\+O\+K, tox\+\_\+friend\+\_\+add(), tox\+\_\+friend\+\_\+get\+\_\+connection\+\_\+status(), tox\+\_\+iterate(), tox\+\_\+kill(), tox\+\_\+new(), tox\+\_\+self\+\_\+get\+\_\+address(), tox\+\_\+self\+\_\+get\+\_\+friend\+\_\+list\+\_\+size(), and tox\+\_\+self\+\_\+get\+\_\+udp\+\_\+port().


\begin{DoxyCode}
813 \{
814     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cur\_time = time(NULL);
815     \hyperlink{struct_messenger}{Tox} *toxes[\hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}];
816     uint32\_t \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}, j;
817     uint32\_t to\_comp = 974536;
818 
819     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
820         toxes[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(0, 0);
821         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(toxes[i] != 0, \textcolor{stringliteral}{"Failed to create tox instances %u"}, i);
822         \hyperlink{tox_8c_a2cf9a901fd5db3b6635a3ece389cc349}{tox\_callback\_friend\_request}(toxes[i], 
      \hyperlink{tox__test_8c_a23435c36683784fe0b913e77c8445c32}{accept\_friend\_request}, &to\_comp);
823     \}
824 
825     \{
826         \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422}{TOX\_ERR\_GET\_PORT} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
827         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a7f537fd786bb626d2d22bc16dbddc8a1}{tox\_self\_get\_udp\_port}(toxes[0], &error) == 33445, \textcolor{stringliteral}{"
      First Tox instance did not bind to udp port 33445.\(\backslash\)n"});
828         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
829     \}
830 
831     \textcolor{keyword}{struct }\{
832         uint16\_t tox1;
833         uint16\_t tox2;
834     \} pairs[\hyperlink{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}{NUM\_FRIENDS}];
835 
836     uint8\_t address[\hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}];
837 
838     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} num\_f = 0;
839 
840     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
841         num\_f += \hyperlink{tox_8c_a31e930b94fefd4040a00b84195b59243}{tox\_self\_get\_friend\_list\_size}(toxes[i]);
842     \}
843 
844     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(num\_f == 0, \textcolor{stringliteral}{"bad num friends: %u"}, num\_f);
845 
846     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}{NUM\_FRIENDS}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
847 loop\_top:
848         pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox1 = rand() % \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES};
849         pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox2 = (pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox1 + rand() % (NUM\_TOXES - 1) + 1) % 
      \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES};
850 
851         \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}; ++j) \{
852             \textcolor{keywordflow}{if} (pairs[j].tox2 == pairs[i].tox1 && pairs[j].tox1 == pairs[i].tox2)
853                 \textcolor{keywordflow}{goto} loop\_top;
854         \}
855 
856         \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(toxes[pairs[i].tox1], address);
857 
858         \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152db}{TOX\_ERR\_FRIEND\_ADD} test;
859         uint32\_t \hyperlink{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}{num} = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(toxes[pairs[i].tox2], address, (uint8\_t *)\textcolor{stringliteral}{"Gentoo"}, 
      7, &test);
860 
861         \textcolor{keywordflow}{if} (test == \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba82538639308d756617366376128c7edd}{TOX\_ERR\_FRIEND\_ADD\_ALREADY\_SENT}) \{
862             \textcolor{keywordflow}{goto} loop\_top;
863         \}
864 
865         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(num != UINT32\_MAX && test == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dbab27c52d344fc2f36a857059782a4b234}{TOX\_ERR\_FRIEND\_ADD\_OK}, \textcolor{stringliteral}{"Failed to add friend error code: %i"}, test);
866     \}
867 
868     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
869         num\_f += \hyperlink{tox_8c_a31e930b94fefd4040a00b84195b59243}{tox\_self\_get\_friend\_list\_size}(toxes[i]);
870     \}
871 
872     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(num\_f == NUM\_FRIENDS, \textcolor{stringliteral}{"bad num friends: %u"}, num\_f);
873 
874     \textcolor{keywordflow}{while} (1) \{
875         uint16\_t counter = 0;
876 
877         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
878             \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{tox_8c_a31e930b94fefd4040a00b84195b59243}{tox\_self\_get\_friend\_list\_size}(toxes[i]); ++j)
879                 \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a21c61f8efb52a75bac6cb7858071d00a}{tox\_friend\_get\_connection\_status}(toxes[i], j, 0) == 
      \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbbada9f846526e530d24f74ca997270d11a}{TOX\_CONNECTION\_UDP})
880                     ++counter;
881         \}
882 
883         \textcolor{keywordflow}{if} (counter == NUM\_FRIENDS * 2) \{
884             \textcolor{keywordflow}{break};
885         \}
886 
887         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
888             \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(toxes[i]);
889         \}
890 
891         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
892     \}
893 
894     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
895         \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(toxes[i]);
896     \}
897 
898     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"test\_many\_clients succeeded, took %llu seconds\(\backslash\)n"}, time(NULL) - cur\_time);
899 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_a4bc0f448861114ed3092905b809f553e_cgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a7d4f70e1580986cb8b3ba57d085ccc13}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}}
\index{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}]{\setlength{\rightskip}{0pt plus 5cm}S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T (
\begin{DoxyParamCaption}
\item[{test\+\_\+many\+\_\+clients\+\_\+tcp}]{}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a7d4f70e1580986cb8b3ba57d085ccc13}


Definition at line 904 of file tox\+\_\+test.\+c.



References accept\+\_\+friend\+\_\+request(), c\+\_\+sleep, ck\+\_\+assert\+\_\+msg(), error, i, num, N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S, N\+U\+M\+\_\+\+T\+O\+X\+E\+S, printf(), Tox\+\_\+\+Options\+::tcp\+\_\+port, T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T, tox\+\_\+add\+\_\+tcp\+\_\+relay(), T\+O\+X\+\_\+\+A\+D\+D\+R\+E\+S\+S\+\_\+\+S\+I\+Z\+E, tox\+\_\+bootstrap(), tox\+\_\+callback\+\_\+friend\+\_\+request(), T\+O\+X\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+T\+C\+P, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+A\+L\+R\+E\+A\+D\+Y\+\_\+\+S\+E\+N\+T, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+G\+E\+T\+\_\+\+P\+O\+R\+T\+\_\+\+O\+K, tox\+\_\+friend\+\_\+add(), tox\+\_\+friend\+\_\+get\+\_\+connection\+\_\+status(), tox\+\_\+iterate(), tox\+\_\+kill(), tox\+\_\+new(), tox\+\_\+options\+\_\+default(), T\+O\+X\+\_\+\+P\+U\+B\+L\+I\+C\+\_\+\+K\+E\+Y\+\_\+\+S\+I\+Z\+E, tox\+\_\+self\+\_\+get\+\_\+address(), tox\+\_\+self\+\_\+get\+\_\+dht\+\_\+id(), tox\+\_\+self\+\_\+get\+\_\+friend\+\_\+list\+\_\+size(), tox\+\_\+self\+\_\+get\+\_\+tcp\+\_\+port(), tox\+\_\+self\+\_\+get\+\_\+udp\+\_\+port(), and Tox\+\_\+\+Options\+::udp\+\_\+enabled.


\begin{DoxyCode}
905 \{
906     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cur\_time = time(NULL);
907     \hyperlink{struct_messenger}{Tox} *toxes[\hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}];
908     uint32\_t \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}, j;
909     uint32\_t to\_comp = 974536;
910 
911     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
912         \textcolor{keyword}{struct }\hyperlink{struct_tox___options}{Tox\_Options} opts;
913         \hyperlink{tox_8c_ac9b57278d2ca390623624409303ea390}{tox\_options\_default}(&opts);
914 
915         \textcolor{keywordflow}{if} (i == 0) \{
916             opts.tcp\_port = \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{TCP\_RELAY\_PORT};
917         \} \textcolor{keywordflow}{else} \{
918             opts.udp\_enabled = 0;
919         \}
920 
921         toxes[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(&opts, 0);
922         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(toxes[i] != 0, \textcolor{stringliteral}{"Failed to create tox instances %u"}, i);
923         \hyperlink{tox_8c_a2cf9a901fd5db3b6635a3ece389cc349}{tox\_callback\_friend\_request}(toxes[i], 
      \hyperlink{tox__test_8c_a23435c36683784fe0b913e77c8445c32}{accept\_friend\_request}, &to\_comp);
924         uint8\_t dpk[\hyperlink{tox_8h_a6a25b8b522f6d65bacd1d84981b8c75c}{TOX\_PUBLIC\_KEY\_SIZE}];
925         \hyperlink{tox_8c_a236f8d39263db221678cfd6513fa3161}{tox\_self\_get\_dht\_id}(toxes[0], dpk);
926         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_ae858a499d7f8e2e5cbf5533afbd20537}{tox\_add\_tcp\_relay}(toxes[i], \textcolor{stringliteral}{"::1"}, 
      \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{TCP\_RELAY\_PORT}, dpk, 0), \textcolor{stringliteral}{"add relay error"});
927         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_ae7e49c1e9e6c3a0f9e55bfcb78044c1e}{tox\_bootstrap}(toxes[i], \textcolor{stringliteral}{"::1"}, 33445, dpk, 0), \textcolor{stringliteral}{"Bootstrap
       error"});
928     \}
929 
930     \{
931         \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422}{TOX\_ERR\_GET\_PORT} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
932         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a7f537fd786bb626d2d22bc16dbddc8a1}{tox\_self\_get\_udp\_port}(toxes[0], &error) == 33445, \textcolor{stringliteral}{"
      First Tox instance did not bind to udp port 33445.\(\backslash\)n"});
933         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
934         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_ad6d0c200791f5f30c2b5deb640a8cb28}{tox\_self\_get\_tcp\_port}(toxes[0], &error) == 
      \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{TCP\_RELAY\_PORT},
935                       \textcolor{stringliteral}{"First Tox instance did not bind to tcp port %u.\(\backslash\)n"}, 
      \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{TCP\_RELAY\_PORT});
936         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
937     \}
938 
939     \textcolor{keyword}{struct }\{
940         uint16\_t tox1;
941         uint16\_t tox2;
942     \} pairs[\hyperlink{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}{NUM\_FRIENDS}];
943 
944     uint8\_t address[\hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}];
945 
946     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}{NUM\_FRIENDS}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
947 loop\_top:
948         pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox1 = rand() % \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES};
949         pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox2 = (pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox1 + rand() % (NUM\_TOXES - 1) + 1) % 
      \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES};
950 
951         \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}; ++j) \{
952             \textcolor{keywordflow}{if} (pairs[j].tox2 == pairs[i].tox1 && pairs[j].tox1 == pairs[i].tox2)
953                 \textcolor{keywordflow}{goto} loop\_top;
954         \}
955 
956         \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(toxes[pairs[i].tox1], address);
957 
958         \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152db}{TOX\_ERR\_FRIEND\_ADD} test;
959         uint32\_t \hyperlink{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}{num} = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(toxes[pairs[i].tox2], address, (uint8\_t *)\textcolor{stringliteral}{"Gentoo"}, 
      7, &test);
960 
961         \textcolor{keywordflow}{if} (test == \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba82538639308d756617366376128c7edd}{TOX\_ERR\_FRIEND\_ADD\_ALREADY\_SENT}) \{
962             \textcolor{keywordflow}{goto} loop\_top;
963         \}
964 
965         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(num != UINT32\_MAX && test == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dbab27c52d344fc2f36a857059782a4b234}{TOX\_ERR\_FRIEND\_ADD\_OK}, \textcolor{stringliteral}{"Failed to add friend error code: %i"}, test);
966     \}
967 
968     \textcolor{keywordflow}{while} (1) \{
969         uint16\_t counter = 0;
970 
971         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
972             \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{tox_8c_a31e930b94fefd4040a00b84195b59243}{tox\_self\_get\_friend\_list\_size}(toxes[i]); ++j)
973                 \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a21c61f8efb52a75bac6cb7858071d00a}{tox\_friend\_get\_connection\_status}(toxes[i], j, 0) == 
      \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbba6629dc766e5bf9d0eabbe41f9075d42a}{TOX\_CONNECTION\_TCP})
974                     ++counter;
975         \}
976 
977         \textcolor{keywordflow}{if} (counter == NUM\_FRIENDS * 2) \{
978             \textcolor{keywordflow}{break};
979         \}
980 
981         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
982             \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(toxes[i]);
983         \}
984 
985         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
986     \}
987 
988     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
989         \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(toxes[i]);
990     \}
991 
992     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"test\_many\_clients\_tcp succeeded, took %llu seconds\(\backslash\)n"}, time(NULL) - cur\_time);
993 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_a7d4f70e1580986cb8b3ba57d085ccc13_cgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_acd0229746cbc8d1bc591d7409fef263d}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}}
\index{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}]{\setlength{\rightskip}{0pt plus 5cm}S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T (
\begin{DoxyParamCaption}
\item[{test\+\_\+many\+\_\+clients\+\_\+tcp\+\_\+b}]{}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_acd0229746cbc8d1bc591d7409fef263d}


Definition at line 998 of file tox\+\_\+test.\+c.



References accept\+\_\+friend\+\_\+request(), c\+\_\+sleep, ck\+\_\+assert\+\_\+msg(), error, i, num, N\+U\+M\+\_\+\+F\+R\+I\+E\+N\+D\+S, N\+U\+M\+\_\+\+T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+S, N\+U\+M\+\_\+\+T\+O\+X\+E\+S, printf(), Tox\+\_\+\+Options\+::tcp\+\_\+port, T\+C\+P\+\_\+\+R\+E\+L\+A\+Y\+\_\+\+P\+O\+R\+T, tox\+\_\+add\+\_\+tcp\+\_\+relay(), T\+O\+X\+\_\+\+A\+D\+D\+R\+E\+S\+S\+\_\+\+S\+I\+Z\+E, tox\+\_\+bootstrap(), tox\+\_\+callback\+\_\+friend\+\_\+request(), T\+O\+X\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+T\+C\+P, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+A\+L\+R\+E\+A\+D\+Y\+\_\+\+S\+E\+N\+T, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+R\+I\+E\+N\+D\+\_\+\+A\+D\+D\+\_\+\+O\+K, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+G\+E\+T\+\_\+\+P\+O\+R\+T\+\_\+\+O\+K, tox\+\_\+friend\+\_\+add(), tox\+\_\+friend\+\_\+get\+\_\+connection\+\_\+status(), tox\+\_\+iterate(), tox\+\_\+kill(), tox\+\_\+new(), tox\+\_\+options\+\_\+default(), T\+O\+X\+\_\+\+P\+U\+B\+L\+I\+C\+\_\+\+K\+E\+Y\+\_\+\+S\+I\+Z\+E, tox\+\_\+self\+\_\+get\+\_\+address(), tox\+\_\+self\+\_\+get\+\_\+dht\+\_\+id(), tox\+\_\+self\+\_\+get\+\_\+friend\+\_\+list\+\_\+size(), tox\+\_\+self\+\_\+get\+\_\+tcp\+\_\+port(), tox\+\_\+self\+\_\+get\+\_\+udp\+\_\+port(), and Tox\+\_\+\+Options\+::udp\+\_\+enabled.


\begin{DoxyCode}
999 \{
1000     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cur\_time = time(NULL);
1001     \hyperlink{struct_messenger}{Tox} *toxes[\hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}];
1002     uint32\_t \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}, j;
1003     uint32\_t to\_comp = 974536;
1004 
1005     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1006         \textcolor{keyword}{struct }\hyperlink{struct_tox___options}{Tox\_Options} opts;
1007         \hyperlink{tox_8c_ac9b57278d2ca390623624409303ea390}{tox\_options\_default}(&opts);
1008 
1009         \textcolor{keywordflow}{if} (i < \hyperlink{tox__test_8c_a1eccd4f084c3a68e8eeb59e8202ea805}{NUM\_TCP\_RELAYS}) \{
1010             opts.tcp\_port = \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{TCP\_RELAY\_PORT} + \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i};
1011         \} \textcolor{keywordflow}{else} \{
1012             opts.udp\_enabled = 0;
1013         \}
1014 
1015         toxes[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(&opts, 0);
1016         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(toxes[i] != 0, \textcolor{stringliteral}{"Failed to create tox instances %u"}, i);
1017         \hyperlink{tox_8c_a2cf9a901fd5db3b6635a3ece389cc349}{tox\_callback\_friend\_request}(toxes[i], 
      \hyperlink{tox__test_8c_a23435c36683784fe0b913e77c8445c32}{accept\_friend\_request}, &to\_comp);
1018         uint8\_t dpk[\hyperlink{tox_8h_a6a25b8b522f6d65bacd1d84981b8c75c}{TOX\_PUBLIC\_KEY\_SIZE}];
1019         \hyperlink{tox_8c_a236f8d39263db221678cfd6513fa3161}{tox\_self\_get\_dht\_id}(toxes[(i % \hyperlink{tox__test_8c_a1eccd4f084c3a68e8eeb59e8202ea805}{NUM\_TCP\_RELAYS})], dpk);
1020         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_ae858a499d7f8e2e5cbf5533afbd20537}{tox\_add\_tcp\_relay}(toxes[i], \textcolor{stringliteral}{"::1"}, 
      \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{TCP\_RELAY\_PORT} + (i % \hyperlink{tox__test_8c_a1eccd4f084c3a68e8eeb59e8202ea805}{NUM\_TCP\_RELAYS}), dpk, 0), \textcolor{stringliteral}{"add relay error"});
1021         \hyperlink{tox_8c_a236f8d39263db221678cfd6513fa3161}{tox\_self\_get\_dht\_id}(toxes[0], dpk);
1022         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_ae7e49c1e9e6c3a0f9e55bfcb78044c1e}{tox\_bootstrap}(toxes[i], \textcolor{stringliteral}{"::1"}, 33445, dpk, 0), \textcolor{stringliteral}{"Bootstrap
       error"});
1023     \}
1024 
1025     \{
1026         \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422}{TOX\_ERR\_GET\_PORT} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
1027         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a7f537fd786bb626d2d22bc16dbddc8a1}{tox\_self\_get\_udp\_port}(toxes[0], &error) == 33445, \textcolor{stringliteral}{"
      First Tox instance did not bind to udp port 33445.\(\backslash\)n"});
1028         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
1029         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_ad6d0c200791f5f30c2b5deb640a8cb28}{tox\_self\_get\_tcp\_port}(toxes[0], &error) == 
      \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{TCP\_RELAY\_PORT},
1030                       \textcolor{stringliteral}{"First Tox instance did not bind to tcp port %u.\(\backslash\)n"}, 
      \hyperlink{tox__test_8c_af2c7e6e48f3c0c2792843c7f58ebc9c1}{TCP\_RELAY\_PORT});
1031         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
1032     \}
1033 
1034     \textcolor{keyword}{struct }\{
1035         uint16\_t tox1;
1036         uint16\_t tox2;
1037     \} pairs[\hyperlink{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}{NUM\_FRIENDS}];
1038 
1039     uint8\_t address[\hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}];
1040 
1041     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a271c8bfdc6cd7121ea1fa63a29f46c15}{NUM\_FRIENDS}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1042 loop\_top:
1043         pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox1 = rand() % \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES};
1044         pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox2 = (pairs[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}].tox1 + rand() % (NUM\_TOXES - 1) + 1) % 
      \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES};
1045 
1046         \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}; ++j) \{
1047             \textcolor{keywordflow}{if} (pairs[j].tox2 == pairs[i].tox1 && pairs[j].tox1 == pairs[i].tox2)
1048                 \textcolor{keywordflow}{goto} loop\_top;
1049         \}
1050 
1051         \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(toxes[pairs[i].tox1], address);
1052 
1053         \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152db}{TOX\_ERR\_FRIEND\_ADD} test;
1054         uint32\_t \hyperlink{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}{num} = \hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(toxes[pairs[i].tox2], address, (uint8\_t *)\textcolor{stringliteral}{"Gentoo"}, 
      7, &test);
1055 
1056         \textcolor{keywordflow}{if} (test == \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dba82538639308d756617366376128c7edd}{TOX\_ERR\_FRIEND\_ADD\_ALREADY\_SENT}) \{
1057             \textcolor{keywordflow}{goto} loop\_top;
1058         \}
1059 
1060         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(num != UINT32\_MAX && test == 
      \hyperlink{tox_8h_a22bf6bd5a0f68c7952ade01ea92152dbab27c52d344fc2f36a857059782a4b234}{TOX\_ERR\_FRIEND\_ADD\_OK}, \textcolor{stringliteral}{"Failed to add friend error code: %i"}, test);
1061     \}
1062 
1063     \textcolor{keywordflow}{while} (1) \{
1064         uint16\_t counter = 0;
1065 
1066         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1067             \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{tox_8c_a31e930b94fefd4040a00b84195b59243}{tox\_self\_get\_friend\_list\_size}(toxes[i]); ++j)
1068                 \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a21c61f8efb52a75bac6cb7858071d00a}{tox\_friend\_get\_connection\_status}(toxes[i], j, 0) == 
      \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbba6629dc766e5bf9d0eabbe41f9075d42a}{TOX\_CONNECTION\_TCP})
1069                     ++counter;
1070         \}
1071 
1072         \textcolor{keywordflow}{if} (counter == NUM\_FRIENDS * 2) \{
1073             \textcolor{keywordflow}{break};
1074         \}
1075 
1076         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1077             \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(toxes[i]);
1078         \}
1079 
1080         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
1081     \}
1082 
1083     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a774ada8ffd078cce1d3b029c36baee0d}{NUM\_TOXES}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1084         \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(toxes[i]);
1085     \}
1086 
1087     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"test\_many\_clients\_tcp\_b succeeded, took %llu seconds\(\backslash\)n"}, time(NULL) - cur\_time);
1088 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_acd0229746cbc8d1bc591d7409fef263d_cgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a999b8d0cb6f7a7ea6f983f4f32e18f25}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}}
\index{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T@{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T}]{\setlength{\rightskip}{0pt plus 5cm}S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T (
\begin{DoxyParamCaption}
\item[{test\+\_\+many\+\_\+group}]{}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a999b8d0cb6f7a7ea6f983f4f32e18f25}


Definition at line 1142 of file tox\+\_\+test.\+c.



References c\+\_\+sleep, ck\+\_\+assert\+\_\+msg(), error, g\+\_\+accept\+\_\+friend\+\_\+request(), i, invite\+\_\+counter, N\+U\+M\+\_\+\+G\+R\+O\+U\+P\+\_\+\+T\+O\+X, num\+\_\+recv, print\+\_\+group\+\_\+invite\+\_\+callback(), print\+\_\+group\+\_\+message(), printf(), tox\+\_\+add\+\_\+groupchat(), T\+O\+X\+\_\+\+A\+D\+D\+R\+E\+S\+S\+\_\+\+S\+I\+Z\+E, tox\+\_\+callback\+\_\+friend\+\_\+request(), tox\+\_\+callback\+\_\+group\+\_\+invite(), tox\+\_\+callback\+\_\+group\+\_\+message(), T\+O\+X\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+U\+D\+P, tox\+\_\+del\+\_\+groupchat(), T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+G\+E\+T\+\_\+\+P\+O\+R\+T\+\_\+\+O\+K, tox\+\_\+friend\+\_\+add(), tox\+\_\+friend\+\_\+get\+\_\+connection\+\_\+status(), tox\+\_\+group\+\_\+get\+\_\+title(), tox\+\_\+group\+\_\+message\+\_\+send(), tox\+\_\+group\+\_\+number\+\_\+peers(), tox\+\_\+group\+\_\+set\+\_\+title(), tox\+\_\+invite\+\_\+friend(), tox\+\_\+iterate(), tox\+\_\+kill(), tox\+\_\+new(), tox\+\_\+self\+\_\+get\+\_\+address(), and tox\+\_\+self\+\_\+get\+\_\+udp\+\_\+port().


\begin{DoxyCode}
1143 \{
1144     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cur\_time = time(NULL);
1145     \hyperlink{struct_messenger}{Tox} *toxes[\hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}];
1146     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}, j, k;
1147 
1148     uint32\_t to\_comp = 234212;
1149 
1150     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1151         toxes[\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}] = \hyperlink{tox_8c_aa0e6afccd06a766b84a0633e259f9165}{tox\_new}(0, 0);
1152         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(toxes[i] != 0, \textcolor{stringliteral}{"Failed to create tox instances %u"}, i);
1153         \hyperlink{tox_8c_a2cf9a901fd5db3b6635a3ece389cc349}{tox\_callback\_friend\_request}(toxes[i], &
      \hyperlink{tox__test_8c_adb48712ca97fe3bd1c837671708d7915}{g\_accept\_friend\_request}, &to\_comp);
1154         \hyperlink{tox__old_8h_a0e91e29f594d1ec9f00b5867644fe6ff}{tox\_callback\_group\_invite}(toxes[i], &
      \hyperlink{tox__test_8c_ad249c87d6056da5531b1e4265c03001a}{print\_group\_invite\_callback}, &to\_comp);
1155     \}
1156 
1157     \{
1158         \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422}{TOX\_ERR\_GET\_PORT} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
1159         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_a7f537fd786bb626d2d22bc16dbddc8a1}{tox\_self\_get\_udp\_port}(toxes[0], &error) == 33445, \textcolor{stringliteral}{"
      First Tox instance did not bind to udp port 33445.\(\backslash\)n"});
1160         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(error == \hyperlink{tox_8h_a54fc6e6fb8af5c7d79a13e5171964422abf260ed655651d389db8b7586b27c9e8}{TOX\_ERR\_GET\_PORT\_OK}, \textcolor{stringliteral}{"wrong error"});
1161     \}
1162 
1163     uint8\_t address[\hyperlink{tox_8h_a3a8d42ad8b2803ba6d69e88aac567113}{TOX\_ADDRESS\_SIZE}];
1164     \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(toxes[NUM\_GROUP\_TOX - 1], address);
1165 
1166     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1167         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox_8c_aa921c439baad10c03f8d93fda753b0b8}{tox\_friend\_add}(toxes[i], address, (uint8\_t *)\textcolor{stringliteral}{"Gentoo"}, 7, 
      0) == 0, \textcolor{stringliteral}{"Failed to add friend"});
1168 
1169         \hyperlink{tox_8c_ab52d4512e58c7ff8f62121beff5c0a49}{tox\_self\_get\_address}(toxes[i], address);
1170     \}
1171 
1172     \textcolor{keywordflow}{while} (1) \{
1173         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1174             \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a21c61f8efb52a75bac6cb7858071d00a}{tox\_friend\_get\_connection\_status}(toxes[i], 0, 0) != 
      \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbbada9f846526e530d24f74ca997270d11a}{TOX\_CONNECTION\_UDP}) \{
1175                 \textcolor{keywordflow}{break};
1176             \}
1177         \}
1178 
1179         \textcolor{keywordflow}{if} (i == NUM\_GROUP\_TOX)
1180             \textcolor{keywordflow}{break};
1181 
1182         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1183             \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(toxes[i]);
1184         \}
1185 
1186         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
1187     \}
1188 
1189     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"friends connected, took %llu seconds\(\backslash\)n"}, time(NULL) - cur\_time);
1190 
1191     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__old_8h_a68611ed14c243e94cc86274273d19fcc}{tox\_add\_groupchat}(toxes[0]) != -1, \textcolor{stringliteral}{"Failed to create group"}
      );
1192     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__old_8h_a2bd67904ced5532a1f83b8c0edc05756}{tox\_invite\_friend}(toxes[0], 0, 0) == 0, \textcolor{stringliteral}{"Failed to invite
       friend"});
1193     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__old_8h_a11a37cd102d6709e9954a069d0731cfa}{tox\_group\_set\_title}(toxes[0], 0, \textcolor{stringliteral}{"Gentoo"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo
      "}) - 1) == 0, \textcolor{stringliteral}{"Failed to set group title"});
1194     \hyperlink{tox__test_8c_a2c670bbc18645e6c2fdd3af82e8d35fb}{invite\_counter} = ~0;
1195 
1196     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} done = ~0;
1197     done -= 5;
1198 
1199     \textcolor{keywordflow}{while} (1) \{
1200         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1201             \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(toxes[i]);
1202         \}
1203 
1204         \textcolor{keywordflow}{if} (!\hyperlink{tox__test_8c_a2c670bbc18645e6c2fdd3af82e8d35fb}{invite\_counter}) \{
1205             \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__old_8h_a2bd67904ced5532a1f83b8c0edc05756}{tox\_invite\_friend}(
      \hyperlink{tox__test_8c_a53b737b92d6c426184603fa2bbf06618}{invite\_tox}, 0, 0) == 0, \textcolor{stringliteral}{"Failed to invite friend"});
1206         \}
1207 
1208         \textcolor{keywordflow}{if} (done == \hyperlink{tox__test_8c_a2c670bbc18645e6c2fdd3af82e8d35fb}{invite\_counter}) \{
1209             \textcolor{keywordflow}{break};
1210         \}
1211 
1212         --\hyperlink{tox__test_8c_a2c670bbc18645e6c2fdd3af82e8d35fb}{invite\_counter};
1213         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
1214     \}
1215 
1216     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1217         \textcolor{keywordtype}{int} num\_peers = \hyperlink{tox__old_8h_a78202b592bde942960e6984ea8ab072d}{tox\_group\_number\_peers}(toxes[i], 0);
1218         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(num\_peers == NUM\_GROUP\_TOX, \textcolor{stringliteral}{"Bad number of group peers. expected: %u
       got: %i, tox %u"}, NUM\_GROUP\_TOX,
1219                       num\_peers, i);
1220 
1221         uint8\_t title[2048];
1222         \textcolor{keywordtype}{int} ret = \hyperlink{tox__old_8h_aaef9fc5176d66e6a1c54f5935e4cb57c}{tox\_group\_get\_title}(toxes[i], 0, title, \textcolor{keyword}{sizeof}(title));
1223         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(ret == \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo"}) - 1, \textcolor{stringliteral}{"Wrong title length"});
1224         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(memcmp(\textcolor{stringliteral}{"Gentoo"}, title, ret) == 0, \textcolor{stringliteral}{"Wrong title"});
1225     \}
1226 
1227     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"group connected\(\backslash\)n"});
1228 
1229     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1230         \hyperlink{tox__old_8h_a7c375955120a76b90ffad9c0ecf09cae}{tox\_callback\_group\_message}(toxes[i], &
      \hyperlink{tox__test_8c_a966736e6f321099a5912d4a37e7f5dcc}{print\_group\_message}, &to\_comp);
1231     \}
1232 
1233     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__old_8h_ae7c069c3c12656040a1f08bc326c5bd1}{tox\_group\_message\_send}(toxes[rand() % NUM\_GROUP\_TOX], 
      0, (uint8\_t *)\textcolor{stringliteral}{"Install Gentoo"},
1234                                          \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Install Gentoo"}) - 1) == 0, \textcolor{stringliteral}{"Failed to send group message.
      "});
1235     \hyperlink{tox__test_8c_a45c4074ed51957a25c8eee95084fb8c2}{num\_recv} = 0;
1236 
1237     \textcolor{keywordflow}{for} (j = 0; j < 20; ++j) \{
1238         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1239             \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(toxes[i]);
1240         \}
1241 
1242         \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
1243     \}
1244 
1245     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(\hyperlink{tox__test_8c_a45c4074ed51957a25c8eee95084fb8c2}{num\_recv} == NUM\_GROUP\_TOX, \textcolor{stringliteral}{"Failed to recv group messages."});
1246 
1247     \textcolor{keywordflow}{for} (k = NUM\_GROUP\_TOX; k != 0 ; --k) \{
1248         \hyperlink{tox__old_8h_a2a5c2f4bc3730d20bc784e512bc116b5}{tox\_del\_groupchat}(toxes[k - 1], 0);
1249 
1250         \textcolor{keywordflow}{for} (j = 0; j < 10; ++j) \{
1251             \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1252                 \hyperlink{tox_8c_a649c8740c523fb52272396cb0b70b8dc}{tox\_iterate}(toxes[i]);
1253             \}
1254 
1255             \hyperlink{tox__test_8c_a5d21ea3d7da27fbd9f40c59aaa04da62}{c\_sleep}(50);
1256         \}
1257 
1258         \textcolor{keywordflow}{for} (i = 0; i < (k - 1); ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1259             \textcolor{keywordtype}{int} num\_peers = \hyperlink{tox__old_8h_a78202b592bde942960e6984ea8ab072d}{tox\_group\_number\_peers}(toxes[i], 0);
1260             \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(num\_peers == (k - 1), \textcolor{stringliteral}{"Bad number of group peers. expected: %u got:
       %i, tox %u"}, (k - 1), num\_peers, i);
1261         \}
1262     \}
1263 
1264     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tox__test_8c_a61656a59f1759bf7c54f48d6f5acbcc7}{NUM\_GROUP\_TOX}; ++\hyperlink{toxav__many__test_8c_acb559820d9ca11295b4500f179ef6392}{i}) \{
1265         \hyperlink{toxav__many__test_8c_af2393a0da85871ba0cefc23497cb19fa}{tox\_kill}(toxes[i]);
1266     \}
1267 
1268     \hyperlink{toxav__many__test_8c_a1b88a4421cf9eef5af4895904ce2d905}{printf}(\textcolor{stringliteral}{"test\_many\_group succeeded, took %llu seconds\(\backslash\)n"}, time(NULL) - cur\_time);
1269 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d9/d35/tox__test_8c_a999b8d0cb6f7a7ea6f983f4f32e18f25_cgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a622eddd7d635d4389b1ea0cb9914dca2}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!tox\+\_\+connection\+\_\+status@{tox\+\_\+connection\+\_\+status}}
\index{tox\+\_\+connection\+\_\+status@{tox\+\_\+connection\+\_\+status}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{tox\+\_\+connection\+\_\+status}]{\setlength{\rightskip}{0pt plus 5cm}void tox\+\_\+connection\+\_\+status (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{{\bf T\+O\+X\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N}}]{connection\+\_\+status, }
\item[{void $\ast$}]{user\+\_\+data}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a622eddd7d635d4389b1ea0cb9914dca2}


Definition at line 276 of file tox\+\_\+test.\+c.



References ck\+\_\+assert\+\_\+msg(), connected\+\_\+t1, and T\+O\+X\+\_\+\+C\+O\+N\+N\+E\+C\+T\+I\+O\+N\+\_\+\+U\+D\+P.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
277 \{
278     \textcolor{keywordflow}{if} (*((uint32\_t *)user\_data) != 974536)
279         \textcolor{keywordflow}{return};
280 
281     \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a2a7cf11edabb09529dd4b6da3ba04f5c}{connected\_t1} && !connection\_status)
282         ck\_abort\_msg(\textcolor{stringliteral}{"Tox went offline"});
283 
284     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(connection\_status == \hyperlink{tox_8h_ab13b9741ea8c99016819171a0b869dbbada9f846526e530d24f74ca997270d11a}{TOX\_CONNECTION\_UDP}, \textcolor{stringliteral}{"wrong status %u"}
      , connection\_status);
285 
286     \hyperlink{tox__test_8c_a2a7cf11edabb09529dd4b6da3ba04f5c}{connected\_t1} = connection\_status;
287 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{d9/d35/tox__test_8c_a622eddd7d635d4389b1ea0cb9914dca2_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{d9/d35/tox__test_8c_a622eddd7d635d4389b1ea0cb9914dca2_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a7209b965126c3b606c3f0030a088ed27}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!tox\+\_\+file\+\_\+chunk\+\_\+request@{tox\+\_\+file\+\_\+chunk\+\_\+request}}
\index{tox\+\_\+file\+\_\+chunk\+\_\+request@{tox\+\_\+file\+\_\+chunk\+\_\+request}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{tox\+\_\+file\+\_\+chunk\+\_\+request}]{\setlength{\rightskip}{0pt plus 5cm}void tox\+\_\+file\+\_\+chunk\+\_\+request (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{uint32\+\_\+t}]{friend\+\_\+number, }
\item[{uint32\+\_\+t}]{file\+\_\+number, }
\item[{uint64\+\_\+t}]{position, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{user\+\_\+data}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a7209b965126c3b606c3f0030a088ed27}


Definition at line 196 of file tox\+\_\+test.\+c.



References error, file\+\_\+sending\+\_\+done, m\+\_\+send\+\_\+reached, max\+\_\+sending, sendf\+\_\+ok, sending\+\_\+num, sending\+\_\+pos, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+I\+L\+E\+\_\+\+S\+E\+N\+D\+\_\+\+C\+H\+U\+N\+K\+\_\+\+O\+K, and tox\+\_\+file\+\_\+send\+\_\+chunk().



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
198 \{
199     \textcolor{keywordflow}{if} (*((uint32\_t *)user\_data) != 974536)
200         \textcolor{keywordflow}{return};
201 
202     \textcolor{keywordflow}{if} (!\hyperlink{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{sendf\_ok}) \{
203         ck\_abort\_msg(\textcolor{stringliteral}{"Didn't get resume control"});
204     \}
205 
206     \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} != position) \{
207         ck\_abort\_msg(\textcolor{stringliteral}{"Bad position %llu"}, position);
208         \textcolor{keywordflow}{return};
209     \}
210 
211     \textcolor{keywordflow}{if} (length == 0) \{
212         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{file\_sending\_done}) \{
213             ck\_abort\_msg(\textcolor{stringliteral}{"File sending already done."});
214         \}
215 
216         \hyperlink{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{file\_sending\_done} = 1;
217         \textcolor{keywordflow}{return};
218     \}
219 
220     \textcolor{keywordflow}{if} (position + length > \hyperlink{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}{max\_sending}) \{
221         \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_ad1e4f41f9bf2ebc5020cd25b2fc6b731}{m\_send\_reached}) \{
222             ck\_abort\_msg(\textcolor{stringliteral}{"Requested done file tranfer."});
223         \}
224 
225         length = \hyperlink{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}{max\_sending} - position;
226         \hyperlink{tox__test_8c_ad1e4f41f9bf2ebc5020cd25b2fc6b731}{m\_send\_reached} = 1;
227     \}
228 
229     \hyperlink{tox_8h_ad051f09f31b37378ba4f09717ecb48b9}{TOX\_ERR\_FILE\_SEND\_CHUNK} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
230     uint8\_t f\_data[length];
231     memset(f\_data, \hyperlink{tox__test_8c_a7381c2701d5667ad35e0a7290b3dd69f}{sending\_num}, length);
232 
233     \textcolor{keywordflow}{if} (\hyperlink{tox_8c_a7653dd0bbf8bda8e18d211277f3e7577}{tox\_file\_send\_chunk}(tox, \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\_number}, file\_number, position, 
      f\_data, length, &error)) \{
234         ++\hyperlink{tox__test_8c_a7381c2701d5667ad35e0a7290b3dd69f}{sending\_num};
235         \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} += length;
236     \} \textcolor{keywordflow}{else} \{
237         ck\_abort\_msg(\textcolor{stringliteral}{"Could not send chunk %i"}, error);
238     \}
239 
240     \textcolor{keywordflow}{if} (error != \hyperlink{tox_8h_ad051f09f31b37378ba4f09717ecb48b9ac6ab3df9fecd234dab6a339c64dc3439}{TOX\_ERR\_FILE\_SEND\_CHUNK\_OK}) \{
241         ck\_abort\_msg(\textcolor{stringliteral}{"Wrong error code"});
242     \}
243 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_a7209b965126c3b606c3f0030a088ed27_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{d9/d35/tox__test_8c_a7209b965126c3b606c3f0030a088ed27_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a26511de8b96c24fd18e8255e13822b5f}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!tox\+\_\+file\+\_\+receive@{tox\+\_\+file\+\_\+receive}}
\index{tox\+\_\+file\+\_\+receive@{tox\+\_\+file\+\_\+receive}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{tox\+\_\+file\+\_\+receive}]{\setlength{\rightskip}{0pt plus 5cm}void tox\+\_\+file\+\_\+receive (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{uint32\+\_\+t}]{friend\+\_\+number, }
\item[{uint32\+\_\+t}]{file\+\_\+number, }
\item[{uint32\+\_\+t}]{kind, }
\item[{uint64\+\_\+t}]{filesize, }
\item[{const uint8\+\_\+t $\ast$}]{filename, }
\item[{size\+\_\+t}]{filename\+\_\+length, }
\item[{void $\ast$}]{userdata}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a26511de8b96c24fd18e8255e13822b5f}


Definition at line 115 of file tox\+\_\+test.\+c.



References ck\+\_\+assert\+\_\+msg(), error, file\+\_\+accepted, file\+\_\+cmp\+\_\+id, file\+\_\+size, sending\+\_\+pos, size\+\_\+recv, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+I\+L\+E\+\_\+\+S\+E\+E\+K\+\_\+\+D\+E\+N\+I\+E\+D, T\+O\+X\+\_\+\+E\+R\+R\+\_\+\+F\+I\+L\+E\+\_\+\+S\+E\+E\+K\+\_\+\+O\+K, tox\+\_\+file\+\_\+control(), T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+R\+E\+S\+U\+M\+E, tox\+\_\+file\+\_\+get\+\_\+file\+\_\+id(), T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+I\+D\+\_\+\+L\+E\+N\+G\+T\+H, T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+K\+I\+N\+D\+\_\+\+D\+A\+T\+A, and tox\+\_\+file\+\_\+seek().



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
117 \{
118     \textcolor{keywordflow}{if} (*((uint32\_t *)userdata) != 974536)
119         \textcolor{keywordflow}{return};
120 
121     \textcolor{keywordflow}{if} (kind != \hyperlink{tox_8h_a8fddeeee28ccfa73c93f5c6bb807ff93a70959d02490e1b658c7d7daf262869a0}{TOX\_FILE\_KIND\_DATA}) \{
122         ck\_abort\_msg(\textcolor{stringliteral}{"Bad kind"});
123         \textcolor{keywordflow}{return};
124     \}
125 
126     \textcolor{keywordflow}{if} (!(filename\_length == \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo.exe"}) && memcmp(filename, \textcolor{stringliteral}{"Gentoo.exe"}, \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"Gentoo.exe"})) 
      == 0)) \{
127         ck\_abort\_msg(\textcolor{stringliteral}{"Bad filename"});
128         \textcolor{keywordflow}{return};
129     \}
130 
131     uint8\_t file\_id[\hyperlink{tox_8h_a4d73579fc56838f35741697c7f684884}{TOX\_FILE\_ID\_LENGTH}];
132 
133     \textcolor{keywordflow}{if} (!\hyperlink{tox_8c_a93de44f83bd544d48d279d6c52ee48cc}{tox\_file\_get\_file\_id}(tox, \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\_number}, file\_number, file\_id, 0)
      ) \{
134         ck\_abort\_msg(\textcolor{stringliteral}{"tox\_file\_get\_file\_id error"});
135     \}
136 
137     \textcolor{keywordflow}{if} (memcmp(file\_id, \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, \hyperlink{tox_8h_a4d73579fc56838f35741697c7f684884}{TOX\_FILE\_ID\_LENGTH}) != 0) \{
138         ck\_abort\_msg(\textcolor{stringliteral}{"bad file\_id"});
139     \}
140 
141     uint8\_t empty[\hyperlink{tox_8h_a4d73579fc56838f35741697c7f684884}{TOX\_FILE\_ID\_LENGTH}] = \{0\};
142 
143     \textcolor{keywordflow}{if} (memcmp(empty, \hyperlink{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{file\_cmp\_id}, \hyperlink{tox_8h_a4d73579fc56838f35741697c7f684884}{TOX\_FILE\_ID\_LENGTH}) == 0) \{
144         ck\_abort\_msg(\textcolor{stringliteral}{"empty file\_id"});
145     \}
146 
147     \hyperlink{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{file\_size} = filesize;
148 
149     \textcolor{keywordflow}{if} (filesize) \{
150         \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} = \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} = 1337;
151 
152         \hyperlink{tox_8h_a3ca7a25121ce0ce5d171727f53d09c84}{TOX\_ERR\_FILE\_SEEK} err\_s;
153 
154         \textcolor{keywordflow}{if} (!\hyperlink{tox_8c_ac8b17d75fb733a45a5a07a7ea04ff5b3}{tox\_file\_seek}(tox, \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\_number}, file\_number, 1337, &err\_s)) \{
155             ck\_abort\_msg(\textcolor{stringliteral}{"tox\_file\_seek error"});
156         \}
157 
158         \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(err\_s == \hyperlink{tox_8h_a3ca7a25121ce0ce5d171727f53d09c84ac5392bf712f143517906d41e719ed770}{TOX\_ERR\_FILE\_SEEK\_OK}, \textcolor{stringliteral}{"tox\_file\_seek wrong
       error"});
159     \} \textcolor{keywordflow}{else} \{
160         \hyperlink{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{sending\_pos} = \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} = 0;
161     \}
162 
163     \hyperlink{tox_8h_ae212539e3c2202e0005cd3c9b83c017d}{TOX\_ERR\_FILE\_CONTROL} \hyperlink{msi_8c_a7251f9a01631fc788dd7c8eff23a422ead606e435413ea0944dd00d49e901e4ed}{error};
164 
165     \textcolor{keywordflow}{if} (\hyperlink{tox_8c_ad839087bf9cc7e8594eaaca66b111ba1}{tox\_file\_control}(tox, \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\_number}, file\_number, 
      \hyperlink{tox_8h_a18a7808bc88ad8a040b4ee0c4e1461f9aa5df194635dbb35c0519a811b57c524c}{TOX\_FILE\_CONTROL\_RESUME}, &error)) \{
166         ++\hyperlink{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{file\_accepted};
167     \} \textcolor{keywordflow}{else} \{
168         ck\_abort\_msg(\textcolor{stringliteral}{"tox\_file\_control failed. %i"}, error);
169     \}
170 
171     \hyperlink{tox_8h_a3ca7a25121ce0ce5d171727f53d09c84}{TOX\_ERR\_FILE\_SEEK} err\_s;
172 
173     \textcolor{keywordflow}{if} (\hyperlink{tox_8c_ac8b17d75fb733a45a5a07a7ea04ff5b3}{tox\_file\_seek}(tox, \hyperlink{_d_h_t_8c_a6cbd0f66d63003cc0def913dc7a4254b}{friend\_number}, file\_number, 1234, &err\_s)) \{
174         ck\_abort\_msg(\textcolor{stringliteral}{"tox\_file\_seek no error"});
175     \}
176 
177     \hyperlink{toxav__many__test_8c_a4bd4b2294bdedc4af8c708ecc5c58516}{ck\_assert\_msg}(err\_s == \hyperlink{tox_8h_a3ca7a25121ce0ce5d171727f53d09c84aded88b632e53617d052706791829fd54}{TOX\_ERR\_FILE\_SEEK\_DENIED}, \textcolor{stringliteral}{"tox\_file\_seek
       wrong error"});
178 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d35/tox__test_8c_a26511de8b96c24fd18e8255e13822b5f_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=281pt]{d9/d35/tox__test_8c_a26511de8b96c24fd18e8255e13822b5f_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_ad7ac55b5ffe8ce8db9d56bb6eeadd9ad}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!tox\+\_\+suite@{tox\+\_\+suite}}
\index{tox\+\_\+suite@{tox\+\_\+suite}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{tox\+\_\+suite}]{\setlength{\rightskip}{0pt plus 5cm}E\+N\+D\+\_\+\+T\+E\+S\+T Suite$\ast$ tox\+\_\+suite (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_ad7ac55b5ffe8ce8db9d56bb6eeadd9ad}


Definition at line 1272 of file tox\+\_\+test.\+c.



References D\+E\+F\+T\+E\+S\+T\+C\+A\+S\+E, and D\+E\+F\+T\+E\+S\+T\+C\+A\+S\+E\+\_\+\+S\+L\+O\+W.



Referenced by main().


\begin{DoxyCode}
1273 \{
1274     Suite *s = suite\_create(\textcolor{stringliteral}{"Tox"});
1275 
1276     \hyperlink{helpers_8h_a2d421052814a1380df302c411658bffa}{DEFTESTCASE}(one);
1277     \hyperlink{helpers_8h_a04d7721023739a366a0baae1b1a32b50}{DEFTESTCASE\_SLOW}(few\_clients, 80);
1278     \hyperlink{helpers_8h_a04d7721023739a366a0baae1b1a32b50}{DEFTESTCASE\_SLOW}(many\_clients, 80);
1279     \hyperlink{helpers_8h_a04d7721023739a366a0baae1b1a32b50}{DEFTESTCASE\_SLOW}(many\_clients\_tcp, 20);
1280     \hyperlink{helpers_8h_a04d7721023739a366a0baae1b1a32b50}{DEFTESTCASE\_SLOW}(many\_clients\_tcp\_b, 20);
1281     \hyperlink{helpers_8h_a04d7721023739a366a0baae1b1a32b50}{DEFTESTCASE\_SLOW}(many\_group, 100);
1282     \textcolor{keywordflow}{return} s;
1283 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=210pt]{d9/d35/tox__test_8c_ad7ac55b5ffe8ce8db9d56bb6eeadd9ad_icgraph}
\end{center}
\end{figure}


\hypertarget{tox__test_8c_a2d81671277a08fc6e90ef2dae0f3ea4e}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!write\+\_\+file@{write\+\_\+file}}
\index{write\+\_\+file@{write\+\_\+file}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{write\+\_\+file}]{\setlength{\rightskip}{0pt plus 5cm}void write\+\_\+file (
\begin{DoxyParamCaption}
\item[{{\bf Tox} $\ast$}]{tox, }
\item[{uint32\+\_\+t}]{friendnumber, }
\item[{uint32\+\_\+t}]{filenumber, }
\item[{uint64\+\_\+t}]{position, }
\item[{const uint8\+\_\+t $\ast$}]{data, }
\item[{size\+\_\+t}]{length, }
\item[{void $\ast$}]{user\+\_\+data}
\end{DoxyParamCaption}
)}}\label{tox__test_8c_a2d81671277a08fc6e90ef2dae0f3ea4e}


Definition at line 248 of file tox\+\_\+test.\+c.



References file\+\_\+recv, num, and size\+\_\+recv.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().


\begin{DoxyCode}
250 \{
251     \textcolor{keywordflow}{if} (*((uint32\_t *)user\_data) != 974536)
252         \textcolor{keywordflow}{return};
253 
254     \textcolor{keywordflow}{if} (\hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} != position) \{
255         ck\_abort\_msg(\textcolor{stringliteral}{"Bad position"});
256         \textcolor{keywordflow}{return};
257     \}
258 
259     \textcolor{keywordflow}{if} (length == 0) \{
260         \hyperlink{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{file\_recv} = 1;
261         \textcolor{keywordflow}{return};
262     \}
263 
264     uint8\_t f\_data[length];
265     memset(f\_data, \hyperlink{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}{num}, length);
266     ++\hyperlink{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}{num};
267 
268     \textcolor{keywordflow}{if} (memcmp(f\_data, \hyperlink{namespacemake-funny-savefile_aa7a0efb8690a34f61a95b00cc723ca27}{data}, length) == 0) \{
269         \hyperlink{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{size\_recv} += length;
270     \} \textcolor{keywordflow}{else} \{
271         ck\_abort\_msg(\textcolor{stringliteral}{"FILE\_CORRUPTED"});
272     \}
273 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{d9/d35/tox__test_8c_a2d81671277a08fc6e90ef2dae0f3ea4e_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{tox__test_8c_a2a7cf11edabb09529dd4b6da3ba04f5c}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!connected\+\_\+t1@{connected\+\_\+t1}}
\index{connected\+\_\+t1@{connected\+\_\+t1}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{connected\+\_\+t1}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int connected\+\_\+t1}}\label{tox__test_8c_a2a7cf11edabb09529dd4b6da3ba04f5c}


Definition at line 275 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and tox\+\_\+connection\+\_\+status().

\hypertarget{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!custom\+\_\+packet@{custom\+\_\+packet}}
\index{custom\+\_\+packet@{custom\+\_\+packet}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{custom\+\_\+packet}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t custom\+\_\+packet}}\label{tox__test_8c_a93d3c5c0b30bca45ea88662cdabfd8f2}


Definition at line 87 of file tox\+\_\+test.\+c.



Referenced by handle\+\_\+custom\+\_\+packet(), and S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!file\+\_\+accepted@{file\+\_\+accepted}}
\index{file\+\_\+accepted@{file\+\_\+accepted}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{file\+\_\+accepted}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t file\+\_\+accepted}}\label{tox__test_8c_a930460fa8abf3636dc2fb39b94c3c9cb}


Definition at line 113 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and tox\+\_\+file\+\_\+receive().

\hypertarget{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!file\+\_\+cmp\+\_\+id@{file\+\_\+cmp\+\_\+id}}
\index{file\+\_\+cmp\+\_\+id@{file\+\_\+cmp\+\_\+id}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{file\+\_\+cmp\+\_\+id}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t file\+\_\+cmp\+\_\+id\mbox{[}{\bf T\+O\+X\+\_\+\+F\+I\+L\+E\+\_\+\+I\+D\+\_\+\+L\+E\+N\+G\+T\+H}\mbox{]}}}\label{tox__test_8c_a74d9776f11027e3cc78396564ca419b7}


Definition at line 111 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and tox\+\_\+file\+\_\+receive().

\hypertarget{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!file\+\_\+recv@{file\+\_\+recv}}
\index{file\+\_\+recv@{file\+\_\+recv}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{file\+\_\+recv}]{\setlength{\rightskip}{0pt plus 5cm}\+\_\+\+Bool file\+\_\+recv}}\label{tox__test_8c_a5999f90277a17b9d60fd2fb293deb88f}


Definition at line 247 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and write\+\_\+file().

\hypertarget{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!file\+\_\+sending\+\_\+done@{file\+\_\+sending\+\_\+done}}
\index{file\+\_\+sending\+\_\+done@{file\+\_\+sending\+\_\+done}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{file\+\_\+sending\+\_\+done}]{\setlength{\rightskip}{0pt plus 5cm}\+\_\+\+Bool file\+\_\+sending\+\_\+done}}\label{tox__test_8c_a0714677af6a7c199ee97ef94df981e9f}


Definition at line 195 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and tox\+\_\+file\+\_\+chunk\+\_\+request().

\hypertarget{tox__test_8c_af564d0d073559935815f33b08f7fbd51}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!file\+\_\+size@{file\+\_\+size}}
\index{file\+\_\+size@{file\+\_\+size}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{file\+\_\+size}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t file\+\_\+size}}\label{tox__test_8c_af564d0d073559935815f33b08f7fbd51}


Definition at line 114 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and tox\+\_\+file\+\_\+receive().

\hypertarget{tox__test_8c_aed845bec91f99896ce34a65a6f248ea5}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!filenum@{filenum}}
\index{filenum@{filenum}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{filenum}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t filenum}}\label{tox__test_8c_aed845bec91f99896ce34a65a6f248ea5}


Definition at line 112 of file tox\+\_\+test.\+c.



Referenced by add\+\_\+filesender().

\hypertarget{tox__test_8c_a2c670bbc18645e6c2fdd3af82e8d35fb}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!invite\+\_\+counter@{invite\+\_\+counter}}
\index{invite\+\_\+counter@{invite\+\_\+counter}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{invite\+\_\+counter}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int invite\+\_\+counter\hspace{0.3cm}{\ttfamily [static]}}}\label{tox__test_8c_a2c670bbc18645e6c2fdd3af82e8d35fb}


Definition at line 1105 of file tox\+\_\+test.\+c.



Referenced by print\+\_\+group\+\_\+invite\+\_\+callback(), and S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_a53b737b92d6c426184603fa2bbf06618}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!invite\+\_\+tox@{invite\+\_\+tox}}
\index{invite\+\_\+tox@{invite\+\_\+tox}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{invite\+\_\+tox}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Tox}$\ast$ invite\+\_\+tox\hspace{0.3cm}{\ttfamily [static]}}}\label{tox__test_8c_a53b737b92d6c426184603fa2bbf06618}


Definition at line 1104 of file tox\+\_\+test.\+c.

\hypertarget{tox__test_8c_ad1e4f41f9bf2ebc5020cd25b2fc6b731}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!m\+\_\+send\+\_\+reached@{m\+\_\+send\+\_\+reached}}
\index{m\+\_\+send\+\_\+reached@{m\+\_\+send\+\_\+reached}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{m\+\_\+send\+\_\+reached}]{\setlength{\rightskip}{0pt plus 5cm}\+\_\+\+Bool m\+\_\+send\+\_\+reached}}\label{tox__test_8c_ad1e4f41f9bf2ebc5020cd25b2fc6b731}


Definition at line 193 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and tox\+\_\+file\+\_\+chunk\+\_\+request().

\hypertarget{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!max\+\_\+sending@{max\+\_\+sending}}
\index{max\+\_\+sending@{max\+\_\+sending}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{max\+\_\+sending}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t max\+\_\+sending}}\label{tox__test_8c_aa53154935d217ab87faa76aa6fb8a6ea}


Definition at line 192 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and tox\+\_\+file\+\_\+chunk\+\_\+request().

\hypertarget{tox__test_8c_ab1d5fca465944ffe2e747bdae3909bdd}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!messages\+\_\+received@{messages\+\_\+received}}
\index{messages\+\_\+received@{messages\+\_\+received}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{messages\+\_\+received}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t messages\+\_\+received}}\label{tox__test_8c_ab1d5fca465944ffe2e747bdae3909bdd}


Definition at line 34 of file tox\+\_\+test.\+c.



Referenced by print\+\_\+message(), and S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_a1777e10a94056e038f7b143f48308a97}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!name\+\_\+changes@{name\+\_\+changes}}
\index{name\+\_\+changes@{name\+\_\+changes}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{name\+\_\+changes}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t name\+\_\+changes}}\label{tox__test_8c_a1777e10a94056e038f7b143f48308a97}


Definition at line 53 of file tox\+\_\+test.\+c.



Referenced by print\+\_\+nickchange(), and S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!num@{num}}
\index{num@{num}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{num}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t num}}\label{tox__test_8c_abea371f9030e15a5d2a4c181576833d8}


Definition at line 246 of file tox\+\_\+test.\+c.



Referenced by add\+\_\+data\+\_\+to\+\_\+buffer(), check\+\_\+sendback(), clear\+\_\+buffer(), clear\+\_\+buffer\+\_\+until(), cryptpacket\+\_\+received(), dequeue(), dht\+\_\+load\+\_\+state\+\_\+callback(), D\+H\+T\+\_\+save(), do\+\_\+announce(), do\+\_\+friend(), do\+\_\+\+N\+A\+T(), do\+\_\+reqchunk\+\_\+filecb(), friends\+\_\+list\+\_\+load(), friends\+\_\+list\+\_\+save(), generate\+\_\+request\+\_\+packet(), get\+\_\+data\+\_\+pointer(), get\+\_\+nonce\+\_\+uint16(), get\+\_\+shared\+\_\+key(), handle\+\_\+announce\+\_\+response(), handle\+\_\+data\+\_\+packet(), handle\+\_\+data\+\_\+packet\+\_\+helper(), handle\+\_\+request\+\_\+packet(), have\+\_\+nodes\+\_\+closelist(), init\+\_\+tox(), jbuf\+\_\+read(), jbuf\+\_\+write(), line\+\_\+eval(), main(), messenger\+\_\+load\+\_\+state\+\_\+callback(), messenger\+\_\+save(), N\+A\+T\+\_\+getports(), onion\+\_\+addfriend(), onion\+\_\+isconnected(), print\+\_\+groupchatpeers(), queue(), read\+\_\+data\+\_\+beg\+\_\+buffer(), realloc\+\_\+connection(), route\+\_\+tofriend(), routeone\+\_\+tofriend(), send\+\_\+friend\+\_\+request\+\_\+packet(), send\+\_\+\+N\+A\+Tping(), set\+\_\+nospam(), S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), unpack\+\_\+nodes(), and write\+\_\+file().

\hypertarget{tox__test_8c_a45c4074ed51957a25c8eee95084fb8c2}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!num\+\_\+recv@{num\+\_\+recv}}
\index{num\+\_\+recv@{num\+\_\+recv}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{num\+\_\+recv}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int num\+\_\+recv\hspace{0.3cm}{\ttfamily [static]}}}\label{tox__test_8c_a45c4074ed51957a25c8eee95084fb8c2}


Definition at line 1129 of file tox\+\_\+test.\+c.



Referenced by print\+\_\+group\+\_\+message(), and S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!sendf\+\_\+ok@{sendf\+\_\+ok}}
\index{sendf\+\_\+ok@{sendf\+\_\+ok}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{sendf\+\_\+ok}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t sendf\+\_\+ok}}\label{tox__test_8c_ac1f74d6e4f4380f3b91e47aeb28e58af}


Definition at line 180 of file tox\+\_\+test.\+c.



Referenced by file\+\_\+print\+\_\+control(), S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), and tox\+\_\+file\+\_\+chunk\+\_\+request().

\hypertarget{tox__test_8c_a7381c2701d5667ad35e0a7290b3dd69f}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!sending\+\_\+num@{sending\+\_\+num}}
\index{sending\+\_\+num@{sending\+\_\+num}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{sending\+\_\+num}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t sending\+\_\+num}}\label{tox__test_8c_a7381c2701d5667ad35e0a7290b3dd69f}


Definition at line 194 of file tox\+\_\+test.\+c.



Referenced by tox\+\_\+file\+\_\+chunk\+\_\+request().

\hypertarget{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!sending\+\_\+pos@{sending\+\_\+pos}}
\index{sending\+\_\+pos@{sending\+\_\+pos}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{sending\+\_\+pos}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t sending\+\_\+pos}}\label{tox__test_8c_a401389fbbf95a81d03e3bf176869efb5}


Definition at line 109 of file tox\+\_\+test.\+c.



Referenced by file\+\_\+seek(), S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), tox\+\_\+file\+\_\+chunk\+\_\+request(), and tox\+\_\+file\+\_\+receive().

\hypertarget{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!size\+\_\+recv@{size\+\_\+recv}}
\index{size\+\_\+recv@{size\+\_\+recv}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{size\+\_\+recv}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t size\+\_\+recv}}\label{tox__test_8c_afaeeb9957150737054ef9de51e8606b5}


Definition at line 108 of file tox\+\_\+test.\+c.



Referenced by S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T(), tox\+\_\+file\+\_\+receive(), and write\+\_\+file().

\hypertarget{tox__test_8c_a16125880dc91d99e418dde79c160fcb0}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!status\+\_\+m\+\_\+changes@{status\+\_\+m\+\_\+changes}}
\index{status\+\_\+m\+\_\+changes@{status\+\_\+m\+\_\+changes}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{status\+\_\+m\+\_\+changes}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t status\+\_\+m\+\_\+changes}}\label{tox__test_8c_a16125880dc91d99e418dde79c160fcb0}


Definition at line 64 of file tox\+\_\+test.\+c.



Referenced by print\+\_\+status\+\_\+m\+\_\+change(), and S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

\hypertarget{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}{\index{tox\+\_\+test.\+c@{tox\+\_\+test.\+c}!typing\+\_\+changes@{typing\+\_\+changes}}
\index{typing\+\_\+changes@{typing\+\_\+changes}!tox\+\_\+test.\+c@{tox\+\_\+test.\+c}}
\subsubsection[{typing\+\_\+changes}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t typing\+\_\+changes}}\label{tox__test_8c_a09adb1efb9395041139f6d3a74b95d9b}


Definition at line 74 of file tox\+\_\+test.\+c.



Referenced by print\+\_\+typingchange(), and S\+T\+A\+R\+T\+\_\+\+T\+E\+S\+T().

